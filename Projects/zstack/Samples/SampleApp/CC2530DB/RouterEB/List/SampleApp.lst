###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.1.10194/W32 for 8051         06/Sep/2019  09:09:57 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  D:\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sa #
#                          mpleApp\Source\SampleApp.c                         #
#    Command line       =  -f D:\ZStack-CC2530-2.5.1a\Projects\zstack\Samples #
#                          \SampleApp\CC2530DB\..\..\..\Tools\CC2530DB\f8wRou #
#                          ter.cfg (-DCPU32MHZ -DROOT=__near_func             #
#                          -DMAC_CFG_APP_PENDING_QUEUE=TRUE                   #
#                          -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8         #
#                          -DMAC_CFG_RX_MAX=5 -DRTR_NWK) -f                   #
#                          D:\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sa #
#                          mpleApp\CC2530DB\..\..\..\Tools\CC2530DB\f8wConfig #
#                          .cfg (-DZIGBEEPRO -DSECURE=0                       #
#                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                  #
#                          -DDEFAULT_CHANLIST=0x02000000                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFF0                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 D:\ZStack-CC2530-2.5.1a\Pro #
#                          jects\zstack\Samples\SampleApp\Source\SampleApp.c  #
#                          -D ZTOOL_P1 -D MT_TASK -D MT_SYS_FUNC -D           #
#                          MT_ZDO_FUNC -D LCD_SUPPORTED=DEBUG -lC             #
#                          D:\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sa #
#                          mpleApp\CC2530DB\RouterEB\List\ -lA                #
#                          D:\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sa #
#                          mpleApp\CC2530DB\RouterEB\List\ --diag_suppress    #
#                          Pe001,Pa010 -o D:\ZStack-CC2530-2.5.1a\Projects\zs #
#                          tack\Samples\SampleApp\CC2530DB\RouterEB\Obj\ -e   #
#                          --no_code_motion --debug --core=plain --dptr=16,1  #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 16    #
#                          -I D:\ZStack-CC2530-2.5.1a\Projects\zstack\Samples #
#                          \SampleApp\CC2530DB\ -I D:\ZStack-CC2530-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\Source #
#                          \ -I D:\ZStack-CC2530-2.5.1a\Projects\zstack\Sampl #
#                          es\SampleApp\CC2530DB\..\..\..\ZMain\TI2530DB\ -I  #
#                          D:\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sa #
#                          mpleApp\CC2530DB\..\..\..\..\..\Components\hal\inc #
#                          lude\ -I D:\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\..\..\..\..\..\Component #
#                          s\hal\target\CC2530EB\ -I                          #
#                          D:\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sa #
#                          mpleApp\CC2530DB\..\..\..\..\..\Components\mac\inc #
#                          lude\ -I D:\ZStack-CC2530-2.5.1a\Projects\zstack\S #
#                          amples\SampleApp\CC2530DB\..\..\..\..\..\Component #
#                          s\mac\high_level\ -I D:\ZStack-CC2530-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\mac\low_level\srf04\ -I              #
#                          D:\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sa #
#                          mpleApp\CC2530DB\..\..\..\..\..\Components\mac\low #
#                          _level\srf04\single_chip\ -I                       #
#                          D:\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sa #
#                          mpleApp\CC2530DB\..\..\..\..\..\Components\mt\ -I  #
#                          D:\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sa #
#                          mpleApp\CC2530DB\..\..\..\..\..\Components\osal\in #
#                          clude\ -I D:\ZStack-CC2530-2.5.1a\Projects\zstack\ #
#                          Samples\SampleApp\CC2530DB\..\..\..\..\..\Componen #
#                          ts\services\saddr\ -I D:\ZStack-CC2530-2.5.1a\Proj #
#                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\.. #
#                          \..\Components\services\sdata\ -I                  #
#                          D:\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sa #
#                          mpleApp\CC2530DB\..\..\..\..\..\Components\stack\a #
#                          f\ -I D:\ZStack-CC2530-2.5.1a\Projects\zstack\Samp #
#                          les\SampleApp\CC2530DB\..\..\..\..\..\Components\s #
#                          tack\nwk\ -I D:\ZStack-CC2530-2.5.1a\Projects\zsta #
#                          ck\Samples\SampleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\stack\sapi\ -I D:\ZStack-CC2530-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\stack\sec\ -I                        #
#                          D:\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sa #
#                          mpleApp\CC2530DB\..\..\..\..\..\Components\stack\s #
#                          ys\ -I D:\ZStack-CC2530-2.5.1a\Projects\zstack\Sam #
#                          ples\SampleApp\CC2530DB\..\..\..\..\..\Components\ #
#                          stack\zdo\ -I D:\ZStack-CC2530-2.5.1a\Projects\zst #
#                          ack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Comp #
#                          onents\zmac\ -I D:\ZStack-CC2530-2.5.1a\Projects\z #
#                          stack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Co #
#                          mponents\zmac\f8w\ -Ohz --require_prototypes       #
#    List file          =  D:\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sa #
#                          mpleApp\CC2530DB\RouterEB\List\SampleApp.lst       #
#    Object file        =  D:\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sa #
#                          mpleApp\CC2530DB\RouterEB\Obj\SampleApp.r51        #
#                                                                             #
#                                                                             #
###############################################################################

D:\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\SampleApp\Source\SampleApp.c
      1          /**************************************************************************************************
      2            Filename:       SampleApp.c
      3            Revised:        $Date: 2009-03-18 15:56:27 -0700 (Wed, 18 Mar 2009) $
      4            Revision:       $Revision: 19453 $
      5          
      6            Description:    Sample Application (no Profile).
      7          
      8          
      9            Copyright 2007 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          /*********************************************************************
     41            This application isn't intended to do anything useful, it is
     42            intended to be a simple example of an application's structure.
     43          
     44            This application sends it's messages either as broadcast or
     45            broadcast filtered group messages.  The other (more normal)
     46            message addressing is unicast.  Most of the other sample
     47            applications are written to support the unicast message model.
     48          
     49            Key control:
     50              SW1:  Sends a flash command to all devices in Group 1.
     51              SW2:  Adds/Removes (toggles) this device in and out
     52                    of Group 1.  This will enable and disable the
     53                    reception of the flash command.
     54          *********************************************************************/
     55          
     56          /*********************************************************************
     57           * INCLUDES
     58           */
     59          #include "OSAL.h"
     60          #include "ZGlobals.h"
     61          #include "AF.h"
     62          #include "aps_groups.h"
     63          #include "ZDApp.h"
     64          #include "MT.h"  //透传中CMD_SERIAL_MSG的定义
     65          
     66          #include "SampleApp.h"
     67          #include "SampleAppHw.h"
     68          
     69          #include "OnBoard.h"
     70          #include "string.h"
     71          
     72          /* HAL */
     73          #include "hal_lcd.h"
     74          #include "hal_led.h"
     75          #include "hal_key.h"
     76          
     77          extern uint16 NLME_GetShortAddr( void ); //获取自身短地址
     78          extern void NLME_UpdateLinkStatus( void ); //更新连接状态
     79          
     80          
     81          
     82          /*********** 注意: 每个设备不一样,记得修改!  **********/

   \                                 In  segment XDATA_I, align 1, keep-with-next
     83          uint8 SOURCE_DATA = '3';  //采集的数据
   \                     SOURCE_DATA:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for SOURCE_DATA>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
     84          uint8 Device_ID = 3;
   \                     Device_ID:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for Device_ID>`
   \   000001                REQUIRE __INIT_XDATA_I
     85          
     86          
     87          
     88          /*********************************************************************
     89           * MACROS
     90           */
     91          #define random(x) (rand() % x)
     92          #define uchar unsigned char
     93          #define Node_Num uint8 3  //网络中节点的数量
     94          /*********************************************************************
     95           * CONSTANTS
     96           */
     97          //用户引入的头文件
     98          #include "MT_UART.h"
     99          #include <stdio.h>
    100          #include "nwk_util.h"
    101          #include <stdlib.h>
    102          #include "OSAL_Clock.h"
    103          #include <math.h>
    104          
    105          
    106          /*********************************************************************
    107           * TYPEDEFS
    108           */
    109          /*<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
    110           * GLOBAL VARIABLES 全局变量
    111           */

   \                                 In  segment XDATA_I, align 1, keep-with-next
    112          int8 LIFE_TIME=5;               //邻居活跃度初始值
   \                     LIFE_TIME:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for LIFE_TIME>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    113          int8 NEI_NUM = 0;               //邻居数量
   \                     NEI_NUM:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    114          int16 Nei_Table[3] = {0};       //邻居表
   \                     Nei_Table:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    115          unsigned short ACTIVE[3] = {0}; //邻居活跃度列表
   \                     ACTIVE:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    116          int8 _TURN = 0;                 //发送轮次控制
   \                     _TURN:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    117          
    118          
    119          /*#######################以下是Sink节点的配置############################*/
    120          
    121          /*一个码字的组成*/
    122          typedef struct Encoded_PKT  //编码过的码字
    123          {
    124              /*数据域*/
    125              short data; //码字数据
    126              /*编码信息,由哪几个节点的数据包组成*/
    127              uint16 Degree_ID;
    128          }PKT;
    129          
    130          

   \                                 In  segment XDATA_ROM_C, align 1
    131          const int Slot_Size = 6;        //码字槽大小
   \                     Slot_Size:
   \   000000   0600         DW 6
    132          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    133          PKT DATA_SLOT[5+1];             //码字结构体数组
   \                     DATA_SLOT:
   \   000000                DS 24
   \   000018                REQUIRE __INIT_XDATA_Z
    134          
    135          
    136          //uint8 DATA_SLOT[5+1] = {0};     //码字槽
    137          //uint8 DATA_Degree[5+1] = {0};   //码字度

   \                                 In  segment XDATA_I, align 1, keep-with-next
    138          unsigned short MAX_Degree = 1;  //初始化允许的最大度
   \                     MAX_Degree:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for MAX_Degree>`
   \   000002                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    139          uint8 Decoded_X[100] = {0};     //初始化已解码的码字数组
   \                     Decoded_X:
   \   000000                DS 100
   \   000064                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    140          uint8 Undecoded_Y[100] = {0};   //初始化未解码的复杂码字数组
   \                     Undecoded_Y:
   \   000000                DS 100
   \   000064                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    141          int16 Exchanging_Neighbor;      //待进行码字交换的邻居
   \                     Exchanging_Neighbor:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    142          uint8 Exchanging_Data;          //待交换的码字
   \                     Exchanging_Data:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    143          uint8 Exchange_index;           //待交换的码字的索引
   \                     Exchange_index:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    144          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    145          uint8 Waiting_Request = FALSE;   //是否在等待对方返回交换的数据包回应
   \                     Waiting_Request:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    146          uint8 Exchange_Lock = FALSE;
   \                     Exchange_Lock:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    147          /*<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
    148          * end
    149          */
    150          
    151          
    152          
    153          
    154          // This list should be filled with Application specific Cluster IDs.

   \                                 In  segment XDATA_ROM_C, align 1
    155          const cId_t SampleApp_ClusterList[SAMPLEAPP_MAX_CLUSTERS] =
   \                     SampleApp_ClusterList:
   \   000000   0100         DW 1
   \   000002   0200         DW 2
   \   000004   0000         DW 0
   \   000006   0000         DW 0
    156          {
    157            SAMPLEAPP_PERIODIC_CLUSTERID,
    158            SAMPLEAPP_FLASH_CLUSTERID
    159          };
    160          

   \                                 In  segment XDATA_ROM_C, align 1
    161          const SimpleDescriptionFormat_t SampleApp_SimpleDesc =
   \                     SampleApp_SimpleDesc:
   \   000000   14           DB 20
   \   000001   080F         DW 3848
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   04           DB 4
   \   000007   ....         DW SampleApp_ClusterList
   \   000009   04           DB 4
   \   00000A   ....         DW SampleApp_ClusterList
    162          {
    163            SAMPLEAPP_ENDPOINT,              //  int Endpoint;
    164            SAMPLEAPP_PROFID,                //  uint16 AppProfId[2];
    165            SAMPLEAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    166            SAMPLEAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
    167            SAMPLEAPP_FLAGS,                 //  int   AppFlags:4;
    168            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    169            (cId_t *)SampleApp_ClusterList,  //  uint8 *pAppInClusterList;
    170            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    171            (cId_t *)SampleApp_ClusterList   //  uint8 *pAppInClusterList;
    172          };
    173          
    174          // This is the Endpoint/Interface description.  It is defined here, but
    175          // filled-in in SampleApp_Init().  Another way to go would be to fill
    176          // in the structure here and make it a "const" (in code space).  The
    177          // way it's defined in this sample app it is define in RAM.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    178          endPointDesc_t SampleApp_epDesc;
   \                     SampleApp_epDesc:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z
    179          
    180          /*********************************************************************
    181           * EXTERNAL VARIABLES
    182           */
    183          
    184          /*********************************************************************
    185           * EXTERNAL FUNCTIONS
    186           */
    187          
    188          /*********************************************************************
    189           * LOCAL VARIABLES
    190           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    191          uint8 SampleApp_TaskID;   // Task ID for internal task/event processing
   \                     SampleApp_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    192                                    // This variable will be received when
    193                                    // SampleApp_Init() is called.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    194          devStates_t SampleApp_NwkState;
   \                     SampleApp_NwkState:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    195          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    196          uint8 SampleApp_TransID;  // This is the unique message ID (counter)
   \                     SampleApp_TransID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    197          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    198          afAddrType_t SampleApp_Periodic_DstAddr;
   \                     SampleApp_Periodic_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    199          afAddrType_t SampleApp_Flash_DstAddr; //组播
   \                     SampleApp_Flash_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    200          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    201          afAddrType_t Point_To_Point_DstAddr; //WeBee点对点通信定义
   \                     Point_To_Point_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    202          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    203          aps_Group_t SampleApp_Group; //分组内容
   \                     SampleApp_Group:
   \   000000                DS 18
   \   000012                REQUIRE __INIT_XDATA_Z
    204          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    205          uint8 SampleAppPeriodicCounter = 0;
   \                     SampleAppPeriodicCounter:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    206          uint8 SampleAppFlashCounter = 0;
   \                     SampleAppFlashCounter:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    207          
    208          /*********************************************************************
    209           * LOCAL FUNCTIONS     函数声明
    210           */
    211          void SampleApp_HandleKeys( uint8 shift, uint8 keys );
    212          void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pckt );
    213          void SampleApp_SendPeriodicMessage( void );
    214          void SampleApp_SendFlashMessage( uint16 flashTime );
    215          void SampleApp_SerialCMD(mtOSALSerialData_t *cmdMsg); // 串口通信
    216          void SampleApp_SendPointToPointMessage( void ); //点对点
    217          void SampleApp_SendGroupMessage( void );// 网蜂组播通讯发送函数定义
    218          void Reset_down_neighbor(int16 nei_addr); //重置邻居设备函数
    219          void Show_Bit(uint8 X, uint8 N); //串口打印一个8位比特二进制数字
    220          void Show_Num8(uint8 X);  //串口打印8bit数字
    221          uint8 Power_of_2(uint8 X);
    222          /*********************************************************************
    223           * NETWORK LAYER CALLBACKS
    224           */
    225          
    226          /*********************************************************************
    227           * PUBLIC FUNCTIONS
    228           */
    229          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    230          void Show_Bit( uint8 X, uint8 N )
   \                     Show_Bit:
    231          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   89..         MOV     ?V0 + 0,R1
    232            uchar Bit[2] = {'0','1'};
   \   00000C   85..82       MOV     DPL,?XSP + 0
   \   00000F   85..83       MOV     DPH,?XSP + 1
   \   000012   AC82         MOV     R4,DPL
   \   000014   AD83         MOV     R5,DPH
   \   000016   7583..       MOV     DPH,#(`?<Constant {48, 49}>` >> 8) & 0xff
   \   000019   7582..       MOV     DPL,#`?<Constant {48, 49}>` & 0xff
   \   00001C   7402         MOV     A,#0x2
   \   00001E   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    233            uint8 index;
    234            for(short j=N-1;j>=0;--j)
   \   000021   EA           MOV     A,R2
   \   000022   24FF         ADD     A,#-0x1
   \   000024   FE           MOV     R6,A
   \   000025   E4           CLR     A
   \   000026   8024         SJMP    ??Show_Bit_0
    235            {
    236              index = (X>>j) & 1;
    237              HalUARTWrite(0,&Bit[index],1);
   \                     ??Show_Bit_1:
   \   000028                ; Setup parameters for call to function HalUARTWrite
   \   000028   85....       MOV     ?V0 + 2,?V0 + 0
   \   00002B   8D..         MOV     ?V0 + 3,R5
   \   00002D   EE           MOV     A,R6
   \   00002E   78..         MOV     R0,#?V0 + 2
   \   000030   12....       LCALL   ?SS_SHR
   \   000033   E5..         MOV     A,?V0 + 2
   \   000035   5401         ANL     A,#0x1
   \   000037   F8           MOV     R0,A
   \   000038   85..82       MOV     DPL,?XSP + 0
   \   00003B   85..83       MOV     DPH,?XSP + 1
   \   00003E   E582         MOV     A,DPL
   \   000040   28           ADD     A,R0
   \   000041   FA           MOV     R2,A
   \   000042   E583         MOV     A,DPH
   \   000044   12....       LCALL   ?Subroutine9 & 0xFFFF
    238            }
   \                     ??CrossCallReturnLabel_15:
   \   000047   EE           MOV     A,R6
   \   000048   24FF         ADD     A,#-0x1
   \   00004A   1E           DEC     R6
   \   00004B   EF           MOV     A,R7
   \                     ??Show_Bit_0:
   \   00004C   34FF         ADDC    A,#-0x1
   \   00004E   FF           MOV     R7,A
   \   00004F   C3           CLR     C
   \   000050   12....       LCALL   ??Subroutine41_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_87:
   \   000053   7C01         MOV     R4,#0x1
   \   000055   7D00         MOV     R5,#0x0
   \   000057   50CF         JNC     ??Show_Bit_1
    239            HalUARTWrite(0,"\n",1);
   \   000059                ; Setup parameters for call to function HalUARTWrite
   \   000059   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   00005B   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   00005D   7900         MOV     R1,#0x0
   \   00005F   12....       LCALL   ??HalUARTWrite?relay
    240          }
   \   000062   7402         MOV     A,#0x2
   \   000064   02....       LJMP    ?Subroutine0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003                REQUIRE ??Subroutine33_0
   \   000003                ; // Fall through to label ??Subroutine33_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine33_0:
   \   000000   7F04         MOV     R7,#0x4
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   3400         ADDC    A,#0x0
   \   000002   FB           MOV     R3,A
   \   000003   7900         MOV     R1,#0x0
   \   000005   12....       LCALL   ??HalUARTWrite?relay
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine41_0:
   \   000000   EF           MOV     A,R7
   \   000001                REQUIRE ??Subroutine42_0
   \   000001                ; // Fall through to label ??Subroutine42_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine42_0:
   \   000000   9400         SUBB    A,#0x0
   \   000002   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000004   65D0         XRL     A,PSW
   \   000006   33           RLC     A
   \   000007   22           RET
    241          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    242          void Show_Num8( uint8 X )
   \                     Show_Num8:
    243          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FE           MOV     R6,A
    244            uchar temp = '0' + X;
   \   00000C   7430         MOV     A,#0x30
   \   00000E   2E           ADD     A,R6
   \   00000F   12....       LCALL   ??Subroutine39_0 & 0xFFFF
    245            HalUARTWrite(0,&temp,1);
    246          }
   \                     ??CrossCallReturnLabel_75:
   \   000012   7401         MOV     A,#0x1
   \   000014   12....       LCALL   ?DEALLOC_XSTACK8
   \   000017   7F01         MOV     R7,#0x1
   \   000019   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine39_0:
   \   000000   85..82       MOV     DPL,?XSP + 0
   \   000003   85..83       MOV     DPH,?XSP + 1
   \   000006   F0           MOVX    @DPTR,A
   \   000007                ; Setup parameters for call to function HalUARTWrite
   \   000007                ; Setup parameters for call to function HalUARTWrite
   \   000007                ; Setup parameters for call to function HalUARTWrite
   \   000007   7C01         MOV     R4,#0x1
   \   000009   7D00         MOV     R5,#0x0
   \   00000B   AA82         MOV     R2,DPL
   \   00000D   AB83         MOV     R3,DPH
   \   00000F   7900         MOV     R1,#0x0
   \   000011   12....       LCALL   ??HalUARTWrite?relay
   \   000014   22           RET
    247          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    248          uint8 Power_of_2( uint8 X )
   \                     Power_of_2:
    249          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
   \   000000   E9           MOV     A,R1
   \   000001   FA           MOV     R2,A
    250            if(!X)
   \   000002   7004         JNZ     ??Power_of_2_0
    251              return 1;
   \   000004   7901         MOV     R1,#0x1
   \   000006   8010         SJMP    ??Power_of_2_1
    252            else
    253            {
    254              uint8 temp = 2;
   \                     ??Power_of_2_0:
   \   000008   7902         MOV     R1,#0x2
    255              for(uchar i=2;i<=X;++i)
   \   00000A   7802         MOV     R0,#0x2
   \   00000C   8005         SJMP    ??Power_of_2_2
    256              {
    257                temp *=2;
   \                     ??Power_of_2_3:
   \   00000E   E9           MOV     A,R1
   \   00000F   C3           CLR     C
   \   000010   33           RLC     A
   \   000011   F9           MOV     R1,A
    258              }
   \   000012   08           INC     R0
   \                     ??Power_of_2_2:
   \   000013   EA           MOV     A,R2
   \   000014   C3           CLR     C
   \   000015   98           SUBB    A,R0
   \   000016   50F6         JNC     ??Power_of_2_3
    259              return temp;
   \                     ??Power_of_2_1:
   \   000018   02....       LJMP    ?BRET
    260            }
    261              
    262          }
    263          /*********************************************************************
    264           * @fn      SampleApp_Init   应用初始化
    265           *
    266           * @brief   Initialization function for the Generic App Task.
    267           *          This is called during initialization and should contain
    268           *          any application specific initialization (ie. hardware
    269           *          initialization/setup, table initialization, power up
    270           *          notificaiton ... ).
    271           *
    272           * @param   task_id - the ID assigned by OSAL.  This ID should be
    273           *                    used to send messages and set timers.
    274           *
    275           * @return  none
    276           */
    277          
    278          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    279          void SampleApp_Init( uint8 task_id )
   \                     SampleApp_Init:
    280          {
   \   000000   74F1         MOV     A,#-0xf
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 15
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 2,R1
    281            SampleApp_TaskID = task_id;
   \   000007   E9           MOV     A,R1
   \   000008   90....       MOV     DPTR,#SampleApp_TaskID
   \   00000B   F0           MOVX    @DPTR,A
    282            SampleApp_NwkState = DEV_INIT;
   \   00000C   90....       MOV     DPTR,#SampleApp_NwkState
   \   00000F   7401         MOV     A,#0x1
   \   000011   F0           MOVX    @DPTR,A
    283            SampleApp_TransID = 0;
   \   000012   90....       MOV     DPTR,#SampleApp_TransID
   \   000015   E4           CLR     A
   \   000016   F0           MOVX    @DPTR,A
    284            MT_UartInit(); //初始化UART
   \   000017                ; Setup parameters for call to function MT_UartInit
   \   000017   12....       LCALL   ??MT_UartInit?relay
    285            MT_UartRegisterTaskID(task_id);// 登记任务号
   \   00001A                ; Setup parameters for call to function MT_UartRegisterTaskID
   \   00001A   A9..         MOV     R1,?V0 + 2
   \   00001C   12....       LCALL   ??MT_UartRegisterTaskID?relay
    286            HalUARTWrite(0, "System is started.\n\n", 20); // （串口 0 ，'字符’,字符个数）
   \   00001F                ; Setup parameters for call to function HalUARTWrite
   \   00001F   7C14         MOV     R4,#0x14
   \   000021   7D00         MOV     R5,#0x0
   \   000023   7A..         MOV     R2,#`?<Constant "System is started.\\n\\n">` & 0xff
   \   000025   7B..         MOV     R3,#(`?<Constant "System is started.\\n\\n">` >> 8) & 0xff
   \   000027   7900         MOV     R1,#0x0
   \   000029   12....       LCALL   ??HalUARTWrite?relay
    287          
    288          
    289            //路由表初始化
    290            for(short i=0;i<3;++i)
   \   00002C   7A00         MOV     R2,#0x0
   \   00002E   7B00         MOV     R3,#0x0
    291            {
    292              Nei_Table[i] += 65534;
   \                     ??SampleApp_Init_0:
   \   000030   EA           MOV     A,R2
   \   000031   F8           MOV     R0,A
   \   000032   EB           MOV     A,R3
   \   000033   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_11:
   \   000036   24FE         ADD     A,#-0x2
   \   000038   F0           MOVX    @DPTR,A
   \   000039   A3           INC     DPTR
   \   00003A   E0           MOVX    A,@DPTR
   \   00003B   34FF         ADDC    A,#-0x1
   \   00003D   F0           MOVX    @DPTR,A
    293              ACTIVE[i] += LIFE_TIME;  //邻居活跃度初始化
   \   00003E   90....       MOV     DPTR,#LIFE_TIME
   \   000041   E0           MOVX    A,@DPTR
   \   000042   FC           MOV     R4,A
   \   000043   33           RLC     A
   \   000044   95E0         SUBB    A,0xE0 /* A   */
   \   000046   FD           MOV     R5,A
   \   000047   12....       LCALL   ?Subroutine8 & 0xFFFF
    294            }
   \                     ??CrossCallReturnLabel_13:
   \   00004A   2C           ADD     A,R4
   \   00004B   F0           MOVX    @DPTR,A
   \   00004C   A3           INC     DPTR
   \   00004D   E0           MOVX    A,@DPTR
   \   00004E   3D           ADDC    A,R5
   \   00004F   F0           MOVX    @DPTR,A
   \   000050   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_17:
   \   000053   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_82:
   \   000056   40D8         JC      ??SampleApp_Init_0
    295          
    296          
    297            //给码字槽赋初值(除了sink节点)
    298            for(short i=0;i<6;++i)
   \   000058   7E00         MOV     R6,#0x0
   \   00005A   7F00         MOV     R7,#0x0
    299            {
    300              DATA_SLOT[i].data = SOURCE_DATA;  //给码字槽赋初值
   \                     ??SampleApp_Init_1:
   \   00005C   8E..         MOV     ?V0 + 0,R6
   \   00005E   8F..         MOV     ?V0 + 1,R7
   \   000060   7402         MOV     A,#0x2
   \   000062   78..         MOV     R0,#?V0 + 0
   \   000064   12....       LCALL   ?S_SHL
   \   000067   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_42:
   \   00006A   88..         MOV     ?V0 + 0,R0
   \   00006C   89..         MOV     ?V0 + 1,R1
   \   00006E   90....       MOV     DPTR,#SOURCE_DATA
   \   000071   E0           MOVX    A,@DPTR
   \   000072   8882         MOV     DPL,R0
   \   000074   8983         MOV     DPH,R1
   \   000076   12....       LCALL   ??Subroutine38_0 & 0xFFFF
    301              DATA_SLOT[i].Degree_ID = Power_of_2(i);       //给码字赋节点信息
   \                     ??CrossCallReturnLabel_68:
   \   000079                ; Setup parameters for call to function Power_of_2
   \   000079   EE           MOV     A,R6
   \   00007A   F9           MOV     R1,A
   \   00007B   12....       LCALL   ??Power_of_2?relay
   \   00007E   E9           MOV     A,R1
   \   00007F   85..82       MOV     DPL,?V0 + 0
   \   000082   85..83       MOV     DPH,?V0 + 1
   \   000085   A3           INC     DPTR
   \   000086   A3           INC     DPTR
   \   000087   12....       LCALL   ??Subroutine38_0 & 0xFFFF
    302            }
   \                     ??CrossCallReturnLabel_69:
   \   00008A   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_80:
   \   00008D   40CD         JC      ??SampleApp_Init_1
    303          
    304            
    305           
    306            
    307            
    308            
    309            
    310            
    311            
    312            
    313            
    314            
    315            
    316          
    317            // Device hardware initialization can be added here or in main() (Zmain.c).
    318            // If the hardware is application specific - add it here.
    319            // If the hardware is other parts of the device add it in main().
    320          
    321           #if defined ( BUILD_ALL_DEVICES )
    322            // The "Demo" target is setup to have BUILD_ALL_DEVICES and HOLD_AUTO_START
    323            // We are looking at a jumper (defined in SampleAppHw.c) to be jumpered
    324            // together - if they are - we will start up a coordinator. Otherwise,
    325            // the device will start as a router.
    326            if ( readCoordinatorJumper() )
    327              zgDeviceLogicalType = ZG_DEVICETYPE_COORDINATOR;
    328            else
    329              zgDeviceLogicalType = ZG_DEVICETYPE_ROUTER;
    330          #endif // BUILD_ALL_DEVICES
    331          
    332          #if defined ( HOLD_AUTO_START )
    333            // HOLD_AUTO_START is a compile option that will surpress ZDApp
    334            //  from starting the device and wait for the application to
    335            //  start the device.
    336            ZDOInitDevice(0);
    337          #endif
    338          
    339          
    340          
    341            //WeBee点对点通讯定义
    342            Point_To_Point_DstAddr.addrMode = (afAddrMode_t)Addr16Bit; //点播模式
   \   00008F   90....       MOV     DPTR,#Point_To_Point_DstAddr + 8
   \   000092   7402         MOV     A,#0x2
   \   000094   F0           MOVX    @DPTR,A
    343            Point_To_Point_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   000095   A3           INC     DPTR
   \   000096   7414         MOV     A,#0x14
   \   000098   F0           MOVX    @DPTR,A
    344            Point_To_Point_DstAddr.addr.shortAddr = 0xB6AE; //发给协调器
   \   000099   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   00009C   74AE         MOV     A,#-0x52
   \   00009E   F0           MOVX    @DPTR,A
   \   00009F   A3           INC     DPTR
   \   0000A0   74B6         MOV     A,#-0x4a
   \   0000A2   F0           MOVX    @DPTR,A
    345          
    346          
    347          
    348          
    349          
    350          
    351            // Setup for the periodic message's destination address
    352            // Broadcast to everyone     广播方式定义
    353            SampleApp_Periodic_DstAddr.addrMode = (afAddrMode_t)AddrBroadcast;
   \   0000A3   90....       MOV     DPTR,#SampleApp_Periodic_DstAddr + 8
   \   0000A6   740F         MOV     A,#0xf
   \   0000A8   F0           MOVX    @DPTR,A
    354            SampleApp_Periodic_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   0000A9   A3           INC     DPTR
   \   0000AA   7414         MOV     A,#0x14
   \   0000AC   F0           MOVX    @DPTR,A
    355            SampleApp_Periodic_DstAddr.addr.shortAddr = 0xFFFF;//发送给所有设备,睡眠中的节点由父节点暂存直到超时
   \   0000AD   90....       MOV     DPTR,#SampleApp_Periodic_DstAddr
   \   0000B0   74FF         MOV     A,#-0x1
   \   0000B2   F0           MOVX    @DPTR,A
   \   0000B3   A3           INC     DPTR
   \   0000B4   F0           MOVX    @DPTR,A
    356            //0xFFFD 发送给非睡眠状态的所有设备
    357            //0xFFFC 发送给所有路由器以及协调器
    358          
    359          
    360          
    361          
    362            //组播Group1设置
    363            // Setup for the flash command's destination address - Group 1
    364            SampleApp_Flash_DstAddr.addrMode = (afAddrMode_t)afAddrGroup;
   \   0000B5   90....       MOV     DPTR,#SampleApp_Flash_DstAddr + 8
   \   0000B8   7401         MOV     A,#0x1
   \   0000BA   F0           MOVX    @DPTR,A
    365            SampleApp_Flash_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;  //endpoint 端点
   \   0000BB   A3           INC     DPTR
   \   0000BC   7414         MOV     A,#0x14
   \   0000BE   F0           MOVX    @DPTR,A
    366            SampleApp_Flash_DstAddr.addr.shortAddr = SAMPLEAPP_FLASH_GROUP;
   \   0000BF   90....       MOV     DPTR,#SampleApp_Flash_DstAddr
   \   0000C2   12....       LCALL   ?Subroutine13 & 0xFFFF
    367          
    368          
    369          
    370          
    371          
    372            // Fill out the endpoint description.
    373            SampleApp_epDesc.endPoint = SAMPLEAPP_ENDPOINT;
   \                     ??CrossCallReturnLabel_71:
   \   0000C5   90....       MOV     DPTR,#SampleApp_epDesc
   \   0000C8   7414         MOV     A,#0x14
   \   0000CA   F0           MOVX    @DPTR,A
    374            SampleApp_epDesc.task_id = &SampleApp_TaskID;
   \   0000CB   A3           INC     DPTR
   \   0000CC   74..         MOV     A,#SampleApp_TaskID & 0xff
   \   0000CE   F0           MOVX    @DPTR,A
   \   0000CF   A3           INC     DPTR
   \   0000D0   74..         MOV     A,#(SampleApp_TaskID >> 8) & 0xff
   \   0000D2   F0           MOVX    @DPTR,A
    375            SampleApp_epDesc.simpleDesc
    376                      = (SimpleDescriptionFormat_t *)&SampleApp_SimpleDesc;
   \   0000D3   A3           INC     DPTR
   \   0000D4   74..         MOV     A,#SampleApp_SimpleDesc & 0xff
   \   0000D6   F0           MOVX    @DPTR,A
   \   0000D7   A3           INC     DPTR
   \   0000D8   74..         MOV     A,#(SampleApp_SimpleDesc >> 8) & 0xff
   \   0000DA   12....       LCALL   ??Subroutine38_0 & 0xFFFF
    377            SampleApp_epDesc.latencyReq = noLatencyReqs;
    378          
    379            // Register the endpoint description with the AF
    380            afRegister( &SampleApp_epDesc );
   \                     ??CrossCallReturnLabel_67:
   \   0000DD                ; Setup parameters for call to function afRegister
   \   0000DD   7A..         MOV     R2,#SampleApp_epDesc & 0xff
   \   0000DF   7B..         MOV     R3,#(SampleApp_epDesc >> 8) & 0xff
   \   0000E1   12....       LCALL   ??afRegister?relay
    381          
    382            // Register for all key events - This app will handle all key events
    383            RegisterForKeys( SampleApp_TaskID );
   \   0000E4                ; Setup parameters for call to function RegisterForKeys
   \   0000E4   90....       MOV     DPTR,#SampleApp_TaskID
   \   0000E7   E0           MOVX    A,@DPTR
   \   0000E8   F9           MOV     R1,A
   \   0000E9   12....       LCALL   ??RegisterForKeys?relay
    384          
    385          
    386          
    387            /***********设置 Group_ID*************/
    388            // By default, all devices start out in Group 1
    389            SampleApp_Group.ID = SAMPLEAPP_FLASH_GROUP; //0x0001
   \   0000EC   90....       MOV     DPTR,#SampleApp_Group
   \   0000EF   12....       LCALL   ?Subroutine13 & 0xFFFF
    390            osal_memcpy( SampleApp_Group.name, "Group 1", 7  );
   \                     ??CrossCallReturnLabel_72:
   \   0000F2                ; Setup parameters for call to function osal_memcpy
   \   0000F2   75....       MOV     ?V0 + 4,#`?<Constant "Group 1">` & 0xff
   \   0000F5   75....       MOV     ?V0 + 5,#(`?<Constant "Group 1">` >> 8) & 0xff
   \   0000F8   F5..         MOV     ?V0 + 6,A
   \   0000FA   78..         MOV     R0,#?V0 + 4
   \   0000FC   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000FF   7C07         MOV     R4,#0x7
   \   000101   7D00         MOV     R5,#0x0
   \   000103   7A..         MOV     R2,#(SampleApp_Group + 2) & 0xff
   \   000105   7B..         MOV     R3,#((SampleApp_Group + 2) >> 8) & 0xff
   \   000107   12....       LCALL   ??osal_memcpy?relay
   \   00010A   7403         MOV     A,#0x3
   \   00010C   12....       LCALL   ?DEALLOC_XSTACK8
    391            aps_AddGroup( SAMPLEAPP_ENDPOINT, &SampleApp_Group );
   \   00010F                ; Setup parameters for call to function aps_AddGroup
   \   00010F   7A..         MOV     R2,#SampleApp_Group & 0xff
   \   000111   7B..         MOV     R3,#(SampleApp_Group >> 8) & 0xff
   \   000113   7914         MOV     R1,#0x14
   \   000115   12....       LCALL   ??aps_AddGroup?relay
    392          
    393          
    394          
    395          #if defined ( LCD_SUPPORTED )
    396            HalLcdWriteString( "SampleApp", HAL_LCD_LINE_1 );
   \   000118                ; Setup parameters for call to function HalLcdWriteString
   \   000118   7901         MOV     R1,#0x1
   \   00011A   7A..         MOV     R2,#`?<Constant "SampleApp">` & 0xff
   \   00011C   7B..         MOV     R3,#(`?<Constant "SampleApp">` >> 8) & 0xff
   \   00011E   12....       LCALL   ??HalLcdWriteString?relay
    397          #endif
    398          }
   \   000121   7F07         MOV     R7,#0x7
   \   000123   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   12....       LCALL   ?Subroutine32 & 0xFFFF
   \                     ??CrossCallReturnLabel_47:
   \   000003   9403         SUBB    A,#0x3
   \   000005   EB           MOV     A,R3
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine32:
   \   000000   EA           MOV     A,R2
   \   000001   2401         ADD     A,#0x1
   \   000003   0A           INC     R2
   \   000004   EB           MOV     A,R3
   \   000005   3400         ADDC    A,#0x0
   \   000007   FB           MOV     R3,A
   \   000008   C3           CLR     C
   \   000009   EA           MOV     A,R2
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine30:
   \   000000   74..         MOV     A,#DATA_SLOT & 0xff
   \   000002   25..         ADD     A,?V0 + 0
   \   000004   F8           MOV     R0,A
   \   000005   74..         MOV     A,#(DATA_SLOT >> 8) & 0xff
   \   000007   35..         ADDC    A,?V0 + 1
   \   000009   F9           MOV     R1,A
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   7402         MOV     A,#0x2
   \   000002                REQUIRE ??Subroutine38_0
   \   000002                ; // Fall through to label ??Subroutine38_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine38_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   A3           INC     DPTR
   \   000002   E4           CLR     A
   \   000003   F0           MOVX    @DPTR,A
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   12....       LCALL   ?Subroutine27 & 0xFFFF
   \                     ??CrossCallReturnLabel_39:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine27:
   \   000000   74..         MOV     A,#ACTIVE & 0xff
   \   000002   28           ADD     A,R0
   \   000003   F582         MOV     DPL,A
   \   000005   74..         MOV     A,#(ACTIVE >> 8) & 0xff
   \   000007   39           ADDC    A,R1
   \   000008   F583         MOV     DPH,A
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   EE           MOV     A,R6
   \   000001   2401         ADD     A,#0x1
   \   000003   0E           INC     R6
   \   000004   EF           MOV     A,R7
   \   000005   3400         ADDC    A,#0x0
   \   000007   FF           MOV     R7,A
   \   000008   C3           CLR     C
   \   000009   EE           MOV     A,R6
   \   00000A   9406         SUBB    A,#0x6
   \   00000C                REQUIRE ??Subroutine41_0
   \   00000C                ; // Fall through to label ??Subroutine41_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   F9           MOV     R1,A
   \   000001   12....       LCALL   ?Subroutine28 & 0xFFFF
   \                     ??CrossCallReturnLabel_41:
   \   000004   E0           MOVX    A,@DPTR
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine28:
   \   000000   E8           MOV     A,R0
   \   000001   C3           CLR     C
   \   000002   33           RLC     A
   \   000003   F8           MOV     R0,A
   \   000004   E9           MOV     A,R1
   \   000005   33           RLC     A
   \   000006   F9           MOV     R1,A
   \   000007   74..         MOV     A,#Nei_Table & 0xff
   \   000009   28           ADD     A,R0
   \   00000A   F582         MOV     DPL,A
   \   00000C   74..         MOV     A,#(Nei_Table >> 8) & 0xff
   \   00000E   39           ADDC    A,R1
   \   00000F   F583         MOV     DPH,A
   \   000011   22           RET
    399          
    400          /*********************************************************************
    401           * @fn      SampleApp_ProcessEvent
    402           *
    403           *        ******************应用处理程序***************************
    404           *
    405           * @brief   Generic Application Task event processor.  This function
    406           *          is called to process all events for the task.  Events
    407           *          include timers, messages and any other user defined events.
    408           *
    409           * @param   task_id  - The OSAL assigned task ID.
    410           * @param   events - events to process.  This is a bit map and can
    411           *                   contain more than one event.
    412           *
    413           * @return  none
    414           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    415          uint16 SampleApp_ProcessEvent( uint8 task_id, uint16 events )
   \                     SampleApp_ProcessEvent:
    416          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    417            afIncomingMSGPacket_t *MSGpkt;
    418            (void)task_id;  // Intentionally unreferenced parameter
    419          
    420            if ( events & SYS_EVENT_MSG ) //系统信息发送事件
   \   000009   5480         ANL     A,#0x80
   \   00000B   7003         JNZ     $+5
   \   00000D   02....       LJMP    ??SampleApp_ProcessEvent_0 & 0xFFFF
    421            {
    422              MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
   \   000010                ; Setup parameters for call to function osal_msg_receive
   \   000010   802B         SJMP    ??SampleApp_ProcessEvent_1
    423              while ( MSGpkt )
    424              {
    425                switch ( MSGpkt->hdr.event )
    426                {
    427                  case CMD_SERIAL_MSG:    // 串口收到数据后由MT_UART层传递过的数据，用网蜂方法接收，编译时不定义MT相关内容
    428                      SampleApp_SerialCMD((mtOSALSerialData_t *)MSGpkt);
    429                      break;
    430          
    431                  // Received when a key is pressed
    432                  case KEY_CHANGE: //按键事件及处理函数
    433                    //HalUARTWrite(0, "KEY ", 4);
    434                    SampleApp_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
    435                    break;
    436          
    437                  // Received when a messages is received (OTA) for this endpoint
    438                  // 接收处理函数
    439                  case AF_INCOMING_MSG_CMD:
    440                    SampleApp_MessageMSGCB( MSGpkt );
    441                    break;
    442          
    443                  // Received whenever the device changes state in the network
    444                  case ZDO_STATE_CHANGE:  //网络状态改变，如未连接上网络
    445                    SampleApp_NwkState = (devStates_t)(MSGpkt->hdr.status);
   \                     ??SampleApp_ProcessEvent_2:
   \   000012   A3           INC     DPTR
   \   000013   E0           MOVX    A,@DPTR
   \   000014   90....       MOV     DPTR,#SampleApp_NwkState
   \   000017   F0           MOVX    @DPTR,A
    446                    if ( (SampleApp_NwkState == DEV_ZB_COORD) //协调器
    447                        || (SampleApp_NwkState == DEV_ROUTER) //路由器
    448                        || (SampleApp_NwkState == DEV_END_DEVICE) ) //终端 都执行
   \   000018   6409         XRL     A,#0x9
   \   00001A   600A         JZ      ??SampleApp_ProcessEvent_3
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   6407         XRL     A,#0x7
   \   00001F   6005         JZ      ??SampleApp_ProcessEvent_3
   \   000021   E0           MOVX    A,@DPTR
   \   000022   6406         XRL     A,#0x6
   \   000024   7010         JNZ     ??SampleApp_ProcessEvent_4
    449                    {
    450                      // Start sending the periodic message in a regular interval.
    451                      osal_start_timerEx( SampleApp_TaskID,
    452                                        SAMPLEAPP_SEND_PERIODIC_MSG_EVT,
    453                                        SAMPLEAPP_SEND_PERIODIC_MSG_TIMEOUT );
   \                     ??SampleApp_ProcessEvent_3:
   \   000026                ; Setup parameters for call to function osal_start_timerEx
   \   000026   7C88         MOV     R4,#-0x78
   \   000028   7D13         MOV     R5,#0x13
   \   00002A   7A01         MOV     R2,#0x1
   \   00002C   7B00         MOV     R3,#0x0
   \   00002E   90....       MOV     DPTR,#SampleApp_TaskID
   \   000031   E0           MOVX    A,@DPTR
   \   000032   F9           MOV     R1,A
   \   000033   12....       LCALL   ??osal_start_timerEx?relay
    454                    }
    455                    else
    456                    {
    457                      // Device is no longer in the network
    458          //              HalUARTWrite(0,"网络断开",8);
    459                    }
    460                    break;
    461          
    462                  default:
    463                    break;
    464                }
    465          
    466                // Release the memory
    467                osal_msg_deallocate( (uint8 *)MSGpkt );
   \                     ??SampleApp_ProcessEvent_4:
   \   000036                ; Setup parameters for call to function osal_msg_deallocate
   \   000036   AA..         MOV     R2,?V0 + 0
   \   000038   AB..         MOV     R3,?V0 + 1
   \   00003A   12....       LCALL   ??osal_msg_deallocate?relay
    468          
    469                // Next - if one is available
    470                MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
   \   00003D                ; Setup parameters for call to function osal_msg_receive
   \                     ??SampleApp_ProcessEvent_1:
   \   00003D   90....       MOV     DPTR,#SampleApp_TaskID
   \   000040   E0           MOVX    A,@DPTR
   \   000041   F9           MOV     R1,A
   \   000042   12....       LCALL   ??osal_msg_receive?relay
   \   000045   8A..         MOV     ?V0 + 0,R2
   \   000047   8B..         MOV     ?V0 + 1,R3
   \   000049   E5..         MOV     A,?V0 + 0
   \   00004B   45..         ORL     A,?V0 + 1
   \   00004D   603E         JZ      ??SampleApp_ProcessEvent_5
   \   00004F   85..82       MOV     DPL,?V0 + 0
   \   000052   85..83       MOV     DPH,?V0 + 1
   \   000055   E0           MOVX    A,@DPTR
   \   000056   14           DEC     A
   \   000057   600E         JZ      ??SampleApp_ProcessEvent_6
   \   000059   24E7         ADD     A,#-0x19
   \   00005B   6027         JZ      ??SampleApp_ProcessEvent_7
   \   00005D   245A         ADD     A,#0x5a
   \   00005F   600F         JZ      ??SampleApp_ProcessEvent_8
   \   000061   24EF         ADD     A,#-0x11
   \   000063   60AD         JZ      ??SampleApp_ProcessEvent_2
   \   000065   80CF         SJMP    ??SampleApp_ProcessEvent_4
   \                     ??SampleApp_ProcessEvent_6:
   \   000067                ; Setup parameters for call to function SampleApp_SerialCMD
   \   000067   AA..         MOV     R2,?V0 + 0
   \   000069   AB..         MOV     R3,?V0 + 1
   \   00006B   12....       LCALL   ??SampleApp_SerialCMD?relay
   \   00006E   80C6         SJMP    ??SampleApp_ProcessEvent_4
   \                     ??SampleApp_ProcessEvent_8:
   \   000070                ; Setup parameters for call to function SampleApp_HandleKeys
   \   000070   A3           INC     DPTR
   \   000071   A3           INC     DPTR
   \   000072   A3           INC     DPTR
   \   000073   E0           MOVX    A,@DPTR
   \   000074   FA           MOV     R2,A
   \   000075   85..82       MOV     DPL,?V0 + 0
   \   000078   85..83       MOV     DPH,?V0 + 1
   \   00007B   A3           INC     DPTR
   \   00007C   A3           INC     DPTR
   \   00007D   E0           MOVX    A,@DPTR
   \   00007E   F9           MOV     R1,A
   \   00007F   12....       LCALL   ??SampleApp_HandleKeys?relay
   \   000082   80B2         SJMP    ??SampleApp_ProcessEvent_4
   \                     ??SampleApp_ProcessEvent_7:
   \   000084                ; Setup parameters for call to function SampleApp_MessageMSGCB
   \   000084   AA..         MOV     R2,?V0 + 0
   \   000086   AB..         MOV     R3,?V0 + 1
   \   000088   12....       LCALL   ??SampleApp_MessageMSGCB?relay
   \   00008B   80A9         SJMP    ??SampleApp_ProcessEvent_4
    471              }
    472          
    473              // return unprocessed events
    474              return (events ^ SYS_EVENT_MSG);
   \                     ??SampleApp_ProcessEvent_5:
   \   00008D   EE           MOV     A,R6
   \   00008E   FA           MOV     R2,A
   \   00008F   EF           MOV     A,R7
   \   000090   6480         XRL     A,#0x80
   \                     ??SampleApp_ProcessEvent_9:
   \   000092   FB           MOV     R3,A
   \   000093   803F         SJMP    ??SampleApp_ProcessEvent_10
    475            }
    476          
    477            // Send a message out - This event is generated by a timer
    478            //  (setup in SampleApp_Init()).
    479            if ( events & SAMPLEAPP_SEND_PERIODIC_MSG_EVT )  //*****周期性发送函数*****
   \                     ??SampleApp_ProcessEvent_0:
   \   000095   EE           MOV     A,R6
   \   000096   A2E0         MOV     C,0xE0 /* A   */.0
   \   000098   5036         JNC     ??SampleApp_ProcessEvent_11
    480            {
    481          
    482          
    483          /***********************************周期性发送函数****************************************/
    484          
    485              /*Send the periodic message*/
    486              //SampleApp_SendPeriodicMessage(); //用户周期性广播发送函数
    487          
    488              if(_TURN == 0){
   \   00009A   90....       MOV     DPTR,#_TURN
   \   00009D   E0           MOVX    A,@DPTR
   \   00009E   700A         JNZ     ??SampleApp_ProcessEvent_12
    489                /*Group*/
    490                SampleApp_SendGroupMessage(); //组播通讯程序
   \   0000A0                ; Setup parameters for call to function SampleApp_SendGroupMessage
   \   0000A0   12....       LCALL   ??SampleApp_SendGroupMessage?relay
    491                _TURN = 1;
   \   0000A3   90....       MOV     DPTR,#_TURN
   \   0000A6   7401         MOV     A,#0x1
   \   0000A8   8007         SJMP    ??SampleApp_ProcessEvent_13
    492              }
    493          
    494              else{
    495                /*Point_to_Point*/
    496                SampleApp_SendPointToPointMessage(); //点对点发送函数
   \                     ??SampleApp_ProcessEvent_12:
   \   0000AA                ; Setup parameters for call to function SampleApp_SendPointToPointMessage
   \   0000AA   12....       LCALL   ??SampleApp_SendPointToPointMessage?relay
    497                _TURN = 0;
   \   0000AD   90....       MOV     DPTR,#_TURN
   \   0000B0   E4           CLR     A
   \                     ??SampleApp_ProcessEvent_13:
   \   0000B1   F0           MOVX    @DPTR,A
    498              }
    499          
    500          /**********************************周期性发送函数*****************************************/
    501          
    502          
    503          
    504          
    505              // Setup to send message again in normal period (+ a little jitter)
    506              osal_start_timerEx( SampleApp_TaskID, SAMPLEAPP_SEND_PERIODIC_MSG_EVT,
    507                                 (SAMPLEAPP_SEND_PERIODIC_MSG_TIMEOUT + (osal_rand() & 0x00FF)) );
   \   0000B2                ; Setup parameters for call to function osal_rand
   \   0000B2   12....       LCALL   ??osal_rand?relay
   \   0000B5                ; Setup parameters for call to function osal_start_timerEx
   \   0000B5   EA           MOV     A,R2
   \   0000B6   2488         ADD     A,#-0x78
   \   0000B8   FC           MOV     R4,A
   \   0000B9   E4           CLR     A
   \   0000BA   3413         ADDC    A,#0x13
   \   0000BC   FD           MOV     R5,A
   \   0000BD   7A01         MOV     R2,#0x1
   \   0000BF   7B00         MOV     R3,#0x0
   \   0000C1   90....       MOV     DPTR,#SampleApp_TaskID
   \   0000C4   E0           MOVX    A,@DPTR
   \   0000C5   F9           MOV     R1,A
   \   0000C6   12....       LCALL   ??osal_start_timerEx?relay
    508          
    509              // return unprocessed events
    510              return (events ^ SAMPLEAPP_SEND_PERIODIC_MSG_EVT);
   \   0000C9   EE           MOV     A,R6
   \   0000CA   6401         XRL     A,#0x1
   \   0000CC   FA           MOV     R2,A
   \   0000CD   EF           MOV     A,R7
   \   0000CE   80C2         SJMP    ??SampleApp_ProcessEvent_9
    511          
    512            }
    513          
    514            // Discard unknown events
    515            return 0;
   \                     ??SampleApp_ProcessEvent_11:
   \   0000D0   7A00         MOV     R2,#0x0
   \   0000D2   7B00         MOV     R3,#0x0
   \                     ??SampleApp_ProcessEvent_10:
   \   0000D4   80..         SJMP    ??Subroutine33_0
    516          }
    517          
    518          
    519          
    520          
    521          
    522          
    523          
    524          /********************************************************
    525                              组播 发送函数
    526          *********************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    527          void SampleApp_SendGroupMessage( void )
   \                     SampleApp_SendGroupMessage:
    528          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    529            //uint8 data[10]={'G','R','O','U','P',' ','1',' ','r','4'};// 自定义数据
    530            if ( AF_DataRequest( & SampleApp_Flash_DstAddr,
    531                                &SampleApp_epDesc,
    532                                SAMPLEAPP_FLASH_CLUSTERID,
    533                                1,
    534                                (uint8*)&SampleAppPeriodicCounter, //要发送的内容
    535                                &SampleApp_TransID,
    536                                AF_DISCV_ROUTE,
    537                                AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000005                ; Setup parameters for call to function AF_DataRequest
   \   000005   75..1E       MOV     ?V0 + 0,#0x1e
   \   000008   78..         MOV     R0,#?V0 + 0
   \   00000A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00000D   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000010   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000013   78..         MOV     R0,#?V0 + 0
   \   000015   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000018   75....       MOV     ?V0 + 0,#SampleAppPeriodicCounter & 0xff
   \   00001B   75....       MOV     ?V0 + 1,#(SampleAppPeriodicCounter >> 8) & 0xff
   \   00001E   78..         MOV     R0,#?V0 + 0
   \   000020   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000023   75..01       MOV     ?V0 + 0,#0x1
   \   000026   75..00       MOV     ?V0 + 1,#0x0
   \   000029   78..         MOV     R0,#?V0 + 0
   \   00002B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00002E   75..02       MOV     ?V0 + 0,#0x2
   \   000031   78..         MOV     R0,#?V0 + 0
   \   000033   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000036   7920         MOV     R1,#0x20
   \   000038   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   00003A   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   00003C   7A..         MOV     R2,#SampleApp_Flash_DstAddr & 0xff
   \   00003E   7B..         MOV     R3,#(SampleApp_Flash_DstAddr >> 8) & 0xff
   \   000040   12....       LCALL   ??Subroutine34_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_53:
   \   000043   02....       LJMP    ?Subroutine1 & 0xFFFF
    538            {
    539            }
    540            else
    541            {
    542              // Error occurred in request to send.
    543            }
    544          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine34_0:
   \   000000   12....       LCALL   ??AF_DataRequest?relay
   \   000003   7409         MOV     A,#0x9
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003                REQUIRE ??Subroutine43_0
   \   000003                ; // Fall through to label ??Subroutine43_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine43_0:
   \   000000   7F02         MOV     R7,#0x2
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    545          
    546          
    547          /*********************************************************************
    548           * @fn      SampleApp_SendPeriodicMessage
    549           *
    550           * @brief   Send the periodic message.
    551           *
    552           * @param   none
    553           *
    554           * @return  none
    555           *
    556           *********************************************************
    557                              周期性广播 发送函数
    558           **********************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    559          void SampleApp_SendPeriodicMessage( void )
   \                     SampleApp_SendPeriodicMessage:
    560          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    561            unsigned int flashTime=1000;
    562            if ( AF_DataRequest( &SampleApp_Periodic_DstAddr, &SampleApp_epDesc,
    563                                 SAMPLEAPP_PERIODIC_CLUSTERID,
    564                                 1,  //数据长度
    565                                 (uint8*)&SampleAppPeriodicCounter, //要发送的内容
    566                                 &SampleApp_TransID,
    567                                 AF_DISCV_ROUTE,
    568                                 AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000005                ; Setup parameters for call to function AF_DataRequest
   \   000005   75..1E       MOV     ?V0 + 0,#0x1e
   \   000008   78..         MOV     R0,#?V0 + 0
   \   00000A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00000D   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000010   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000013   78..         MOV     R0,#?V0 + 0
   \   000015   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000018   75....       MOV     ?V0 + 0,#SampleAppPeriodicCounter & 0xff
   \   00001B   75....       MOV     ?V0 + 1,#(SampleAppPeriodicCounter >> 8) & 0xff
   \   00001E   78..         MOV     R0,#?V0 + 0
   \   000020   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000023   75..01       MOV     ?V0 + 0,#0x1
   \   000026   75..00       MOV     ?V0 + 1,#0x0
   \   000029   78..         MOV     R0,#?V0 + 0
   \   00002B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00002E   78..         MOV     R0,#?V0 + 0
   \   000030   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000033   7920         MOV     R1,#0x20
   \   000035   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000037   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000039   7A..         MOV     R2,#SampleApp_Periodic_DstAddr & 0xff
   \   00003B   7B..         MOV     R3,#(SampleApp_Periodic_DstAddr >> 8) & 0xff
   \   00003D   12....       LCALL   ??Subroutine34_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_54:
   \   000040   12....       LCALL   ?DEALLOC_XSTACK8
   \   000043   E9           MOV     A,R1
   \   000044   700D         JNZ     ??SampleApp_SendPeriodicMessage_0
    569            {
    570              HalLedBlink( HAL_LED_1, 1, 60, (flashTime / 3) );
   \   000046                ; Setup parameters for call to function HalLedBlink
   \   000046   7C4D         MOV     R4,#0x4d
   \   000048   7D01         MOV     R5,#0x1
   \   00004A   7B3C         MOV     R3,#0x3c
   \   00004C   7A01         MOV     R2,#0x1
   \   00004E   7901         MOV     R1,#0x1
   \   000050   12....       LCALL   ??HalLedBlink?relay
    571            }
    572            else
    573            {
    574              // Error occurred in request to send.
    575            }
    576          }
   \                     ??SampleApp_SendPeriodicMessage_0:
   \   000053   02....       LJMP    ??Subroutine43_0 & 0xFFFF
    577          
    578          
    579          /*********************************************************************
    580           * @fn      SampleApp_SendFlashMessage
    581           *
    582           * @brief   Send the flash message to group 1.
    583           *
    584           * @param   flashTime - in milliseconds
    585           *
    586           * @return  none
    587           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    588          void SampleApp_SendFlashMessage( uint16 flashTime )
   \                     SampleApp_SendFlashMessage:
    589          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 3
   \   000005   74FD         MOV     A,#-0x3
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    590            uint8 buffer[3];
    591            buffer[0] = (uint8)(SampleAppFlashCounter++);
   \   00000A   90....       MOV     DPTR,#SampleAppFlashCounter
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   85..82       MOV     DPL,?XSP + 0
   \   000011   85..83       MOV     DPH,?XSP + 1
   \   000014   F0           MOVX    @DPTR,A
   \   000015   90....       MOV     DPTR,#SampleAppFlashCounter
   \   000018   E0           MOVX    A,@DPTR
   \   000019   04           INC     A
   \   00001A   F0           MOVX    @DPTR,A
    592            buffer[1] = LO_UINT16( flashTime );
   \   00001B   7401         MOV     A,#0x1
   \   00001D   12....       LCALL   ?XSTACK_DISP0_8
   \   000020   EA           MOV     A,R2
   \   000021   F0           MOVX    @DPTR,A
    593            buffer[2] = HI_UINT16( flashTime );
   \   000022   7402         MOV     A,#0x2
   \   000024   12....       LCALL   ?XSTACK_DISP0_8
   \   000027   EB           MOV     A,R3
   \   000028   12....       LCALL   ??Subroutine44_0 & 0xFFFF
    594          
    595            if ( AF_DataRequest( &SampleApp_Flash_DstAddr, &SampleApp_epDesc,
    596                                 SAMPLEAPP_FLASH_CLUSTERID,
    597                                 3,
    598                                 buffer,
    599                                 &SampleApp_TransID,
    600                                 AF_DISCV_ROUTE,
    601                                 AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \                     ??CrossCallReturnLabel_90:
   \   00002B   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00002E   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000031   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000034   78..         MOV     R0,#?V0 + 0
   \   000036   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000039   7403         MOV     A,#0x3
   \   00003B   12....       LCALL   ?XSTACK_DISP0_8
   \   00003E   8582..       MOV     ?V0 + 0,DPL
   \   000041   8583..       MOV     ?V0 + 1,DPH
   \   000044   78..         MOV     R0,#?V0 + 0
   \   000046   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000049   75..03       MOV     ?V0 + 0,#0x3
   \   00004C   75..00       MOV     ?V0 + 1,#0x0
   \   00004F   78..         MOV     R0,#?V0 + 0
   \   000051   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000054   75..02       MOV     ?V0 + 0,#0x2
   \   000057   78..         MOV     R0,#?V0 + 0
   \   000059   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005C   7920         MOV     R1,#0x20
   \   00005E   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000060   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000062   7A..         MOV     R2,#SampleApp_Flash_DstAddr & 0xff
   \   000064   7B..         MOV     R3,#(SampleApp_Flash_DstAddr >> 8) & 0xff
   \   000066   12....       LCALL   ??Subroutine34_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_55:
   \   000069   12....       LCALL   ?DEALLOC_XSTACK8
    602            {
    603            }
    604            else
    605            {
    606              // Error occurred in request to send.
    607            }
    608          }
   \   00006C   7403         MOV     A,#0x3
   \   00006E   02....       LJMP    ?Subroutine1 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine44_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001                ; Setup parameters for call to function AF_DataRequest
   \   000001                ; Setup parameters for call to function AF_DataRequest
   \   000001                ; Setup parameters for call to function AF_DataRequest
   \   000001                ; Setup parameters for call to function AF_DataRequest
   \   000001   75..1E       MOV     ?V0 + 0,#0x1e
   \   000004   78..         MOV     R0,#?V0 + 0
   \   000006   22           RET
    609          
    610          
    611          
    612          
    613          /*********************************************************************
    614           * Event Generation Functions
    615           */
    616          /*********************************************************************
    617           * @fn      SampleApp_HandleKeys 按键处理函数
    618           *
    619           * @brief   Handles all key events for this device.
    620           *
    621           * @param   shift - true if in shift/alt.
    622           * @param   keys - bit field for key events. Valid entries:
    623           *                 HAL_KEY_SW_2
    624           *                 HAL_KEY_SW_1
    625           *
    626           * @return  none
    627           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    628          void SampleApp_HandleKeys( uint8 shift, uint8 keys )
   \                     SampleApp_HandleKeys:
    629          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 2,R2
    630            (void)shift;  // Intentionally unreferenced parameter
    631          
    632            if ( keys & HAL_KEY_SW_1 )
    633            {
    634              /* This key sends the Flash Command is sent to Group 1.
    635              * This device will not receive the Flash Command from this
    636              * device (even if it belongs to group 1).
    637              */
    638              //SampleApp_SendFlashMessage( SAMPLEAPP_FLASH_DURATION );
    639            }
    640          
    641            if ( keys & HAL_KEY_SW_2 )
   \   000007   EA           MOV     A,R2
   \   000008   A2E1         MOV     C,0xE0 /* A   */.1
   \   00000A   5024         JNC     ??SampleApp_HandleKeys_0
    642            {
    643              /* The Flashr Command is sent to Group 1.
    644              * This key toggles this device in and out of group 1.
    645              * If this device doesn't belong to group 1, this application
    646              * will not receive the Flash command sent to group 1.
    647              */
    648              aps_Group_t *grp;
    649              grp = aps_FindGroup( SAMPLEAPP_ENDPOINT, SAMPLEAPP_FLASH_GROUP );
    650              if ( grp )
   \   00000C                ; Setup parameters for call to function aps_FindGroup
   \   00000C   7A02         MOV     R2,#0x2
   \   00000E   7B00         MOV     R3,#0x0
   \   000010   7914         MOV     R1,#0x14
   \   000012   12....       LCALL   ??aps_FindGroup?relay
   \   000015   8B..         MOV     ?V0 + 1,R3
   \   000017   EA           MOV     A,R2
   \   000018   45..         ORL     A,?V0 + 1
   \   00001A   600B         JZ      ??SampleApp_HandleKeys_1
    651              {
    652                // Remove from the group
    653                aps_RemoveGroup( SAMPLEAPP_ENDPOINT, SAMPLEAPP_FLASH_GROUP );
   \   00001C                ; Setup parameters for call to function aps_RemoveGroup
   \   00001C   7A02         MOV     R2,#0x2
   \   00001E   7B00         MOV     R3,#0x0
   \   000020   7914         MOV     R1,#0x14
   \   000022   12....       LCALL   ??aps_RemoveGroup?relay
   \   000025   8009         SJMP    ??SampleApp_HandleKeys_0
    654              }
    655              else
    656              {
    657                // Add to the flash group
    658                aps_AddGroup( SAMPLEAPP_ENDPOINT, &SampleApp_Group );
   \                     ??SampleApp_HandleKeys_1:
   \   000027                ; Setup parameters for call to function aps_AddGroup
   \   000027   7A..         MOV     R2,#SampleApp_Group & 0xff
   \   000029   7B..         MOV     R3,#(SampleApp_Group >> 8) & 0xff
   \   00002B   7914         MOV     R1,#0x14
   \   00002D   12....       LCALL   ??aps_AddGroup?relay
    659              }
    660            }
    661            //判断按键S2按下，发送数据到串口
    662            if ( keys & HAL_KEY_SW_6 )
   \                     ??SampleApp_HandleKeys_0:
   \   000030   E5..         MOV     A,?V0 + 2
   \   000032   A2E5         MOV     C,0xE0 /* A   */.5
   \   000034   4003         JC      $+5
   \   000036   02....       LJMP    ??SampleApp_HandleKeys_2 & 0xFFFF
    663            {
    664              int self_addr_10 = NLME_GetShortAddr();
   \   000039                ; Setup parameters for call to function NLME_GetShortAddr
   \   000039   12....       LCALL   ??NLME_GetShortAddr?relay
    665              int neig_addr_10;
                         ^
Warning[Pe177]: variable "neig_addr_10" was declared but never referenced
    666              uchar Self_ADDR[4]; //16进制地址格式
                           ^
Warning[Pe177]: variable "Self_ADDR" was declared but never referenced
    667              uchar Neig_ADDR[4];
                           ^
Warning[Pe177]: variable "Neig_ADDR" was declared but never referenced
    668              uchar Num[2];
                           ^
Warning[Pe177]: variable "Num" was declared but never referenced
    669          
    670              //串口输出自身地址
    671          //    HalUARTWrite(0,"自身地址为: 0x",strlen("自身地址为: 0x"));
    672          //    if(self_addr_10 == 0)
    673          //    {
    674          //      HalUARTWrite(0,"0000",4);
    675          //      HalUARTWrite(0,"\n",1);
    676          //    }
    677          //    else
    678          //    {
    679          //      sprintf((char*)Self_ADDR, "%X", self_addr_10); //10进制整型转换成16进制字符串
    680          //
    681          //      for (int i=0;i<4;++i)
    682          //      {
    683          //        HalUARTWrite(0,&Self_ADDR[i],1);
    684          //      }
    685          //      HalUARTWrite(0,"\n",1);
    686          //    }
    687          
    688              //串口输出源数据
    689              HalUARTWrite(0,"源数据是: ",strlen("源数据是: "));
   \   00003C                ; Setup parameters for call to function HalUARTWrite
   \   00003C   7C0A         MOV     R4,#0xa
   \   00003E   7D00         MOV     R5,#0x0
   \   000040   7A..         MOV     R2,#`?<Constant "\\324\\264\\312\\375\\276\\335\\312\\307: ` & 0xff
   \   000042   7B..         MOV     R3,#(`?<Constant "\\324\\264\\312\\375\\276\\335\\312\\307: ` >> 8) & 0xff
   \   000044   7900         MOV     R1,#0x0
   \   000046   12....       LCALL   ??HalUARTWrite?relay
    690              Show_Bit(SOURCE_DATA,8);
   \   000049                ; Setup parameters for call to function Show_Bit
   \   000049   7A08         MOV     R2,#0x8
   \   00004B   90....       MOV     DPTR,#SOURCE_DATA
   \   00004E   12....       LCALL   ??Subroutine37_0 & 0xFFFF
    691              for(short p=1;p<6;++p)
   \                     ??CrossCallReturnLabel_65:
   \   000051   7E01         MOV     R6,#0x1
   \   000053   7F00         MOV     R7,#0x0
    692              {
    693                Show_Bit(DATA_SLOT[p].data, 8);
   \                     ??SampleApp_HandleKeys_3:
   \   000055   8E..         MOV     ?V0 + 0,R6
   \   000057   8F..         MOV     ?V0 + 1,R7
   \   000059   7402         MOV     A,#0x2
   \   00005B   78..         MOV     R0,#?V0 + 0
   \   00005D   12....       LCALL   ?S_SHL
   \   000060   74..         MOV     A,#DATA_SLOT & 0xff
   \   000062   25..         ADD     A,?V0 + 0
   \   000064   F5..         MOV     ?V0 + 0,A
   \   000066   74..         MOV     A,#(DATA_SLOT >> 8) & 0xff
   \   000068   35..         ADDC    A,?V0 + 1
   \   00006A   F5..         MOV     ?V0 + 1,A
   \   00006C                ; Setup parameters for call to function Show_Bit
   \   00006C   7A08         MOV     R2,#0x8
   \   00006E   85..82       MOV     DPL,?V0 + 0
   \   000071   F583         MOV     DPH,A
   \   000073   12....       LCALL   ??Subroutine37_0 & 0xFFFF
    694                HalUARTWrite(0,"码字信息: ",strlen("码字信息: "));
   \                     ??CrossCallReturnLabel_66:
   \   000076                ; Setup parameters for call to function HalUARTWrite
   \   000076   7C0A         MOV     R4,#0xa
   \   000078   7D00         MOV     R5,#0x0
   \   00007A   7A..         MOV     R2,#`?<Constant "\\302\\353\\327\\326\\320\\305\\317\\242: ` & 0xff
   \   00007C   7B..         MOV     R3,#(`?<Constant "\\302\\353\\327\\326\\320\\305\\317\\242: ` >> 8) & 0xff
   \   00007E   7900         MOV     R1,#0x0
   \   000080   12....       LCALL   ??HalUARTWrite?relay
    695                Show_Bit(DATA_SLOT[p].Degree_ID, 16);
   \   000083                ; Setup parameters for call to function Show_Bit
   \   000083   7A10         MOV     R2,#0x10
   \   000085   85..82       MOV     DPL,?V0 + 0
   \   000088   85..83       MOV     DPH,?V0 + 1
   \   00008B   A3           INC     DPTR
   \   00008C   12....       LCALL   ?Subroutine17 & 0xFFFF
    696              }
   \                     ??CrossCallReturnLabel_63:
   \   00008F   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_81:
   \   000092   40C1         JC      ??SampleApp_HandleKeys_3
    697              
    698              HalUARTWrite(0,"邻居个数:",5);
   \   000094                ; Setup parameters for call to function HalUARTWrite
   \   000094   7C05         MOV     R4,#0x5
   \   000096   7D00         MOV     R5,#0x0
   \   000098   7A..         MOV     R2,#`?<Constant "\\301\\332\\276\\323\\270\\366\\312\\375:"` & 0xff
   \   00009A   7B..         MOV     R3,#(`?<Constant "\\301\\332\\276\\323\\270\\366\\312\\375:"` >> 8) & 0xff
   \   00009C   7900         MOV     R1,#0x0
   \   00009E   12....       LCALL   ??HalUARTWrite?relay
    699              uint8 nei_N = 0;
   \   0000A1   7900         MOV     R1,#0x0
    700              for(int num_nei=0;num_nei<3;++num_nei)
   \   0000A3   7A00         MOV     R2,#0x0
   \   0000A5   7B00         MOV     R3,#0x0
    701              {
    702                if(Nei_Table[num_nei] != (uint16)65534)
   \                     ??SampleApp_HandleKeys_4:
   \   0000A7   EA           MOV     A,R2
   \   0000A8   FC           MOV     R4,A
   \   0000A9   EB           MOV     A,R3
   \   0000AA   FD           MOV     R5,A
   \   0000AB   EC           MOV     A,R4
   \   0000AC   C3           CLR     C
   \   0000AD   33           RLC     A
   \   0000AE   FC           MOV     R4,A
   \   0000AF   ED           MOV     A,R5
   \   0000B0   33           RLC     A
   \   0000B1   FD           MOV     R5,A
   \   0000B2   74..         MOV     A,#Nei_Table & 0xff
   \   0000B4   2C           ADD     A,R4
   \   0000B5   F582         MOV     DPL,A
   \   0000B7   74..         MOV     A,#(Nei_Table >> 8) & 0xff
   \   0000B9   3D           ADDC    A,R5
   \   0000BA   F583         MOV     DPH,A
   \   0000BC   E0           MOVX    A,@DPTR
   \   0000BD   64FE         XRL     A,#0xfe
   \   0000BF   7003         JNZ     ??SampleApp_HandleKeys_5
   \   0000C1   A3           INC     DPTR
   \   0000C2   E0           MOVX    A,@DPTR
   \   0000C3   F4           CPL     A
   \                     ??SampleApp_HandleKeys_5:
   \   0000C4   6001         JZ      ??SampleApp_HandleKeys_6
    703                  nei_N++;
   \   0000C6   09           INC     R1
    704              }
   \                     ??SampleApp_HandleKeys_6:
   \   0000C7   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_18:
   \   0000CA   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_83:
   \   0000CD   40D8         JC      ??SampleApp_HandleKeys_4
    705              Show_Bit(nei_N, 8);
   \   0000CF                ; Setup parameters for call to function Show_Bit
   \   0000CF   7A08         MOV     R2,#0x8
   \   0000D1   12....       LCALL   ??Show_Bit?relay
    706              //串口输出所有邻居地址
    707          //    for(int i=0;i<3;++i)
    708          //    {
    709          //      neig_addr_10 = Nei_Table[i];
    710          //
    711          //      sprintf((char*)Num, "%d", i+1);
    712          //      sprintf((char*)Neig_ADDR, "%X", neig_addr_10);
    713          //      HalUARTWrite(0,"邻居",strlen("邻居"));
    714          //      for (int j=0;j<2;++j)
    715          //      {
    716          //        HalUARTWrite(0,&Num[j],1);
    717          //      }
    718          //
    719          //      HalUARTWrite(0,": 0x",strlen(": 0x"));
    720          //
    721          //      if(neig_addr_10 == 0)
    722          //      {
    723          //        HalUARTWrite(0,"0000",4);
    724          //      }
    725          //      else
    726          //      {
    727          //        for (int j=0;j<4;++j)
    728          //        {
    729          //          HalUARTWrite(0,&Neig_ADDR[j],1);
    730          //        }
    731          //      }
    732          //      HalUARTWrite(0,"\n",1);
    733          //    }
    734          
    735          //    HalLedBlink( HAL_LED_3, 2,50, 500 ); //LED3 闪烁提示
    736            }
    737          }
   \                     ??SampleApp_HandleKeys_2:
   \   0000D4   7F03         MOV     R7,#0x3
   \   0000D6   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine17:
   \   000000   A3           INC     DPTR
   \   000001                REQUIRE ??Subroutine37_0
   \   000001                ; // Fall through to label ??Subroutine37_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine37_0:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F9           MOV     R1,A
   \   000002   12....       LCALL   ??Show_Bit?relay
   \   000005   22           RET
    738          
    739          
    740          
    741          
    742          
    743          /*自行定义的 处理串口发来数据包 的函数*/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    744          void SampleApp_SerialCMD(mtOSALSerialData_t *cmdMsg)
   \                     SampleApp_SerialCMD:
    745          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
    746              uint8 i,len,*str=NULL; //len 有用数据长度
    747              str=cmdMsg->msg; //指向数据开头
   \   000005   8A82         MOV     DPL,R2
   \   000007   8B83         MOV     DPH,R3
   \   000009   A3           INC     DPTR
   \   00000A   A3           INC     DPTR
   \   00000B   E0           MOVX    A,@DPTR
   \   00000C   FE           MOV     R6,A
   \   00000D   A3           INC     DPTR
   \   00000E   E0           MOVX    A,@DPTR
   \   00000F   FF           MOV     R7,A
    748              len=*str; //msg 里的第 1 个字节代表后面的数据长度
   \   000010   8E82         MOV     DPL,R6
   \   000012   8F83         MOV     DPH,R7
   \   000014   E0           MOVX    A,@DPTR
   \   000015   F5..         MOV     ?V0 + 0,A
    749              /********打印出串口接收到的数据，用于提示*********/
    750              HalUARTWrite(0,"我说: ",strlen("我说: "));
   \   000017                ; Setup parameters for call to function HalUARTWrite
   \   000017   7C06         MOV     R4,#0x6
   \   000019   7D00         MOV     R5,#0x0
   \   00001B   7A..         MOV     R2,#`?<Constant "\\316\\322\\313\\265: ">` & 0xff
   \   00001D   7B..         MOV     R3,#(`?<Constant "\\316\\322\\313\\265: ">` >> 8) & 0xff
   \   00001F   7900         MOV     R1,#0x0
   \   000021   12....       LCALL   ??HalUARTWrite?relay
    751              for(i=1;i<=len;i++)
   \   000024   75..01       MOV     ?V0 + 1,#0x1
   \   000027   800D         SJMP    ??SampleApp_SerialCMD_0
    752              {
    753                HalUARTWrite(0,str+i,1);
   \                     ??SampleApp_SerialCMD_1:
   \   000029                ; Setup parameters for call to function HalUARTWrite
   \   000029   85....       MOV     ?V0 + 2,?V0 + 1
   \   00002C   EE           MOV     A,R6
   \   00002D   25..         ADD     A,?V0 + 2
   \   00002F   FA           MOV     R2,A
   \   000030   EF           MOV     A,R7
   \   000031   12....       LCALL   ?Subroutine9 & 0xFFFF
    754              }
   \                     ??CrossCallReturnLabel_16:
   \   000034   05..         INC     ?V0 + 1
   \                     ??SampleApp_SerialCMD_0:
   \   000036   E5..         MOV     A,?V0 + 0
   \   000038   C3           CLR     C
   \   000039   95..         SUBB    A,?V0 + 1
   \   00003B   7C01         MOV     R4,#0x1
   \   00003D   7D00         MOV     R5,#0x0
   \   00003F   50E8         JNC     ??SampleApp_SerialCMD_1
    755          
    756              HalUARTWrite(0,"\n",1 );//换行
   \   000041                ; Setup parameters for call to function HalUARTWrite
   \   000041   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000043   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   000045   7900         MOV     R1,#0x0
   \   000047   12....       LCALL   ??HalUARTWrite?relay
    757          
    758          
    759              //模拟异或操作
    760          //    int8 A[] = {'1','0','0','0','0','0','0','1'};
    761          //    unsigned char One = '1',Zero = '0';
    762          //    for (i=0;i<8;++i)
    763          //    {
    764          //      if(A[i]-*(str+i+1))
    765          //      {
    766          //        HalUARTWrite(0,&One,1);
    767          //        *(str+1+i) = One;
    768          //      }
    769          //      else
    770          //      {
    771          //        HalUARTWrite(0,&Zero,1);
    772          //        *(str+1+i) = Zero;
    773          //      }
    774          //
    775          //    }
    776          //
    777          
    778          
    779          
    780          //
    781          
    782          
    783          //    /*******发送出去***参考网蜂 1 小时无线数据传输教程*********/
    784          //    if ( AF_DataRequest( &SampleApp_Periodic_DstAddr, &SampleApp_epDesc,
    785          //                        SAMPLEAPP_COM_CLUSTERID,//自己定义一个
    786          //                        len+1, // 数据长度
    787          //                        str, //数据内容
    788          //                        &SampleApp_TransID,
    789          //                        AF_DISCV_ROUTE,
    790          //                        AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
    791          //    {
    792          //    }
    793          //
    794          //
    795          //    else
    796          //    {
    797          //        // Error occurred in request to send.
    798          //    }
    799          }
   \   00004A   02....       LJMP    ??Subroutine33_0 & 0xFFFF
    800          
    801          
    802          
    803          
    804          
    805          
    806          
    807          /*********************************************************************
    808           * LOCAL FUNCTIONS
    809           */
    810          
    811          /*********************************************************************
    812           * @fn      SampleApp_MessageMSGCB  接收函数
    813           *
    814           *          处理接收到的数据,可能是从其他设备收到的数据.
    815           *
    816           * @brief   Data message processor callback.  This function processes
    817           *          any incoming data - probably from other devices.  So, based
    818           *          on cluster ID, perform the intended action.
    819           * @param   none
    820           *
    821           * @return  none
    822           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    823          void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pkt )
   \                     SampleApp_MessageMSGCB:
    824          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 13
   \   000005   74F3         MOV     A,#-0xd
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    825            uint16 flashTime=1000;//一秒,1000ms
    826            uint8 i,len; //透传
    827            unsigned short neighbor_addr_10 = pkt->srcAddr.addr.shortAddr;  //发送方的数字地址
   \   00000E   8E82         MOV     DPL,R6
   \   000010   8F83         MOV     DPH,R7
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   A3           INC     DPTR
   \   000015   A3           INC     DPTR
   \   000016   A3           INC     DPTR
   \   000017   A3           INC     DPTR
   \   000018   E0           MOVX    A,@DPTR
   \   000019   F5..         MOV     ?V0 + 6,A
   \   00001B   A3           INC     DPTR
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   F5..         MOV     ?V0 + 7,A
    828            unsigned char ADDR[4]; //数字地址转换后的字符地址
    829            int8 LOST_nei = 0;
   \   00001F   75..00       MOV     ?V0 + 2,#0x0
    830            uchar active;
    831            
    832            uchar BUSY[4] = "####";
   \   000022   7409         MOV     A,#0x9
   \   000024   12....       LCALL   ?XSTACK_DISP0_8
   \   000027   AC82         MOV     R4,DPL
   \   000029   AD83         MOV     R5,DPH
   \   00002B   7583..       MOV     DPH,#(`?<Constant "####">` >> 8) & 0xff
   \   00002E   7582..       MOV     DPL,#`?<Constant "####">` & 0xff
   \   000031   7404         MOV     A,#0x4
   \   000033   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    833            uint8 Peer_data; //对方数据
    834            int16 Peer_info; //对方码字信息
    835            uint8 Self_data; //己方数据
    836            int16 Self_info; //己方码字信息
    837            int8 degree_low; //码字信息低位
    838            int8 degree_high;//码字信息高位
    839            switch ( pkt->clusterId )
   \   000036   8E82         MOV     DPL,R6
   \   000038   8F83         MOV     DPH,R7
   \   00003A   A3           INC     DPTR
   \   00003B   A3           INC     DPTR
   \   00003C   A3           INC     DPTR
   \   00003D   A3           INC     DPTR
   \   00003E   E0           MOVX    A,@DPTR
   \   00003F   F5..         MOV     ?V0 + 0,A
   \   000041   A3           INC     DPTR
   \   000042   E0           MOVX    A,@DPTR
   \   000043   F5..         MOV     ?V0 + 1,A
   \   000045   78..         MOV     R0,#?V0 + 0
   \   000047   12....       LCALL   ?US_SWITCH_DENSE
   \                     `?<Jumptable for SampleApp_MessageMSGCB>_0`:
   \   00004A   0200         DW        2
   \   00004C   02           DB        2
   \   00004D   ....         DW        ??SampleApp_MessageMSGCB_0
   \   00004F   ....         DW        ??SampleApp_MessageMSGCB_1
   \   000051   ....         DW        ??SampleApp_MessageMSGCB_2
   \   000053   ....         DW        ??SampleApp_MessageMSGCB_3
    840            {
    841          
    842              /*************************收到 点对点 消息********************************/
    843            case SAMPLEAPP_POINT_TO_POINT_CLUSTERID:
    844              //收到重置信号
    845              if(pkt->cmd.Data[0] == '!')
   \                     ??SampleApp_MessageMSGCB_3:
   \   000055   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_0:
   \   000058   6421         XRL     A,#0x21
   \   00005A   7010         JNZ     ??SampleApp_MessageMSGCB_4
    846              {
    847                HalUARTWrite(0,"重置中...",strlen("重置中..."));
   \   00005C                ; Setup parameters for call to function HalUARTWrite
   \   00005C   7C09         MOV     R4,#0x9
   \   00005E   7D00         MOV     R5,#0x0
   \   000060   7A..         MOV     R2,#`?<Constant "\\326\\330\\326\\303\\326\\320...">` & 0xff
   \   000062   7B..         MOV     R3,#(`?<Constant "\\326\\330\\326\\303\\326\\320...">` >> 8) & 0xff
   \   000064   7900         MOV     R1,#0x0
   \   000066   12....       LCALL   ??HalUARTWrite?relay
    848                SystemResetSoft();
   \   000069                ; Setup parameters for call to function Onboard_soft_reset
   \   000069   12....       LCALL   Onboard_soft_reset & 0xFFFF
    849              }
    850          
    851              HalUARTWrite(0, "收到点对点消息: ", strlen("收到点对点消息: "));  //给串口发送提示
   \                     ??SampleApp_MessageMSGCB_4:
   \   00006C                ; Setup parameters for call to function HalUARTWrite
   \   00006C   7C10         MOV     R4,#0x10
   \   00006E   7D00         MOV     R5,#0x0
   \   000070   7A..         MOV     R2,#`?<Constant "\\312\\325\\265\\275\\265\\343\\266\\324\\2` & 0xff
   \   000072   7B..         MOV     R3,#(`?<Constant "\\312\\325\\265\\275\\265\\343\\266\\324\\2` >> 8) & 0xff
   \   000074   7900         MOV     R1,#0x0
   \   000076   12....       LCALL   ??HalUARTWrite?relay
    852              HalUARTWrite(0, &pkt->cmd.Data[0], 1); // 打印收到数据
   \   000079   EE           MOV     A,R6
   \   00007A   2422         ADD     A,#0x22
   \   00007C   F5..         MOV     ?V0 + 0,A
   \   00007E   EF           MOV     A,R7
   \   00007F   3400         ADDC    A,#0x0
   \   000081   F5..         MOV     ?V0 + 1,A
   \   000083                ; Setup parameters for call to function HalUARTWrite
   \   000083   7C01         MOV     R4,#0x1
   \   000085   7D00         MOV     R5,#0x0
   \   000087   85..82       MOV     DPL,?V0 + 0
   \   00008A   F583         MOV     DPH,A
   \   00008C   12....       LCALL   ??Subroutine36_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_59:
   \   00008F   7900         MOV     R1,#0x0
   \   000091   12....       LCALL   ??HalUARTWrite?relay
    853              Show_Bit(pkt->cmd.Data[1],8);
   \   000094                ; Setup parameters for call to function Show_Bit
   \   000094   7A08         MOV     R2,#0x8
   \   000096   85..82       MOV     DPL,?V0 + 0
   \   000099   85..83       MOV     DPH,?V0 + 1
   \   00009C   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_78:
   \   00009F   12....       LCALL   ?Subroutine17 & 0xFFFF
    854          
    855              sprintf((char*)ADDR, "%X", neighbor_addr_10);
   \                     ??CrossCallReturnLabel_64:
   \   0000A2                ; Setup parameters for call to function sprintf
   \   0000A2   78..         MOV     R0,#?V0 + 6
   \   0000A4   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000A7   7C..         MOV     R4,#`?<Constant "%X">` & 0xff
   \   0000A9   7D..         MOV     R5,#(`?<Constant "%X">` >> 8) & 0xff
   \   0000AB   7407         MOV     A,#0x7
   \   0000AD   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B0   AA82         MOV     R2,DPL
   \   0000B2   AB83         MOV     R3,DPH
   \   0000B4   12....       LCALL   ??sprintf?relay
   \   0000B7   7402         MOV     A,#0x2
   \   0000B9   12....       LCALL   ?DEALLOC_XSTACK8
    856              HalUARTWrite(0," from ",6);
   \   0000BC                ; Setup parameters for call to function HalUARTWrite
   \   0000BC   7C06         MOV     R4,#0x6
   \   0000BE   7D00         MOV     R5,#0x0
   \   0000C0   7A..         MOV     R2,#`?<Constant " from ">` & 0xff
   \   0000C2   7B..         MOV     R3,#(`?<Constant " from ">` >> 8) & 0xff
   \   0000C4   7900         MOV     R1,#0x0
   \   0000C6   12....       LCALL   ??HalUARTWrite?relay
    857              HalUARTWrite(0,ADDR,4);
   \   0000C9                ; Setup parameters for call to function HalUARTWrite
   \   0000C9   7C04         MOV     R4,#0x4
   \   0000CB   7D00         MOV     R5,#0x0
   \   0000CD   7405         MOV     A,#0x5
   \   0000CF   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D2   AA82         MOV     R2,DPL
   \   0000D4   AB83         MOV     R3,DPH
   \   0000D6   7900         MOV     R1,#0x0
   \   0000D8   12....       LCALL   ??HalUARTWrite?relay
    858              HalUARTWrite(0, "\n\n", 2); // 回车换行
   \   0000DB                ; Setup parameters for call to function HalUARTWrite
   \   0000DB   7C02         MOV     R4,#0x2
   \   0000DD   7D00         MOV     R5,#0x0
   \   0000DF   7A..         MOV     R2,#`?<Constant "\\n\\n">` & 0xff
   \   0000E1   7B..         MOV     R3,#(`?<Constant "\\n\\n">` >> 8) & 0xff
   \   0000E3   7900         MOV     R1,#0x0
   \   0000E5   12....       LCALL   ??HalUARTWrite?relay
    859          
    860              /*如果在自身已经发起交换请求的情况下,收到对方发来的交换数据包响应*/
    861              if(Waiting_Request && (neighbor_addr_10 == Exchanging_Neighbor)) 
   \   0000E8   90....       MOV     DPTR,#Waiting_Request
   \   0000EB   E0           MOVX    A,@DPTR
   \   0000EC   7003         JNZ     $+5
   \   0000EE   02....       LJMP    ??SampleApp_MessageMSGCB_5 & 0xFFFF
   \   0000F1   90....       MOV     DPTR,#Exchanging_Neighbor
   \   0000F4   E0           MOVX    A,@DPTR
   \   0000F5   65..         XRL     A,?V0 + 6
   \   0000F7   7004         JNZ     ??SampleApp_MessageMSGCB_6
   \   0000F9   A3           INC     DPTR
   \   0000FA   E0           MOVX    A,@DPTR
   \   0000FB   65..         XRL     A,?V0 + 7
   \                     ??SampleApp_MessageMSGCB_6:
   \   0000FD   6003         JZ      $+5
   \   0000FF   02....       LJMP    ??SampleApp_MessageMSGCB_7 & 0xFFFF
    862              {
    863                /*对方正忙*/
    864                if(pkt->cmd.Data[0] == '#' && pkt->cmd.Data[1] == '#' && pkt->cmd.Data[2] == '#' && pkt->cmd.Data[3] == '#')
   \   000102   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_1:
   \   000105   6423         XRL     A,#0x23
   \   000107   702D         JNZ     ??CrossCallReturnLabel_5
   \   000109   12....       LCALL   ?Subroutine24 & 0xFFFF
   \                     ??CrossCallReturnLabel_32:
   \   00010C   12....       LCALL   ??Subroutine40_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_76:
   \   00010F   A3           INC     DPTR
   \   000110   E0           MOVX    A,@DPTR
   \   000111   6423         XRL     A,#0x23
   \   000113   7021         JNZ     ??CrossCallReturnLabel_5
   \   000115   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   000118   E0           MOVX    A,@DPTR
   \   000119   6423         XRL     A,#0x23
   \   00011B   7019         JNZ     ??CrossCallReturnLabel_5
   \   00011D   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   000120   A3           INC     DPTR
   \   000121   E0           MOVX    A,@DPTR
   \   000122   6423         XRL     A,#0x23
   \   000124   7010         JNZ     ??CrossCallReturnLabel_5
    865                {
    866                  Waiting_Request = FALSE;
   \   000126   90....       MOV     DPTR,#Waiting_Request
   \   000129   E4           CLR     A
   \   00012A   F0           MOVX    @DPTR,A
    867                  HalUARTWrite(0,"peer is busy",12);
   \   00012B                ; Setup parameters for call to function HalUARTWrite
   \   00012B   7C0C         MOV     R4,#0xc
   \   00012D   FD           MOV     R5,A
   \   00012E   7A..         MOV     R2,#`?<Constant "peer is busy">` & 0xff
   \   000130   7B..         MOV     R3,#(`?<Constant "peer is busy">` >> 8) & 0xff
   \   000132   F9           MOV     R1,A
   \   000133   12....       LCALL   ?Subroutine4 & 0xFFFF
    868                  HalUARTWrite(0,"\n",1);
    869          //        SampleApp_SendPointToPointMessage(); //再次发起交换请求
    870                }
    871                /*对方正常响应*/
    872                if(!Exchange_Lock && (pkt->cmd.Data[0] == '$'))
   \                     ??CrossCallReturnLabel_5:
   \   000136   90....       MOV     DPTR,#Exchange_Lock
   \   000139   E0           MOVX    A,@DPTR
   \   00013A   6003         JZ      $+5
   \   00013C   02....       LJMP    ??SampleApp_MessageMSGCB_8 & 0xFFFF
   \   00013F   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_2:
   \   000142   6424         XRL     A,#0x24
   \   000144   6003         JZ      $+5
   \   000146   02....       LJMP    ??SampleApp_MessageMSGCB_8 & 0xFFFF
    873                {
    874                  Exchange_Lock = TRUE; //开启码字槽的锁
   \   000149   90....       MOV     DPTR,#Exchange_Lock
   \   00014C   7401         MOV     A,#0x1
   \   00014E   F0           MOVX    @DPTR,A
    875                  
    876                  Peer_data = pkt->cmd.Data[1]; //对方发来的数据
   \   00014F   85..82       MOV     DPL,?V0 + 0
   \   000152   85..83       MOV     DPH,?V0 + 1
   \   000155   12....       LCALL   ?Subroutine14 & 0xFFFF
    877                  Peer_info = pkt->cmd.Data[3]; 
    878                  Peer_info |= pkt->cmd.Data[2]<<8; //对方码字信息
    879                  //查看发来的数据包的度
    880                  uint8 Peer_degree = 0;
   \                     ??CrossCallReturnLabel_19:
   \   000158   88..         MOV     ?V0 + 3,R0
    881                  uint8 Self_included = FALSE;
   \   00015A   88..         MOV     ?V0 + 4,R0
    882                  for(short k=0;k<16;++k)
   \   00015C   88..         MOV     ?V0 + 0,R0
   \   00015E   88..         MOV     ?V0 + 1,R0
    883                  {
    884                    if(1 & Peer_info>>k)
   \                     ??SampleApp_MessageMSGCB_9:
   \   000160   8E..         MOV     ?V0 + 6,R6
   \   000162   8F..         MOV     ?V0 + 7,R7
   \   000164   E5..         MOV     A,?V0 + 0
   \   000166   78..         MOV     R0,#?V0 + 6
   \   000168   12....       LCALL   ?SS_SHR
   \   00016B   E5..         MOV     A,?V0 + 6
   \   00016D   A2E0         MOV     C,0xE0 /* A   */.0
   \   00016F   501E         JNC     ??SampleApp_MessageMSGCB_10
    885                    {
    886                      ++Peer_degree;
   \   000171   05..         INC     ?V0 + 3
    887                      if(k == Device_ID)
   \   000173   90....       MOV     DPTR,#Device_ID
   \   000176   E0           MOVX    A,@DPTR
   \   000177   65..         XRL     A,?V0 + 0
   \   000179   7002         JNZ     ??SampleApp_MessageMSGCB_11
   \   00017B   E5..         MOV     A,?V0 + 1
   \                     ??SampleApp_MessageMSGCB_11:
   \   00017D   7010         JNZ     ??SampleApp_MessageMSGCB_10
    888                      {
    889                        Self_included = TRUE; //码字包含自身的节点数据包
   \   00017F   75..01       MOV     ?V0 + 4,#0x1
    890                        HalUARTWrite(0,"包含自身信息",12);
   \   000182                ; Setup parameters for call to function HalUARTWrite
   \   000182   7C0C         MOV     R4,#0xc
   \   000184   7D00         MOV     R5,#0x0
   \   000186   7A..         MOV     R2,#`?<Constant "\\260\\374\\272\\254\\327\\324\\311\\355\\3` & 0xff
   \   000188   7B..         MOV     R3,#(`?<Constant "\\260\\374\\272\\254\\327\\324\\311\\355\\3` >> 8) & 0xff
   \   00018A   7900         MOV     R1,#0x0
   \   00018C   12....       LCALL   ??HalUARTWrite?relay
    891                      }
    892                      
    893                    }
    894                  }
   \                     ??SampleApp_MessageMSGCB_10:
   \   00018F   12....       LCALL   ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_30:
   \   000192   C3           CLR     C
   \   000193   E5..         MOV     A,?V0 + 0
   \   000195   9410         SUBB    A,#0x10
   \   000197   E5..         MOV     A,?V0 + 1
   \   000199   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_84:
   \   00019C   40C2         JC      ??SampleApp_MessageMSGCB_9
    895                  //判断是否符合编码条件,不包含自身的数据包,且度不大于最大允许的度
    896                  if(!Self_included && (Peer_degree < MAX_Degree))
   \   00019E   E5..         MOV     A,?V0 + 4
   \   0001A0   A2E0         MOV     C,0xE0 /* A   */.0
   \   0001A2   400D         JC      ??SampleApp_MessageMSGCB_12
   \   0001A4   85....       MOV     ?V0 + 0,?V0 + 3
   \   0001A7   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_23:
   \   0001AA   5005         JNC     ??SampleApp_MessageMSGCB_12
    897                  {
    898                    Peer_data ^= DATA_SLOT[0].data; //异或编码
   \   0001AC   12....       LCALL   ?Subroutine15 & 0xFFFF
    899                    Peer_info &= Device_ID; //码字信息中添加自身的设备ID
    900                    HalUARTWrite(0,"已编码\n编码后的值是:",strlen("已编码\n编码后的值是:"));
    901                    Show_Bit(Peer_data, 8);
    902                  }
   \                     ??CrossCallReturnLabel_21:
   \   0001AF   8008         SJMP    ??SampleApp_MessageMSGCB_13
    903                  else
    904                  {
    905                    HalUARTWrite(0,"未编码\n对方的值是:",strlen("未编码\n对方的值是:"));
   \                     ??SampleApp_MessageMSGCB_12:
   \   0001B1                ; Setup parameters for call to function HalUARTWrite
   \   0001B1   7C12         MOV     R4,#0x12
   \   0001B3   7D00         MOV     R5,#0x0
   \   0001B5   7A..         MOV     R2,#`?<Constant "\\316\\264\\261\\340\\302\\353\\n\\266\\324` & 0xff
   \   0001B7   7B..         MOV     R3,#(`?<Constant "\\316\\264\\261\\340\\302\\353\\n\\266\\324` >> 8) & 0xff
    906                    Show_Bit(Peer_data, 8);
    907                  }
   \                     ??SampleApp_MessageMSGCB_13:
   \   0001B9   12....       LCALL   ?Subroutine6 & 0xFFFF
    908                  Show_Num8(Peer_degree);
   \                     ??CrossCallReturnLabel_9:
   \   0001BC                ; Setup parameters for call to function Show_Num8
   \   0001BC   A9..         MOV     R1,?V0 + 3
   \   0001BE   12....       LCALL   ??Show_Num8?relay
    909                  DATA_SLOT[Exchange_index].data = Peer_data; //对应位置替换为对方的码字
   \   0001C1   90....       MOV     DPTR,#Exchange_index
   \   0001C4   E0           MOVX    A,@DPTR
   \   0001C5   F5..         MOV     ?V0 + 0,A
   \   0001C7   75..00       MOV     ?V0 + 1,#0x0
   \   0001CA   02....       LJMP    ??SampleApp_MessageMSGCB_14 & 0xFFFF
    910                  DATA_SLOT[Exchange_index].Degree_ID = Peer_info; //记录码字信息
    911                  
    912                  
    913                  Exchange_Lock = FALSE; //关闭码字槽的锁
    914                }
    915                
    916                
    917                
    918                
    919                
    920              }
   \                     ??SampleApp_MessageMSGCB_7:
   \   0001CD   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_3:
   \   0001D0   642A         XRL     A,#0x2a
   \   0001D2   7047         JNZ     ??SampleApp_MessageMSGCB_5
    921          
    922              /*在等待对方返回交换数据包的过程中收到其他节点的交换请求*/
    923              else if(Waiting_Request && (neighbor_addr_10 != Exchanging_Neighbor) && (pkt->cmd.Data[0] == '*')) 
    924              {
    925                /*返回正忙信号 "####" */ 
    926                Point_To_Point_DstAddr.addr.shortAddr = neighbor_addr_10;
   \   0001D4   12....       LCALL   ?Subroutine12 & 0xFFFF
    927                if(AF_DataRequest( &Point_To_Point_DstAddr, //点对点通信方式目标地址
    928                                  &SampleApp_epDesc,
    929                                  SAMPLEAPP_POINT_TO_POINT_CLUSTERID, //点对点簇ID
    930                                  4,
    931                                  BUSY,
    932                                  &SampleApp_TransID,
    933                                  AF_DISCV_ROUTE,
    934                                  AF_DEFAULT_RADIUS )== afStatus_SUCCESS )
   \                     ??CrossCallReturnLabel_88:
   \   0001D7   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001DA   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   0001DD   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   0001E0   78..         MOV     R0,#?V0 + 0
   \   0001E2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001E5   740C         MOV     A,#0xc
   \   0001E7   12....       LCALL   ?XSTACK_DISP0_8
   \   0001EA   8582..       MOV     ?V0 + 0,DPL
   \   0001ED   8583..       MOV     ?V0 + 1,DPH
   \   0001F0   78..         MOV     R0,#?V0 + 0
   \   0001F2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001F5   75..04       MOV     ?V0 + 0,#0x4
   \   0001F8   75..00       MOV     ?V0 + 1,#0x0
   \   0001FB   78..         MOV     R0,#?V0 + 0
   \   0001FD   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000200   78..         MOV     R0,#?V0 + 0
   \   000202   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000205   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_49:
   \   000208   12....       LCALL   ?DEALLOC_XSTACK8
    935                {
    936                }
    937                else
    938                {
    939                }
    940                HalUARTWrite(0,"i am busy!\n",strlen("i am busy!\n"));
   \   00020B                ; Setup parameters for call to function HalUARTWrite
   \   00020B   7C0B         MOV     R4,#0xb
   \   00020D   7D00         MOV     R5,#0x0
   \   00020F   7A..         MOV     R2,#`?<Constant "i am busy!\\n">` & 0xff
   \   000211   7B..         MOV     R3,#(`?<Constant "i am busy!\\n">` >> 8) & 0xff
   \   000213   7900         MOV     R1,#0x0
   \   000215   12....       LCALL   ??HalUARTWrite?relay
   \   000218   02....       LJMP    ??SampleApp_MessageMSGCB_8 & 0xFFFF
    941                
    942              }
    943          
    944              /*如果收到对方发来的交换数据包请求*/
    945              else if(!Exchange_Lock)
   \                     ??SampleApp_MessageMSGCB_5:
   \   00021B   90....       MOV     DPTR,#Exchange_Lock
   \   00021E   E0           MOVX    A,@DPTR
   \   00021F   6003         JZ      $+5
   \   000221   02....       LJMP    ??SampleApp_MessageMSGCB_8 & 0xFFFF
    946              {
    947                Exchange_Lock = TRUE; //开启码字槽的锁
   \   000224   7401         MOV     A,#0x1
   \   000226   F0           MOVX    @DPTR,A
    948                /*挑选自身随机的数据包发送给对方*/
    949                srand((int)osal_getClock());
   \   000227                ; Setup parameters for call to function srand
   \   000227                ; Setup parameters for call to function osal_getClock
   \   000227   12....       LCALL   ??osal_getClock?relay
   \   00022A   12....       LCALL   ??srand?relay
    950                Exchange_index = random(5)+1;//挑选随机交换码字
   \   00022D                ; Setup parameters for call to function rand
   \   00022D   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_34:
   \   000230   12....       LCALL   ?S_DIV_MOD
   \   000233   EA           MOV     A,R2
   \   000234   04           INC     A
   \   000235   90....       MOV     DPTR,#Exchange_index
   \   000238   F0           MOVX    @DPTR,A
    951                Self_data = DATA_SLOT[Exchange_index].data; //即将交换的码字
   \   000239   F5..         MOV     ?V0 + 0,A
   \   00023B   75..00       MOV     ?V0 + 1,#0x0
   \   00023E   7402         MOV     A,#0x2
   \   000240   78..         MOV     R0,#?V0 + 0
   \   000242   12....       LCALL   ?S_SHL
   \   000245   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_28:
   \   000248   E0           MOVX    A,@DPTR
   \   000249   FA           MOV     R2,A
    952                Self_info = DATA_SLOT[Exchange_index].Degree_ID; //码字信息
   \   00024A   A3           INC     DPTR
   \   00024B   A3           INC     DPTR
   \   00024C   E0           MOVX    A,@DPTR
   \   00024D   F8           MOV     R0,A
    953                degree_high = (uint8)Self_info>>8;
    954                degree_low = (uint8)Self_info;
    955                //发送
    956                uint8 _DATA[4] = {'$', Self_data, degree_high, degree_low};
   \   00024E   7401         MOV     A,#0x1
   \   000250   12....       LCALL   ?XSTACK_DISP0_8
   \   000253   AC82         MOV     R4,DPL
   \   000255   AD83         MOV     R5,DPH
   \   000257   7583..       MOV     DPH,#(`?<Constant {36, 0, 0, 0}>` >> 8) & 0xff
   \   00025A   7582..       MOV     DPL,#`?<Constant {36, 0, 0, 0}>` & 0xff
   \   00025D   7404         MOV     A,#0x4
   \   00025F   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   \   000262   7402         MOV     A,#0x2
   \   000264   12....       LCALL   ?XSTACK_DISP0_8
   \   000267   EA           MOV     A,R2
   \   000268   F0           MOVX    @DPTR,A
   \   000269   7403         MOV     A,#0x3
   \   00026B   12....       LCALL   ?XSTACK_DISP0_8
   \   00026E   E4           CLR     A
   \   00026F   F0           MOVX    @DPTR,A
   \   000270   7404         MOV     A,#0x4
   \   000272   12....       LCALL   ?XSTACK_DISP0_8
   \   000275   E8           MOV     A,R0
   \   000276   F0           MOVX    @DPTR,A
    957                Point_To_Point_DstAddr.addr.shortAddr = neighbor_addr_10;
   \   000277   12....       LCALL   ?Subroutine12 & 0xFFFF
    958                if(AF_DataRequest( &Point_To_Point_DstAddr, //点对点通信方式目标地址
    959                                  &SampleApp_epDesc,
    960                                  SAMPLEAPP_POINT_TO_POINT_CLUSTERID, //点对点簇ID
    961                                  4,
    962                                  _DATA,
    963                                  &SampleApp_TransID,
    964                                  AF_DISCV_ROUTE,
    965                                  AF_DEFAULT_RADIUS )== afStatus_SUCCESS )
   \                     ??CrossCallReturnLabel_89:
   \   00027A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00027D   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000280   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000283   78..         MOV     R0,#?V0 + 0
   \   000285   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000288   7404         MOV     A,#0x4
   \   00028A   12....       LCALL   ?XSTACK_DISP0_8
   \   00028D   8582..       MOV     ?V0 + 0,DPL
   \   000290   8583..       MOV     ?V0 + 1,DPH
   \   000293   78..         MOV     R0,#?V0 + 0
   \   000295   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000298   75..04       MOV     ?V0 + 0,#0x4
   \   00029B   75..00       MOV     ?V0 + 1,#0x0
   \   00029E   78..         MOV     R0,#?V0 + 0
   \   0002A0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0002A3   78..         MOV     R0,#?V0 + 0
   \   0002A5   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0002A8   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_50:
   \   0002AB   12....       LCALL   ?DEALLOC_XSTACK8
    966                {
    967                }
    968                else
    969                {
    970                }
    971                
    972                /*将对方发来的数据包和自身随机挑选的数据包编码 <先判断是否需要编码> */
    973                Peer_data = pkt->cmd.Data[1]; //对方发来的数据
   \   0002AE   EE           MOV     A,R6
   \   0002AF   2422         ADD     A,#0x22
   \   0002B1   F5..         MOV     ?V0 + 0,A
   \   0002B3   EF           MOV     A,R7
   \   0002B4   3400         ADDC    A,#0x0
   \   0002B6   85..82       MOV     DPL,?V0 + 0
   \   0002B9   F583         MOV     DPH,A
   \   0002BB   12....       LCALL   ?Subroutine14 & 0xFFFF
    974                Peer_info = pkt->cmd.Data[3]; 
    975                Peer_info |= pkt->cmd.Data[2]<<8; //对方码字信息
    976                //查看发来的数据包的度
    977                uint8 Peer_degree = 0;
   \                     ??CrossCallReturnLabel_20:
   \   0002BE   88..         MOV     ?V0 + 0,R0
    978                uint8 Self_included = FALSE;
   \   0002C0   7C00         MOV     R4,#0x0
    979                for(short k=0;k<16;++k)
   \   0002C2   7A00         MOV     R2,#0x0
   \   0002C4   7B00         MOV     R3,#0x0
    980                {
    981                  if(1<<k & Peer_info)
   \                     ??SampleApp_MessageMSGCB_15:
   \   0002C6   75..01       MOV     ?V0 + 4,#0x1
   \   0002C9   75..00       MOV     ?V0 + 5,#0x0
   \   0002CC   EA           MOV     A,R2
   \   0002CD   78..         MOV     R0,#?V0 + 4
   \   0002CF   12....       LCALL   ?S_SHL
   \   0002D2   E5..         MOV     A,?V0 + 4
   \   0002D4   5E           ANL     A,R6
   \   0002D5   F8           MOV     R0,A
   \   0002D6   E5..         MOV     A,?V0 + 5
   \   0002D8   5F           ANL     A,R7
   \   0002D9   F9           MOV     R1,A
   \   0002DA   E8           MOV     A,R0
   \   0002DB   49           ORL     A,R1
   \   0002DC   600E         JZ      ??SampleApp_MessageMSGCB_16
    982                  {
    983                    ++Peer_degree;
   \   0002DE   05..         INC     ?V0 + 0
    984                    if(k == Device_ID)
   \   0002E0   90....       MOV     DPTR,#Device_ID
   \   0002E3   E0           MOVX    A,@DPTR
   \   0002E4   6A           XRL     A,R2
   \   0002E5   7001         JNZ     ??SampleApp_MessageMSGCB_17
   \   0002E7   EB           MOV     A,R3
   \                     ??SampleApp_MessageMSGCB_17:
   \   0002E8   7002         JNZ     ??SampleApp_MessageMSGCB_16
    985                      Self_included = TRUE; //码字包含自身的节点数据包
   \   0002EA   7C01         MOV     R4,#0x1
    986                    
    987                  }
    988                }
   \                     ??SampleApp_MessageMSGCB_16:
   \   0002EC   12....       LCALL   ?Subroutine32 & 0xFFFF
   \                     ??CrossCallReturnLabel_48:
   \   0002EF   9410         SUBB    A,#0x10
   \   0002F1   EB           MOV     A,R3
   \   0002F2   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_85:
   \   0002F5   40CF         JC      ??SampleApp_MessageMSGCB_15
    989                //判断是否符合编码条件,不包含自身的数据包,且度不大于最大允许的度
    990                if(!Self_included && (Peer_degree < MAX_Degree))
   \   0002F7   EC           MOV     A,R4
   \   0002F8   A2E0         MOV     C,0xE0 /* A   */.0
   \   0002FA   400A         JC      ??SampleApp_MessageMSGCB_18
   \   0002FC   12....       LCALL   ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_24:
   \   0002FF   5005         JNC     ??SampleApp_MessageMSGCB_18
    991                {
    992                  
    993                  Peer_data ^= DATA_SLOT[0].data; //异或编码
   \   000301   12....       LCALL   ?Subroutine15 & 0xFFFF
    994                  Peer_info &= Device_ID; //码字信息中添加自身的设备ID
    995                  HalUARTWrite(0,"已编码\n编码后的值是:",strlen("已编码\n编码后的值是:"));
    996                  Show_Bit(Peer_data, 8);
    997                }
   \                     ??CrossCallReturnLabel_22:
   \   000304   8008         SJMP    ??SampleApp_MessageMSGCB_19
    998                else
    999                {
   1000                  HalUARTWrite(0,"未编码\n对方的值是:",strlen("未编码\n对方的值是:"));
   \                     ??SampleApp_MessageMSGCB_18:
   \   000306                ; Setup parameters for call to function HalUARTWrite
   \   000306   7C12         MOV     R4,#0x12
   \   000308   7D00         MOV     R5,#0x0
   \   00030A   7A..         MOV     R2,#`?<Constant "\\316\\264\\261\\340\\302\\353\\n\\266\\324` & 0xff
   \   00030C   7B..         MOV     R3,#(`?<Constant "\\316\\264\\261\\340\\302\\353\\n\\266\\324` >> 8) & 0xff
   1001                  Show_Bit(Peer_data, 8);
   1002                }
   \                     ??SampleApp_MessageMSGCB_19:
   \   00030E   12....       LCALL   ?Subroutine6 & 0xFFFF
   1003                DATA_SLOT[Exchange_index].data = Peer_data; //对应位置替换为对方的码字
   \                     ??CrossCallReturnLabel_10:
   \   000311   90....       MOV     DPTR,#Exchange_index
   \   000314   E0           MOVX    A,@DPTR
   \   000315   F5..         MOV     ?V0 + 0,A
   \                     ??SampleApp_MessageMSGCB_14:
   \   000317   7402         MOV     A,#0x2
   \   000319   78..         MOV     R0,#?V0 + 0
   \   00031B   12....       LCALL   ?S_SHL
   \   00031E   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_29:
   \   000321   E5..         MOV     A,?V0 + 2
   \   000323   12....       LCALL   ??Subroutine38_0 & 0xFFFF
   1004                DATA_SLOT[Exchange_index].Degree_ID = Peer_info; //记录码字信息
   \                     ??CrossCallReturnLabel_70:
   \   000326   8882         MOV     DPL,R0
   \   000328   8983         MOV     DPH,R1
   \   00032A   A3           INC     DPTR
   \   00032B   A3           INC     DPTR
   \   00032C   EE           MOV     A,R6
   \   00032D   F0           MOVX    @DPTR,A
   \   00032E   A3           INC     DPTR
   \   00032F   EF           MOV     A,R7
   \   000330   F0           MOVX    @DPTR,A
   1005                
   1006                Exchange_Lock = FALSE; //关闭码字槽的锁
   \   000331   90....       MOV     DPTR,#Exchange_Lock
   \   000334   E4           CLR     A
   \   000335   F0           MOVX    @DPTR,A
   1007              }
   1008          
   1009          
   1010          
   1011              HalLedBlink( HAL_LED_2, 2, 60, (flashTime / 6) ); //三号灯闪烁,三次,亮度50%,时间间隔0.25s
   \                     ??SampleApp_MessageMSGCB_8:
   \   000336                ; Setup parameters for call to function HalLedBlink
   \   000336   7CA6         MOV     R4,#-0x5a
   \   000338   7D00         MOV     R5,#0x0
   \   00033A   7B3C         MOV     R3,#0x3c
   \   00033C   7A02         MOV     R2,#0x2
   \   00033E   7902         MOV     R1,#0x2
   \   000340   12....       LCALL   ??HalLedBlink?relay
   1012              break;
   \   000343   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
   1013          
   1014          
   1015          
   1016          /*************************************************************************************************************************
   1017                                                收到 组播 消息
   1018          **************************************************************************************************************************/
   1019            case SAMPLEAPP_FLASH_CLUSTERID:
   1020          
   1021          
   1022              for(int i=0;i<NEI_NUM;++i)
   \                     ??SampleApp_MessageMSGCB_1:
   \   000346   75..00       MOV     ?V0 + 0,#0x0
   \   000349   75..00       MOV     ?V0 + 1,#0x0
   \   00034C   02....       LJMP    ??CrossCallReturnLabel_31 & 0xFFFF
   1023              {
   1024                if(ACTIVE[i]-- <= 0)
   \                     ??SampleApp_MessageMSGCB_20:
   \   00034F   E5..         MOV     A,?V0 + 0
   \   000351   C3           CLR     C
   \   000352   33           RLC     A
   \   000353   FE           MOV     R6,A
   \   000354   E5..         MOV     A,?V0 + 1
   \   000356   33           RLC     A
   \   000357   FF           MOV     R7,A
   \   000358   74..         MOV     A,#ACTIVE & 0xff
   \   00035A   2E           ADD     A,R6
   \   00035B   F8           MOV     R0,A
   \   00035C   74..         MOV     A,#(ACTIVE >> 8) & 0xff
   \   00035E   3F           ADDC    A,R7
   \   00035F   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_61:
   \   000362   EA           MOV     A,R2
   \   000363   24FF         ADD     A,#-0x1
   \   000365   FC           MOV     R4,A
   \   000366   EB           MOV     A,R3
   \   000367   34FF         ADDC    A,#-0x1
   \   000369   FD           MOV     R5,A
   \   00036A   8882         MOV     DPL,R0
   \   00036C   8983         MOV     DPH,R1
   \   00036E   EC           MOV     A,R4
   \   00036F   F0           MOVX    @DPTR,A
   \   000370   A3           INC     DPTR
   \   000371   ED           MOV     A,R5
   \   000372   F0           MOVX    @DPTR,A
   \   000373   EA           MOV     A,R2
   \   000374   4B           ORL     A,R3
   \   000375   706C         JNZ     ??SampleApp_MessageMSGCB_21
   1025                {
   1026                  Reset_down_neighbor(Nei_Table[i]); //给掉线邻居发送设备重置信号
   \   000377   74..         MOV     A,#Nei_Table & 0xff
   \   000379   2E           ADD     A,R6
   \   00037A   F5..         MOV     ?V0 + 4,A
   \   00037C   74..         MOV     A,#(Nei_Table >> 8) & 0xff
   \   00037E   3F           ADDC    A,R7
   \   00037F   F5..         MOV     ?V0 + 5,A
   \   000381                ; Setup parameters for call to function Reset_down_neighbor
   \   000381   85..82       MOV     DPL,?V0 + 4
   \   000384   F583         MOV     DPH,A
   \   000386   12....       LCALL   ??Subroutine36_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_60:
   \   000389   12....       LCALL   ??Reset_down_neighbor?relay
   1027                  Nei_Table[i] = Nei_Table[NEI_NUM-1];
   \   00038C   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_25:
   \   00038F   E8           MOV     A,R0
   \   000390   C3           CLR     C
   \   000391   33           RLC     A
   \   000392   F8           MOV     R0,A
   \   000393   E9           MOV     A,R1
   \   000394   33           RLC     A
   \   000395   F9           MOV     R1,A
   \   000396   74..         MOV     A,#(Nei_Table + 254) & 0xff
   \   000398   28           ADD     A,R0
   \   000399   FA           MOV     R2,A
   \   00039A   74..         MOV     A,#((Nei_Table - 2) >> 8) & 0xff
   \   00039C   39           ADDC    A,R1
   \   00039D   FB           MOV     R3,A
   \   00039E   8A82         MOV     DPL,R2
   \   0003A0   8B83         MOV     DPH,R3
   \   0003A2   E0           MOVX    A,@DPTR
   \   0003A3   FC           MOV     R4,A
   \   0003A4   A3           INC     DPTR
   \   0003A5   E0           MOVX    A,@DPTR
   \   0003A6   FD           MOV     R5,A
   \   0003A7   85..82       MOV     DPL,?V0 + 4
   \   0003AA   85..83       MOV     DPH,?V0 + 5
   \   0003AD   EC           MOV     A,R4
   \   0003AE   F0           MOVX    @DPTR,A
   \   0003AF   A3           INC     DPTR
   \   0003B0   ED           MOV     A,R5
   \   0003B1   F0           MOVX    @DPTR,A
   1028                  Nei_Table[NEI_NUM-1] = (int16)65534;
   \   0003B2   8A82         MOV     DPL,R2
   \   0003B4   8B83         MOV     DPH,R3
   \   0003B6   74FE         MOV     A,#-0x2
   \   0003B8   F0           MOVX    @DPTR,A
   \   0003B9   A3           INC     DPTR
   \   0003BA   04           INC     A
   \   0003BB   F0           MOVX    @DPTR,A
   1029                  ACTIVE[i] = ACTIVE[NEI_NUM-1];
   \   0003BC   74..         MOV     A,#(ACTIVE + 254) & 0xff
   \   0003BE   28           ADD     A,R0
   \   0003BF   F8           MOV     R0,A
   \   0003C0   74..         MOV     A,#((ACTIVE - 2) >> 8) & 0xff
   \   0003C2   39           ADDC    A,R1
   \   0003C3   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_62:
   \   0003C6   74..         MOV     A,#ACTIVE & 0xff
   \   0003C8   2E           ADD     A,R6
   \   0003C9   F582         MOV     DPL,A
   \   0003CB   74..         MOV     A,#(ACTIVE >> 8) & 0xff
   \   0003CD   3F           ADDC    A,R7
   \   0003CE   F583         MOV     DPH,A
   \   0003D0   EA           MOV     A,R2
   \   0003D1   F0           MOVX    @DPTR,A
   \   0003D2   A3           INC     DPTR
   \   0003D3   EB           MOV     A,R3
   \   0003D4   F0           MOVX    @DPTR,A
   1030                  ACTIVE[NEI_NUM-1] = LIFE_TIME;
   \   0003D5   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_57:
   \   0003D8   8882         MOV     DPL,R0
   \   0003DA   8983         MOV     DPH,R1
   \   0003DC   EA           MOV     A,R2
   \   0003DD   F0           MOVX    @DPTR,A
   \   0003DE   A3           INC     DPTR
   \   0003DF   EB           MOV     A,R3
   \   0003E0   F0           MOVX    @DPTR,A
   1031                  LOST_nei++;
   \   0003E1   05..         INC     ?V0 + 2
   1032                }
   1033              }
   \                     ??SampleApp_MessageMSGCB_21:
   \   0003E3   12....       LCALL   ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_31:
   \   0003E6   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_26:
   \   0003E9   C3           CLR     C
   \   0003EA   E5..         MOV     A,?V0 + 0
   \   0003EC   98           SUBB    A,R0
   \   0003ED   E5..         MOV     A,?V0 + 1
   \   0003EF   99           SUBB    A,R1
   \   0003F0   A2D2         MOV     C,0xD0 /* PSW */.2
   \   0003F2   65D0         XRL     A,PSW
   \   0003F4   33           RLC     A
   \   0003F5   5003         JNC     $+5
   \   0003F7   02....       LJMP    ??SampleApp_MessageMSGCB_20 & 0xFFFF
   1034          
   1035              NEI_NUM -= LOST_nei;  //邻居个数减少
   \   0003FA   E0           MOVX    A,@DPTR
   \   0003FB   C3           CLR     C
   \   0003FC   95..         SUBB    A,?V0 + 2
   \   0003FE   F0           MOVX    @DPTR,A
   1036          
   1037          
   1038          
   1039              for(int i=0;i<3;++i)
   \   0003FF   7800         MOV     R0,#0x0
   \   000401   7900         MOV     R1,#0x0
   1040              {
   1041                //邻居表中有该路由
   1042                if(Nei_Table[i]==neighbor_addr_10)
   \                     ??SampleApp_MessageMSGCB_22:
   \   000403   12....       LCALL   ?Subroutine26 & 0xFFFF
   \                     ??CrossCallReturnLabel_36:
   \   000406   65..         XRL     A,?V0 + 6
   \   000408   7004         JNZ     ??SampleApp_MessageMSGCB_23
   \   00040A   A3           INC     DPTR
   \   00040B   E0           MOVX    A,@DPTR
   \   00040C   65..         XRL     A,?V0 + 7
   \                     ??SampleApp_MessageMSGCB_23:
   \   00040E   7013         JNZ     ??SampleApp_MessageMSGCB_24
   1043                {
   1044                  ACTIVE[i] = LIFE_TIME; //收到该邻居信息,更新存活时间
   \   000410   12....       LCALL   ?Subroutine19 & 0xFFFF
   1045                  break;
   1046                }
   \                     ??CrossCallReturnLabel_58:
   \   000413   E8           MOV     A,R0
   \   000414   C3           CLR     C
   \   000415   33           RLC     A
   \   000416   F8           MOV     R0,A
   \   000417   E9           MOV     A,R1
   \   000418   33           RLC     A
   \   000419   F9           MOV     R1,A
   \   00041A   12....       LCALL   ?Subroutine27 & 0xFFFF
   \                     ??CrossCallReturnLabel_38:
   \   00041D   EA           MOV     A,R2
   \   00041E   F0           MOVX    @DPTR,A
   \   00041F   A3           INC     DPTR
   \   000420   EB           MOV     A,R3
   \   000421   802F         SJMP    ??SampleApp_MessageMSGCB_25
   1047          
   1048                //其他合法路由
   1049                else if((Nei_Table[i]!=(int16)65534) && (Nei_Table[i]!=neighbor_addr_10))
   \                     ??SampleApp_MessageMSGCB_24:
   \   000423   12....       LCALL   ?Subroutine26 & 0xFFFF
   \                     ??CrossCallReturnLabel_37:
   \   000426   64FE         XRL     A,#0xfe
   \   000428   7003         JNZ     ??SampleApp_MessageMSGCB_26
   \   00042A   A3           INC     DPTR
   \   00042B   E0           MOVX    A,@DPTR
   \   00042C   F4           CPL     A
   \                     ??SampleApp_MessageMSGCB_26:
   \   00042D   6014         JZ      ??SampleApp_MessageMSGCB_27
   \   00042F   E8           MOV     A,R0
   \   000430   2401         ADD     A,#0x1
   \   000432   08           INC     R0
   \   000433   E9           MOV     A,R1
   \   000434   3400         ADDC    A,#0x0
   \   000436   F9           MOV     R1,A
   \   000437   C3           CLR     C
   \   000438   E8           MOV     A,R0
   \   000439   9403         SUBB    A,#0x3
   \   00043B   E9           MOV     A,R1
   \   00043C   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_86:
   \   00043F   5012         JNC     ??SampleApp_MessageMSGCB_28
   \   000441   80C0         SJMP    ??SampleApp_MessageMSGCB_22
   1050                  continue;
   1051          
   1052                //添加路由
   1053                else
   1054                {
   1055                  Nei_Table[i]=neighbor_addr_10;
   \                     ??SampleApp_MessageMSGCB_27:
   \   000443   12....       LCALL   ?Subroutine28 & 0xFFFF
   \                     ??CrossCallReturnLabel_40:
   \   000446   E5..         MOV     A,?V0 + 6
   \   000448   F0           MOVX    @DPTR,A
   \   000449   A3           INC     DPTR
   \   00044A   E5..         MOV     A,?V0 + 7
   \   00044C   F0           MOVX    @DPTR,A
   1056                  NEI_NUM++;
   \   00044D   90....       MOV     DPTR,#NEI_NUM
   \   000450   E0           MOVX    A,@DPTR
   \   000451   04           INC     A
   \                     ??SampleApp_MessageMSGCB_25:
   \   000452   F0           MOVX    @DPTR,A
   1057                  break;
   1058                }
   1059              }
   1060          
   1061              if(LOST_nei != 0)
   \                     ??SampleApp_MessageMSGCB_28:
   \   000453   E5..         MOV     A,?V0 + 2
   \   000455   7003         JNZ     $+5
   \   000457   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
   1062              {
   1063                //输出邻居的活跃点数
   1064                HalUARTWrite(0,"\n------------\n",14);
   \   00045A                ; Setup parameters for call to function HalUARTWrite
   \   00045A   7C0E         MOV     R4,#0xe
   \   00045C   7D00         MOV     R5,#0x0
   \   00045E   7A..         MOV     R2,#`?<Constant "\\n------------\\n">` & 0xff
   \   000460   7B..         MOV     R3,#(`?<Constant "\\n------------\\n">` >> 8) & 0xff
   \   000462   7900         MOV     R1,#0x0
   \   000464   12....       LCALL   ??HalUARTWrite?relay
   1065                HalUARTWrite(0,"active: ",strlen("active: "));
   \   000467                ; Setup parameters for call to function HalUARTWrite
   \   000467   7C08         MOV     R4,#0x8
   \   000469   7D00         MOV     R5,#0x0
   \   00046B   7A..         MOV     R2,#`?<Constant "active: ">` & 0xff
   \   00046D   7B..         MOV     R3,#(`?<Constant "active: ">` >> 8) & 0xff
   \   00046F   7900         MOV     R1,#0x0
   \   000471   12....       LCALL   ??HalUARTWrite?relay
   1066                for (int j=0;j<NEI_NUM;++j)
   \   000474   7E00         MOV     R6,#0x0
   \   000476   7F00         MOV     R7,#0x0
   \   000478   8026         SJMP    ??SampleApp_MessageMSGCB_29
   1067                {
   1068                  active = '0' + ACTIVE[j];
   \                     ??SampleApp_MessageMSGCB_30:
   \   00047A   EE           MOV     A,R6
   \   00047B   F8           MOV     R0,A
   \   00047C   EF           MOV     A,R7
   \   00047D   F9           MOV     R1,A
   \   00047E   E8           MOV     A,R0
   \   00047F   C3           CLR     C
   \   000480   33           RLC     A
   \   000481   F8           MOV     R0,A
   \   000482   E9           MOV     A,R1
   \   000483   33           RLC     A
   \   000484   F9           MOV     R1,A
   \   000485   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_14:
   \   000488   12....       LCALL   ?Subroutine11 & 0xFFFF
   1069                  HalUARTWrite(0,&active,1);
   1070                  HalUARTWrite(0," ",1);
   \                     ??CrossCallReturnLabel_73:
   \   00048B                ; Setup parameters for call to function HalUARTWrite
   \   00048B   7C01         MOV     R4,#0x1
   \   00048D   7D00         MOV     R5,#0x0
   \   00048F   7A..         MOV     R2,#`?<Constant " ">` & 0xff
   \   000491   7B..         MOV     R3,#(`?<Constant " ">` >> 8) & 0xff
   \   000493   7900         MOV     R1,#0x0
   \   000495   12....       LCALL   ??HalUARTWrite?relay
   1071                }
   \   000498   EE           MOV     A,R6
   \   000499   2401         ADD     A,#0x1
   \   00049B   0E           INC     R6
   \   00049C   EF           MOV     A,R7
   \   00049D   3400         ADDC    A,#0x0
   \   00049F   FF           MOV     R7,A
   \                     ??SampleApp_MessageMSGCB_29:
   \   0004A0   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_27:
   \   0004A3   C3           CLR     C
   \   0004A4   EE           MOV     A,R6
   \   0004A5   98           SUBB    A,R0
   \   0004A6   EF           MOV     A,R7
   \   0004A7   99           SUBB    A,R1
   \   0004A8   A2D2         MOV     C,0xD0 /* PSW */.2
   \   0004AA   65D0         XRL     A,PSW
   \   0004AC   33           RLC     A
   \   0004AD   40CB         JC      ??SampleApp_MessageMSGCB_30
   1072                //输出邻居个数
   1073                HalUARTWrite(0,"\n有",3);
   \   0004AF                ; Setup parameters for call to function HalUARTWrite
   \   0004AF   7C03         MOV     R4,#0x3
   \   0004B1   7D00         MOV     R5,#0x0
   \   0004B3   7A..         MOV     R2,#`?<Constant "\\n\\323\\320">` & 0xff
   \   0004B5   7B..         MOV     R3,#(`?<Constant "\\n\\323\\320">` >> 8) & 0xff
   \   0004B7   7900         MOV     R1,#0x0
   \   0004B9   12....       LCALL   ??HalUARTWrite?relay
   1074                active = '0' + NEI_NUM;
   \   0004BC   90....       MOV     DPTR,#NEI_NUM
   \   0004BF   E0           MOVX    A,@DPTR
   \   0004C0   12....       LCALL   ?Subroutine11 & 0xFFFF
   1075                HalUARTWrite(0,&active,1);
   1076                HalUARTWrite(0,"个邻居",6);
   \                     ??CrossCallReturnLabel_74:
   \   0004C3                ; Setup parameters for call to function HalUARTWrite
   \   0004C3   7C06         MOV     R4,#0x6
   \   0004C5   7D00         MOV     R5,#0x0
   \   0004C7   7A..         MOV     R2,#`?<Constant "\\270\\366\\301\\332\\276\\323">` & 0xff
   \   0004C9   7B..         MOV     R3,#(`?<Constant "\\270\\366\\301\\332\\276\\323">` >> 8) & 0xff
   \   0004CB   7900         MOV     R1,#0x0
   \   0004CD   12....       LCALL   ??HalUARTWrite?relay
   1077                
   1078                HalUARTWrite(0,"\n------------\n",14);
   \   0004D0                ; Setup parameters for call to function HalUARTWrite
   \   0004D0   7C0E         MOV     R4,#0xe
   \   0004D2   7D00         MOV     R5,#0x0
   \   0004D4   7A..         MOV     R2,#`?<Constant "\\n------------\\n">` & 0xff
   \   0004D6   7B..         MOV     R3,#(`?<Constant "\\n------------\\n">` >> 8) & 0xff
   \   0004D8   8042         SJMP    ??SampleApp_MessageMSGCB_31
   1079              }
   1080          
   1081          
   1082              //HalLedBlink( HAL_LED_2, 2, 50, (flashTime / 5) ); //二号灯闪烁,两次,亮度50%,时间间隔0.2s
   1083              break;
   1084          
   1085          
   1086          
   1087          /*******************************************
   1088                       收到 周期性 消息
   1089          ********************************************/
   1090            case SAMPLEAPP_PERIODIC_CLUSTERID:
   1091          
   1092              //NLME_UpdateLinkStatus(); //更新链路信息
   1093              //HalLedBlink( HAL_LED_2, 2, 60, (flashTime / 6) ); //三号灯闪烁,三次,亮度50%,时间间隔0.25s
   1094              break;
   1095              /*收到 对方串口透传 消息*/
   1096            case SAMPLEAPP_COM_CLUSTERID:
   1097              HalUARTWrite(0,"对方说: ",strlen("对方说: "));
   \                     ??SampleApp_MessageMSGCB_2:
   \   0004DA                ; Setup parameters for call to function HalUARTWrite
   \   0004DA   7C08         MOV     R4,#0x8
   \   0004DC   7D00         MOV     R5,#0x0
   \   0004DE   7A..         MOV     R2,#`?<Constant "\\266\\324\\267\\275\\313\\265: ">` & 0xff
   \   0004E0   7B..         MOV     R3,#(`?<Constant "\\266\\324\\267\\275\\313\\265: ">` >> 8) & 0xff
   \   0004E2   7900         MOV     R1,#0x0
   \   0004E4   12....       LCALL   ??HalUARTWrite?relay
   1098              len=pkt->cmd.Data[0];
   \   0004E7   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_4:
   \   0004EA   F5..         MOV     ?V0 + 1,A
   1099              for(i=0;i<len;i++)
   \   0004EC   75..00       MOV     ?V0 + 0,#0x0
   \   0004EF   801C         SJMP    ??SampleApp_MessageMSGCB_32
   1100                HalUARTWrite(0,&pkt->cmd.Data[i+1],1);//发给 PC 机
   \                     ??SampleApp_MessageMSGCB_33:
   \   0004F1                ; Setup parameters for call to function HalUARTWrite
   \   0004F1   A8..         MOV     R0,?V0 + 0
   \   0004F3   12....       LCALL   ?Subroutine24 & 0xFFFF
   \                     ??CrossCallReturnLabel_33:
   \   0004F6   E0           MOVX    A,@DPTR
   \   0004F7   28           ADD     A,R0
   \   0004F8   FA           MOV     R2,A
   \   0004F9   A3           INC     DPTR
   \   0004FA   E0           MOVX    A,@DPTR
   \   0004FB   3400         ADDC    A,#0x0
   \   0004FD   8A82         MOV     DPL,R2
   \   0004FF   F583         MOV     DPH,A
   \   000501   A3           INC     DPTR
   \   000502   AA82         MOV     R2,DPL
   \   000504   AB83         MOV     R3,DPH
   \   000506   7900         MOV     R1,#0x0
   \   000508   12....       LCALL   ??HalUARTWrite?relay
   \   00050B   05..         INC     ?V0 + 0
   \                     ??SampleApp_MessageMSGCB_32:
   \   00050D   E5..         MOV     A,?V0 + 0
   \   00050F   C3           CLR     C
   \   000510   95..         SUBB    A,?V0 + 1
   \   000512   7C01         MOV     R4,#0x1
   \   000514   7D00         MOV     R5,#0x0
   \   000516   40D9         JC      ??SampleApp_MessageMSGCB_33
   1101              HalUARTWrite(0,"\n",1); // 回车换行
   \   000518                ; Setup parameters for call to function HalUARTWrite
   \   000518   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   00051A   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \                     ??SampleApp_MessageMSGCB_31:
   \   00051C   7900         MOV     R1,#0x0
   \   00051E   12....       LCALL   ??HalUARTWrite?relay
   1102              break;
   1103          
   1104            }
   1105          }
   \                     ??SampleApp_MessageMSGCB_0:
   \   000521   740D         MOV     A,#0xd
   \   000523   12....       LCALL   ?DEALLOC_XSTACK8
   \   000526   7F08         MOV     R7,#0x8
   \   000528   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine26:
   \   000000   E8           MOV     A,R0
   \   000001   FA           MOV     R2,A
   \   000002   E9           MOV     A,R1
   \   000003   FB           MOV     R3,A
   \   000004   EA           MOV     A,R2
   \   000005   C3           CLR     C
   \   000006   33           RLC     A
   \   000007   FA           MOV     R2,A
   \   000008   EB           MOV     A,R3
   \   000009   33           RLC     A
   \   00000A   FB           MOV     R3,A
   \   00000B   74..         MOV     A,#Nei_Table & 0xff
   \   00000D   2A           ADD     A,R2
   \   00000E   F582         MOV     DPL,A
   \   000010   74..         MOV     A,#(Nei_Table >> 8) & 0xff
   \   000012   3B           ADDC    A,R3
   \   000013   F583         MOV     DPH,A
   \   000015   E0           MOVX    A,@DPTR
   \   000016   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine24:
   \   000000   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_46:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine31:
   \   000000   EE           MOV     A,R6
   \   000001   2422         ADD     A,#0x22
   \   000003   F582         MOV     DPL,A
   \   000005   EF           MOV     A,R7
   \   000006   3400         ADDC    A,#0x0
   \   000008   F583         MOV     DPH,A
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine23:
   \   000000   E5..         MOV     A,?V0 + 0
   \   000002   2401         ADD     A,#0x1
   \   000004   F5..         MOV     ?V0 + 0,A
   \   000006   E5..         MOV     A,?V0 + 1
   \   000008   3400         ADDC    A,#0x0
   \   00000A   F5..         MOV     ?V0 + 1,A
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine22:
   \   000000   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_43:
   \   000003   8882         MOV     DPL,R0
   \   000005   8983         MOV     DPH,R1
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine21:
   \   000000   7920         MOV     R1,#0x20
   \   000002   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000004   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000006   7A..         MOV     R2,#Point_To_Point_DstAddr & 0xff
   \   000008   7B..         MOV     R3,#(Point_To_Point_DstAddr >> 8) & 0xff
   \   00000A                REQUIRE ??Subroutine34_0
   \   00000A                ; // Fall through to label ??Subroutine34_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine20:
   \   000000   90....       MOV     DPTR,#NEI_NUM
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F8           MOV     R0,A
   \   000005   33           RLC     A
   \   000006   95E0         SUBB    A,0xE0 /* A   */
   \   000008   F9           MOV     R1,A
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine19:
   \   000000   90....       MOV     DPTR,#LIFE_TIME
   \   000003                REQUIRE ??Subroutine35_0
   \   000003                ; // Fall through to label ??Subroutine35_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine35_0:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   33           RLC     A
   \   000003   95E0         SUBB    A,0xE0 /* A   */
   \   000005   FB           MOV     R3,A
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine18:
   \   000000   F9           MOV     R1,A
   \   000001   8882         MOV     DPL,R0
   \   000003   8983         MOV     DPH,R1
   \   000005                REQUIRE ??Subroutine36_0
   \   000005                ; // Fall through to label ??Subroutine36_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine36_0:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   FB           MOV     R3,A
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   90....       MOV     DPTR,#MAX_Degree
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F8           MOV     R0,A
   \   000005   A3           INC     DPTR
   \   000006   E0           MOVX    A,@DPTR
   \   000007   F9           MOV     R1,A
   \   000008   C3           CLR     C
   \   000009   E5..         MOV     A,?V0 + 0
   \   00000B   98           SUBB    A,R0
   \   00000C   E4           CLR     A
   \   00000D   99           SUBB    A,R1
   \   00000E   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   90....       MOV     DPTR,#DATA_SLOT
   \   000003   E0           MOVX    A,@DPTR
   \   000004   62..         XRL     ?V0 + 2,A
   \   000006   90....       MOV     DPTR,#Device_ID
   \   000009   E0           MOVX    A,@DPTR
   \   00000A   5E           ANL     A,R6
   \   00000B   FE           MOV     R6,A
   \   00000C   7F00         MOV     R7,#0x0
   \   00000E                ; Setup parameters for call to function HalUARTWrite
   \   00000E                ; Setup parameters for call to function HalUARTWrite
   \   00000E   7C14         MOV     R4,#0x14
   \   000010   7D00         MOV     R5,#0x0
   \   000012   7A..         MOV     R2,#`?<Constant "\\322\\321\\261\\340\\302\\353\\n\\261\\340` & 0xff
   \   000014   7B..         MOV     R3,#(`?<Constant "\\322\\321\\261\\340\\302\\353\\n\\261\\340` >> 8) & 0xff
   \   000016   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F9           MOV     R1,A
   \   000005   8882         MOV     DPL,R0
   \   000007   8983         MOV     DPH,R1
   \   000009   A3           INC     DPTR
   \   00000A   E0           MOVX    A,@DPTR
   \   00000B   F5..         MOV     ?V0 + 2,A
   \   00000D   8882         MOV     DPL,R0
   \   00000F   8983         MOV     DPH,R1
   \   000011   A3           INC     DPTR
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   E0           MOVX    A,@DPTR
   \   000015   FA           MOV     R2,A
   \   000016   8882         MOV     DPL,R0
   \   000018   8983         MOV     DPH,R1
   \   00001A   A3           INC     DPTR
   \   00001B   A3           INC     DPTR
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   F8           MOV     R0,A
   \   00001E   E4           CLR     A
   \   00001F   C8           XCH     A,R0
   \   000020   F9           MOV     R1,A
   \   000021   EA           MOV     A,R2
   \   000022   FE           MOV     R6,A
   \   000023   E9           MOV     A,R1
   \   000024   FF           MOV     R7,A
   \   000025   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   2430         ADD     A,#0x30
   \   000002                REQUIRE ??Subroutine39_0
   \   000002                ; // Fall through to label ??Subroutine39_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   7900         MOV     R1,#0x0
   \   000002   12....       LCALL   ??HalUARTWrite?relay
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005   7A08         MOV     R2,#0x8
   \   000007   A9..         MOV     R1,?V0 + 2
   \   000009   12....       LCALL   ??Show_Bit?relay
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_45:
   \   000003   12....       LCALL   ??Subroutine40_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_77:
   \   000006   A3           INC     DPTR
   \   000007   A3           INC     DPTR
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine29:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002                REQUIRE ??Subroutine40_0
   \   000002                ; // Fall through to label ??Subroutine40_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine40_0:
   \   000000   A3           INC     DPTR
   \   000001   E0           MOVX    A,@DPTR
   \   000002   F583         MOV     DPH,A
   \   000004   8882         MOV     DPL,R0
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_44:
   \   000003   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_79:
   \   000006   E0           MOVX    A,@DPTR
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine25:
   \   000000   12....       LCALL   ??rand?relay
   \   000003   EA           MOV     A,R2
   \   000004   F8           MOV     R0,A
   \   000005   EB           MOV     A,R3
   \   000006   F9           MOV     R1,A
   \   000007   7A05         MOV     R2,#0x5
   \   000009   7B00         MOV     R3,#0x0
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   000003   E5..         MOV     A,?V0 + 6
   \   000005   F0           MOVX    @DPTR,A
   \   000006   A3           INC     DPTR
   \   000007   E5..         MOV     A,?V0 + 7
   \   000009                REQUIRE ??Subroutine44_0
   \   000009                ; // Fall through to label ??Subroutine44_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   12....       LCALL   ??HalUARTWrite?relay
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003   7C01         MOV     R4,#0x1
   \   000005   7D00         MOV     R5,#0x0
   \   000007   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000009   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   00000B   7900         MOV     R1,#0x0
   \   00000D   12....       LCALL   ??HalUARTWrite?relay
   \   000010   22           RET
   1106          
   1107          
   1108          //给掉线的邻居发送重置信号

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1109          void Reset_down_neighbor(int16 nei_addr)
   \                     Reset_down_neighbor:
   1110          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1111            short flashTime = 1000;
   1112            Point_To_Point_DstAddr.addr.shortAddr = nei_addr;
   \   00000A   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   00000D   EA           MOV     A,R2
   \   00000E   F0           MOVX    @DPTR,A
   \   00000F   A3           INC     DPTR
   \   000010   EB           MOV     A,R3
   \   000011   F0           MOVX    @DPTR,A
   1113            unsigned char DATA[] = "!";
   \   000012   85..82       MOV     DPL,?XSP + 0
   \   000015   85..83       MOV     DPH,?XSP + 1
   \   000018   AC82         MOV     R4,DPL
   \   00001A   AD83         MOV     R5,DPH
   \   00001C   7583..       MOV     DPH,#(`?<Constant "!">` >> 8) & 0xff
   \   00001F   7582..       MOV     DPL,#`?<Constant "!">` & 0xff
   \   000022   7402         MOV     A,#0x2
   \   000024   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1114            if ( AF_DataRequest( &Point_To_Point_DstAddr, //点对点通信方式目标地址
   1115                                  &SampleApp_epDesc,
   1116                                  SAMPLEAPP_POINT_TO_POINT_CLUSTERID, //点对点簇ID
   1117                                  1,
   1118                                  DATA,
   1119                                  &SampleApp_TransID,
   1120                                  AF_DISCV_ROUTE,
   1121                                  AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000027                ; Setup parameters for call to function AF_DataRequest
   \   000027   75..1E       MOV     ?V0 + 0,#0x1e
   \   00002A   78..         MOV     R0,#?V0 + 0
   \   00002C   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00002F   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000032   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000035   78..         MOV     R0,#?V0 + 0
   \   000037   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00003A   7403         MOV     A,#0x3
   \   00003C   12....       LCALL   ?XSTACK_DISP0_8
   \   00003F   8582..       MOV     ?V0 + 0,DPL
   \   000042   8583..       MOV     ?V0 + 1,DPH
   \   000045   78..         MOV     R0,#?V0 + 0
   \   000047   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00004A   75..01       MOV     ?V0 + 0,#0x1
   \   00004D   75..00       MOV     ?V0 + 1,#0x0
   \   000050   78..         MOV     R0,#?V0 + 0
   \   000052   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000055   75..04       MOV     ?V0 + 0,#0x4
   \   000058   78..         MOV     R0,#?V0 + 0
   \   00005A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005D   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_51:
   \   000060   12....       LCALL   ?DEALLOC_XSTACK8
   \   000063   E9           MOV     A,R1
   \   000064   700D         JNZ     ??Reset_down_neighbor_0
   1122              {
   1123                HalLedBlink( HAL_LED_3, 1, 60, (flashTime / 3) ); //led3闪
   \   000066                ; Setup parameters for call to function HalLedBlink
   \   000066   7C4D         MOV     R4,#0x4d
   \   000068   7D01         MOV     R5,#0x1
   \   00006A   7B3C         MOV     R3,#0x3c
   \   00006C   7A01         MOV     R2,#0x1
   \   00006E   7904         MOV     R1,#0x4
   \   000070   12....       LCALL   ??HalLedBlink?relay
   1124              }
   1125              else
   1126              {
   1127          
   1128              }
   1129          }
   \                     ??Reset_down_neighbor_0:
   \   000073   7402         MOV     A,#0x2
   \   000075                REQUIRE ?Subroutine1
   \   000075                ; // Fall through to label ?Subroutine1
   1130          
   1131          
   1132          /***********************************************************<><><><><><><>*****
   1133                             自定义 点对点 发送函数
   1134          ************************************************************<><><><><><><>****/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1135          void SampleApp_SendPointToPointMessage( void )
   \                     SampleApp_SendPointToPointMessage:
   1136          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 5
   \   000005   74FB         MOV     A,#-0x5
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1137            uint16 flashTime = 1000;
   1138            srand((int)osal_getClock()); //生成随机数种子
   \   00000A                ; Setup parameters for call to function srand
   \   00000A                ; Setup parameters for call to function osal_getClock
   \   00000A   12....       LCALL   ??osal_getClock?relay
   \   00000D   12....       LCALL   ??srand?relay
   1139            int8 nei_index = random(NEI_NUM);  //挑选随机邻居节点
   \   000010                ; Setup parameters for call to function rand
   \   000010   12....       LCALL   ??rand?relay
   \   000013   8A..         MOV     ?V0 + 0,R2
   \   000015   8B..         MOV     ?V0 + 1,R3
   \   000017   A8..         MOV     R0,?V0 + 0
   \   000019   A9..         MOV     R1,?V0 + 1
   \   00001B   90....       MOV     DPTR,#NEI_NUM
   \   00001E   12....       LCALL   ??Subroutine35_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_56:
   \   000021   12....       LCALL   ?S_DIV_MOD
   \   000024   EA           MOV     A,R2
   \   000025   FE           MOV     R6,A
   1140            Exchange_index = random(5)+1;//挑选随机交换码字
   \   000026                ; Setup parameters for call to function rand
   \   000026   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_35:
   \   000029   12....       LCALL   ?S_DIV_MOD
   \   00002C   EA           MOV     A,R2
   \   00002D   2401         ADD     A,#0x1
   \   00002F   90....       MOV     DPTR,#Exchange_index
   \   000032   F0           MOVX    @DPTR,A
   1141          
   1142            Exchanging_Neighbor = Nei_Table[nei_index];  //即将交换码字的邻居
   \   000033   EE           MOV     A,R6
   \   000034   F8           MOV     R0,A
   \   000035   33           RLC     A
   \   000036   95E0         SUBB    A,0xE0 /* A   */
   \   000038   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_12:
   \   00003B   F5..         MOV     ?V0 + 0,A
   \   00003D   A3           INC     DPTR
   \   00003E   E0           MOVX    A,@DPTR
   \   00003F   F5..         MOV     ?V0 + 1,A
   \   000041   90....       MOV     DPTR,#Exchanging_Neighbor
   \   000044   E5..         MOV     A,?V0 + 0
   \   000046   F0           MOVX    @DPTR,A
   \   000047   A3           INC     DPTR
   \   000048   E5..         MOV     A,?V0 + 1
   \   00004A   F0           MOVX    @DPTR,A
   1143            Exchanging_Data = DATA_SLOT[Exchange_index].data; //即将交换的码字
   \   00004B   90....       MOV     DPTR,#Exchange_index
   \   00004E   E0           MOVX    A,@DPTR
   \   00004F   F5..         MOV     ?V0 + 2,A
   \   000051   75..00       MOV     ?V0 + 3,#0x0
   \   000054   7402         MOV     A,#0x2
   \   000056   78..         MOV     R0,#?V0 + 2
   \   000058   12....       LCALL   ?S_SHL
   \   00005B   74..         MOV     A,#DATA_SLOT & 0xff
   \   00005D   25..         ADD     A,?V0 + 2
   \   00005F   F8           MOV     R0,A
   \   000060   74..         MOV     A,#(DATA_SLOT >> 8) & 0xff
   \   000062   35..         ADDC    A,?V0 + 3
   \   000064   F9           MOV     R1,A
   \   000065   8882         MOV     DPL,R0
   \   000067   8983         MOV     DPH,R1
   \   000069   E0           MOVX    A,@DPTR
   \   00006A   90....       MOV     DPTR,#Exchanging_Data
   \   00006D   F0           MOVX    @DPTR,A
   1144          
   1145            uint8 data = Exchanging_Data;  //赋值交换的随机数据
   1146            uint8 degree_high = DATA_SLOT[Exchange_index].Degree_ID >>8; //高位码字度信息
   1147            uint8 degree_low = (uint8)DATA_SLOT[Exchange_index].Degree_ID;  //低位码字度信息
   1148            uint8 _DATA[] = {'*', data, degree_high, degree_low};  //发送数据交换请求 用'*' 表示请求类型
   \   00006E   7401         MOV     A,#0x1
   \   000070   12....       LCALL   ?XSTACK_DISP0_8
   \   000073   AC82         MOV     R4,DPL
   \   000075   AD83         MOV     R5,DPH
   \   000077   7583..       MOV     DPH,#(`?<Constant {42, 0, 0, 0}>` >> 8) & 0xff
   \   00007A   7582..       MOV     DPL,#`?<Constant {42, 0, 0, 0}>` & 0xff
   \   00007D   7404         MOV     A,#0x4
   \   00007F   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   \   000082   90....       MOV     DPTR,#Exchanging_Data
   \   000085   E0           MOVX    A,@DPTR
   \   000086   C0E0         PUSH    A
   \   000088   7402         MOV     A,#0x2
   \   00008A   12....       LCALL   ?XSTACK_DISP0_8
   \   00008D   D0E0         POP     A
   \   00008F   F0           MOVX    @DPTR,A
   \   000090   8882         MOV     DPL,R0
   \   000092   8983         MOV     DPH,R1
   \   000094   A3           INC     DPTR
   \   000095   A3           INC     DPTR
   \   000096   E0           MOVX    A,@DPTR
   \   000097   FA           MOV     R2,A
   \   000098   A3           INC     DPTR
   \   000099   E0           MOVX    A,@DPTR
   \   00009A   C0E0         PUSH    A
   \   00009C   7403         MOV     A,#0x3
   \   00009E   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A1   D0E0         POP     A
   \   0000A3   F0           MOVX    @DPTR,A
   \   0000A4   7404         MOV     A,#0x4
   \   0000A6   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A9   EA           MOV     A,R2
   \   0000AA   F0           MOVX    @DPTR,A
   1149            /*给选出的邻居发送数据*/
   1150            if((Nei_Table[nei_index] != (int16)65534) && (0<=nei_index) && (nei_index<NEI_NUM))
   \   0000AB   74FE         MOV     A,#-0x2
   \   0000AD   65..         XRL     A,?V0 + 0
   \   0000AF   7004         JNZ     ??SampleApp_SendPointToPointMessage_0
   \   0000B1   74FF         MOV     A,#-0x1
   \   0000B3   65..         XRL     A,?V0 + 1
   \                     ??SampleApp_SendPointToPointMessage_0:
   \   0000B5   7003         JNZ     $+5
   \   0000B7   02....       LJMP    ??CrossCallReturnLabel_6 & 0xFFFF
   \   0000BA   EE           MOV     A,R6
   \   0000BB   C3           CLR     C
   \   0000BC   9400         SUBB    A,#0x0
   \   0000BE   65D0         XRL     A,PSW
   \   0000C0   33           RLC     A
   \   0000C1   5003         JNC     $+5
   \   0000C3   02....       LJMP    ??CrossCallReturnLabel_6 & 0xFFFF
   \   0000C6   90....       MOV     DPTR,#NEI_NUM
   \   0000C9   E0           MOVX    A,@DPTR
   \   0000CA   F8           MOV     R0,A
   \   0000CB   EE           MOV     A,R6
   \   0000CC   C3           CLR     C
   \   0000CD   98           SUBB    A,R0
   \   0000CE   A2D2         MOV     C,0xD0 /* PSW */.2
   \   0000D0   65D0         XRL     A,PSW
   \   0000D2   33           RLC     A
   \   0000D3   4003         JC      $+5
   \   0000D5   02....       LJMP    ??CrossCallReturnLabel_6 & 0xFFFF
   1151            {
   1152              Point_To_Point_DstAddr.addr.shortAddr = Exchanging_Neighbor;
   \   0000D8   90....       MOV     DPTR,#Exchanging_Neighbor
   \   0000DB   E0           MOVX    A,@DPTR
   \   0000DC   F8           MOV     R0,A
   \   0000DD   A3           INC     DPTR
   \   0000DE   E0           MOVX    A,@DPTR
   \   0000DF   F9           MOV     R1,A
   \   0000E0   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   0000E3   E8           MOV     A,R0
   \   0000E4   F0           MOVX    @DPTR,A
   \   0000E5   A3           INC     DPTR
   \   0000E6   E9           MOV     A,R1
   \   0000E7   12....       LCALL   ??Subroutine44_0 & 0xFFFF
   1153              if ( AF_DataRequest( &Point_To_Point_DstAddr, //点对点通信方式目标地址
   1154                                  &SampleApp_epDesc,
   1155                                  SAMPLEAPP_POINT_TO_POINT_CLUSTERID, //点对点簇ID
   1156                                  4,
   1157                                  _DATA,
   1158                                  &SampleApp_TransID,
   1159                                  AF_DISCV_ROUTE,
   1160                                  AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \                     ??CrossCallReturnLabel_91:
   \   0000EA   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000ED   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   0000F0   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   0000F3   78..         MOV     R0,#?V0 + 0
   \   0000F5   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000F8   7404         MOV     A,#0x4
   \   0000FA   12....       LCALL   ?XSTACK_DISP0_8
   \   0000FD   8582..       MOV     ?V0 + 0,DPL
   \   000100   8583..       MOV     ?V0 + 1,DPH
   \   000103   78..         MOV     R0,#?V0 + 0
   \   000105   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000108   75..04       MOV     ?V0 + 0,#0x4
   \   00010B   75..00       MOV     ?V0 + 1,#0x0
   \   00010E   78..         MOV     R0,#?V0 + 0
   \   000110   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000113   78..         MOV     R0,#?V0 + 0
   \   000115   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000118   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_52:
   \   00011B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00011E   E9           MOV     A,R1
   \   00011F   7015         JNZ     ??SampleApp_SendPointToPointMessage_1
   1161              {
   1162                HalLedBlink( HAL_LED_1, 1, 60, (flashTime / 3) ); //led1闪
   \   000121                ; Setup parameters for call to function HalLedBlink
   \   000121   7C4D         MOV     R4,#0x4d
   \   000123   7D01         MOV     R5,#0x1
   \   000125   7B3C         MOV     R3,#0x3c
   \   000127   7A01         MOV     R2,#0x1
   \   000129   7901         MOV     R1,#0x1
   \   00012B   12....       LCALL   ??HalLedBlink?relay
   1163                Waiting_Request = TRUE; //请求交换数据包标志位
   \   00012E   90....       MOV     DPTR,#Waiting_Request
   \   000131   7401         MOV     A,#0x1
   \   000133   F0           MOVX    @DPTR,A
   \   000134   800D         SJMP    ??SampleApp_SendPointToPointMessage_2
   1164              }
   1165              else
   1166              {
   1167                HalUARTWrite(0,"交换数据包请求发送失败.",strlen("交换数据包请求发送失败."));
   \                     ??SampleApp_SendPointToPointMessage_1:
   \   000136                ; Setup parameters for call to function HalUARTWrite
   \   000136   7C17         MOV     R4,#0x17
   \   000138   7D00         MOV     R5,#0x0
   \   00013A   7A..         MOV     R2,#`?<Constant "\\275\\273\\273\\273\\312\\375\\276\\335\\2` & 0xff
   \   00013C   7B..         MOV     R3,#(`?<Constant "\\275\\273\\273\\273\\312\\375\\276\\335\\2` >> 8) & 0xff
   \   00013E   7900         MOV     R1,#0x0
   \   000140   12....       LCALL   ??HalUARTWrite?relay
   1168              }
   1169          
   1170          
   1171              uchar INDEX = nei_index + '0';
   \                     ??SampleApp_SendPointToPointMessage_2:
   \   000143   7430         MOV     A,#0x30
   \   000145   2E           ADD     A,R6
   \   000146   85..82       MOV     DPL,?XSP + 0
   \   000149   85..83       MOV     DPH,?XSP + 1
   \   00014C   F0           MOVX    @DPTR,A
   1172              HalUARTWrite(0,"send to addr",strlen("send to addr"));
   \   00014D                ; Setup parameters for call to function HalUARTWrite
   \   00014D   7C0C         MOV     R4,#0xc
   \   00014F   7D00         MOV     R5,#0x0
   \   000151   7A..         MOV     R2,#`?<Constant "send to addr">` & 0xff
   \   000153   7B..         MOV     R3,#(`?<Constant "send to addr">` >> 8) & 0xff
   \   000155   7900         MOV     R1,#0x0
   \   000157   12....       LCALL   ??HalUARTWrite?relay
   1173              HalUARTWrite(0,&INDEX,1);
   \   00015A                ; Setup parameters for call to function HalUARTWrite
   \   00015A   7C01         MOV     R4,#0x1
   \   00015C   7D00         MOV     R5,#0x0
   \   00015E   85..82       MOV     DPL,?XSP + 0
   \   000161   85..83       MOV     DPH,?XSP + 1
   \   000164   AA82         MOV     R2,DPL
   \   000166   AB83         MOV     R3,DPH
   \   000168   7900         MOV     R1,#0x0
   \   00016A   12....       LCALL   ?Subroutine4 & 0xFFFF
   1174              HalUARTWrite(0,"\n",1);
   1175            }
   1176          
   1177          }
   \                     ??CrossCallReturnLabel_6:
   \   00016D   7405         MOV     A,#0x5
   \   00016F   02....       LJMP    ?Subroutine0 & 0xFFFF

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for SOURCE_DATA>`:
   \   000000   33           DB 51

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for Device_ID>`:
   \   000000   03           DB 3

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for LIFE_TIME>`:
   \   000000   05           DB 5

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for MAX_Degree>`:
   \   000000   0100         DW 1

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Show_Bit?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Show_Bit

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Show_Num8?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Show_Num8

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Power_of_2?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Power_of_2

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_ProcessEvent?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_ProcessEvent

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendGroupMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendGroupMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendPeriodicMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendPeriodicMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendFlashMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendFlashMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_HandleKeys?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_HandleKeys

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SerialCMD?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SerialCMD

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_MessageMSGCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_MessageMSGCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Reset_down_neighbor?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Reset_down_neighbor

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendPointToPointMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendPointToPointMessage

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {48, 49}>`:
   \   000000   30           DB 48
   \   000001   31           DB 49

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n">`:
   \   000000   0A00         DB "\012"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "System is started.\\n\\n">`:
   \   000000   53797374     DB "System is started.\012\012"
   \            656D2069
   \            73207374
   \            61727465
   \            642E0A0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Group 1">`:
   \   000000   47726F75     DB "Group 1"
   \            70203100

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "SampleApp">`:
   \   000000   53616D70     DB "SampleApp"
   \            6C654170
   \            7000    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\324\\264\\312\\375\\276\\335\\312\\307: `:
   \   000000   D4B4CAFD     DB "\324\264\312\375\276\335\312\307: "
   \            BEDDCAC7
   \            3A2000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\302\\353\\327\\326\\320\\305\\317\\242: `:
   \   000000   C2EBD7D6     DB "\302\353\327\326\320\305\317\242: "
   \            D0C5CFA2
   \            3A2000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\301\\332\\276\\323\\270\\366\\312\\375:"`:
   \   000000   C1DABED3     DB "\301\332\276\323\270\366\312\375:"
   \            B8F6CAFD
   \            3A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\316\\322\\313\\265: ">`:
   \   000000   CED2CBB5     DB "\316\322\313\265: "
   \            3A2000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "####">`:
   \   000000   23232323     DB 23H, 23H, 23H, 23H

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\326\\330\\326\\303\\326\\320...">`:
   \   000000   D6D8D6C3     DB "\326\330\326\303\326\320..."
   \            D6D02E2E
   \            2E00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\312\\325\\265\\275\\265\\343\\266\\324\\2`:
   \   000000   CAD5B5BD     DB "\312\325\265\275\265\343\266\324\265\343\317\373\317\242: "
   \            B5E3B6D4
   \            B5E3CFFB
   \            CFA23A20
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "%X">`:
   \   000000   255800       DB "%X"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant " from ">`:
   \   000000   2066726F     DB " from "
   \            6D2000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n\\n">`:
   \   000000   0A0A00       DB "\012\012"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "peer is busy">`:
   \   000000   70656572     DB "peer is busy"
   \            20697320
   \            62757379
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\260\\374\\272\\254\\327\\324\\311\\355\\3`:
   \   000000   B0FCBAAC     DB "\260\374\272\254\327\324\311\355\320\305\317\242"
   \            D7D4C9ED
   \            D0C5CFA2
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\322\\321\\261\\340\\302\\353\\n\\261\\340`:
   \   000000   D2D1B1E0     DB "\322\321\261\340\302\353\012\261\340\302\353\272\363\265\304\326\265\312\307:"
   \            C2EB0AB1
   \            E0C2EBBA
   \            F3B5C4D6
   \            B5CAC73A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\316\\264\\261\\340\\302\\353\\n\\266\\324`:
   \   000000   CEB4B1E0     DB "\316\264\261\340\302\353\012\266\324\267\275\265\304\326\265\312\307:"
   \            C2EB0AB6
   \            D4B7BDB5
   \            C4D6B5CA
   \            C73A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "i am busy!\\n">`:
   \   000000   6920616D     DB "i am busy!\012"
   \            20627573
   \            79210A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {36, 0, 0, 0}>`:
   \   000000   24           DB 36
   \   000001   00           DB 0
   \   000002   00           DB 0
   \   000003   00           DB 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n------------\\n">`:
   \   000000   0A2D2D2D     DB "\012------------\012"
   \            2D2D2D2D
   \            2D2D2D2D
   \            2D0A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "active: ">`:
   \   000000   61637469     DB "active: "
   \            76653A20
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant " ">`:
   \   000000   2000         DB " "

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n\\323\\320">`:
   \   000000   0AD3D000     DB "\012\323\320"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\270\\366\\301\\332\\276\\323">`:
   \   000000   B8F6C1DA     DB "\270\366\301\332\276\323"
   \            BED300  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\266\\324\\267\\275\\313\\265: ">`:
   \   000000   B6D4B7BD     DB "\266\324\267\275\313\265: "
   \            CBB53A20
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "!">`:
   \   000000   2100         DB "!"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {42, 0, 0, 0}>`:
   \   000000   2A           DB 42
   \   000001   00           DB 0
   \   000002   00           DB 0
   \   000003   00           DB 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\275\\273\\273\\273\\312\\375\\276\\335\\2`:
   \   000000   BDBBBBBB     DB "\275\273\273\273\312\375\276\335\260\374\307\353\307\363\267\242\313\315\312\247\260\334."
   \            CAFDBEDD
   \            B0FCC7EB
   \            C7F3B7A2
   \            CBCDCAA7
   \            B0DC2E00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "send to addr">`:
   \   000000   73656E64     DB "send to addr"
   \            20746F20
   \            61646472
   \            00      
   1178          
   1179          
   1180          /*********************************************************************
   1181          *********************************************************************/
   1182          

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     Power_of_2                         0      0     15
     Reset_down_neighbor                2      0     50
       -> AF_DataRequest                0      0     42
       -> HalLedBlink                   0      0     24
     SampleApp_HandleKeys               0      0     23
       -> aps_FindGroup                 0      0     22
       -> aps_RemoveGroup               0      0     22
       -> aps_AddGroup                  0      0     22
       -> NLME_GetShortAddr             0      0     22
       -> HalUARTWrite                  0      0     22
       -> Show_Bit                      0      0     22
       -> Show_Bit                      0      0     22
       -> HalUARTWrite                  0      0     22
       -> Show_Bit                      0      0     22
       -> HalUARTWrite                  0      0     22
       -> Show_Bit                      0      0     22
     SampleApp_Init                     0      0     18
       -> MT_UartInit                   0      0     30
       -> MT_UartRegisterTaskID         0      0     30
       -> HalUARTWrite                  0      0     30
       -> Power_of_2                    0      0     30
       -> afRegister                    0      0     30
       -> RegisterForKeys               0      0     30
       -> osal_memcpy                   0      0     36
       -> aps_AddGroup                  0      0     30
       -> HalLcdWriteString             0      0     30
     SampleApp_MessageMSGCB             2      0     50
       -> HalUARTWrite                  0      0     58
       -> Onboard_soft_reset            0      0     58
       -> HalUARTWrite                  0      0     58
       -> HalUARTWrite                  0      0     58
       -> Show_Bit                      0      0     58
       -> sprintf                       0      0     62
       -> HalUARTWrite                  0      0     58
       -> HalUARTWrite                  0      0     58
       -> HalUARTWrite                  0      0     58
       -> HalUARTWrite                  0      0     58
       -> HalUARTWrite                  0      0     58
       -> HalUARTWrite                  0      0     58
       -> HalUARTWrite                  0      0     58
       -> Show_Bit                      0      0     58
       -> HalUARTWrite                  0      0     58
       -> Show_Bit                      0      0     58
       -> Show_Num8                     0      0     58
       -> AF_DataRequest                0      0     76
       -> HalUARTWrite                  0      0     58
       -> osal_getClock                 0      0     58
       -> srand                         0      0     58
       -> rand                          0      0     58
       -> AF_DataRequest                0      0     76
       -> HalUARTWrite                  0      0     58
       -> Show_Bit                      0      0     58
       -> HalUARTWrite                  0      0     58
       -> Show_Bit                      0      0     58
       -> HalLedBlink                   0      0     58
       -> Reset_down_neighbor           0      0     58
       -> HalUARTWrite                  0      0     58
       -> HalUARTWrite                  0      0     58
       -> HalUARTWrite                  0      0     58
       -> HalUARTWrite                  0      0     58
       -> HalUARTWrite                  0      0     58
       -> HalUARTWrite                  0      0     58
       -> HalUARTWrite                  0      0     58
       -> HalUARTWrite                  0      0     58
       -> HalUARTWrite                  0      0     58
       -> HalUARTWrite                  0      0     58
       -> HalUARTWrite                  0      0     58
     SampleApp_ProcessEvent             0      0     12
       -> osal_msg_receive              0      0     24
       -> osal_start_timerEx            0      0     24
       -> osal_msg_deallocate           0      0     24
       -> osal_msg_receive              0      0     24
       -> SampleApp_SerialCMD           0      0     24
       -> SampleApp_HandleKeys          0      0     24
       -> SampleApp_MessageMSGCB        0      0     24
       -> SampleApp_SendGroupMessage
                                        0      0     24
       -> SampleApp_SendPointToPointMessage
                                        0      0     24
       -> osal_rand                     0      0     24
       -> osal_start_timerEx            0      0     24
     SampleApp_SendFlashMessage         1      0     22
       -> AF_DataRequest                0      0     44
     SampleApp_SendGroupMessage         0      0     31
       -> AF_DataRequest                0      0     38
     SampleApp_SendPeriodicMessage      0      0     19
       -> AF_DataRequest                0      0     38
       -> HalLedBlink                   0      0     20
     SampleApp_SendPointToPointMessage
                                        2      0     38
       -> osal_getClock                 0      0     34
       -> srand                         0      0     34
       -> rand                          0      0     34
       -> rand                          0      0     34
       -> AF_DataRequest                0      0     52
       -> HalLedBlink                   0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
     SampleApp_SerialCMD                0      0     24
       -> HalUARTWrite                  0      0     24
       -> HalUARTWrite                  0      0     24
       -> HalUARTWrite                  0      0     24
     Show_Bit                           2      0     43
       -> HalUARTWrite                  0      0     28
       -> HalUARTWrite                  0      0     28
     Show_Num8                          1      0     39
       -> HalUARTWrite                  0      0     20


   Segment part sizes:

     Function/Label                                 Bytes
     --------------                                 -----
     SOURCE_DATA                                       1
     Device_ID                                         1
     LIFE_TIME                                         1
     NEI_NUM                                           1
     Nei_Table                                         6
     ACTIVE                                            6
     _TURN                                             1
     Slot_Size                                         2
     DATA_SLOT                                        24
     MAX_Degree                                        2
     Decoded_X                                       100
     Undecoded_Y                                     100
     Exchanging_Neighbor                               2
     Exchanging_Data                                   1
     Exchange_index                                    1
     Waiting_Request                                   1
     Exchange_Lock                                     1
     SampleApp_ClusterList                             8
     SampleApp_SimpleDesc                             12
     SampleApp_epDesc                                  6
     SampleApp_TaskID                                  1
     SampleApp_NwkState                                1
     SampleApp_TransID                                 1
     SampleApp_Periodic_DstAddr                       12
     SampleApp_Flash_DstAddr                          12
     Point_To_Point_DstAddr                           12
     SampleApp_Group                                  18
     SampleAppPeriodicCounter                          1
     SampleAppFlashCounter                             1
     Show_Bit                                        103
     ?Subroutine0                                      3
     ??Subroutine33_0                                  5
     ?Subroutine9                                      9
     ??Subroutine41_0                                  1
     ??Subroutine42_0                                  8
     Show_Num8                                        28
     ??Subroutine39_0                                 21
     Power_of_2                                       27
     SampleApp_Init                                  294
     ?Subroutine10                                     7
     ?Subroutine32                                    11
     ?Subroutine30                                    11
     ?Subroutine13                                     2
     ??Subroutine38_0                                  5
     ?Subroutine8                                      5
     ?Subroutine27                                    11
     ?Subroutine3                                     12
     ?Subroutine7                                      6
     ?Subroutine28                                    18
     SampleApp_ProcessEvent                          214
     SampleApp_SendGroupMessage                       70
     ??Subroutine34_0                                  6
     ?Subroutine1                                      3
     ??Subroutine43_0                                  5
     SampleApp_SendPeriodicMessage                    86
     SampleApp_SendFlashMessage                      113
     ??Subroutine44_0                                  7
     SampleApp_HandleKeys                            217
     ?Subroutine17                                     1
     ??Subroutine37_0                                  6
     SampleApp_SerialCMD                              77
     SampleApp_MessageMSGCB                         1323
     ?Subroutine26                                    23
     ?Subroutine24                                     4
     ?Subroutine31                                    11
     ?Subroutine23                                    13
     ?Subroutine22                                     8
     ?Subroutine21                                    10
     ?Subroutine20                                    10
     ?Subroutine19                                     3
     ??Subroutine35_0                                  7
     ?Subroutine18                                     5
     ??Subroutine36_0                                  6
     ?Subroutine16                                    15
     ?Subroutine15                                    23
     ?Subroutine14                                    38
     ?Subroutine11                                     2
     ?Subroutine6                                     13
     ?Subroutine5                                      9
     ?Subroutine29                                     2
     ??Subroutine40_0                                  7
     ?Subroutine2                                      8
     ?Subroutine25                                    12
     ?Subroutine12                                     9
     ?Subroutine4                                     17
     Reset_down_neighbor                             117
     SampleApp_SendPointToPointMessage
                                                     370
     ?<Initializer for SOURCE_DATA>                    1
     ?<Initializer for Device_ID>                      1
     ?<Initializer for LIFE_TIME>                      1
     ?<Initializer for MAX_Degree>                     2
     ??Show_Bit?relay                                  6
     ??Show_Num8?relay                                 6
     ??Power_of_2?relay                                6
     ??SampleApp_Init?relay                            6
     ??SampleApp_ProcessEvent?relay                    6
     ??SampleApp_SendGroupMessage?relay                6
     ??SampleApp_SendPeriodicMessage?relay             6
     ??SampleApp_SendFlashMessage?relay                6
     ??SampleApp_HandleKeys?relay                      6
     ??SampleApp_SerialCMD?relay                       6
     ??SampleApp_MessageMSGCB?relay                    6
     ??Reset_down_neighbor?relay                       6
     ??SampleApp_SendPointToPointMessage?relay         6
     ?<Constant {48, 49}>                              2
     ?<Constant "\n">                                  2
     ?<Constant "System is started.\n\n">             21
     ?<Constant "Group 1">                             8
     ?<Constant "SampleApp">                          10
     ?<Constant "\324\264\312\375\276\335\312\307:    11
     ?<Constant "\302\353\327\326\320\305\317\242:    11
     ?<Constant "\301\332\276\323\270\366\312\375:"   10
     ?<Constant "\316\322\313\265: ">                  7
     ?<Constant "####">                                4
     ?<Constant "\326\330\326\303\326\320...">        10
     ?<Constant "\312\325\265\275\265\343\266\324\2   17
     ?<Constant "%X">                                  3
     ?<Constant " from ">                              7
     ?<Constant "\n\n">                                3
     ?<Constant "peer is busy">                       13
     ?<Constant "\260\374\272\254\327\324\311\355\3   13
     ?<Constant "\322\321\261\340\302\353\n\261\340   21
     ?<Constant "\316\264\261\340\302\353\n\266\324   19
     ?<Constant "i am busy!\n">                       12
     ?<Constant {36, 0, 0, 0}>                         4
     ?<Constant "\n------------\n">                   15
     ?<Constant "active: ">                            9
     ?<Constant " ">                                   2
     ?<Constant "\n\323\320">                          4
     ?<Constant "\270\366\301\332\276\323">            7
     ?<Constant "\266\324\267\275\313\265: ">          9
     ?<Constant "!">                                   2
     ?<Constant {42, 0, 0, 0}>                         4
     ?<Constant "\275\273\273\273\312\375\276\335\2   24
     ?<Constant "send to addr">                       13

 
 3 457 bytes in segment BANKED_CODE
    78 bytes in segment BANK_RELAYS
     5 bytes in segment XDATA_I
     5 bytes in segment XDATA_ID
   319 bytes in segment XDATA_ROM_C
   309 bytes in segment XDATA_Z
 
 3 540 bytes of CODE  memory
   319 bytes of CONST memory
   314 bytes of XDATA memory

Errors: none
Warnings: 4
