###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.1.10194/W32 for 8051         10/Sep/2019  16:23:44 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a\ #
#                          Projects\zstack\Samples\SampleApp-Router\Source\Sa #
#                          mpleApp.c                                          #
#    Command line       =  -f "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5 #
#                          .1a\Projects\zstack\Samples\SampleApp-Router\CC253 #
#                          0DB\..\..\..\Tools\CC2530DB\f8wRouter.cfg"         #
#                          (-DCPU32MHZ -DROOT=__near_func                     #
#                          -DMAC_CFG_APP_PENDING_QUEUE=TRUE                   #
#                          -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8         #
#                          -DMAC_CFG_RX_MAX=5 -DRTR_NWK) -f                   #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \..\..\..\Tools\CC2530DB\f8wConfig.cfg"            #
#                          (-DZIGBEEPRO -DSECURE=0 -DZG_SECURE_DYNAMIC=0      #
#                          -DREFLECTOR -DDEFAULT_CHANLIST=0x02000000          #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFF0                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 "F:\ZStack-CC2530(2019.09.0 #
#                          7)\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sa #
#                          mpleApp-Router\Source\SampleApp.c" -D ZTOOL_P1 -D  #
#                          MT_TASK -D MT_SYS_FUNC -D MT_ZDO_FUNC -D           #
#                          LCD_SUPPORTED=DEBUG -lC "F:\ZStack-CC2530(2019.09. #
#                          07)\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\S #
#                          ampleApp-Router\CC2530DB\RouterEB\List\" -lA       #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \RouterEB\List\" --diag_suppress Pe001,Pa010 -o    #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \RouterEB\Obj\" -e --no_code_motion --debug        #
#                          --core=plain --dptr=16,1 --data_model=large        #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I "F:\ZStack-CC2530(2019.09. #
#                          07)\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\S #
#                          ampleApp-Router\CC2530DB\" -I                      #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \..\Source\" -I "F:\ZStack-CC2530(2019.09.07)\ZSta #
#                          ck-CC2530-2.5.1a\Projects\zstack\Samples\SampleApp #
#                          -Router\CC2530DB\..\..\..\ZMain\TI2530DB\" -I      #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \..\..\..\..\..\Components\hal\include\" -I        #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \..\..\..\..\..\Components\hal\target\CC2530EB\"   #
#                          -I "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5 #
#                          .1a\Projects\zstack\Samples\SampleApp-Router\CC253 #
#                          0DB\..\..\..\..\..\Components\mac\include\" -I     #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \..\..\..\..\..\Components\mac\high_level\" -I     #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \..\..\..\..\..\Components\mac\low_level\srf04\"   #
#                          -I "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5 #
#                          .1a\Projects\zstack\Samples\SampleApp-Router\CC253 #
#                          0DB\..\..\..\..\..\Components\mac\low_level\srf04\ #
#                          single_chip\" -I "F:\ZStack-CC2530(2019.09.07)\ZSt #
#                          ack-CC2530-2.5.1a\Projects\zstack\Samples\SampleAp #
#                          p-Router\CC2530DB\..\..\..\..\..\Components\mt\"   #
#                          -I "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5 #
#                          .1a\Projects\zstack\Samples\SampleApp-Router\CC253 #
#                          0DB\..\..\..\..\..\Components\osal\include\" -I    #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \..\..\..\..\..\Components\services\saddr\" -I     #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \..\..\..\..\..\Components\services\sdata\" -I     #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \..\..\..\..\..\Components\stack\af\" -I           #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \..\..\..\..\..\Components\stack\nwk\" -I          #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \..\..\..\..\..\Components\stack\sapi\" -I         #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \..\..\..\..\..\Components\stack\sec\" -I          #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \..\..\..\..\..\Components\stack\sys\" -I          #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \..\..\..\..\..\Components\stack\zdo\" -I          #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \..\..\..\..\..\Components\zmac\" -I               #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Router\CC2530DB #
#                          \..\..\..\..\..\Components\zmac\f8w\" -Ohz         #
#                          --require_prototypes                               #
#    List file          =  F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a\ #
#                          Projects\zstack\Samples\SampleApp-Router\CC2530DB\ #
#                          RouterEB\List\SampleApp.lst                        #
#    Object file        =  F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a\ #
#                          Projects\zstack\Samples\SampleApp-Router\CC2530DB\ #
#                          RouterEB\Obj\SampleApp.r51                         #
#                                                                             #
#                                                                             #
###############################################################################

F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\SampleApp-Router\Source\SampleApp.c
      1          /**************************************************************************************************
      2            Filename:       SampleApp.c
      3            Revised:        $Date: 2009-03-18 15:56:27 -0700 (Wed, 18 Mar 2009) $
      4            Revision:       $Revision: 19453 $
      5          
      6            Description:    Router普通路由器节点
      7          
      8          
      9            Copyright 2007 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          /*********************************************************************
     41            This application isn't intended to do anything useful, it is
     42            intended to be a simple example of an application's structure.
     43          
     44            This application sends it's messages either as broadcast or
     45            broadcast filtered group messages.  The other (more normal)
     46            message addressing is unicast.  Most of the other sample
     47            applications are written to support the unicast message model.
     48          
     49            Key control:
     50              SW1:  Sends a flash command to all devices in Group 1.
     51              SW2:  Adds/Removes (toggles) this device in and out
     52                    of Group 1.  This will enable and disable the
     53                    reception of the flash command.
     54          *********************************************************************/
     55          
     56          /*********************************************************************
     57           * INCLUDES
     58           */
     59          #include "OSAL.h"
     60          #include "ZGlobals.h"
     61          #include "AF.h"
     62          #include "aps_groups.h"
     63          #include "ZDApp.h"
     64          #include "MT.h"  //透传中CMD_SERIAL_MSG的定义
     65          
     66          #include "SampleApp.h"
     67          #include "SampleAppHw.h"
     68          
     69          #include "OnBoard.h"
     70          #include "string.h"
     71          
     72          /* HAL */
     73          #include "hal_lcd.h"
     74          #include "hal_led.h"
     75          #include "hal_key.h"
     76          
     77          extern uint16 NLME_GetShortAddr( void ); //获取自身短地址
     78          extern void NLME_UpdateLinkStatus( void ); //更新连接状态
     79          
     80          
     81          /*********************************************************************
     82           * CONSTANTS
     83           */
     84          //用户引入的头文件
     85          #include "MT_UART.h"
     86          #include <stdio.h>
     87          #include "nwk_util.h"
     88          #include <stdlib.h>
     89          #include "OSAL_Clock.h"
     90          #include <math.h>
     91          
     92          
     93          /*********** 注意: 每个设备不一样,记得修改!  **********/
     94          
     95          
     96          //uint8 SOURCE_DATA = 1<<0;    //采集的数据 1
     97          //uint8 Device_ID  = 0;    //设备ID
     98          
     99          //uint8 SOURCE_DATA = 1<<1;    //采集的数据 2l
    100          //uint8 Device_ID  = 1;    //设备ID
    101          
    102          //uint8 SOURCE_DATA = 1<<2;    //采集的数据 3
    103          //uint8 Device_ID  = 2;    //设备ID
    104          

   \                                 In  segment XDATA_I, align 1, keep-with-next
    105          uint8 SOURCE_DATA = 1<<3;      //采集的数据 4
   \                     SOURCE_DATA:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for SOURCE_DATA>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    106          uint8 Device_ID  = 3;      //设备ID
   \                     Device_ID:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for Device_ID>`
   \   000001                REQUIRE __INIT_XDATA_I
    107          
    108          
    109          /*********************************************************************
    110           * MACROS
    111           */
    112          #define random(x) (rand() % x)
    113          #define uchar unsigned char
    114          #define Node_Num uint8 3  //网络中节点的数量
    115          
    116          
    117          /*********************************************************************
    118           * TYPEDEFS
    119           */
    120          /*<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
    121           * GLOBAL VARIABLES 全局变量
    122           */

   \                                 In  segment XDATA_I, align 1, keep-with-next
    123          int8 LIFE_TIME=5;               //邻居活跃度初始值
   \                     LIFE_TIME:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for LIFE_TIME>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    124          int8 NEI_NUM = 0;               //邻居数量
   \                     NEI_NUM:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    125          int16 Nei_Table[3] = {0};       //邻居表
   \                     Nei_Table:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    126          unsigned short ACTIVE[3] = {0}; //邻居活跃度列表
   \                     ACTIVE:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    127          int8 _TURN = 0;                 //发送轮次控制
   \                     _TURN:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    128          
    129          
    130          /*#######################以下是Router节点的配置############################*/
    131          
    132          /*一个码字的组成*/
    133          typedef struct Encoded_PKT  //编码过的码字
    134          {
    135              /*数据域*/
    136              short data; //码字数据
    137              /*编码信息,由哪几个节点的数据包组成*/
    138              uint16 Degree_ID;
    139          }PKT;
    140          
    141          

   \                                 In  segment XDATA_ROM_C, align 1
    142          const int Slot_Size = 6;        //码字槽大小
   \                     Slot_Size:
   \   000000   0600         DW 6
    143          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    144          PKT DATA_SLOT[5+1];             //码字结构体数组,0位保存自身数据,用1-5位来进行码字交换
   \                     DATA_SLOT:
   \   000000                DS 24
   \   000018                REQUIRE __INIT_XDATA_Z
    145          
    146          

   \                                 In  segment XDATA_I, align 1, keep-with-next
    147          unsigned short MAX_Degree = 1;  //初始化允许的最大度
   \                     MAX_Degree:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for MAX_Degree>`
   \   000002                REQUIRE __INIT_XDATA_I
    148          //uint8 Decoded_X[100] = {0};     //初始化已解码的码字数组
    149          //uint8 Undecoded_Y[100] = {0};   //初始化未解码的复杂码字数组

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    150          int16 Exchanging_Neighbor;      //待进行码字交换的邻居
   \                     Exchanging_Neighbor:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    151          uint8 Exchanging_Data;          //待交换的码字
   \                     Exchanging_Data:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    152          uint8 Exchange_index;           //待交换的码字的索引
   \                     Exchange_index:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    153          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    154          uint8 Waiting_Request = FALSE;   //是否在等待对方返回交换的数据包回应
   \                     Waiting_Request:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    155          uint8 Exchange_Lock = FALSE;     //码字槽操作锁
   \                     Exchange_Lock:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    156          unsigned short Is_AgentNode = FALSE; //是否是代理节点
   \                     Is_AgentNode:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    157          /*<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
    158          * end
    159          */
    160          
    161          
    162          
    163          
    164          // This list should be filled with Application specific Cluster IDs.

   \                                 In  segment XDATA_ROM_C, align 1
    165          const cId_t SampleApp_ClusterList[SAMPLEAPP_MAX_CLUSTERS] =
   \                     SampleApp_ClusterList:
   \   000000   0100         DW 1
   \   000002   0200         DW 2
   \   000004   0000         DW 0
   \   000006   0000         DW 0
    166          {
    167            SAMPLEAPP_PERIODIC_CLUSTERID,
    168            SAMPLEAPP_FLASH_CLUSTERID
    169          };
    170          

   \                                 In  segment XDATA_ROM_C, align 1
    171          const SimpleDescriptionFormat_t SampleApp_SimpleDesc =
   \                     SampleApp_SimpleDesc:
   \   000000   14           DB 20
   \   000001   080F         DW 3848
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   04           DB 4
   \   000007   ....         DW SampleApp_ClusterList
   \   000009   04           DB 4
   \   00000A   ....         DW SampleApp_ClusterList
    172          {
    173            SAMPLEAPP_ENDPOINT,              //  int Endpoint;
    174            SAMPLEAPP_PROFID,                //  uint16 AppProfId[2];
    175            SAMPLEAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    176            SAMPLEAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
    177            SAMPLEAPP_FLAGS,                 //  int   AppFlags:4;
    178            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    179            (cId_t *)SampleApp_ClusterList,  //  uint8 *pAppInClusterList;
    180            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    181            (cId_t *)SampleApp_ClusterList   //  uint8 *pAppInClusterList;
    182          };
    183          
    184          // This is the Endpoint/Interface description.  It is defined here, but
    185          // filled-in in SampleApp_Init().  Another way to go would be to fill
    186          // in the structure here and make it a "const" (in code space).  The
    187          // way it's defined in this sample app it is define in RAM.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    188          endPointDesc_t SampleApp_epDesc;
   \                     SampleApp_epDesc:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z
    189          
    190          /*********************************************************************
    191           * EXTERNAL VARIABLES
    192           */
    193          
    194          /*********************************************************************
    195           * EXTERNAL FUNCTIONS
    196           */
    197          
    198          /*********************************************************************
    199           * LOCAL VARIABLES
    200           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    201          uint8 SampleApp_TaskID;   // Task ID for internal task/event processing
   \                     SampleApp_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    202                                    // This variable will be received when
    203                                    // SampleApp_Init() is called.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    204          devStates_t SampleApp_NwkState;
   \                     SampleApp_NwkState:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    205          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    206          uint8 SampleApp_TransID;  // This is the unique message ID (counter)
   \                     SampleApp_TransID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    207          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    208          afAddrType_t SampleApp_Periodic_DstAddr;
   \                     SampleApp_Periodic_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    209          afAddrType_t SampleApp_Flash_DstAddr; //组播
   \                     SampleApp_Flash_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    210          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    211          afAddrType_t Point_To_Point_DstAddr; //WeBee点对点通信定义
   \                     Point_To_Point_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    212          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    213          aps_Group_t SampleApp_Group; //分组内容
   \                     SampleApp_Group:
   \   000000                DS 18
   \   000012                REQUIRE __INIT_XDATA_Z
    214          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    215          uint8 SampleAppPeriodicCounter = 0;
   \                     SampleAppPeriodicCounter:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    216          uint8 SampleAppFlashCounter = 0;
   \                     SampleAppFlashCounter:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    217          
    218          /*********************************************************************
    219           * LOCAL FUNCTIONS     函数声明
    220           */
    221          void SampleApp_HandleKeys( uint8 shift, uint8 keys );
    222          void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pckt );
    223          void SampleApp_SendPeriodicMessage( void );
    224          void SampleApp_SendFlashMessage( uint16 flashTime );
    225          void SampleApp_SerialCMD(mtOSALSerialData_t *cmdMsg); // 串口通信
    226          void SampleApp_SendPointToPointMessage( void ); //点对点
    227          void SampleApp_SendGroupMessage( void );// 网蜂组播通讯发送函数定义
    228          void Reset_down_neighbor(int16 nei_addr); //重置邻居设备函数
    229          void Show_Bit(uint16 X, uint8 N); //串口打印一个8位比特二进制数字
    230          void Show_Num(uint16 X);  //串口打印8bit数字
    231          uint16 Power_of_2(uint8 X);
    232          /*********************************************************************
    233           * NETWORK LAYER CALLBACKS
    234           */
    235          
    236          /*********************************************************************
    237           * PUBLIC FUNCTIONS
    238           */
    239          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    240          void Show_Bit( uint16 X, uint8 N )
   \                     Show_Bit:
    241          {
   \   000000   74F3         MOV     A,#-0xd
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 13
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 0,R2
   \   00000C   8B..         MOV     ?V0 + 1,R3
    242            uchar Bit[2] = {'0','1'};
   \   00000E   85..82       MOV     DPL,?XSP + 0
   \   000011   85..83       MOV     DPH,?XSP + 1
   \   000014   AC82         MOV     R4,DPL
   \   000016   AD83         MOV     R5,DPH
   \   000018   7583..       MOV     DPH,#(`?<Constant {48, 49}>` >> 8) & 0xff
   \   00001B   7582..       MOV     DPL,#`?<Constant {48, 49}>` & 0xff
   \   00001E   7402         MOV     A,#0x2
   \   000020   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    243            uint8 index;
    244            for(short j=N-1;j>=0;--j)
   \   000023   E9           MOV     A,R1
   \   000024   24FF         ADD     A,#-0x1
   \   000026   FE           MOV     R6,A
   \   000027   E4           CLR     A
   \   000028   8029         SJMP    ??Show_Bit_0
    245            {
    246              index = (X>>j) & 1;
    247              HalUARTWrite(0,&Bit[index],1);
   \                     ??Show_Bit_1:
   \   00002A                ; Setup parameters for call to function HalUARTWrite
   \   00002A   7C01         MOV     R4,#0x1
   \   00002C   7D00         MOV     R5,#0x0
   \   00002E   85....       MOV     ?V0 + 2,?V0 + 0
   \   000031   85....       MOV     ?V0 + 3,?V0 + 1
   \   000034   EE           MOV     A,R6
   \   000035   78..         MOV     R0,#?V0 + 2
   \   000037   12....       LCALL   ?US_SHR
   \   00003A   E5..         MOV     A,?V0 + 2
   \   00003C   5401         ANL     A,#0x1
   \   00003E   F8           MOV     R0,A
   \   00003F   85..82       MOV     DPL,?XSP + 0
   \   000042   85..83       MOV     DPH,?XSP + 1
   \   000045   E582         MOV     A,DPL
   \   000047   28           ADD     A,R0
   \   000048   FA           MOV     R2,A
   \   000049   E583         MOV     A,DPH
   \   00004B   12....       LCALL   ?Subroutine11 & 0xFFFF
    248            }
   \                     ??CrossCallReturnLabel_21:
   \   00004E   EE           MOV     A,R6
   \   00004F   24FF         ADD     A,#-0x1
   \   000051   1E           DEC     R6
   \   000052   EF           MOV     A,R7
   \                     ??Show_Bit_0:
   \   000053   34FF         ADDC    A,#-0x1
   \   000055   FF           MOV     R7,A
   \   000056   C3           CLR     C
   \   000057   EF           MOV     A,R7
   \   000058   12....       LCALL   ??Subroutine72_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_148:
   \   00005B   50CD         JNC     ??Show_Bit_1
    249          //  HalUARTWrite(0,"\n",1);
    250          }
   \   00005D   7402         MOV     A,#0x2
   \   00005F   12....       LCALL   ?DEALLOC_XSTACK8
   \   000062   7F05         MOV     R7,#0x5
   \   000064   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   3400         ADDC    A,#0x0
   \   000002   FB           MOV     R3,A
   \   000003   7900         MOV     R1,#0x0
   \   000005   12....       LCALL   ??HalUARTWrite?relay
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine72_0:
   \   000000   9400         SUBB    A,#0x0
   \   000002   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000004   65D0         XRL     A,PSW
   \   000006   33           RLC     A
   \   000007   22           RET
    251          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    252          void Show_Num( uint16 X )
   \                     Show_Num:
    253          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 5
   \   000005   74FB         MOV     A,#-0x5
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FC           MOV     R4,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FD           MOV     R5,A
    254            if(X == 0)
   \   00000E   EC           MOV     A,R4
   \   00000F   4D           ORL     A,R5
   \   000010   7012         JNZ     ??Show_Num_0
    255            {
    256              HalUARTWrite(0,"0",1);
   \   000012                ; Setup parameters for call to function HalUARTWrite
   \   000012   7C01         MOV     R4,#0x1
   \   000014   7D00         MOV     R5,#0x0
   \   000016   7A..         MOV     R2,#`?<Constant "0">` & 0xff
   \   000018   7B..         MOV     R3,#(`?<Constant "0">` >> 8) & 0xff
   \   00001A   7900         MOV     R1,#0x0
   \   00001C   12....       LCALL   ??HalUARTWrite?relay
    257            }
    258            else
    259            {
    260              uint8 N = 0;
    261              uint8 Num[4];
    262              
    263              while(X)
    264              {
    265                Num[N++] = X % 10;
    266                X /=10;
    267                
    268              }
    269              while(N > 0)
    270              {
    271                uchar temp = '0' + Num[--N];
    272                HalUARTWrite(0,&temp,1);
    273              }
    274            }
    275            
    276            
    277          }
   \                     ??Show_Num_1:
   \   00001F   7405         MOV     A,#0x5
   \   000021   02....       LJMP    ?Subroutine0 & 0xFFFF
   \                     ??Show_Num_0:
   \   000024   7E00         MOV     R6,#0x0
   \                     ??Show_Num_2:
   \   000026   EC           MOV     A,R4
   \   000027   F8           MOV     R0,A
   \   000028   ED           MOV     A,R5
   \   000029   F9           MOV     R1,A
   \   00002A   7A0A         MOV     R2,#0xa
   \   00002C   7B00         MOV     R3,#0x0
   \   00002E   12....       LCALL   ?US_DIV_MOD
   \   000031   8E..         MOV     ?V0 + 0,R6
   \   000033   7401         MOV     A,#0x1
   \   000035   12....       LCALL   ?XSTACK_DISP0_8
   \   000038   12....       LCALL   ?Subroutine24 & 0xFFFF
   \                     ??CrossCallReturnLabel_44:
   \   00003B   EA           MOV     A,R2
   \   00003C   F0           MOVX    @DPTR,A
   \   00003D   0E           INC     R6
   \   00003E   EC           MOV     A,R4
   \   00003F   F8           MOV     R0,A
   \   000040   ED           MOV     A,R5
   \   000041   F9           MOV     R1,A
   \   000042   7A0A         MOV     R2,#0xa
   \   000044   7B00         MOV     R3,#0x0
   \   000046   12....       LCALL   ?US_DIV_MOD
   \   000049   88..         MOV     ?V0 + 0,R0
   \   00004B   89..         MOV     ?V0 + 1,R1
   \   00004D   AC..         MOV     R4,?V0 + 0
   \   00004F   AD..         MOV     R5,?V0 + 1
   \   000051   EC           MOV     A,R4
   \   000052   4D           ORL     A,R5
   \   000053   70D1         JNZ     ??Show_Num_2
   \                     ??Show_Num_3:
   \   000055   EE           MOV     A,R6
   \   000056   60C7         JZ      ??Show_Num_1
   \   000058   1E           DEC     R6
   \   000059   8E..         MOV     ?V0 + 0,R6
   \   00005B   7401         MOV     A,#0x1
   \   00005D   12....       LCALL   ?XSTACK_DISP0_8
   \   000060   12....       LCALL   ?Subroutine24 & 0xFFFF
   \                     ??CrossCallReturnLabel_45:
   \   000063   12....       LCALL   ?Subroutine47 & 0xFFFF
   \                     ??CrossCallReturnLabel_74:
   \   000066   80ED         SJMP    ??Show_Num_3

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine24:
   \   000000   E582         MOV     A,DPL
   \   000002   25..         ADD     A,?V0 + 0
   \   000004   F582         MOV     DPL,A
   \   000006   E583         MOV     A,DPH
   \   000008   3400         ADDC    A,#0x0
   \   00000A   F583         MOV     DPH,A
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine47:
   \   000000   12....       LCALL   ?Subroutine58 & 0xFFFF
   \                     ??CrossCallReturnLabel_89:
   \   000003   7900         MOV     R1,#0x0
   \   000005   12....       LCALL   ??HalUARTWrite?relay
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine58:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   2430         ADD     A,#0x30
   \   000003   85..82       MOV     DPL,?XSP + 0
   \   000006   85..83       MOV     DPH,?XSP + 1
   \   000009   F0           MOVX    @DPTR,A
   \   00000A                ; Setup parameters for call to function HalUARTWrite
   \   00000A                ; Setup parameters for call to function HalUARTWrite
   \   00000A                ; Setup parameters for call to function HalUARTWrite
   \   00000A                ; Setup parameters for call to function HalUARTWrite
   \   00000A                ; Setup parameters for call to function HalUARTWrite
   \   00000A   7C01         MOV     R4,#0x1
   \   00000C   7D00         MOV     R5,#0x0
   \   00000E   AA82         MOV     R2,DPL
   \   000010   AB83         MOV     R3,DPH
   \   000012   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003                REQUIRE ??Subroutine76_0
   \   000003                ; // Fall through to label ??Subroutine76_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine76_0:
   \   000000   7F02         MOV     R7,#0x2
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    278          
    279          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    280          uint16 Power_of_2( uint8 X )
   \                     Power_of_2:
    281          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    282            if(X == 0)
   \   000000   E9           MOV     A,R1
   \   000001   7006         JNZ     ??Power_of_2_0
    283              return 1;
   \   000003   7A01         MOV     R2,#0x1
   \   000005   7B00         MOV     R3,#0x0
   \   000007   8015         SJMP    ??Power_of_2_1
    284            else
    285            {
    286              uint16 temp = 2;
   \                     ??Power_of_2_0:
   \   000009   7A02         MOV     R2,#0x2
   \   00000B   7B00         MOV     R3,#0x0
    287              for(uchar i=2;i<=X;++i)
   \   00000D   7802         MOV     R0,#0x2
   \   00000F   8008         SJMP    ??Power_of_2_2
    288              {
    289                temp *=2;
   \                     ??Power_of_2_3:
   \   000011   EA           MOV     A,R2
   \   000012   C3           CLR     C
   \   000013   33           RLC     A
   \   000014   FA           MOV     R2,A
   \   000015   EB           MOV     A,R3
   \   000016   33           RLC     A
   \   000017   FB           MOV     R3,A
    290              }
   \   000018   08           INC     R0
   \                     ??Power_of_2_2:
   \   000019   E9           MOV     A,R1
   \   00001A   C3           CLR     C
   \   00001B   98           SUBB    A,R0
   \   00001C   50F3         JNC     ??Power_of_2_3
    291              return temp;
   \                     ??Power_of_2_1:
   \   00001E   02....       LJMP    ?BRET
    292            }
    293              
    294          }
    295          /*********************************************************************
    296           * @fn      SampleApp_Init   应用初始化
    297           *
    298           * @brief   Initialization function for the Generic App Task.
    299           *          This is called during initialization and should contain
    300           *          any application specific initialization (ie. hardware
    301           *          initialization/setup, table initialization, power up
    302           *          notificaiton ... ).
    303           *
    304           * @param   task_id - the ID assigned by OSAL.  This ID should be
    305           *                    used to send messages and set timers.
    306           *
    307           * @return  none
    308           */
    309          
    310          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    311          void SampleApp_Init( uint8 task_id )
   \                     SampleApp_Init:
    312          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    313            SampleApp_TaskID = task_id;
   \   000007   90....       MOV     DPTR,#SampleApp_TaskID
   \   00000A   F0           MOVX    @DPTR,A
    314            SampleApp_NwkState = DEV_INIT;
   \   00000B   90....       MOV     DPTR,#SampleApp_NwkState
   \   00000E   7401         MOV     A,#0x1
   \   000010   F0           MOVX    @DPTR,A
    315            SampleApp_TransID = 0;
   \   000011   90....       MOV     DPTR,#SampleApp_TransID
   \   000014   E4           CLR     A
   \   000015   F0           MOVX    @DPTR,A
    316            MT_UartInit(); //初始化UART
   \   000016                ; Setup parameters for call to function MT_UartInit
   \   000016   12....       LCALL   ??MT_UartInit?relay
    317            MT_UartRegisterTaskID(task_id);// 登记任务号
   \   000019                ; Setup parameters for call to function MT_UartRegisterTaskID
   \   000019   EE           MOV     A,R6
   \   00001A   F9           MOV     R1,A
   \   00001B   12....       LCALL   ??MT_UartRegisterTaskID?relay
    318            HalUARTWrite(0, "System is started.\n\n", 20); // （串口 0 ，'字符’,字符个数）
   \   00001E                ; Setup parameters for call to function HalUARTWrite
   \   00001E   7C14         MOV     R4,#0x14
   \   000020   7D00         MOV     R5,#0x0
   \   000022   7A..         MOV     R2,#`?<Constant "System is started.\\n\\n">` & 0xff
   \   000024   7B..         MOV     R3,#(`?<Constant "System is started.\\n\\n">` >> 8) & 0xff
   \   000026   7900         MOV     R1,#0x0
   \   000028   12....       LCALL   ??HalUARTWrite?relay
    319          
    320          
    321            //路由表初始化
    322            for(short i=0;i<3;++i)
   \   00002B   7A00         MOV     R2,#0x0
   \   00002D   7B00         MOV     R3,#0x0
    323            {
    324              Nei_Table[i] += 65534;
   \                     ??SampleApp_Init_0:
   \   00002F   EA           MOV     A,R2
   \   000030   F8           MOV     R0,A
   \   000031   EB           MOV     A,R3
   \   000032   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_100:
   \   000035   24FE         ADD     A,#-0x2
   \   000037   F0           MOVX    @DPTR,A
   \   000038   A3           INC     DPTR
   \   000039   E0           MOVX    A,@DPTR
   \   00003A   34FF         ADDC    A,#-0x1
   \   00003C   F0           MOVX    @DPTR,A
    325              ACTIVE[i] += LIFE_TIME;  //邻居活跃度初始化
   \   00003D   90....       MOV     DPTR,#LIFE_TIME
   \   000040   E0           MOVX    A,@DPTR
   \   000041   FC           MOV     R4,A
   \   000042   33           RLC     A
   \   000043   95E0         SUBB    A,0xE0 /* A   */
   \   000045   FD           MOV     R5,A
   \   000046   12....       LCALL   ?Subroutine12 & 0xFFFF
    326            }
   \                     ??CrossCallReturnLabel_23:
   \   000049   E0           MOVX    A,@DPTR
   \   00004A   2C           ADD     A,R4
   \   00004B   F0           MOVX    @DPTR,A
   \   00004C   A3           INC     DPTR
   \   00004D   E0           MOVX    A,@DPTR
   \   00004E   3D           ADDC    A,R5
   \   00004F   12....       LCALL   ?Subroutine26 & 0xFFFF
   \                     ??CrossCallReturnLabel_46:
   \   000052   9403         SUBB    A,#0x3
   \   000054   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_150:
   \   000057   40D6         JC      ??SampleApp_Init_0
    327          
    328          
    329            uint16 Source_DATA_info = Power_of_2(Device_ID);
   \   000059                ; Setup parameters for call to function Power_of_2
   \   000059   12....       LCALL   ?Subroutine34 & 0xFFFF
   \                     ??CrossCallReturnLabel_57:
   \   00005C   8A..         MOV     ?V0 + 0,R2
   \   00005E   8B..         MOV     ?V0 + 1,R3
   \   000060   AC..         MOV     R4,?V0 + 0
   \   000062   AD..         MOV     R5,?V0 + 1
    330            //给码字槽赋初值(除了sink节点)
    331            for(short i=0;i<6;++i)
   \   000064   7A00         MOV     R2,#0x0
   \   000066   7B00         MOV     R3,#0x0
    332            {
    333              DATA_SLOT[i].data = SOURCE_DATA;    //给码字槽赋初值
   \                     ??SampleApp_Init_1:
   \   000068   8A..         MOV     ?V0 + 0,R2
   \   00006A   8B..         MOV     ?V0 + 1,R3
   \   00006C   7402         MOV     A,#0x2
   \   00006E   78..         MOV     R0,#?V0 + 0
   \   000070   12....       LCALL   ?S_SHL
   \   000073   12....       LCALL   ?Subroutine59 & 0xFFFF
    334              DATA_SLOT[i].Degree_ID = Source_DATA_info; //给码字赋节点信息
    335          //    
    336            }
   \                     ??CrossCallReturnLabel_91:
   \   000076   90....       MOV     DPTR,#SOURCE_DATA
   \   000079   E0           MOVX    A,@DPTR
   \   00007A   8882         MOV     DPL,R0
   \   00007C   8983         MOV     DPH,R1
   \   00007E   12....       LCALL   ?Subroutine48 & 0xFFFF
   \                     ??CrossCallReturnLabel_96:
   \   000081   EC           MOV     A,R4
   \   000082   F0           MOVX    @DPTR,A
   \   000083   A3           INC     DPTR
   \   000084   ED           MOV     A,R5
   \   000085   12....       LCALL   ?Subroutine26 & 0xFFFF
   \                     ??CrossCallReturnLabel_47:
   \   000088   9406         SUBB    A,#0x6
   \   00008A   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_151:
   \   00008D   40D9         JC      ??SampleApp_Init_1
    337          
    338          //  uint8 X = 1;
    339          //  uint8 Y = 4;
    340          //  printf(" %d\n",X|Y);
    341           
    342            
    343            
    344            
    345            
    346            
    347            
    348            
    349            
    350            
    351            
    352          
    353            // Device hardware initialization can be added here or in main() (Zmain.c).
    354            // If the hardware is application specific - add it here.
    355            // If the hardware is other parts of the device add it in main().
    356          
    357           #if defined ( BUILD_ALL_DEVICES )
    358            // The "Demo" target is setup to have BUILD_ALL_DEVICES and HOLD_AUTO_START
    359            // We are looking at a jumper (defined in SampleAppHw.c) to be jumpered
    360            // together - if they are - we will start up a coordinator. Otherwise,
    361            // the device will start as a router.
    362            if ( readCoordinatorJumper() )
    363              zgDeviceLogicalType = ZG_DEVICETYPE_COORDINATOR;
    364            else
    365              zgDeviceLogicalType = ZG_DEVICETYPE_ROUTER;
    366          #endif // BUILD_ALL_DEVICES
    367          
    368          #if defined ( HOLD_AUTO_START )
    369            // HOLD_AUTO_START is a compile option that will surpress ZDApp
    370            //  from starting the device and wait for the application to
    371            //  start the device.
    372            ZDOInitDevice(0);
    373          #endif
    374          
    375          
    376          
    377            //WeBee点对点通讯定义
    378            Point_To_Point_DstAddr.addrMode = (afAddrMode_t)Addr16Bit; //点播模式
   \   00008F   90....       MOV     DPTR,#Point_To_Point_DstAddr + 8
   \   000092   7402         MOV     A,#0x2
   \   000094   F0           MOVX    @DPTR,A
    379            Point_To_Point_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   000095   A3           INC     DPTR
   \   000096   7414         MOV     A,#0x14
   \   000098   F0           MOVX    @DPTR,A
    380            Point_To_Point_DstAddr.addr.shortAddr = 0xB6AE; //发给协调器
   \   000099   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   00009C   74AE         MOV     A,#-0x52
   \   00009E   F0           MOVX    @DPTR,A
   \   00009F   A3           INC     DPTR
   \   0000A0   74B6         MOV     A,#-0x4a
   \   0000A2   F0           MOVX    @DPTR,A
    381          
    382          
    383          
    384          
    385          
    386          
    387            // Setup for the periodic message's destination address
    388            // Broadcast to everyone     广播方式定义
    389            SampleApp_Periodic_DstAddr.addrMode = (afAddrMode_t)AddrBroadcast;
   \   0000A3   90....       MOV     DPTR,#SampleApp_Periodic_DstAddr + 8
   \   0000A6   740F         MOV     A,#0xf
   \   0000A8   F0           MOVX    @DPTR,A
    390            SampleApp_Periodic_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   0000A9   A3           INC     DPTR
   \   0000AA   7414         MOV     A,#0x14
   \   0000AC   F0           MOVX    @DPTR,A
    391            SampleApp_Periodic_DstAddr.addr.shortAddr = 0xFFFF;//发送给所有设备,睡眠中的节点由父节点暂存直到超时
   \   0000AD   90....       MOV     DPTR,#SampleApp_Periodic_DstAddr
   \   0000B0   74FF         MOV     A,#-0x1
   \   0000B2   F0           MOVX    @DPTR,A
   \   0000B3   A3           INC     DPTR
   \   0000B4   F0           MOVX    @DPTR,A
    392            //0xFFFD 发送给非睡眠状态的所有设备
    393            //0xFFFC 发送给所有路由器以及协调器
    394          
    395          
    396          
    397          
    398            //组播Group1设置
    399            // Setup for the flash command's destination address - Group 1
    400            SampleApp_Flash_DstAddr.addrMode = (afAddrMode_t)afAddrGroup;
   \   0000B5   90....       MOV     DPTR,#SampleApp_Flash_DstAddr + 8
   \   0000B8   7401         MOV     A,#0x1
   \   0000BA   F0           MOVX    @DPTR,A
    401            SampleApp_Flash_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;  //endpoint 端点
   \   0000BB   A3           INC     DPTR
   \   0000BC   7414         MOV     A,#0x14
   \   0000BE   F0           MOVX    @DPTR,A
    402            SampleApp_Flash_DstAddr.addr.shortAddr = SAMPLEAPP_FLASH_GROUP;
   \   0000BF   90....       MOV     DPTR,#SampleApp_Flash_DstAddr
   \   0000C2   7402         MOV     A,#0x2
   \   0000C4   F0           MOVX    @DPTR,A
   \   0000C5   A3           INC     DPTR
   \   0000C6   E4           CLR     A
   \   0000C7   F0           MOVX    @DPTR,A
    403          
    404          
    405          
    406          
    407          
    408            // Fill out the endpoint description.
    409            SampleApp_epDesc.endPoint = SAMPLEAPP_ENDPOINT;
   \   0000C8   90....       MOV     DPTR,#SampleApp_epDesc
   \   0000CB   7414         MOV     A,#0x14
   \   0000CD   F0           MOVX    @DPTR,A
    410            SampleApp_epDesc.task_id = &SampleApp_TaskID;
   \   0000CE   A3           INC     DPTR
   \   0000CF   74..         MOV     A,#SampleApp_TaskID & 0xff
   \   0000D1   F0           MOVX    @DPTR,A
   \   0000D2   A3           INC     DPTR
   \   0000D3   74..         MOV     A,#(SampleApp_TaskID >> 8) & 0xff
   \   0000D5   F0           MOVX    @DPTR,A
    411            SampleApp_epDesc.simpleDesc
    412                      = (SimpleDescriptionFormat_t *)&SampleApp_SimpleDesc;
   \   0000D6   A3           INC     DPTR
   \   0000D7   74..         MOV     A,#SampleApp_SimpleDesc & 0xff
   \   0000D9   F0           MOVX    @DPTR,A
   \   0000DA   A3           INC     DPTR
   \   0000DB   74..         MOV     A,#(SampleApp_SimpleDesc >> 8) & 0xff
   \   0000DD   F0           MOVX    @DPTR,A
    413            SampleApp_epDesc.latencyReq = noLatencyReqs;
   \   0000DE   A3           INC     DPTR
   \   0000DF   E4           CLR     A
   \   0000E0   F0           MOVX    @DPTR,A
    414          
    415            // Register the endpoint description with the AF
    416            afRegister( &SampleApp_epDesc );
   \   0000E1                ; Setup parameters for call to function afRegister
   \   0000E1   7A..         MOV     R2,#SampleApp_epDesc & 0xff
   \   0000E3   7B..         MOV     R3,#(SampleApp_epDesc >> 8) & 0xff
   \   0000E5   12....       LCALL   ??afRegister?relay
    417          
    418            // Register for all key events - This app will handle all key events
    419            RegisterForKeys( SampleApp_TaskID );
   \   0000E8                ; Setup parameters for call to function RegisterForKeys
   \   0000E8   90....       MOV     DPTR,#SampleApp_TaskID
   \   0000EB   E0           MOVX    A,@DPTR
   \   0000EC   F9           MOV     R1,A
   \   0000ED   12....       LCALL   ??RegisterForKeys?relay
    420          
    421          
    422          
    423            /***********设置 Group_ID*************/
    424            // By default, all devices start out in Group 1
    425            SampleApp_Group.ID = SAMPLEAPP_FLASH_GROUP; //0x0001
   \   0000F0   90....       MOV     DPTR,#SampleApp_Group
   \   0000F3   7402         MOV     A,#0x2
   \   0000F5   F0           MOVX    @DPTR,A
   \   0000F6   A3           INC     DPTR
   \   0000F7   E4           CLR     A
   \   0000F8   F0           MOVX    @DPTR,A
    426            osal_memcpy( SampleApp_Group.name, "Group 1", 7  );
   \   0000F9                ; Setup parameters for call to function osal_memcpy
   \   0000F9   75....       MOV     ?V0 + 0,#`?<Constant "Group 1">` & 0xff
   \   0000FC   75....       MOV     ?V0 + 1,#(`?<Constant "Group 1">` >> 8) & 0xff
   \   0000FF   F5..         MOV     ?V0 + 2,A
   \   000101   78..         MOV     R0,#?V0 + 0
   \   000103   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000106   7C07         MOV     R4,#0x7
   \   000108   7D00         MOV     R5,#0x0
   \   00010A   7A..         MOV     R2,#(SampleApp_Group + 2) & 0xff
   \   00010C   7B..         MOV     R3,#((SampleApp_Group + 2) >> 8) & 0xff
   \   00010E   12....       LCALL   ??osal_memcpy?relay
   \   000111   7403         MOV     A,#0x3
   \   000113   12....       LCALL   ?DEALLOC_XSTACK8
    427            aps_AddGroup( SAMPLEAPP_ENDPOINT, &SampleApp_Group );
   \   000116                ; Setup parameters for call to function aps_AddGroup
   \   000116   7A..         MOV     R2,#SampleApp_Group & 0xff
   \   000118   7B..         MOV     R3,#(SampleApp_Group >> 8) & 0xff
   \   00011A   7914         MOV     R1,#0x14
   \   00011C   12....       LCALL   ??aps_AddGroup?relay
    428          
    429          
    430          
    431          #if defined ( LCD_SUPPORTED )
    432            HalLcdWriteString( "SampleApp", HAL_LCD_LINE_1 );
   \   00011F                ; Setup parameters for call to function HalLcdWriteString
   \   00011F   7901         MOV     R1,#0x1
   \   000121   7A..         MOV     R2,#`?<Constant "SampleApp">` & 0xff
   \   000123   7B..         MOV     R3,#(`?<Constant "SampleApp">` >> 8) & 0xff
   \   000125   12....       LCALL   ??HalLcdWriteString?relay
    433          #endif
    434          }
   \   000128   7F03         MOV     R7,#0x3
   \   00012A   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine48:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   A3           INC     DPTR
   \   000002   E4           CLR     A
   \   000003                REQUIRE ??Subroutine62_0
   \   000003                ; // Fall through to label ??Subroutine62_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine62_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   8882         MOV     DPL,R0
   \   000003   8983         MOV     DPH,R1
   \   000005   A3           INC     DPTR
   \   000006   A3           INC     DPTR
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine26:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   EA           MOV     A,R2
   \   000002   2401         ADD     A,#0x1
   \   000004   0A           INC     R2
   \   000005   EB           MOV     A,R3
   \   000006   3400         ADDC    A,#0x0
   \   000008   FB           MOV     R3,A
   \   000009   C3           CLR     C
   \   00000A   EA           MOV     A,R2
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   F9           MOV     R1,A
   \   000001   E8           MOV     A,R0
   \   000002   C3           CLR     C
   \   000003   33           RLC     A
   \   000004   F8           MOV     R0,A
   \   000005   E9           MOV     A,R1
   \   000006                REQUIRE ??Subroutine63_0
   \   000006                ; // Fall through to label ??Subroutine63_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine63_0:
   \   000000   12....       LCALL   ?Subroutine45 & 0xFFFF
   \                     ??CrossCallReturnLabel_103:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine34:
   \   000000   90....       MOV     DPTR,#Device_ID
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F9           MOV     R1,A
   \   000005   12....       LCALL   ??Power_of_2?relay
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine45:
   \   000000   33           RLC     A
   \   000001   F9           MOV     R1,A
   \   000002   74..         MOV     A,#Nei_Table & 0xff
   \   000004   28           ADD     A,R0
   \   000005   F582         MOV     DPL,A
   \   000007   74..         MOV     A,#(Nei_Table >> 8) & 0xff
   \   000009   39           ADDC    A,R1
   \   00000A   F583         MOV     DPH,A
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine19:
   \   000000   EB           MOV     A,R3
   \   000001                REQUIRE ??Subroutine72_0
   \   000001                ; // Fall through to label ??Subroutine72_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   12....       LCALL   ?Subroutine46 & 0xFFFF
   \                     ??CrossCallReturnLabel_73:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine46:
   \   000000   74..         MOV     A,#ACTIVE & 0xff
   \   000002   28           ADD     A,R0
   \   000003   F582         MOV     DPL,A
   \   000005   74..         MOV     A,#(ACTIVE >> 8) & 0xff
   \   000007   39           ADDC    A,R1
   \   000008   F583         MOV     DPH,A
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine59:
   \   000000   74..         MOV     A,#DATA_SLOT & 0xff
   \   000002   25..         ADD     A,?V0 + 0
   \   000004   F8           MOV     R0,A
   \   000005   74..         MOV     A,#(DATA_SLOT >> 8) & 0xff
   \   000007   35..         ADDC    A,?V0 + 1
   \   000009   F9           MOV     R1,A
   \   00000A   22           RET
    435          
    436          /*********************************************************************
    437           * @fn      SampleApp_ProcessEvent
    438           *
    439           *        ******************应用处理程序***************************
    440           *
    441           * @brief   Generic Application Task event processor.  This function
    442           *          is called to process all events for the task.  Events
    443           *          include timers, messages and any other user defined events.
    444           *
    445           * @param   task_id  - The OSAL assigned task ID.
    446           * @param   events - events to process.  This is a bit map and can
    447           *                   contain more than one event.
    448           *
    449           * @return  none
    450           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    451          uint16 SampleApp_ProcessEvent( uint8 task_id, uint16 events )
   \                     SampleApp_ProcessEvent:
    452          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    453            afIncomingMSGPacket_t *MSGpkt;
    454            (void)task_id;  // Intentionally unreferenced parameter
    455          
    456            if ( events & SYS_EVENT_MSG ) //系统信息发送事件
   \   000009   5480         ANL     A,#0x80
   \   00000B   7003         JNZ     $+5
   \   00000D   02....       LJMP    ??SampleApp_ProcessEvent_0 & 0xFFFF
    457            {
    458              MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
   \   000010                ; Setup parameters for call to function osal_msg_receive
   \   000010   802B         SJMP    ??SampleApp_ProcessEvent_1
    459              while ( MSGpkt )
    460              {
    461                switch ( MSGpkt->hdr.event )
    462                {
    463                  case CMD_SERIAL_MSG:    // 串口收到数据后由MT_UART层传递过的数据，用网蜂方法接收，编译时不定义MT相关内容
    464                      SampleApp_SerialCMD((mtOSALSerialData_t *)MSGpkt);
    465                      break;
    466          
    467                  // Received when a key is pressed
    468                  case KEY_CHANGE: //按键事件及处理函数
    469                    //HalUARTWrite(0, "KEY ", 4);
    470                    SampleApp_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
    471                    break;
    472          
    473                  // Received when a messages is received (OTA) for this endpoint
    474                  // 接收处理函数
    475                  case AF_INCOMING_MSG_CMD:
    476                    SampleApp_MessageMSGCB( MSGpkt );
    477                    break;
    478          
    479                  // Received whenever the device changes state in the network
    480                  case ZDO_STATE_CHANGE:  //网络状态改变，如未连接上网络
    481                    SampleApp_NwkState = (devStates_t)(MSGpkt->hdr.status);
   \                     ??SampleApp_ProcessEvent_2:
   \   000012   A3           INC     DPTR
   \   000013   E0           MOVX    A,@DPTR
   \   000014   90....       MOV     DPTR,#SampleApp_NwkState
   \   000017   F0           MOVX    @DPTR,A
    482                    if ( (SampleApp_NwkState == DEV_ZB_COORD) //协调器
    483                        || (SampleApp_NwkState == DEV_ROUTER) //路由器
    484                        || (SampleApp_NwkState == DEV_END_DEVICE) ) //终端 都执行
   \   000018   6409         XRL     A,#0x9
   \   00001A   600A         JZ      ??SampleApp_ProcessEvent_3
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   6407         XRL     A,#0x7
   \   00001F   6005         JZ      ??SampleApp_ProcessEvent_3
   \   000021   E0           MOVX    A,@DPTR
   \   000022   6406         XRL     A,#0x6
   \   000024   7010         JNZ     ??SampleApp_ProcessEvent_4
    485                    {
    486                      // Start sending the periodic message in a regular interval.
    487                      osal_start_timerEx( SampleApp_TaskID,
    488                                        SAMPLEAPP_SEND_PERIODIC_MSG_EVT,
    489                                        SAMPLEAPP_SEND_PERIODIC_MSG_TIMEOUT );
   \                     ??SampleApp_ProcessEvent_3:
   \   000026                ; Setup parameters for call to function osal_start_timerEx
   \   000026   7C88         MOV     R4,#-0x78
   \   000028   7D13         MOV     R5,#0x13
   \   00002A   7A01         MOV     R2,#0x1
   \   00002C   7B00         MOV     R3,#0x0
   \   00002E   90....       MOV     DPTR,#SampleApp_TaskID
   \   000031   E0           MOVX    A,@DPTR
   \   000032   F9           MOV     R1,A
   \   000033   12....       LCALL   ??osal_start_timerEx?relay
    490                    }
    491                    else
    492                    {
    493                      // Device is no longer in the network
    494          //              HalUARTWrite(0,"网络断开",8);
    495                    }
    496                    break;
    497          
    498                  default:
    499                    break;
    500                }
    501          
    502                // Release the memory
    503                osal_msg_deallocate( (uint8 *)MSGpkt );
   \                     ??SampleApp_ProcessEvent_4:
   \   000036                ; Setup parameters for call to function osal_msg_deallocate
   \   000036   AA..         MOV     R2,?V0 + 0
   \   000038   AB..         MOV     R3,?V0 + 1
   \   00003A   12....       LCALL   ??osal_msg_deallocate?relay
    504          
    505                // Next - if one is available
    506                MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
   \   00003D                ; Setup parameters for call to function osal_msg_receive
   \                     ??SampleApp_ProcessEvent_1:
   \   00003D   90....       MOV     DPTR,#SampleApp_TaskID
   \   000040   E0           MOVX    A,@DPTR
   \   000041   F9           MOV     R1,A
   \   000042   12....       LCALL   ??osal_msg_receive?relay
   \   000045   8A..         MOV     ?V0 + 0,R2
   \   000047   8B..         MOV     ?V0 + 1,R3
   \   000049   E5..         MOV     A,?V0 + 0
   \   00004B   45..         ORL     A,?V0 + 1
   \   00004D   603E         JZ      ??SampleApp_ProcessEvent_5
   \   00004F   85..82       MOV     DPL,?V0 + 0
   \   000052   85..83       MOV     DPH,?V0 + 1
   \   000055   E0           MOVX    A,@DPTR
   \   000056   14           DEC     A
   \   000057   600E         JZ      ??SampleApp_ProcessEvent_6
   \   000059   24E7         ADD     A,#-0x19
   \   00005B   6027         JZ      ??SampleApp_ProcessEvent_7
   \   00005D   245A         ADD     A,#0x5a
   \   00005F   600F         JZ      ??SampleApp_ProcessEvent_8
   \   000061   24EF         ADD     A,#-0x11
   \   000063   60AD         JZ      ??SampleApp_ProcessEvent_2
   \   000065   80CF         SJMP    ??SampleApp_ProcessEvent_4
   \                     ??SampleApp_ProcessEvent_6:
   \   000067                ; Setup parameters for call to function SampleApp_SerialCMD
   \   000067   AA..         MOV     R2,?V0 + 0
   \   000069   AB..         MOV     R3,?V0 + 1
   \   00006B   12....       LCALL   ??SampleApp_SerialCMD?relay
   \   00006E   80C6         SJMP    ??SampleApp_ProcessEvent_4
   \                     ??SampleApp_ProcessEvent_8:
   \   000070                ; Setup parameters for call to function SampleApp_HandleKeys
   \   000070   A3           INC     DPTR
   \   000071   A3           INC     DPTR
   \   000072   A3           INC     DPTR
   \   000073   E0           MOVX    A,@DPTR
   \   000074   FA           MOV     R2,A
   \   000075   85..82       MOV     DPL,?V0 + 0
   \   000078   85..83       MOV     DPH,?V0 + 1
   \   00007B   A3           INC     DPTR
   \   00007C   A3           INC     DPTR
   \   00007D   E0           MOVX    A,@DPTR
   \   00007E   F9           MOV     R1,A
   \   00007F   12....       LCALL   ??SampleApp_HandleKeys?relay
   \   000082   80B2         SJMP    ??SampleApp_ProcessEvent_4
   \                     ??SampleApp_ProcessEvent_7:
   \   000084                ; Setup parameters for call to function SampleApp_MessageMSGCB
   \   000084   AA..         MOV     R2,?V0 + 0
   \   000086   AB..         MOV     R3,?V0 + 1
   \   000088   12....       LCALL   ??SampleApp_MessageMSGCB?relay
   \   00008B   80A9         SJMP    ??SampleApp_ProcessEvent_4
    507              }
    508          
    509              // return unprocessed events
    510              return (events ^ SYS_EVENT_MSG);
   \                     ??SampleApp_ProcessEvent_5:
   \   00008D   EE           MOV     A,R6
   \   00008E   FA           MOV     R2,A
   \   00008F   EF           MOV     A,R7
   \   000090   6480         XRL     A,#0x80
   \                     ??SampleApp_ProcessEvent_9:
   \   000092   FB           MOV     R3,A
   \   000093   803F         SJMP    ??SampleApp_ProcessEvent_10
    511            }
    512          
    513            // Send a message out - This event is generated by a timer
    514            //  (setup in SampleApp_Init()).
    515            if ( events & SAMPLEAPP_SEND_PERIODIC_MSG_EVT )  //*****周期性发送函数*****
   \                     ??SampleApp_ProcessEvent_0:
   \   000095   EE           MOV     A,R6
   \   000096   A2E0         MOV     C,0xE0 /* A   */.0
   \   000098   5036         JNC     ??SampleApp_ProcessEvent_11
    516            {
    517          
    518          
    519          /***********************************周期性发送函数****************************************/
    520          
    521              /*Send the periodic message*/
    522              //SampleApp_SendPeriodicMessage(); //用户周期性广播发送函数
    523          
    524              if(_TURN == 0){
   \   00009A   90....       MOV     DPTR,#_TURN
   \   00009D   E0           MOVX    A,@DPTR
   \   00009E   700A         JNZ     ??SampleApp_ProcessEvent_12
    525                /*Group*/
    526                SampleApp_SendGroupMessage(); //组播通讯程序
   \   0000A0                ; Setup parameters for call to function SampleApp_SendGroupMessage
   \   0000A0   12....       LCALL   ??SampleApp_SendGroupMessage?relay
    527                _TURN = 1;
   \   0000A3   90....       MOV     DPTR,#_TURN
   \   0000A6   7401         MOV     A,#0x1
   \   0000A8   8007         SJMP    ??SampleApp_ProcessEvent_13
    528              }
    529          
    530              else{
    531                /*Point_to_Point*/
    532                SampleApp_SendPointToPointMessage(); //点对点发送函数
   \                     ??SampleApp_ProcessEvent_12:
   \   0000AA                ; Setup parameters for call to function SampleApp_SendPointToPointMessage
   \   0000AA   12....       LCALL   ??SampleApp_SendPointToPointMessage?relay
    533                _TURN = 0;
   \   0000AD   90....       MOV     DPTR,#_TURN
   \   0000B0   E4           CLR     A
   \                     ??SampleApp_ProcessEvent_13:
   \   0000B1   F0           MOVX    @DPTR,A
    534              }
    535          
    536          /**********************************周期性发送函数*****************************************/
    537          
    538          
    539          
    540          
    541              // Setup to send message again in normal period (+ a little jitter)
    542              osal_start_timerEx( SampleApp_TaskID, SAMPLEAPP_SEND_PERIODIC_MSG_EVT,
    543                                 (SAMPLEAPP_SEND_PERIODIC_MSG_TIMEOUT + (osal_rand() & 0x00FF)) );
   \   0000B2                ; Setup parameters for call to function osal_rand
   \   0000B2   12....       LCALL   ??osal_rand?relay
   \   0000B5                ; Setup parameters for call to function osal_start_timerEx
   \   0000B5   EA           MOV     A,R2
   \   0000B6   2488         ADD     A,#-0x78
   \   0000B8   FC           MOV     R4,A
   \   0000B9   E4           CLR     A
   \   0000BA   3413         ADDC    A,#0x13
   \   0000BC   FD           MOV     R5,A
   \   0000BD   7A01         MOV     R2,#0x1
   \   0000BF   7B00         MOV     R3,#0x0
   \   0000C1   90....       MOV     DPTR,#SampleApp_TaskID
   \   0000C4   E0           MOVX    A,@DPTR
   \   0000C5   F9           MOV     R1,A
   \   0000C6   12....       LCALL   ??osal_start_timerEx?relay
    544          
    545              // return unprocessed events
    546              return (events ^ SAMPLEAPP_SEND_PERIODIC_MSG_EVT);
   \   0000C9   EE           MOV     A,R6
   \   0000CA   6401         XRL     A,#0x1
   \   0000CC   FA           MOV     R2,A
   \   0000CD   EF           MOV     A,R7
   \   0000CE   80C2         SJMP    ??SampleApp_ProcessEvent_9
    547          
    548            }
    549          
    550            // Discard unknown events
    551            return 0;
   \                     ??SampleApp_ProcessEvent_11:
   \   0000D0   7A00         MOV     R2,#0x0
   \   0000D2   7B00         MOV     R3,#0x0
   \                     ??SampleApp_ProcessEvent_10:
   \   0000D4                REQUIRE ?Subroutine1
   \   0000D4                ; // Fall through to label ?Subroutine1
    552          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   7F04         MOV     R7,#0x4
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    553          
    554          
    555          
    556          
    557          
    558          
    559          
    560          /********************************************************
    561                              组播 发送函数
    562          *********************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    563          void SampleApp_SendGroupMessage( void )
   \                     SampleApp_SendGroupMessage:
    564          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    565            //uint8 data[10]={'G','R','O','U','P',' ','1',' ','r','4'};// 自定义数据
    566            if ( AF_DataRequest( & SampleApp_Flash_DstAddr,
    567                                &SampleApp_epDesc,
    568                                SAMPLEAPP_FLASH_CLUSTERID,
    569                                1,
    570                                (uint8*)&SampleAppPeriodicCounter, //要发送的内容
    571                                &SampleApp_TransID,
    572                                AF_DISCV_ROUTE,
    573                                AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000005                ; Setup parameters for call to function AF_DataRequest
   \   000005   75..1E       MOV     ?V0 + 0,#0x1e
   \   000008   78..         MOV     R0,#?V0 + 0
   \   00000A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00000D   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000010   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000013   78..         MOV     R0,#?V0 + 0
   \   000015   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000018   75....       MOV     ?V0 + 0,#SampleAppPeriodicCounter & 0xff
   \   00001B   75....       MOV     ?V0 + 1,#(SampleAppPeriodicCounter >> 8) & 0xff
   \   00001E   78..         MOV     R0,#?V0 + 0
   \   000020   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000023   75..01       MOV     ?V0 + 0,#0x1
   \   000026   75..00       MOV     ?V0 + 1,#0x0
   \   000029   78..         MOV     R0,#?V0 + 0
   \   00002B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00002E   75..02       MOV     ?V0 + 0,#0x2
   \   000031   78..         MOV     R0,#?V0 + 0
   \   000033   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000036   7920         MOV     R1,#0x20
   \   000038   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   00003A   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   00003C   7A..         MOV     R2,#SampleApp_Flash_DstAddr & 0xff
   \   00003E   7B..         MOV     R3,#(SampleApp_Flash_DstAddr >> 8) & 0xff
   \   000040   12....       LCALL   ??Subroutine65_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_113:
   \   000043   02....       LJMP    ?Subroutine0 & 0xFFFF
    574            {
    575            }
    576            else
    577            {
    578              // Error occurred in request to send.
    579            }
    580          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine65_0:
   \   000000   12....       LCALL   ??AF_DataRequest?relay
   \   000003   7409         MOV     A,#0x9
   \   000005   22           RET
    581          
    582          
    583          /*********************************************************************
    584           * @fn      SampleApp_SendPeriodicMessage
    585           *
    586           * @brief   Send the periodic message.
    587           *
    588           * @param   none
    589           *
    590           * @return  none
    591           *
    592           *********************************************************
    593                              周期性广播 发送函数
    594           **********************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    595          void SampleApp_SendPeriodicMessage( void )
   \                     SampleApp_SendPeriodicMessage:
    596          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    597            unsigned int flashTime=1000;
    598            if ( AF_DataRequest( &SampleApp_Periodic_DstAddr, &SampleApp_epDesc,
    599                                 SAMPLEAPP_PERIODIC_CLUSTERID,
    600                                 1,  //数据长度
    601                                 (uint8*)&SampleAppPeriodicCounter, //要发送的内容
    602                                 &SampleApp_TransID,
    603                                 AF_DISCV_ROUTE,
    604                                 AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000005                ; Setup parameters for call to function AF_DataRequest
   \   000005   75..1E       MOV     ?V0 + 0,#0x1e
   \   000008   78..         MOV     R0,#?V0 + 0
   \   00000A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00000D   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000010   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000013   78..         MOV     R0,#?V0 + 0
   \   000015   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000018   75....       MOV     ?V0 + 0,#SampleAppPeriodicCounter & 0xff
   \   00001B   75....       MOV     ?V0 + 1,#(SampleAppPeriodicCounter >> 8) & 0xff
   \   00001E   78..         MOV     R0,#?V0 + 0
   \   000020   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000023   75..01       MOV     ?V0 + 0,#0x1
   \   000026   75..00       MOV     ?V0 + 1,#0x0
   \   000029   78..         MOV     R0,#?V0 + 0
   \   00002B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00002E   78..         MOV     R0,#?V0 + 0
   \   000030   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000033   7920         MOV     R1,#0x20
   \   000035   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000037   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000039   7A..         MOV     R2,#SampleApp_Periodic_DstAddr & 0xff
   \   00003B   7B..         MOV     R3,#(SampleApp_Periodic_DstAddr >> 8) & 0xff
   \   00003D   12....       LCALL   ??Subroutine65_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_114:
   \   000040   12....       LCALL   ?DEALLOC_XSTACK8
   \   000043   E9           MOV     A,R1
   \   000044   700D         JNZ     ??SampleApp_SendPeriodicMessage_0
    605            {
    606              HalLedBlink( HAL_LED_1, 1, 60, (flashTime / 3) );
   \   000046                ; Setup parameters for call to function HalLedBlink
   \   000046   7C4D         MOV     R4,#0x4d
   \   000048   7D01         MOV     R5,#0x1
   \   00004A   7B3C         MOV     R3,#0x3c
   \   00004C   7A01         MOV     R2,#0x1
   \   00004E   7901         MOV     R1,#0x1
   \   000050   12....       LCALL   ??HalLedBlink?relay
    607            }
    608            else
    609            {
    610              // Error occurred in request to send.
    611            }
    612          }
   \                     ??SampleApp_SendPeriodicMessage_0:
   \   000053   02....       LJMP    ??Subroutine76_0 & 0xFFFF
    613          
    614          
    615          /*********************************************************************
    616           * @fn      SampleApp_SendFlashMessage
    617           *
    618           * @brief   Send the flash message to group 1.
    619           *
    620           * @param   flashTime - in milliseconds
    621           *
    622           * @return  none
    623           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    624          void SampleApp_SendFlashMessage( uint16 flashTime )
   \                     SampleApp_SendFlashMessage:
    625          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 3
   \   000005   74FD         MOV     A,#-0x3
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    626            uint8 buffer[3];
    627            buffer[0] = (uint8)(SampleAppFlashCounter++);
   \   00000A   90....       MOV     DPTR,#SampleAppFlashCounter
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   85..82       MOV     DPL,?XSP + 0
   \   000011   85..83       MOV     DPH,?XSP + 1
   \   000014   F0           MOVX    @DPTR,A
   \   000015   90....       MOV     DPTR,#SampleAppFlashCounter
   \   000018   E0           MOVX    A,@DPTR
   \   000019   04           INC     A
   \   00001A   F0           MOVX    @DPTR,A
    628            buffer[1] = LO_UINT16( flashTime );
   \   00001B   7401         MOV     A,#0x1
   \   00001D   12....       LCALL   ?XSTACK_DISP0_8
   \   000020   EA           MOV     A,R2
   \   000021   F0           MOVX    @DPTR,A
    629            buffer[2] = HI_UINT16( flashTime );
   \   000022   7402         MOV     A,#0x2
   \   000024   12....       LCALL   ?XSTACK_DISP0_8
   \   000027   EB           MOV     A,R3
   \   000028   12....       LCALL   ??Subroutine70_0 & 0xFFFF
    630          
    631            if ( AF_DataRequest( &SampleApp_Flash_DstAddr, &SampleApp_epDesc,
    632                                 SAMPLEAPP_FLASH_CLUSTERID,
    633                                 3,
    634                                 buffer,
    635                                 &SampleApp_TransID,
    636                                 AF_DISCV_ROUTE,
    637                                 AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \                     ??CrossCallReturnLabel_141:
   \   00002B   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00002E   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000031   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000034   78..         MOV     R0,#?V0 + 0
   \   000036   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000039   7403         MOV     A,#0x3
   \   00003B   12....       LCALL   ?XSTACK_DISP0_8
   \   00003E   8582..       MOV     ?V0 + 0,DPL
   \   000041   8583..       MOV     ?V0 + 1,DPH
   \   000044   78..         MOV     R0,#?V0 + 0
   \   000046   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000049   75..03       MOV     ?V0 + 0,#0x3
   \   00004C   75..00       MOV     ?V0 + 1,#0x0
   \   00004F   78..         MOV     R0,#?V0 + 0
   \   000051   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000054   75..02       MOV     ?V0 + 0,#0x2
   \   000057   78..         MOV     R0,#?V0 + 0
   \   000059   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005C   7920         MOV     R1,#0x20
   \   00005E   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000060   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000062   7A..         MOV     R2,#SampleApp_Flash_DstAddr & 0xff
   \   000064   7B..         MOV     R3,#(SampleApp_Flash_DstAddr >> 8) & 0xff
   \   000066   12....       LCALL   ??Subroutine65_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_115:
   \   000069   12....       LCALL   ?DEALLOC_XSTACK8
    638            {
    639            }
    640            else
    641            {
    642              // Error occurred in request to send.
    643            }
    644          }
   \   00006C   7403         MOV     A,#0x3
   \   00006E   02....       LJMP    ?Subroutine0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine70_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001                ; Setup parameters for call to function AF_DataRequest
   \   000001                ; Setup parameters for call to function AF_DataRequest
   \   000001                ; Setup parameters for call to function AF_DataRequest
   \   000001                ; Setup parameters for call to function AF_DataRequest
   \   000001   75..1E       MOV     ?V0 + 0,#0x1e
   \   000004   78..         MOV     R0,#?V0 + 0
   \   000006   22           RET
    645          
    646          
    647          
    648          
    649          /*********************************************************************
    650           * Event Generation Functions
    651           */
    652          /*********************************************************************
    653           * @fn      SampleApp_HandleKeys 按键处理函数
    654           *
    655           * @brief   Handles all key events for this device.
    656           *
    657           * @param   shift - true if in shift/alt.
    658           * @param   keys - bit field for key events. Valid entries:
    659           *                 HAL_KEY_SW_2
    660           *                 HAL_KEY_SW_1
    661           *
    662           * @return  none
    663           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    664          void SampleApp_HandleKeys( uint8 shift, uint8 keys )
   \                     SampleApp_HandleKeys:
    665          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FF           MOV     R7,A
    666            (void)shift;  // Intentionally unreferenced parameter
    667          
    668            if ( keys & HAL_KEY_SW_1 )
    669            {
    670              /* This key sends the Flash Command is sent to Group 1.
    671              * This device will not receive the Flash Command from this
    672              * device (even if it belongs to group 1).
    673              */
    674              //SampleApp_SendFlashMessage( SAMPLEAPP_FLASH_DURATION );
    675            }
    676          
    677            if ( keys & HAL_KEY_SW_2 )
   \   000007   A2E1         MOV     C,0xE0 /* A   */.1
   \   000009   5024         JNC     ??SampleApp_HandleKeys_0
    678            {
    679              /* The Flashr Command is sent to Group 1.
    680              * This key toggles this device in and out of group 1.
    681              * If this device doesn't belong to group 1, this application
    682              * will not receive the Flash command sent to group 1.
    683              */
    684              aps_Group_t *grp;
    685              grp = aps_FindGroup( SAMPLEAPP_ENDPOINT, SAMPLEAPP_FLASH_GROUP );
    686              if ( grp )
   \   00000B                ; Setup parameters for call to function aps_FindGroup
   \   00000B   7A02         MOV     R2,#0x2
   \   00000D   7B00         MOV     R3,#0x0
   \   00000F   7914         MOV     R1,#0x14
   \   000011   12....       LCALL   ??aps_FindGroup?relay
   \   000014   8B..         MOV     ?V0 + 1,R3
   \   000016   EA           MOV     A,R2
   \   000017   45..         ORL     A,?V0 + 1
   \   000019   600B         JZ      ??SampleApp_HandleKeys_1
    687              {
    688                // Remove from the group
    689                aps_RemoveGroup( SAMPLEAPP_ENDPOINT, SAMPLEAPP_FLASH_GROUP );
   \   00001B                ; Setup parameters for call to function aps_RemoveGroup
   \   00001B   7A02         MOV     R2,#0x2
   \   00001D   7B00         MOV     R3,#0x0
   \   00001F   7914         MOV     R1,#0x14
   \   000021   12....       LCALL   ??aps_RemoveGroup?relay
   \   000024   8009         SJMP    ??SampleApp_HandleKeys_0
    690              }
    691              else
    692              {
    693                // Add to the flash group
    694                aps_AddGroup( SAMPLEAPP_ENDPOINT, &SampleApp_Group );
   \                     ??SampleApp_HandleKeys_1:
   \   000026                ; Setup parameters for call to function aps_AddGroup
   \   000026   7A..         MOV     R2,#SampleApp_Group & 0xff
   \   000028   7B..         MOV     R3,#(SampleApp_Group >> 8) & 0xff
   \   00002A   7914         MOV     R1,#0x14
   \   00002C   12....       LCALL   ??aps_AddGroup?relay
    695              }
    696            }
    697            //判断按键S2按下，发送数据到串口
    698            if ( keys & HAL_KEY_SW_6 )
   \                     ??SampleApp_HandleKeys_0:
   \   00002F   EF           MOV     A,R7
   \   000030   A2E5         MOV     C,0xE0 /* A   */.5
   \   000032   4003         JC      $+5
   \   000034   02....       LJMP    ??CrossCallReturnLabel_66 & 0xFFFF
    699            {
    700          //    int self_addr_10 = NLME_GetShortAddr();
    701          //    int neig_addr_10;
    702          //    uchar Self_ADDR[4]; //16进制地址格式
    703          //    uchar Neig_ADDR[4];
    704          //    uchar Num[2];
    705          
    706              //串口输出自身地址
    707          //    HalUARTWrite(0,"自身地址为: 0x",strlen("自身地址为: 0x"));
    708          //    if(self_addr_10 == 0)
    709          //    {
    710          //      HalUARTWrite(0,"0000",4);
    711          //      HalUARTWrite(0,"\n",1);
    712          //    }
    713          //    else
    714          //    {
    715          //      sprintf((char*)Self_ADDR, "%X", self_addr_10); //10进制整型转换成16进制字符串
    716          //
    717          //      for (int i=0;i<4;++i)
    718          //      {
    719          //        HalUARTWrite(0,&Self_ADDR[i],1);
    720          //      }
    721          //      HalUARTWrite(0,"\n",1);
    722          //    }
    723          
    724              //串口输出源数据
    725              HalUARTWrite(0,"\nsource_data: ",14);
   \   000037                ; Setup parameters for call to function HalUARTWrite
   \   000037   7C0E         MOV     R4,#0xe
   \   000039   7D00         MOV     R5,#0x0
   \   00003B   7A..         MOV     R2,#`?<Constant "\\nsource_data: ">` & 0xff
   \   00003D   7B..         MOV     R3,#(`?<Constant "\\nsource_data: ">` >> 8) & 0xff
   \   00003F   12....       LCALL   ??Subroutine71_0 & 0xFFFF
    726              Show_Bit(SOURCE_DATA,8);
   \                     ??CrossCallReturnLabel_145:
   \   000042   90....       MOV     DPTR,#SOURCE_DATA
   \   000045   12....       LCALL   ?Subroutine30 & 0xFFFF
    727              HalUARTWrite(0," ",1);
   \                     ??CrossCallReturnLabel_52:
   \   000048   7900         MOV     R1,#0x0
   \   00004A   12....       LCALL   ??HalUARTWrite?relay
    728              Show_Bit(Power_of_2(Device_ID),16);
   \   00004D                ; Setup parameters for call to function Show_Bit
   \   00004D                ; Setup parameters for call to function Power_of_2
   \   00004D   12....       LCALL   ?Subroutine34 & 0xFFFF
   \                     ??CrossCallReturnLabel_58:
   \   000050   7410         MOV     A,#0x10
   \   000052   F9           MOV     R1,A
   \   000053   12....       LCALL   ?Subroutine39 & 0xFFFF
    729              HalUARTWrite(0,"\n",1);
    730          //
    731              for(int8 p=1;p<6;++p)
   \                     ??CrossCallReturnLabel_64:
   \   000056   7E01         MOV     R6,#0x1
    732              {
    733                Show_Num(p);
   \                     ??SampleApp_HandleKeys_2:
   \   000058                ; Setup parameters for call to function Show_Num
   \   000058   EE           MOV     A,R6
   \   000059   12....       LCALL   ?Subroutine35 & 0xFFFF
    734                HalUARTWrite(0,":",1);
    735                Show_Bit(DATA_SLOT[p].data, 8);
   \                     ??CrossCallReturnLabel_60:
   \   00005C   EE           MOV     A,R6
   \   00005D   F5..         MOV     ?V0 + 0,A
   \   00005F   33           RLC     A
   \   000060   95E0         SUBB    A,0xE0 /* A   */
   \   000062   F5..         MOV     ?V0 + 1,A
   \   000064   7402         MOV     A,#0x2
   \   000066   78..         MOV     R0,#?V0 + 0
   \   000068   12....       LCALL   ?S_SHL
   \   00006B   74..         MOV     A,#DATA_SLOT & 0xff
   \   00006D   25..         ADD     A,?V0 + 0
   \   00006F   F5..         MOV     ?V0 + 0,A
   \   000071   74..         MOV     A,#(DATA_SLOT >> 8) & 0xff
   \   000073   35..         ADDC    A,?V0 + 1
   \   000075   F5..         MOV     ?V0 + 1,A
   \   000077                ; Setup parameters for call to function Show_Bit
   \   000077   7908         MOV     R1,#0x8
   \   000079   85..82       MOV     DPL,?V0 + 0
   \   00007C   F583         MOV     DPH,A
   \   00007E   12....       LCALL   ?Subroutine31 & 0xFFFF
    736                HalUARTWrite(0," info:",6);
   \                     ??CrossCallReturnLabel_54:
   \   000081                ; Setup parameters for call to function HalUARTWrite
   \   000081   7C06         MOV     R4,#0x6
   \   000083   7D00         MOV     R5,#0x0
   \   000085   7A..         MOV     R2,#`?<Constant " info:">` & 0xff
   \   000087   7B..         MOV     R3,#(`?<Constant " info:">` >> 8) & 0xff
   \   000089   7900         MOV     R1,#0x0
   \   00008B   12....       LCALL   ??HalUARTWrite?relay
    737                Show_Bit(DATA_SLOT[p].Degree_ID, 4);
   \   00008E                ; Setup parameters for call to function Show_Bit
   \   00008E   7904         MOV     R1,#0x4
   \   000090   85..82       MOV     DPL,?V0 + 0
   \   000093   85..83       MOV     DPH,?V0 + 1
   \   000096   A3           INC     DPTR
   \   000097   A3           INC     DPTR
   \   000098   12....       LCALL   ?Subroutine31 & 0xFFFF
    738                HalUARTWrite(0,"\n",1);
   \                     ??CrossCallReturnLabel_55:
   \   00009B                ; Setup parameters for call to function HalUARTWrite
   \   00009B   7C01         MOV     R4,#0x1
   \   00009D   7D00         MOV     R5,#0x0
   \   00009F   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   0000A1   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   0000A3   7900         MOV     R1,#0x0
   \   0000A5   12....       LCALL   ??HalUARTWrite?relay
    739              }
   \   0000A8   0E           INC     R6
   \   0000A9   EE           MOV     A,R6
   \   0000AA   C3           CLR     C
   \   0000AB   9406         SUBB    A,#0x6
   \   0000AD   A2D2         MOV     C,0xD0 /* PSW */.2
   \   0000AF   65D0         XRL     A,PSW
   \   0000B1   33           RLC     A
   \   0000B2   40A4         JC      ??SampleApp_HandleKeys_2
    740              
    741              //显示邻居个数
    742              uint8 nei_N = 0;
   \   0000B4   75..00       MOV     ?V0 + 0,#0x0
    743              for(uchar num_nei=0;num_nei<3;++num_nei)
   \   0000B7   7A00         MOV     R2,#0x0
    744              {
    745                if(Nei_Table[num_nei] != (int16)65534)
   \                     ??SampleApp_HandleKeys_3:
   \   0000B9   EA           MOV     A,R2
   \   0000BA   C3           CLR     C
   \   0000BB   33           RLC     A
   \   0000BC   F8           MOV     R0,A
   \   0000BD   E4           CLR     A
   \   0000BE   12....       LCALL   ??Subroutine63_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_99:
   \   0000C1   64FE         XRL     A,#0xfe
   \   0000C3   7003         JNZ     ??SampleApp_HandleKeys_4
   \   0000C5   A3           INC     DPTR
   \   0000C6   E0           MOVX    A,@DPTR
   \   0000C7   F4           CPL     A
   \                     ??SampleApp_HandleKeys_4:
   \   0000C8   6002         JZ      ??SampleApp_HandleKeys_5
    746                  nei_N++;
   \   0000CA   05..         INC     ?V0 + 0
    747              }
   \                     ??SampleApp_HandleKeys_5:
   \   0000CC   0A           INC     R2
   \   0000CD   EA           MOV     A,R2
   \   0000CE   C3           CLR     C
   \   0000CF   9403         SUBB    A,#0x3
   \   0000D1   40E6         JC      ??SampleApp_HandleKeys_3
    748              HalUARTWrite(0,"nei_num:",8);
   \   0000D3                ; Setup parameters for call to function HalUARTWrite
   \   0000D3   7C08         MOV     R4,#0x8
   \   0000D5   7D00         MOV     R5,#0x0
   \   0000D7   7A..         MOV     R2,#`?<Constant "nei_num:">` & 0xff
   \   0000D9   7B..         MOV     R3,#(`?<Constant "nei_num:">` >> 8) & 0xff
   \   0000DB   7900         MOV     R1,#0x0
   \   0000DD   12....       LCALL   ??HalUARTWrite?relay
    749              Show_Num(nei_N);
   \   0000E0                ; Setup parameters for call to function Show_Num
   \   0000E0   AA..         MOV     R2,?V0 + 0
   \   0000E2   7B00         MOV     R3,#0x0
   \   0000E4   12....       LCALL   ?Subroutine40 & 0xFFFF
    750              HalUARTWrite(0,"\n",1);
    751              
    752              //串口输出所有邻居地址
    753          //    for(int i=0;i<3;++i)
    754          //    {
    755          //      neig_addr_10 = Nei_Table[i];
    756          //
    757          //      sprintf((char*)Num, "%d", i+1);
    758          //      sprintf((char*)Neig_ADDR, "%X", neig_addr_10);
    759          //      HalUARTWrite(0,"邻居",strlen("邻居"));
    760          //      for (int j=0;j<2;++j)
    761          //      {
    762          //        HalUARTWrite(0,&Num[j],1);
    763          //      }
    764          //
    765          //      HalUARTWrite(0,": 0x",strlen(": 0x"));
    766          //
    767          //      if(neig_addr_10 == 0)
    768          //      {
    769          //        HalUARTWrite(0,"0000",4);
    770          //      }
    771          //      else
    772          //      {
    773          //        for (int j=0;j<4;++j)
    774          //        {
    775          //          HalUARTWrite(0,&Neig_ADDR[j],1);
    776          //        }
    777          //      }
    778          //      HalUARTWrite(0,"\n",1);
    779          //    }
    780          
    781          //    HalLedBlink( HAL_LED_3, 2,50, 500 ); //LED3 闪烁提示
    782            }
    783          }
   \                     ??CrossCallReturnLabel_66:
   \   0000E7   02....       LJMP    ??Subroutine76_0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine40:
   \   000000   12....       LCALL   ??Show_Num?relay
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003   7C01         MOV     R4,#0x1
   \   000005   7D00         MOV     R5,#0x0
   \   000007   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000009   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   00000B   7900         MOV     R1,#0x0
   \   00000D   12....       LCALL   ??HalUARTWrite?relay
   \   000010   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine35:
   \   000000   FA           MOV     R2,A
   \   000001   33           RLC     A
   \   000002   95E0         SUBB    A,0xE0 /* A   */
   \   000004   FB           MOV     R3,A
   \   000005   12....       LCALL   ??Show_Num?relay
   \   000008                ; Setup parameters for call to function HalUARTWrite
   \   000008                ; Setup parameters for call to function HalUARTWrite
   \   000008   7C01         MOV     R4,#0x1
   \   00000A   7D00         MOV     R5,#0x0
   \   00000C   7A..         MOV     R2,#`?<Constant ":">` & 0xff
   \   00000E   7B..         MOV     R3,#(`?<Constant ":">` >> 8) & 0xff
   \   000010   7900         MOV     R1,#0x0
   \   000012   12....       LCALL   ??HalUARTWrite?relay
   \   000015   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine31:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   FB           MOV     R3,A
   \   000005   12....       LCALL   ??Show_Bit?relay
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine39:
   \   000000   12....       LCALL   ?Subroutine56 & 0xFFFF
   \                     ??CrossCallReturnLabel_86:
   \   000003   7900         MOV     R1,#0x0
   \   000005   12....       LCALL   ??HalUARTWrite?relay
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine56:
   \   000000   12....       LCALL   ?Subroutine61 & 0xFFFF
   \                     ??CrossCallReturnLabel_127:
   \   000003   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000005   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine30:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   12....       LCALL   ?Subroutine54 & 0xFFFF
   \                     ??CrossCallReturnLabel_124:
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine54:
   \   000000   7B00         MOV     R3,#0x0
   \   000002                REQUIRE ??Subroutine68_0
   \   000002                ; // Fall through to label ??Subroutine68_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine68_0:
   \   000000   12....       LCALL   ?Subroutine61 & 0xFFFF
   \                     ??CrossCallReturnLabel_128:
   \   000003   7A..         MOV     R2,#`?<Constant " ">` & 0xff
   \   000005   7B..         MOV     R3,#(`?<Constant " ">` >> 8) & 0xff
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine61:
   \   000000   12....       LCALL   ??Show_Bit?relay
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003   7C01         MOV     R4,#0x1
   \   000005   7D00         MOV     R5,#0x0
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine71_0:
   \   000000   12....       LCALL   ??Subroutine73_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_154:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine73_0:
   \   000000   7900         MOV     R1,#0x0
   \   000002   12....       LCALL   ??HalUARTWrite?relay
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005   7908         MOV     R1,#0x8
   \   000007   22           RET
    784          
    785          
    786          
    787          
    788          
    789          /*自行定义的 处理串口发来数据包 的函数*/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    790          void SampleApp_SerialCMD(mtOSALSerialData_t *cmdMsg)
   \                     SampleApp_SerialCMD:
    791          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
    792              uint8 i,len,*str=NULL; //len 有用数据长度
    793              str=cmdMsg->msg; //指向数据开头
   \   000005   8A82         MOV     DPL,R2
   \   000007   8B83         MOV     DPH,R3
   \   000009   A3           INC     DPTR
   \   00000A   A3           INC     DPTR
   \   00000B   E0           MOVX    A,@DPTR
   \   00000C   F5..         MOV     ?V0 + 0,A
   \   00000E   A3           INC     DPTR
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   F5..         MOV     ?V0 + 1,A
    794              len=*str; //msg 里的第 1 个字节代表后面的数据长度
   \   000012   85..82       MOV     DPL,?V0 + 0
   \   000015   F583         MOV     DPH,A
   \   000017   E0           MOVX    A,@DPTR
   \   000018   FE           MOV     R6,A
    795              /********打印出串口接收到的数据，用于提示*********/
    796              HalUARTWrite(0,">> ", 3);
   \   000019                ; Setup parameters for call to function HalUARTWrite
   \   000019   7C03         MOV     R4,#0x3
   \   00001B   7D00         MOV     R5,#0x0
   \   00001D   7A..         MOV     R2,#`?<Constant ">> ">` & 0xff
   \   00001F   7B..         MOV     R3,#(`?<Constant ">> ">` >> 8) & 0xff
   \   000021   7900         MOV     R1,#0x0
   \   000023   12....       LCALL   ??HalUARTWrite?relay
    797              for(i=1;i<=len;i++)
   \   000026   7F01         MOV     R7,#0x1
   \   000028   800D         SJMP    ??SampleApp_SerialCMD_0
    798              {
    799                HalUARTWrite(0,str+i,1);
   \                     ??SampleApp_SerialCMD_1:
   \   00002A                ; Setup parameters for call to function HalUARTWrite
   \   00002A   8F..         MOV     ?V0 + 2,R7
   \   00002C   E5..         MOV     A,?V0 + 0
   \   00002E   25..         ADD     A,?V0 + 2
   \   000030   FA           MOV     R2,A
   \   000031   E5..         MOV     A,?V0 + 1
   \   000033   12....       LCALL   ?Subroutine11 & 0xFFFF
    800              }
   \                     ??CrossCallReturnLabel_22:
   \   000036   0F           INC     R7
   \                     ??SampleApp_SerialCMD_0:
   \   000037   EE           MOV     A,R6
   \   000038   C3           CLR     C
   \   000039   9F           SUBB    A,R7
   \   00003A   7C01         MOV     R4,#0x1
   \   00003C   7D00         MOV     R5,#0x0
   \   00003E   50EA         JNC     ??SampleApp_SerialCMD_1
    801          
    802              HalUARTWrite(0,"\n",1 );//换行
   \   000040                ; Setup parameters for call to function HalUARTWrite
   \   000040   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000042   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   000044   7900         MOV     R1,#0x0
   \   000046   12....       LCALL   ??HalUARTWrite?relay
    803          
    804              if ( len == 2 && *(str+1) == 'k' && *(str+2) == '1')
   \   000049   7402         MOV     A,#0x2
   \   00004B   6E           XRL     A,R6
   \   00004C   7079         JNZ     ??SampleApp_SerialCMD_2
   \   00004E   85..82       MOV     DPL,?V0 + 0
   \   000051   85..83       MOV     DPH,?V0 + 1
   \   000054   A3           INC     DPTR
   \   000055   E0           MOVX    A,@DPTR
   \   000056   646B         XRL     A,#0x6b
   \   000058   706D         JNZ     ??SampleApp_SerialCMD_2
   \   00005A   85..82       MOV     DPL,?V0 + 0
   \   00005D   85..83       MOV     DPH,?V0 + 1
   \   000060   A3           INC     DPTR
   \   000061   A3           INC     DPTR
   \   000062   E0           MOVX    A,@DPTR
   \   000063   6431         XRL     A,#0x31
   \   000065   7060         JNZ     ??SampleApp_SerialCMD_2
    805              {
    806          
    807                
    808                for(int8 p=0;p<1;++p)
   \   000067   75..00       MOV     ?V0 + 0,#0x0
    809                {
    810                  Show_Num(p);
   \                     ??SampleApp_SerialCMD_3:
   \   00006A                ; Setup parameters for call to function Show_Num
   \   00006A   E5..         MOV     A,?V0 + 0
   \   00006C   12....       LCALL   ?Subroutine35 & 0xFFFF
    811                  HalUARTWrite(0,":",1);
    812                  Show_Bit(DATA_SLOT[p].data, 8);
   \                     ??CrossCallReturnLabel_61:
   \   00006F   E5..         MOV     A,?V0 + 0
   \   000071   F5..         MOV     ?V0 + 2,A
   \   000073   33           RLC     A
   \   000074   95E0         SUBB    A,0xE0 /* A   */
   \   000076   F5..         MOV     ?V0 + 3,A
   \   000078   7402         MOV     A,#0x2
   \   00007A   78..         MOV     R0,#?V0 + 2
   \   00007C   12....       LCALL   ?S_SHL
   \   00007F   74..         MOV     A,#DATA_SLOT & 0xff
   \   000081   25..         ADD     A,?V0 + 2
   \   000083   FE           MOV     R6,A
   \   000084   74..         MOV     A,#(DATA_SLOT >> 8) & 0xff
   \   000086   35..         ADDC    A,?V0 + 3
   \   000088   FF           MOV     R7,A
   \   000089                ; Setup parameters for call to function Show_Bit
   \   000089   7908         MOV     R1,#0x8
   \   00008B   8E82         MOV     DPL,R6
   \   00008D   8F83         MOV     DPH,R7
   \   00008F   12....       LCALL   ?Subroutine31 & 0xFFFF
    813                  HalUARTWrite(0," >",2);
   \                     ??CrossCallReturnLabel_56:
   \   000092                ; Setup parameters for call to function HalUARTWrite
   \   000092   7C02         MOV     R4,#0x2
   \   000094   7D00         MOV     R5,#0x0
   \   000096   7A..         MOV     R2,#`?<Constant " >">` & 0xff
   \   000098   7B..         MOV     R3,#(`?<Constant " >">` >> 8) & 0xff
   \   00009A   7900         MOV     R1,#0x0
   \   00009C   12....       LCALL   ??HalUARTWrite?relay
    814                  Show_Bit(256, 16);
   \   00009F                ; Setup parameters for call to function Show_Bit
   \   00009F   7910         MOV     R1,#0x10
   \   0000A1   7A00         MOV     R2,#0x0
   \   0000A3   7B01         MOV     R3,#0x1
   \   0000A5   12....       LCALL   ??Subroutine68_0 & 0xFFFF
    815                  HalUARTWrite(0," ",1);
   \                     ??CrossCallReturnLabel_126:
   \   0000A8   7900         MOV     R1,#0x0
   \   0000AA   12....       LCALL   ??HalUARTWrite?relay
    816                  Show_Num(DATA_SLOT[p].Degree_ID);
   \   0000AD                ; Setup parameters for call to function Show_Num
   \   0000AD   8E82         MOV     DPL,R6
   \   0000AF   8F83         MOV     DPH,R7
   \   0000B1   A3           INC     DPTR
   \   0000B2   A3           INC     DPTR
   \   0000B3   12....       LCALL   ??Subroutine67_0 & 0xFFFF
    817                  HalUARTWrite(0,"\n",1);
    818                }
   \                     ??CrossCallReturnLabel_119:
   \   0000B6   12....       LCALL   ?Subroutine40 & 0xFFFF
   \                     ??CrossCallReturnLabel_67:
   \   0000B9   05..         INC     ?V0 + 0
   \   0000BB   E5..         MOV     A,?V0 + 0
   \   0000BD   C3           CLR     C
   \   0000BE   9401         SUBB    A,#0x1
   \   0000C0   A2D2         MOV     C,0xD0 /* PSW */.2
   \   0000C2   65D0         XRL     A,PSW
   \   0000C4   33           RLC     A
   \   0000C5   40A3         JC      ??SampleApp_SerialCMD_3
    819              }
    820          
    821              //模拟异或操作
    822          //    int8 A[] = {'1','0','0','0','0','0','0','1'};
    823          //    unsigned char One = '1',Zero = '0';
    824          //    for (i=0;i<8;++i)
    825          //    {
    826          //      if(A[i]-*(str+i+1))
    827          //      {
    828          //        HalUARTWrite(0,&One,1);
    829          //        *(str+1+i) = One;
    830          //      }
    831          //      else
    832          //      {
    833          //        HalUARTWrite(0,&Zero,1);
    834          //        *(str+1+i) = Zero;
    835          //      }
    836          //
    837          //    }
    838          //
    839          
    840          }
   \                     ??SampleApp_SerialCMD_2:
   \   0000C7   02....       LJMP    ?Subroutine1 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine67_0:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   FB           MOV     R3,A
   \   000005   22           RET
    841          
    842          
    843          
    844          
    845          
    846          
    847          
    848          /*********************************************************************
    849           * LOCAL FUNCTIONS
    850           */
    851          
    852          /*********************************************************************
    853           * @fn      SampleApp_MessageMSGCB  接收函数
    854           *
    855           *          处理接收到的数据,可能是从其他设备收到的数据.
    856           *
    857           * @brief   Data message processor callback.  This function processes
    858           *          any incoming data - probably from other devices.  So, based
    859           *          on cluster ID, perform the intended action.
    860           * @param   none
    861           *
    862           * @return  none
    863           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    864          void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pkt )
   \                     SampleApp_MessageMSGCB:
    865          {
   \   000000   74EC         MOV     A,#-0x14
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 20
   \   000005                ; Auto size: 13
   \   000005   74F3         MOV     A,#-0xd
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    866            uint16 flashTime=1000;//一秒,1000ms
    867            uint8 i,len; //透传
    868            unsigned short neighbor_addr_10 = pkt->srcAddr.addr.shortAddr;  //发送方的数字地址
   \   00000E   8E82         MOV     DPL,R6
   \   000010   8F83         MOV     DPH,R7
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   A3           INC     DPTR
   \   000015   A3           INC     DPTR
   \   000016   A3           INC     DPTR
   \   000017   A3           INC     DPTR
   \   000018   E0           MOVX    A,@DPTR
   \   000019   F5..         MOV     ?V0 + 2,A
   \   00001B   A3           INC     DPTR
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   F5..         MOV     ?V0 + 3,A
    869          //  unsigned char ADDR[4]; //数字地址转换后的字符地址
    870            int8 LOST_nei = 0;
   \   00001F   75..00       MOV     ?V0 + 0,#0x0
    871            uchar active;
    872            
    873            uchar BUSY[4] = "####";
   \   000022   7409         MOV     A,#0x9
   \   000024   12....       LCALL   ?XSTACK_DISP0_8
   \   000027   AC82         MOV     R4,DPL
   \   000029   AD83         MOV     R5,DPH
   \   00002B   7583..       MOV     DPH,#(`?<Constant "####">` >> 8) & 0xff
   \   00002E   7582..       MOV     DPL,#`?<Constant "####">` & 0xff
   \   000031   7404         MOV     A,#0x4
   \   000033   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    874            uint8 Peer_data; //对方数据
    875            int16 Peer_info; //对方码字信息
    876            uint8 Self_data; //己方数据
    877            int16 Self_info; //己方码字信息
    878            int8 degree_low; //码字信息低位
    879            int8 degree_high;//码字信息高位
    880            uint16 Source_info = Power_of_2(Device_ID);
   \   000036                ; Setup parameters for call to function Power_of_2
   \   000036   12....       LCALL   ?Subroutine34 & 0xFFFF
   \                     ??CrossCallReturnLabel_59:
   \   000039   8A..         MOV     ?V0 + 6,R2
   \   00003B   8B..         MOV     ?V0 + 7,R3
    881            switch ( pkt->clusterId )
   \   00003D   8E82         MOV     DPL,R6
   \   00003F   8F83         MOV     DPH,R7
   \   000041   A3           INC     DPTR
   \   000042   A3           INC     DPTR
   \   000043   A3           INC     DPTR
   \   000044   A3           INC     DPTR
   \   000045   E0           MOVX    A,@DPTR
   \   000046   F5..         MOV     ?V0 + 4,A
   \   000048   A3           INC     DPTR
   \   000049   E0           MOVX    A,@DPTR
   \   00004A   F5..         MOV     ?V0 + 5,A
   \   00004C   78..         MOV     R0,#?V0 + 4
   \   00004E   12....       LCALL   ?US_SWITCH_DENSE
   \                     `?<Jumptable for SampleApp_MessageMSGCB>_0`:
   \   000051   0200         DW        2
   \   000053   02           DB        2
   \   000054   ....         DW        ??SampleApp_MessageMSGCB_0
   \   000056   ....         DW        ??SampleApp_MessageMSGCB_1
   \   000058   ....         DW        ??SampleApp_MessageMSGCB_2
   \   00005A   ....         DW        ??SampleApp_MessageMSGCB_3
    882            {
    883              
    884              /*************************收到 点对点 消息********************************/
    885            case SAMPLEAPP_POINT_TO_POINT_CLUSTERID:
    886              
    887              /*收到重置信号*/
    888              if(pkt->cmd.Data[0] == '!')
   \                     ??SampleApp_MessageMSGCB_3:
   \   00005C   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_15:
   \   00005F   6421         XRL     A,#0x21
   \   000061   7013         JNZ     ??SampleApp_MessageMSGCB_4
    889              {
    890                HalUARTWrite(0,"重置中...",strlen("重置中..."));
   \   000063                ; Setup parameters for call to function HalUARTWrite
   \   000063   7C09         MOV     R4,#0x9
   \   000065   7D00         MOV     R5,#0x0
   \   000067   7A..         MOV     R2,#`?<Constant "\\326\\330\\326\\303\\326\\320...">` & 0xff
   \   000069   7B..         MOV     R3,#(`?<Constant "\\326\\330\\326\\303\\326\\320...">` >> 8) & 0xff
   \   00006B   7900         MOV     R1,#0x0
   \   00006D   12....       LCALL   ??HalUARTWrite?relay
    891                SystemResetSoft();
   \   000070                ; Setup parameters for call to function Onboard_soft_reset
   \   000070   12....       LCALL   Onboard_soft_reset & 0xFFFF
   \   000073   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
    892              }
    893              
    894              /*收到指定为代理节点消息*/
    895              else if ((pkt->cmd.Data[0] == '@') && (pkt->cmd.Data[1] == '@') && (pkt->cmd.Data[2] == '@') && (pkt->cmd.Data[3] == '@'))
   \                     ??SampleApp_MessageMSGCB_4:
   \   000076   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_19:
   \   000079   6440         XRL     A,#0x40
   \   00007B   6003         JZ      $+5
   \   00007D   02....       LJMP    ??SampleApp_MessageMSGCB_5 & 0xFFFF
   \   000080   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   000083   6440         XRL     A,#0x40
   \   000085   6003         JZ      $+5
   \   000087   02....       LJMP    ??SampleApp_MessageMSGCB_5 & 0xFFFF
   \   00008A   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_5:
   \   00008D   6440         XRL     A,#0x40
   \   00008F   707C         JNZ     ??SampleApp_MessageMSGCB_5
   \   000091   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_2:
   \   000094   6440         XRL     A,#0x40
   \   000096   7075         JNZ     ??SampleApp_MessageMSGCB_5
    896              {
    897                Is_AgentNode = TRUE; //设置为是代理节点
   \   000098   90....       MOV     DPTR,#Is_AgentNode
   \   00009B   7401         MOV     A,#0x1
   \   00009D   F0           MOVX    @DPTR,A
   \   00009E   A3           INC     DPTR
   \   00009F   E4           CLR     A
   \   0000A0   F0           MOVX    @DPTR,A
    898                
    899                /*回复Sink节点已经设置自身为代理节点*/
    900                uint8 set_Agent_succeed[] = {'%', '%', '%', '%'};  //发送给sink节点的数据,用 '+' 标识
   \   0000A1   7405         MOV     A,#0x5
   \   0000A3   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A6   AC82         MOV     R4,DPL
   \   0000A8   AD83         MOV     R5,DPH
   \   0000AA   7583..       MOV     DPH,#(`?<Constant {37, 37, 37, 37}>` >> 8) & 0xff
   \   0000AD   7582..       MOV     DPL,#`?<Constant {37, 37, 37, 37}>` & 0xff
   \   0000B0   7404         MOV     A,#0x4
   \   0000B2   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    901                
    902                /*给Sink节点发送数据*/
    903                Point_To_Point_DstAddr.addr.shortAddr = (int16)0;
   \   0000B5   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   0000B8   12....       LCALL   ?Subroutine25 & 0xFFFF
    904                if ( AF_DataRequest( &Point_To_Point_DstAddr, //点对点通信方式目标地址
    905                                    &SampleApp_epDesc,
    906                                    SAMPLEAPP_POINT_TO_POINT_CLUSTERID, //点对点簇ID
    907                                    4,
    908                                    set_Agent_succeed,
    909                                    &SampleApp_TransID,
    910                                    AF_DISCV_ROUTE,
    911                                    AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \                     ??CrossCallReturnLabel_139:
   \   0000BB   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000BE   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   0000C1   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   0000C4   78..         MOV     R0,#?V0 + 0
   \   0000C6   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000C9   7408         MOV     A,#0x8
   \   0000CB   12....       LCALL   ?XSTACK_DISP0_8
   \   0000CE   8582..       MOV     ?V0 + 0,DPL
   \   0000D1   8583..       MOV     ?V0 + 1,DPH
   \   0000D4   78..         MOV     R0,#?V0 + 0
   \   0000D6   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000D9   75..04       MOV     ?V0 + 0,#0x4
   \   0000DC   75..00       MOV     ?V0 + 1,#0x0
   \   0000DF   78..         MOV     R0,#?V0 + 0
   \   0000E1   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E4   78..         MOV     R0,#?V0 + 0
   \   0000E6   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E9   12....       LCALL   ?Subroutine36 & 0xFFFF
   \                     ??CrossCallReturnLabel_107:
   \   0000EC   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000EF   E9           MOV     A,R1
   \   0000F0   7010         JNZ     ??SampleApp_MessageMSGCB_6
    912                {
    913                  HalLedBlink( HAL_LED_3, 4, 60, (flashTime / 4) ); //led3闪
   \   0000F2                ; Setup parameters for call to function HalLedBlink
   \   0000F2   7CFA         MOV     R4,#-0x6
   \   0000F4   7D00         MOV     R5,#0x0
   \   0000F6   7B3C         MOV     R3,#0x3c
   \   0000F8   7A04         MOV     R2,#0x4
   \                     ??SampleApp_MessageMSGCB_7:
   \   0000FA   7904         MOV     R1,#0x4
   \                     ??SampleApp_MessageMSGCB_8:
   \   0000FC   12....       LCALL   ??HalLedBlink?relay
   \   0000FF   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
    914                }
    915                else
    916                {
    917                  HalUARTWrite(0,"向Sink节点发送码字失败\n",strlen("向Sink节点发送码字失败\n"));
   \                     ??SampleApp_MessageMSGCB_6:
   \   000102                ; Setup parameters for call to function HalUARTWrite
   \   000102   7C17         MOV     R4,#0x17
   \   000104   7D00         MOV     R5,#0x0
   \   000106   7A..         MOV     R2,#`?<Constant "\\317\\362Sink\\275\\332\\265\\343\\267\\2` & 0xff
   \   000108   7B..         MOV     R3,#(`?<Constant "\\317\\362Sink\\275\\332\\265\\343\\267\\2` >> 8) & 0xff
   \   00010A   02....       LJMP    ??SampleApp_MessageMSGCB_9 & 0xFFFF
    918                }
    919              }
    920              /*收到交换码字信息*/
    921              else if((pkt->cmd.Data[0] == '~') && (pkt->cmd.Data[1] == '~') && (pkt->cmd.Data[2] == '~') && (pkt->cmd.Data[3] == '~'))
   \                     ??SampleApp_MessageMSGCB_5:
   \   00010D   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_20:
   \   000110   647E         XRL     A,#0x7e
   \   000112   6003         JZ      $+5
   \   000114   02....       LJMP    ??SampleApp_MessageMSGCB_10 & 0xFFFF
   \   000117   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_9:
   \   00011A   647E         XRL     A,#0x7e
   \   00011C   6003         JZ      $+5
   \   00011E   02....       LJMP    ??SampleApp_MessageMSGCB_10 & 0xFFFF
   \   000121   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_6:
   \   000124   647E         XRL     A,#0x7e
   \   000126   6003         JZ      $+5
   \   000128   02....       LJMP    ??SampleApp_MessageMSGCB_10 & 0xFFFF
   \   00012B   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_3:
   \   00012E   647E         XRL     A,#0x7e
   \   000130   6003         JZ      $+5
   \   000132   02....       LJMP    ??SampleApp_MessageMSGCB_10 & 0xFFFF
    922              {
    923                if(Is_AgentNode)
   \   000135   90....       MOV     DPTR,#Is_AgentNode
   \   000138   12....       LCALL   ?Subroutine50 & 0xFFFF
   \                     ??CrossCallReturnLabel_134:
   \   00013B   E8           MOV     A,R0
   \   00013C   49           ORL     A,R1
   \   00013D   7003         JNZ     $+5
   \   00013F   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
    924                    {
    925                      srand((int)osal_getClock()); //生成随机数种子
   \   000142                ; Setup parameters for call to function srand
   \   000142                ; Setup parameters for call to function osal_getClock
   \   000142   12....       LCALL   ?Subroutine38 & 0xFFFF
    926                      uint8 send_to_sink_index =  random(5)+1; //随机产生一个发送给sink节点的码字的序列号
   \                     ??CrossCallReturnLabel_104:
   \   000145   12....       LCALL   ?S_DIV_MOD
   \   000148   EA           MOV     A,R2
   \   000149   04           INC     A
   \   00014A   F5..         MOV     ?V0 + 0,A
    927                      uint8 to_sink_data = DATA_SLOT[send_to_sink_index].data; //即将发送给Sink节点的码字
   \   00014C   75..00       MOV     ?V0 + 1,#0x0
   \   00014F   7402         MOV     A,#0x2
   \   000151   78..         MOV     R0,#?V0 + 0
   \   000153   12....       LCALL   ?S_SHL
   \   000156   12....       LCALL   ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_41:
   \   000159   FE           MOV     R6,A
   \   00015A   A3           INC     DPTR
   \   00015B   A3           INC     DPTR
   \   00015C   E0           MOVX    A,@DPTR
   \   00015D   FA           MOV     R2,A
   \   00015E   A3           INC     DPTR
   \   00015F   E0           MOVX    A,@DPTR
   \   000160   F8           MOV     R0,A
    928                      uint8 to_sink_degree_high = DATA_SLOT[send_to_sink_index].Degree_ID >>8; //高位码字度信息
    929                      uint8 to_sink_degree_low = (uint8)DATA_SLOT[send_to_sink_index].Degree_ID;  //低位码字度信息
   \   000161   EA           MOV     A,R2
   \   000162   F9           MOV     R1,A
    930                      uint8 to_sink_DATA[] = {'+', to_sink_data, to_sink_degree_high, to_sink_degree_low};  //发送给sink节点的数据,用 '+' 标识
   \   000163   7401         MOV     A,#0x1
   \   000165   12....       LCALL   ?XSTACK_DISP0_8
   \   000168   AC82         MOV     R4,DPL
   \   00016A   AD83         MOV     R5,DPH
   \   00016C   7583..       MOV     DPH,#(`?<Constant {43, 0, 0, 0}>` >> 8) & 0xff
   \   00016F   7582..       MOV     DPL,#`?<Constant {43, 0, 0, 0}>` & 0xff
   \   000172   7404         MOV     A,#0x4
   \   000174   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   \   000177   7402         MOV     A,#0x2
   \   000179   12....       LCALL   ?XSTACK_DISP0_8
   \   00017C   EE           MOV     A,R6
   \   00017D   F0           MOVX    @DPTR,A
   \   00017E   7403         MOV     A,#0x3
   \   000180   12....       LCALL   ?XSTACK_DISP0_8
   \   000183   E8           MOV     A,R0
   \   000184   F0           MOVX    @DPTR,A
   \   000185   7404         MOV     A,#0x4
   \   000187   12....       LCALL   ?XSTACK_DISP0_8
   \   00018A   E9           MOV     A,R1
   \   00018B   F0           MOVX    @DPTR,A
    931                      
    932                      /*给Sink节点发送数据*/
    933                      Point_To_Point_DstAddr.addr.shortAddr = (int16)0;
   \   00018C   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   00018F   E4           CLR     A
   \   000190   12....       LCALL   ?Subroutine25 & 0xFFFF
    934                      if ( AF_DataRequest( &Point_To_Point_DstAddr, //点对点通信方式目标地址
    935                                          &SampleApp_epDesc,
    936                                          SAMPLEAPP_POINT_TO_POINT_CLUSTERID, //点对点簇ID
    937                                          4,
    938                                          to_sink_DATA,
    939                                          &SampleApp_TransID,
    940                                          AF_DISCV_ROUTE,
    941                                          AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \                     ??CrossCallReturnLabel_140:
   \   000193   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000196   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000199   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   00019C   78..         MOV     R0,#?V0 + 0
   \   00019E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001A1   7404         MOV     A,#0x4
   \   0001A3   12....       LCALL   ?XSTACK_DISP0_8
   \   0001A6   8582..       MOV     ?V0 + 0,DPL
   \   0001A9   8583..       MOV     ?V0 + 1,DPH
   \   0001AC   78..         MOV     R0,#?V0 + 0
   \   0001AE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001B1   75..04       MOV     ?V0 + 0,#0x4
   \   0001B4   75..00       MOV     ?V0 + 1,#0x0
   \   0001B7   78..         MOV     R0,#?V0 + 0
   \   0001B9   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001BC   78..         MOV     R0,#?V0 + 0
   \   0001BE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001C1   12....       LCALL   ?Subroutine36 & 0xFFFF
   \                     ??CrossCallReturnLabel_108:
   \   0001C4   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001C7   E9           MOV     A,R1
   \   0001C8   6003         JZ      $+5
   \   0001CA   02....       LJMP    ??SampleApp_MessageMSGCB_6 & 0xFFFF
    942                      {
    943                        HalLedBlink( HAL_LED_3, 2, 60, (flashTime / 2) ); //led3闪
   \   0001CD                ; Setup parameters for call to function HalLedBlink
   \   0001CD   7CF4         MOV     R4,#-0xc
   \   0001CF   7D01         MOV     R5,#0x1
   \   0001D1   7B3C         MOV     R3,#0x3c
   \   0001D3   7A02         MOV     R2,#0x2
   \   0001D5   02....       LJMP    ??SampleApp_MessageMSGCB_7 & 0xFFFF
    944                      }
    945                      else
    946                      {
    947                        HalUARTWrite(0,"向Sink节点发送码字失败\n",strlen("向Sink节点发送码字失败\n"));
    948                      }
    949                    }
    950              }
    951              else
    952              {
    953                HalUARTWrite(0, "received  ", 10);  //给串口发送提示
   \                     ??SampleApp_MessageMSGCB_10:
   \   0001D8                ; Setup parameters for call to function HalUARTWrite
   \   0001D8   7C0A         MOV     R4,#0xa
   \   0001DA   7D00         MOV     R5,#0x0
   \   0001DC   7A..         MOV     R2,#`?<Constant "received  ">` & 0xff
   \   0001DE   7B..         MOV     R3,#(`?<Constant "received  ">` >> 8) & 0xff
   \   0001E0   12....       LCALL   ?Subroutine21 & 0xFFFF
    954                HalUARTWrite(0, &pkt->cmd.Data[0], 1); // 打印收到数据
   \                     ??CrossCallReturnLabel_37:
   \   0001E3   F5..         MOV     ?V0 + 1,A
   \   0001E5                ; Setup parameters for call to function HalUARTWrite
   \   0001E5   7C01         MOV     R4,#0x1
   \   0001E7   7D00         MOV     R5,#0x0
   \   0001E9   85..82       MOV     DPL,?V0 + 0
   \   0001EC   F583         MOV     DPH,A
   \   0001EE   12....       LCALL   ??Subroutine67_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_120:
   \   0001F1   12....       LCALL   ?Subroutine16 & 0xFFFF
    955                
    956                Show_Bit(pkt->cmd.Data[1],8);
   \                     ??CrossCallReturnLabel_31:
   \   0001F4   12....       LCALL   ?Subroutine30 & 0xFFFF
    957                HalUARTWrite(0," ",1);
   \                     ??CrossCallReturnLabel_53:
   \   0001F7   12....       LCALL   ?Subroutine16 & 0xFFFF
    958                //    Show_Bit(pkt->cmd.Data[2],8);    //打印高8位码字编码信息
    959                //    HalUARTWrite(0," ",1);
    960                Show_Bit(pkt->cmd.Data[3],8);
   \                     ??CrossCallReturnLabel_32:
   \   0001FA   A3           INC     DPTR
   \   0001FB   A3           INC     DPTR
   \   0001FC   E0           MOVX    A,@DPTR
   \   0001FD   FA           MOV     R2,A
   \   0001FE   7B00         MOV     R3,#0x0
   \   000200   12....       LCALL   ?Subroutine39 & 0xFFFF
    961                //    sprintf((char*)ADDR, "%X", neighbor_addr_10);
    962                //    HalUARTWrite(0," from ",6);
    963                //    HalUARTWrite(0,ADDR,4);
    964                HalUARTWrite(0, "\n", 1); // 回车换行
    965                
    966                /*如果在自身已经发起交换请求的情况下,收到对方发来的交换数据包响应*/
    967                if(Waiting_Request && (neighbor_addr_10 == Exchanging_Neighbor)) 
   \                     ??CrossCallReturnLabel_65:
   \   000203   90....       MOV     DPTR,#Waiting_Request
   \   000206   E0           MOVX    A,@DPTR
   \   000207   7003         JNZ     $+5
   \   000209   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
   \   00020C   90....       MOV     DPTR,#Exchanging_Neighbor
   \   00020F   E0           MOVX    A,@DPTR
   \   000210   65..         XRL     A,?V0 + 2
   \   000212   7004         JNZ     ??SampleApp_MessageMSGCB_11
   \   000214   A3           INC     DPTR
   \   000215   E0           MOVX    A,@DPTR
   \   000216   65..         XRL     A,?V0 + 3
   \                     ??SampleApp_MessageMSGCB_11:
   \   000218   6003         JZ      $+5
   \   00021A   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
    968                {
    969                  /*对方正忙*/
    970                  if(pkt->cmd.Data[0] == '#' && pkt->cmd.Data[1] == '#' && pkt->cmd.Data[2] == '#' && pkt->cmd.Data[3] == '#')
   \   00021D   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_16:
   \   000220   6423         XRL     A,#0x23
   \   000222   7025         JNZ     ??CrossCallReturnLabel_35
   \   000224   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_10:
   \   000227   6423         XRL     A,#0x23
   \   000229   701E         JNZ     ??CrossCallReturnLabel_35
   \   00022B   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   00022E   6423         XRL     A,#0x23
   \   000230   7017         JNZ     ??CrossCallReturnLabel_35
   \   000232   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_4:
   \   000235   6423         XRL     A,#0x23
   \   000237   7010         JNZ     ??CrossCallReturnLabel_35
    971                  {
    972                    Waiting_Request = FALSE;
   \   000239   90....       MOV     DPTR,#Waiting_Request
   \   00023C   E4           CLR     A
   \   00023D   F0           MOVX    @DPTR,A
    973                    HalUARTWrite(0,"peer is busy",12);
   \   00023E                ; Setup parameters for call to function HalUARTWrite
   \   00023E   7C0C         MOV     R4,#0xc
   \   000240   FD           MOV     R5,A
   \   000241   7A..         MOV     R2,#`?<Constant "peer is busy">` & 0xff
   \   000243   7B..         MOV     R3,#(`?<Constant "peer is busy">` >> 8) & 0xff
   \   000245   F9           MOV     R1,A
   \   000246   12....       LCALL   ?Subroutine18 & 0xFFFF
    974                    HalUARTWrite(0,"\n",1);
    975                    //        SampleApp_SendPointToPointMessage(); //再次发起交换请求
    976                  }
    977                  /*对方正常响应*/
    978                  if(!Exchange_Lock && (pkt->cmd.Data[0] == '$'))
   \                     ??CrossCallReturnLabel_35:
   \   000249   90....       MOV     DPTR,#Exchange_Lock
   \   00024C   E0           MOVX    A,@DPTR
   \   00024D   6003         JZ      $+5
   \   00024F   02....       LJMP    ??SampleApp_MessageMSGCB_12 & 0xFFFF
   \   000252   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_17:
   \   000255   6424         XRL     A,#0x24
   \   000257   6003         JZ      $+5
   \   000259   02....       LJMP    ??SampleApp_MessageMSGCB_12 & 0xFFFF
    979                  {
    980                    Exchange_Lock = TRUE; //开启码字槽的锁
   \   00025C   90....       MOV     DPTR,#Exchange_Lock
   \   00025F   7401         MOV     A,#0x1
   \   000261   F0           MOVX    @DPTR,A
    981                    
    982                    Peer_data = pkt->cmd.Data[1]; //对方发来的数据
   \   000262   85..82       MOV     DPL,?V0 + 0
   \   000265   85..83       MOV     DPH,?V0 + 1
   \   000268   12....       LCALL   ?Subroutine27 & 0xFFFF
    983                    Peer_info = pkt->cmd.Data[3]; 
    984                    Peer_info |= pkt->cmd.Data[2]*256; //对方码字信息
    985                    //查看发来的数据包的度
    986                    uint8 Peer_degree = 0;
    987                    uint8 Self_included = FALSE;
    988                    for(short k=0;k<16;++k)
    989                    {
    990                      if(Power_of_2(k) & Peer_info)
   \                     ??CrossCallReturnLabel_48:
   \   00026B                ; Setup parameters for call to function Power_of_2
   \   00026B   12....       LCALL   ?Subroutine37 & 0xFFFF
   \                     ??CrossCallReturnLabel_62:
   \   00026E   601E         JZ      ??SampleApp_MessageMSGCB_13
    991                      {
    992                        ++Peer_degree;
   \   000270   05..         INC     ?V0 + 4
    993                        if(k == Device_ID)
   \   000272   90....       MOV     DPTR,#Device_ID
   \   000275   E0           MOVX    A,@DPTR
   \   000276   65..         XRL     A,?V0 + 0
   \   000278   7002         JNZ     ??SampleApp_MessageMSGCB_14
   \   00027A   E5..         MOV     A,?V0 + 1
   \                     ??SampleApp_MessageMSGCB_14:
   \   00027C   7010         JNZ     ??SampleApp_MessageMSGCB_13
    994                        {
    995                          Self_included = TRUE; //码字包含自身的节点数据包
   \   00027E   75..01       MOV     ?V0 + 2,#0x1
    996                          HalUARTWrite(0,"包含自身信息",12);
   \   000281                ; Setup parameters for call to function HalUARTWrite
   \   000281   7C0C         MOV     R4,#0xc
   \   000283   7D00         MOV     R5,#0x0
   \   000285   7A..         MOV     R2,#`?<Constant "\\260\\374\\272\\254\\327\\324\\311\\355\\3` & 0xff
   \   000287   7B..         MOV     R3,#(`?<Constant "\\260\\374\\272\\254\\327\\324\\311\\355\\3` >> 8) & 0xff
   \   000289   7900         MOV     R1,#0x0
   \   00028B   12....       LCALL   ??HalUARTWrite?relay
    997                        }
    998                        
    999                      }
   1000                    }
   \                     ??SampleApp_MessageMSGCB_13:
   \   00028E   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_11:
   \   000291   40D8         JC      ??CrossCallReturnLabel_48
   1001                    if(Peer_degree>=MAX_Degree)
   \   000293   12....       LCALL   ?Subroutine28 & 0xFFFF
   \                     ??CrossCallReturnLabel_132:
   \   000296   401D         JC      ??SampleApp_MessageMSGCB_15
   1002                    {
   1003                      if(Self_included)
   \   000298   E5..         MOV     A,?V0 + 2
   \   00029A   A2E0         MOV     C,0xE0 /* A   */.0
   \   00029C   500D         JNC     ??SampleApp_MessageMSGCB_16
   1004                        HalUARTWrite(0,"且",2);
   \   00029E                ; Setup parameters for call to function HalUARTWrite
   \   00029E   7C02         MOV     R4,#0x2
   \   0002A0   7D00         MOV     R5,#0x0
   \   0002A2   7A..         MOV     R2,#`?<Constant "\\307\\322">` & 0xff
   \   0002A4   7B..         MOV     R3,#(`?<Constant "\\307\\322">` >> 8) & 0xff
   \   0002A6   7900         MOV     R1,#0x0
   \   0002A8   12....       LCALL   ??HalUARTWrite?relay
   1005                      HalUARTWrite(0,"已达最大度,",11);
   \                     ??SampleApp_MessageMSGCB_16:
   \   0002AB                ; Setup parameters for call to function HalUARTWrite
   \   0002AB   7C0B         MOV     R4,#0xb
   \   0002AD   7D00         MOV     R5,#0x0
   \   0002AF   7A..         MOV     R2,#`?<Constant "\\322\\321\\264\\357\\327\\356\\264\\363\\2` & 0xff
   \   0002B1   7B..         MOV     R3,#(`?<Constant "\\322\\321\\264\\357\\327\\356\\264\\363\\2` >> 8) & 0xff
   \   0002B3   8008         SJMP    ??SampleApp_MessageMSGCB_17
   1006                    }
   1007                    else
   1008                    {
   1009                      HalUARTWrite(0,",",1);
   \                     ??SampleApp_MessageMSGCB_15:
   \   0002B5                ; Setup parameters for call to function HalUARTWrite
   \   0002B5   7C01         MOV     R4,#0x1
   \   0002B7   7D00         MOV     R5,#0x0
   \   0002B9   7A..         MOV     R2,#`?<Constant ",">` & 0xff
   \   0002BB   7B..         MOV     R3,#(`?<Constant ",">` >> 8) & 0xff
   \                     ??SampleApp_MessageMSGCB_17:
   \   0002BD   7900         MOV     R1,#0x0
   \   0002BF   12....       LCALL   ??HalUARTWrite?relay
   1010                    }
   1011                    //判断是否符合编码条件,不包含自身的数据包,且度不大于最大允许的度
   1012                    if( !Self_included && (Peer_degree < MAX_Degree) )
   \   0002C2   E5..         MOV     A,?V0 + 2
   \   0002C4   A2E0         MOV     C,0xE0 /* A   */.0
   \   0002C6   400A         JC      ??SampleApp_MessageMSGCB_18
   \   0002C8   12....       LCALL   ??Subroutine69_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_130:
   \   0002CB   5005         JNC     ??SampleApp_MessageMSGCB_18
   1013                    {
   1014                      HalUARTWrite(0,"encoding...\n^^",14);
   \   0002CD                ; Setup parameters for call to function HalUARTWrite
   \   0002CD   12....       LCALL   ?Subroutine13 & 0xFFFF
   1015                      //          Show_Bit(Peer_data,8);          //对方数据
   1016                      //          HalUARTWrite(0,"\n^^",3);
   1017                      //          Show_Bit(DATA_SLOT[0].data,8);  //自身数据
   1018                      //          
   1019                      //          HalUARTWrite(0,"\n->",3);
   1020                      //          Peer_data ^= DATA_SLOT[0].data; //异或编码
   1021                      //          
   1022                      //          Show_Bit(Peer_data, 8);         //编码后数据
   1023                      
   1024                      HalUARTWrite(0,"\n||",3);
   1025                      Show_Bit(Peer_info,8);
   1026                      HalUARTWrite(0," ",1);
   1027                      Show_Num(Peer_info);          //对方码字信息
   1028                      
   1029                      HalUARTWrite(0,"\n||",3);
   1030                      Show_Bit(Source_info,8);  //**
   1031                      HalUARTWrite(0," ",1);
   1032                      Show_Num(Source_info);         //自身码字信息
   1033                      
   1034                      HalUARTWrite(0,"\n->",3);      
   1035                      Peer_info |= Source_info; //码字信息中添加自身的设备ID
   1036                      Show_Bit(Peer_info,8);   //**
   1037                      HalUARTWrite(0," ",1);
   1038                      Show_Num(Peer_info);          //融合后码字信息
   1039                      HalUARTWrite(0,"\n",1);
   1040                    }
   \                     ??CrossCallReturnLabel_25:
   \   0002D0   8008         SJMP    ??SampleApp_MessageMSGCB_19
   1041                    else
   1042                    {
   1043                      HalUARTWrite(0,"未编码.\n",8);
   \                     ??SampleApp_MessageMSGCB_18:
   \   0002D2                ; Setup parameters for call to function HalUARTWrite
   \   0002D2   7C08         MOV     R4,#0x8
   \   0002D4   7D00         MOV     R5,#0x0
   \   0002D6   7A..         MOV     R2,#`?<Constant "\\316\\264\\261\\340\\302\\353.\\n">` & 0xff
   \   0002D8   7B..         MOV     R3,#(`?<Constant "\\316\\264\\261\\340\\302\\353.\\n">` >> 8) & 0xff
   1044                      
   1045                    }
   \                     ??SampleApp_MessageMSGCB_19:
   \   0002DA   12....       LCALL   ?Subroutine14 & 0xFFFF
   1046                    
   1047                    HalUARTWrite(0,"peer_degree = ",14);
   1048                    Show_Num(Peer_degree);
   1049                    HalUARTWrite(0,"\n\n",2);     
   1050                    DATA_SLOT[Exchange_index].data = Peer_data; //对应位置替换为对方的码字
   \                     ??CrossCallReturnLabel_27:
   \   0002DD   12....       LCALL   ?S_SHL
   \   0002E0   12....       LCALL   ?Subroutine22 & 0xFFFF
   1051                    DATA_SLOT[Exchange_index].Degree_ID = Peer_info; //记录码字信息
   1052                    
   1053                    Waiting_Request = FALSE; //关闭等待回复状态
   \                     ??CrossCallReturnLabel_39:
   \   0002E3   90....       MOV     DPTR,#Waiting_Request
   \   0002E6   E4           CLR     A
   \   0002E7   F0           MOVX    @DPTR,A
   1054                    Exchange_Lock = FALSE; //关闭码字槽的锁
   \   0002E8   90....       MOV     DPTR,#Exchange_Lock
   \   0002EB   02....       LJMP    ??SampleApp_MessageMSGCB_20 & 0xFFFF
   1055                    
   1056                    /*如果是代理节点就向Sink节点发送一个码字的数据*/
   1057                    
   1058                    
   1059                    
   1060                    
   1061                    
   1062                    
   1063                  }
   1064                  
   1065                  /*在等待对方返回交换数据包的过程中收到其他节点的交换请求*/
   1066                  else if(Waiting_Request && (neighbor_addr_10 != Exchanging_Neighbor) && (pkt->cmd.Data[0] == '*')) 
   \                     ??SampleApp_MessageMSGCB_12:
   \   0002EE   90....       MOV     DPTR,#Waiting_Request
   \   0002F1   E0           MOVX    A,@DPTR
   \   0002F2   606F         JZ      ??SampleApp_MessageMSGCB_21
   \   0002F4   90....       MOV     DPTR,#Exchanging_Neighbor
   \   0002F7   E0           MOVX    A,@DPTR
   \   0002F8   65..         XRL     A,?V0 + 2
   \   0002FA   7004         JNZ     ??SampleApp_MessageMSGCB_22
   \   0002FC   A3           INC     DPTR
   \   0002FD   E0           MOVX    A,@DPTR
   \   0002FE   65..         XRL     A,?V0 + 3
   \                     ??SampleApp_MessageMSGCB_22:
   \   000300   7003         JNZ     $+5
   \   000302   02....       LJMP    ??SampleApp_MessageMSGCB_23 & 0xFFFF
   \   000305   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_13:
   \   000308   6003         JZ      $+5
   \   00030A   02....       LJMP    ??SampleApp_MessageMSGCB_23 & 0xFFFF
   1067                  {
   1068                    /*返回正忙信号 "####" */ 
   1069                    Point_To_Point_DstAddr.addr.shortAddr = neighbor_addr_10;
   \   00030D   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   000310   E5..         MOV     A,?V0 + 2
   \   000312   F0           MOVX    @DPTR,A
   \   000313   A3           INC     DPTR
   \   000314   E5..         MOV     A,?V0 + 3
   \   000316   12....       LCALL   ??Subroutine70_0 & 0xFFFF
   1070                    if(AF_DataRequest( &Point_To_Point_DstAddr, //点对点通信方式目标地址
   1071                                      &SampleApp_epDesc,
   1072                                      SAMPLEAPP_POINT_TO_POINT_CLUSTERID, //点对点簇ID
   1073                                      4,
   1074                                      BUSY,
   1075                                      &SampleApp_TransID,
   1076                                      AF_DISCV_ROUTE,
   1077                                      AF_DEFAULT_RADIUS )== afStatus_SUCCESS )
   \                     ??CrossCallReturnLabel_142:
   \   000319   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00031C   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   00031F   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000322   78..         MOV     R0,#?V0 + 0
   \   000324   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000327   740C         MOV     A,#0xc
   \   000329   12....       LCALL   ?XSTACK_DISP0_8
   \   00032C   8582..       MOV     ?V0 + 0,DPL
   \   00032F   8583..       MOV     ?V0 + 1,DPH
   \   000332   78..         MOV     R0,#?V0 + 0
   \   000334   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000337   75..04       MOV     ?V0 + 0,#0x4
   \   00033A   75..00       MOV     ?V0 + 1,#0x0
   \   00033D   78..         MOV     R0,#?V0 + 0
   \   00033F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000342   78..         MOV     R0,#?V0 + 0
   \   000344   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000347   12....       LCALL   ?Subroutine36 & 0xFFFF
   \                     ??CrossCallReturnLabel_109:
   \   00034A   12....       LCALL   ?DEALLOC_XSTACK8
   \   00034D   E9           MOV     A,R1
   \   00034E   6003         JZ      $+5
   \   000350   02....       LJMP    ??SampleApp_MessageMSGCB_23 & 0xFFFF
   1078                    {
   1079                      HalUARTWrite(0,"i am busy!\n",strlen("i am busy!\n"));
   \   000353                ; Setup parameters for call to function HalUARTWrite
   \   000353   7C0B         MOV     R4,#0xb
   \   000355   7D00         MOV     R5,#0x0
   \   000357   7A..         MOV     R2,#`?<Constant "i am busy!\\n">` & 0xff
   \   000359   7B..         MOV     R3,#(`?<Constant "i am busy!\\n">` >> 8) & 0xff
   \   00035B   7900         MOV     R1,#0x0
   \   00035D   12....       LCALL   ??HalUARTWrite?relay
   \   000360   02....       LJMP    ??SampleApp_MessageMSGCB_23 & 0xFFFF
   1080                    }
   1081                    else
   1082                    {
   1083                    }
   1084                    
   1085                    
   1086                  }
   \                     ??SampleApp_MessageMSGCB_21:
   \   000363   90....       MOV     DPTR,#Exchange_Lock
   \   000366   E0           MOVX    A,@DPTR
   \   000367   6003         JZ      $+5
   \   000369   02....       LJMP    ??SampleApp_MessageMSGCB_23 & 0xFFFF
   \   00036C   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_14:
   \   00036F   6003         JZ      $+5
   \   000371   02....       LJMP    ??SampleApp_MessageMSGCB_23 & 0xFFFF
   1087                  
   1088                  /*如果收到对方发来的交换数据包请求*/
   1089                  else if(!Waiting_Request && !Exchange_Lock && (pkt->cmd.Data[0] == '*'))
   1090                  {
   1091                    Exchange_Lock = TRUE; //开启码字槽的锁
   \   000374   90....       MOV     DPTR,#Exchange_Lock
   \   000377   7401         MOV     A,#0x1
   \   000379   F0           MOVX    @DPTR,A
   1092                    /*挑选自身随机的数据包发送给对方*/
   1093                    srand((int)osal_getClock());
   \   00037A                ; Setup parameters for call to function srand
   \   00037A                ; Setup parameters for call to function osal_getClock
   \   00037A   12....       LCALL   ?Subroutine38 & 0xFFFF
   1094                    Exchange_index = random(5)+1;//挑选随机交换码字
   \                     ??CrossCallReturnLabel_105:
   \   00037D   12....       LCALL   ?S_DIV_MOD
   \   000380   EA           MOV     A,R2
   \   000381   04           INC     A
   \   000382   90....       MOV     DPTR,#Exchange_index
   \   000385   F0           MOVX    @DPTR,A
   1095                    Self_data = DATA_SLOT[Exchange_index].data; //即将交换的码字
   \   000386   F5..         MOV     ?V0 + 0,A
   \   000388   75..00       MOV     ?V0 + 1,#0x0
   \   00038B   7402         MOV     A,#0x2
   \   00038D   78..         MOV     R0,#?V0 + 0
   \   00038F   12....       LCALL   ?S_SHL
   \   000392   12....       LCALL   ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_42:
   \   000395   F5..         MOV     ?V0 + 0,A
   1096                    Self_info = DATA_SLOT[Exchange_index].Degree_ID; //码字信息
   \   000397   A3           INC     DPTR
   \   000398   A3           INC     DPTR
   \   000399   E0           MOVX    A,@DPTR
   \   00039A   F5..         MOV     ?V0 + 4,A
   \   00039C   A3           INC     DPTR
   \   00039D   E0           MOVX    A,@DPTR
   \   00039E   F5..         MOV     ?V0 + 5,A
   1097                    degree_low = (uint8)Self_info;
   \   0003A0   E5..         MOV     A,?V0 + 4
   \   0003A2   F5..         MOV     ?V0 + 1,A
   1098                    degree_high = (uint8)(Self_info>>8);  //此处不加括号会出错
   1099                    
   1100                    //发送
   1101                    uint8 _DATA[4] = {'$', Self_data, degree_high, degree_low};
   \   0003A4   7401         MOV     A,#0x1
   \   0003A6   12....       LCALL   ?XSTACK_DISP0_8
   \   0003A9   AC82         MOV     R4,DPL
   \   0003AB   AD83         MOV     R5,DPH
   \   0003AD   7583..       MOV     DPH,#(`?<Constant {36, 0, 0, 0}>` >> 8) & 0xff
   \   0003B0   7582..       MOV     DPL,#`?<Constant {36, 0, 0, 0}>` & 0xff
   \   0003B3   7404         MOV     A,#0x4
   \   0003B5   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   \   0003B8   7402         MOV     A,#0x2
   \   0003BA   12....       LCALL   ?XSTACK_DISP0_8
   \   0003BD   E5..         MOV     A,?V0 + 0
   \   0003BF   F0           MOVX    @DPTR,A
   \   0003C0   7408         MOV     A,#0x8
   \   0003C2   78..         MOV     R0,#?V0 + 4
   \   0003C4   12....       LCALL   ?SS_SHR
   \   0003C7   7403         MOV     A,#0x3
   \   0003C9   12....       LCALL   ?XSTACK_DISP0_8
   \   0003CC   E5..         MOV     A,?V0 + 4
   \   0003CE   F0           MOVX    @DPTR,A
   \   0003CF   7404         MOV     A,#0x4
   \   0003D1   12....       LCALL   ?XSTACK_DISP0_8
   \   0003D4   E5..         MOV     A,?V0 + 1
   \   0003D6   F0           MOVX    @DPTR,A
   1102                    Point_To_Point_DstAddr.addr.shortAddr = neighbor_addr_10;
   \   0003D7   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   0003DA   E5..         MOV     A,?V0 + 2
   \   0003DC   F0           MOVX    @DPTR,A
   \   0003DD   A3           INC     DPTR
   \   0003DE   E5..         MOV     A,?V0 + 3
   \   0003E0   F0           MOVX    @DPTR,A
   1103                    if(AF_DataRequest( &Point_To_Point_DstAddr, //点对点通信方式目标地址
   1104                                      &SampleApp_epDesc,
   1105                                      SAMPLEAPP_POINT_TO_POINT_CLUSTERID, //点对点簇ID
   1106                                      4,
   1107                                      _DATA,
   1108                                      &SampleApp_TransID,
   1109                                      AF_DISCV_ROUTE,
   1110                                      AF_DEFAULT_RADIUS )== afStatus_SUCCESS )
   \   0003E1                ; Setup parameters for call to function AF_DataRequest
   \   0003E1   75..1E       MOV     ?V0 + 2,#0x1e
   \   0003E4   78..         MOV     R0,#?V0 + 2
   \   0003E6   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0003E9   75....       MOV     ?V0 + 2,#SampleApp_TransID & 0xff
   \   0003EC   75....       MOV     ?V0 + 3,#(SampleApp_TransID >> 8) & 0xff
   \   0003EF   78..         MOV     R0,#?V0 + 2
   \   0003F1   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0003F4   7404         MOV     A,#0x4
   \   0003F6   12....       LCALL   ?XSTACK_DISP0_8
   \   0003F9   8582..       MOV     ?V0 + 2,DPL
   \   0003FC   8583..       MOV     ?V0 + 3,DPH
   \   0003FF   78..         MOV     R0,#?V0 + 2
   \   000401   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000404   75..04       MOV     ?V0 + 2,#0x4
   \   000407   75..00       MOV     ?V0 + 3,#0x0
   \   00040A   78..         MOV     R0,#?V0 + 2
   \   00040C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00040F   78..         MOV     R0,#?V0 + 2
   \   000411   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000414   12....       LCALL   ?Subroutine36 & 0xFFFF
   \                     ??CrossCallReturnLabel_110:
   \   000417   12....       LCALL   ?DEALLOC_XSTACK8
   \   00041A   E9           MOV     A,R1
   \   00041B   701F         JNZ     ??SampleApp_MessageMSGCB_24
   1111                    {
   1112                      HalUARTWrite(0,"send back $",11);
   \   00041D                ; Setup parameters for call to function HalUARTWrite
   \   00041D   7C0B         MOV     R4,#0xb
   \   00041F   7D00         MOV     R5,#0x0
   \   000421   7A..         MOV     R2,#`?<Constant "send back $">` & 0xff
   \   000423   7B..         MOV     R3,#(`?<Constant "send back $">` >> 8) & 0xff
   \   000425   12....       LCALL   ??Subroutine71_0 & 0xFFFF
   1113                      Show_Bit(Self_data,8);
   1114                      HalUARTWrite(0," ",1);
   1115                      //        Show_Bit(degree_high,8);
   1116                      //        HalUARTWrite(0," ",1);
   1117                      Show_Bit(degree_low,8);
   1118                      HalUARTWrite(0,"\n",1);
   1119                    }
   \                     ??CrossCallReturnLabel_146:
   \   000428   85....       MOV     ?V0 + 2,?V0 + 0
   \   00042B   AA..         MOV     R2,?V0 + 2
   \   00042D   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_143:
   \   000430   E5..         MOV     A,?V0 + 1
   \   000432   FA           MOV     R2,A
   \   000433   33           RLC     A
   \   000434   95E0         SUBB    A,0xE0 /* A   */
   \   000436   FB           MOV     R3,A
   \   000437   12....       LCALL   ?Subroutine56 & 0xFFFF
   \                     ??CrossCallReturnLabel_85:
   \   00043A   8008         SJMP    ??SampleApp_MessageMSGCB_25
   1120                    else
   1121                    {
   1122                      HalUARTWrite(0,"failed to send back\n",20);
   \                     ??SampleApp_MessageMSGCB_24:
   \   00043C                ; Setup parameters for call to function HalUARTWrite
   \   00043C   7C14         MOV     R4,#0x14
   \   00043E   7D00         MOV     R5,#0x0
   \   000440   7A..         MOV     R2,#`?<Constant "failed to send back\\n">` & 0xff
   \   000442   7B..         MOV     R3,#(`?<Constant "failed to send back\\n">` >> 8) & 0xff
   1123                    }
   \                     ??SampleApp_MessageMSGCB_25:
   \   000444   12....       LCALL   ?Subroutine21 & 0xFFFF
   1124                    
   1125                    /*将对方发来的数据包和自身随机挑选的数据包编码 <先判断是否需要编码> */
   1126                    Peer_data = pkt->cmd.Data[1]; //对方发来的数据
   \                     ??CrossCallReturnLabel_38:
   \   000447   85..82       MOV     DPL,?V0 + 0
   \   00044A   F583         MOV     DPH,A
   \   00044C   12....       LCALL   ?Subroutine27 & 0xFFFF
   1127                    Peer_info = pkt->cmd.Data[3];
   1128                    Peer_info |= pkt->cmd.Data[2]*256; //对方码字信息
   1129                    //查看发来的数据包的度
   1130                    uint8 Peer_degree = 0;
   1131                    uint8 Self_included = FALSE;
   1132                    for(short k=0;k<16;++k)
   1133                    {
   1134                      if(Power_of_2(k) & Peer_info)
   \                     ??CrossCallReturnLabel_49:
   \   00044F                ; Setup parameters for call to function Power_of_2
   \   00044F   12....       LCALL   ?Subroutine37 & 0xFFFF
   \                     ??CrossCallReturnLabel_63:
   \   000452   601E         JZ      ??SampleApp_MessageMSGCB_26
   1135                      {
   1136                        ++Peer_degree;
   \   000454   05..         INC     ?V0 + 4
   1137                        if(k == Device_ID)
   \   000456   90....       MOV     DPTR,#Device_ID
   \   000459   E0           MOVX    A,@DPTR
   \   00045A   65..         XRL     A,?V0 + 0
   \   00045C   7002         JNZ     ??SampleApp_MessageMSGCB_27
   \   00045E   E5..         MOV     A,?V0 + 1
   \                     ??SampleApp_MessageMSGCB_27:
   \   000460   7010         JNZ     ??SampleApp_MessageMSGCB_26
   1138                        {
   1139                          Self_included = TRUE; //码字包含自身的节点数据包
   \   000462   75..01       MOV     ?V0 + 2,#0x1
   1140                          HalUARTWrite(0,"包含自身信息",12);
   \   000465                ; Setup parameters for call to function HalUARTWrite
   \   000465   7C0C         MOV     R4,#0xc
   \   000467   7D00         MOV     R5,#0x0
   \   000469   7A..         MOV     R2,#`?<Constant "\\260\\374\\272\\254\\327\\324\\311\\355\\3` & 0xff
   \   00046B   7B..         MOV     R3,#(`?<Constant "\\260\\374\\272\\254\\327\\324\\311\\355\\3` >> 8) & 0xff
   \   00046D   7900         MOV     R1,#0x0
   \   00046F   12....       LCALL   ??HalUARTWrite?relay
   1141                        }
   1142                        
   1143                      }
   1144                    }
   \                     ??SampleApp_MessageMSGCB_26:
   \   000472   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_12:
   \   000475   40D8         JC      ??CrossCallReturnLabel_49
   1145                    if(Peer_degree>=MAX_Degree)
   \   000477   12....       LCALL   ?Subroutine28 & 0xFFFF
   \                     ??CrossCallReturnLabel_133:
   \   00047A   401D         JC      ??SampleApp_MessageMSGCB_28
   1146                    {
   1147                      if(Self_included)
   \   00047C   E5..         MOV     A,?V0 + 2
   \   00047E   A2E0         MOV     C,0xE0 /* A   */.0
   \   000480   500D         JNC     ??SampleApp_MessageMSGCB_29
   1148                        HalUARTWrite(0,"且",2);
   \   000482                ; Setup parameters for call to function HalUARTWrite
   \   000482   7C02         MOV     R4,#0x2
   \   000484   7D00         MOV     R5,#0x0
   \   000486   7A..         MOV     R2,#`?<Constant "\\307\\322">` & 0xff
   \   000488   7B..         MOV     R3,#(`?<Constant "\\307\\322">` >> 8) & 0xff
   \   00048A   7900         MOV     R1,#0x0
   \   00048C   12....       LCALL   ??HalUARTWrite?relay
   1149                      HalUARTWrite(0,"已达最大度,",11);
   \                     ??SampleApp_MessageMSGCB_29:
   \   00048F                ; Setup parameters for call to function HalUARTWrite
   \   00048F   7C0B         MOV     R4,#0xb
   \   000491   7D00         MOV     R5,#0x0
   \   000493   7A..         MOV     R2,#`?<Constant "\\322\\321\\264\\357\\327\\356\\264\\363\\2` & 0xff
   \   000495   7B..         MOV     R3,#(`?<Constant "\\322\\321\\264\\357\\327\\356\\264\\363\\2` >> 8) & 0xff
   \   000497   8008         SJMP    ??SampleApp_MessageMSGCB_30
   1150                    }
   1151                    else
   1152                    {
   1153                      HalUARTWrite(0,",",1);
   \                     ??SampleApp_MessageMSGCB_28:
   \   000499                ; Setup parameters for call to function HalUARTWrite
   \   000499   7C01         MOV     R4,#0x1
   \   00049B   7D00         MOV     R5,#0x0
   \   00049D   7A..         MOV     R2,#`?<Constant ",">` & 0xff
   \   00049F   7B..         MOV     R3,#(`?<Constant ",">` >> 8) & 0xff
   \                     ??SampleApp_MessageMSGCB_30:
   \   0004A1   7900         MOV     R1,#0x0
   \   0004A3   12....       LCALL   ??HalUARTWrite?relay
   1154                    }
   1155                    //判断是否符合编码条件,不包含自身的数据包,且度不大于最大允许的度
   1156                    if( !Self_included && (Peer_degree < MAX_Degree) )
   \   0004A6   E5..         MOV     A,?V0 + 2
   \   0004A8   A2E0         MOV     C,0xE0 /* A   */.0
   \   0004AA   400A         JC      ??SampleApp_MessageMSGCB_31
   \   0004AC   12....       LCALL   ??Subroutine69_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_131:
   \   0004AF   5005         JNC     ??SampleApp_MessageMSGCB_31
   1157                    {
   1158                      HalUARTWrite(0,"encoding...\n^^",14);
   \   0004B1                ; Setup parameters for call to function HalUARTWrite
   \   0004B1   12....       LCALL   ?Subroutine13 & 0xFFFF
   1159                      //          Show_Bit(Peer_data,8);          //对方数据
   1160                      //          HalUARTWrite(0,"\n^^",3);
   1161                      //          Show_Bit(DATA_SLOT[0].data,8);  //自身数据
   1162                      //          
   1163                      //          HalUARTWrite(0,"\n->",3);
   1164                      //          Peer_data ^= DATA_SLOT[0].data; //异或编码
   1165                      //          
   1166                      //          Show_Bit(Peer_data, 8);         //编码后数据
   1167                      
   1168                      HalUARTWrite(0,"\n||",3);
   1169                      Show_Bit(Peer_info,8);
   1170                      HalUARTWrite(0," ",1);
   1171                      Show_Num(Peer_info);          //对方码字信息
   1172                      
   1173                      HalUARTWrite(0,"\n||",3);
   1174                      Show_Bit(Source_info,8);  //**
   1175                      HalUARTWrite(0," ",1);
   1176                      Show_Num(Source_info);         //自身码字信息
   1177                      
   1178                      HalUARTWrite(0,"\n->",3);      
   1179                      Peer_info |= Source_info; //码字信息中添加自身的设备ID
   1180                      Show_Bit(Peer_info,8);   //**
   1181                      HalUARTWrite(0," ",1);
   1182                      Show_Num(Peer_info);          //融合后码字信息
   1183                      HalUARTWrite(0,"\n",1);
   1184                    }
   \                     ??CrossCallReturnLabel_26:
   \   0004B4   8008         SJMP    ??SampleApp_MessageMSGCB_32
   1185                    else
   1186                    {
   1187                      HalUARTWrite(0,"未编码.\n",8);
   \                     ??SampleApp_MessageMSGCB_31:
   \   0004B6                ; Setup parameters for call to function HalUARTWrite
   \   0004B6   7C08         MOV     R4,#0x8
   \   0004B8   7D00         MOV     R5,#0x0
   \   0004BA   7A..         MOV     R2,#`?<Constant "\\316\\264\\261\\340\\302\\353.\\n">` & 0xff
   \   0004BC   7B..         MOV     R3,#(`?<Constant "\\316\\264\\261\\340\\302\\353.\\n">` >> 8) & 0xff
   1188                      
   1189                    }
   \                     ??SampleApp_MessageMSGCB_32:
   \   0004BE   12....       LCALL   ?Subroutine14 & 0xFFFF
   1190                    
   1191                    HalUARTWrite(0,"peer_degree = ",14);
   1192                    Show_Num(Peer_degree);
   1193                    HalUARTWrite(0,"\n\n",2);
   1194                    DATA_SLOT[Exchange_index].data = Peer_data; //对应位置替换为对方的码字
   \                     ??CrossCallReturnLabel_28:
   \   0004C1   12....       LCALL   ?S_SHL
   \   0004C4   12....       LCALL   ?Subroutine22 & 0xFFFF
   1195                    DATA_SLOT[Exchange_index].Degree_ID = Peer_info; //记录码字信息
   1196                    
   1197                    Exchange_Lock = FALSE; //关闭码字槽的锁
   \                     ??CrossCallReturnLabel_40:
   \   0004C7   90....       MOV     DPTR,#Exchange_Lock
   \   0004CA   E4           CLR     A
   \                     ??SampleApp_MessageMSGCB_20:
   \   0004CB   F0           MOVX    @DPTR,A
   1198                  }
   1199                  
   1200                  
   1201                  
   1202                  HalLedBlink( HAL_LED_2, 2, 60, (flashTime / 6) ); //二号灯闪烁,两次,亮度60%,时间间隔0.125s
   \                     ??SampleApp_MessageMSGCB_23:
   \   0004CC                ; Setup parameters for call to function HalLedBlink
   \   0004CC   7CA6         MOV     R4,#-0x5a
   \   0004CE   7D00         MOV     R5,#0x0
   \   0004D0   7B3C         MOV     R3,#0x3c
   \   0004D2   7A02         MOV     R2,#0x2
   \   0004D4   7902         MOV     R1,#0x2
   \   0004D6   02....       LJMP    ??SampleApp_MessageMSGCB_8 & 0xFFFF
   1203                }
   1204              }
   1205              break;
   1206              
   1207              
   1208              
   1209              /******************************************************************************************************
   1210              收到组播消息 (路由更新)
   1211              *******************************************************************************************************/
   1212            case SAMPLEAPP_FLASH_CLUSTERID:
   1213              
   1214              for(int i=0;i<NEI_NUM;++i)
   \                     ??SampleApp_MessageMSGCB_1:
   \   0004D9   75..00       MOV     ?V0 + 6,#0x0
   \   0004DC   75..00       MOV     ?V0 + 7,#0x0
   \   0004DF   02....       LJMP    ??SampleApp_MessageMSGCB_33 & 0xFFFF
   1215              {
   1216                if(ACTIVE[i]-- <= 0)
   \                     ??SampleApp_MessageMSGCB_34:
   \   0004E2   E5..         MOV     A,?V0 + 6
   \   0004E4   C3           CLR     C
   \   0004E5   33           RLC     A
   \   0004E6   FE           MOV     R6,A
   \   0004E7   E5..         MOV     A,?V0 + 7
   \   0004E9   33           RLC     A
   \   0004EA   FF           MOV     R7,A
   \   0004EB   74..         MOV     A,#ACTIVE & 0xff
   \   0004ED   2E           ADD     A,R6
   \   0004EE   F8           MOV     R0,A
   \   0004EF   74..         MOV     A,#(ACTIVE >> 8) & 0xff
   \   0004F1   3F           ADDC    A,R7
   \   0004F2   12....       LCALL   ?Subroutine32 & 0xFFFF
   \                     ??CrossCallReturnLabel_122:
   \   0004F5   EA           MOV     A,R2
   \   0004F6   24FF         ADD     A,#-0x1
   \   0004F8   FC           MOV     R4,A
   \   0004F9   EB           MOV     A,R3
   \   0004FA   34FF         ADDC    A,#-0x1
   \   0004FC   FD           MOV     R5,A
   \   0004FD   8882         MOV     DPL,R0
   \   0004FF   8983         MOV     DPH,R1
   \   000501   EC           MOV     A,R4
   \   000502   F0           MOVX    @DPTR,A
   \   000503   A3           INC     DPTR
   \   000504   ED           MOV     A,R5
   \   000505   F0           MOVX    @DPTR,A
   \   000506   EA           MOV     A,R2
   \   000507   4B           ORL     A,R3
   \   000508   706C         JNZ     ??SampleApp_MessageMSGCB_35
   1217                {
   1218                  Reset_down_neighbor(Nei_Table[i]); //给掉线邻居发送设备重置信号
   \   00050A   74..         MOV     A,#Nei_Table & 0xff
   \   00050C   2E           ADD     A,R6
   \   00050D   F5..         MOV     ?V0 + 4,A
   \   00050F   74..         MOV     A,#(Nei_Table >> 8) & 0xff
   \   000511   3F           ADDC    A,R7
   \   000512   F5..         MOV     ?V0 + 5,A
   \   000514                ; Setup parameters for call to function Reset_down_neighbor
   \   000514   85..82       MOV     DPL,?V0 + 4
   \   000517   F583         MOV     DPH,A
   \   000519   12....       LCALL   ??Subroutine67_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_121:
   \   00051C   12....       LCALL   ??Reset_down_neighbor?relay
   1219                  Nei_Table[i] = Nei_Table[NEI_NUM-1];
   \   00051F   12....       LCALL   ?Subroutine52 & 0xFFFF
   \                     ??CrossCallReturnLabel_78:
   \   000522   E8           MOV     A,R0
   \   000523   C3           CLR     C
   \   000524   33           RLC     A
   \   000525   F8           MOV     R0,A
   \   000526   E9           MOV     A,R1
   \   000527   33           RLC     A
   \   000528   F9           MOV     R1,A
   \   000529   74..         MOV     A,#(Nei_Table + 254) & 0xff
   \   00052B   28           ADD     A,R0
   \   00052C   FA           MOV     R2,A
   \   00052D   74..         MOV     A,#((Nei_Table - 2) >> 8) & 0xff
   \   00052F   39           ADDC    A,R1
   \   000530   FB           MOV     R3,A
   \   000531   8A82         MOV     DPL,R2
   \   000533   8B83         MOV     DPH,R3
   \   000535   E0           MOVX    A,@DPTR
   \   000536   FC           MOV     R4,A
   \   000537   A3           INC     DPTR
   \   000538   E0           MOVX    A,@DPTR
   \   000539   FD           MOV     R5,A
   \   00053A   85..82       MOV     DPL,?V0 + 4
   \   00053D   85..83       MOV     DPH,?V0 + 5
   \   000540   EC           MOV     A,R4
   \   000541   F0           MOVX    @DPTR,A
   \   000542   A3           INC     DPTR
   \   000543   ED           MOV     A,R5
   \   000544   F0           MOVX    @DPTR,A
   1220                  Nei_Table[NEI_NUM-1] = (int16)65534;
   \   000545   8A82         MOV     DPL,R2
   \   000547   8B83         MOV     DPH,R3
   \   000549   74FE         MOV     A,#-0x2
   \   00054B   F0           MOVX    @DPTR,A
   \   00054C   A3           INC     DPTR
   \   00054D   04           INC     A
   \   00054E   F0           MOVX    @DPTR,A
   1221                  ACTIVE[i] = ACTIVE[NEI_NUM-1];
   \   00054F   74..         MOV     A,#(ACTIVE + 254) & 0xff
   \   000551   28           ADD     A,R0
   \   000552   F8           MOV     R0,A
   \   000553   74..         MOV     A,#((ACTIVE - 2) >> 8) & 0xff
   \   000555   39           ADDC    A,R1
   \   000556   12....       LCALL   ?Subroutine32 & 0xFFFF
   \                     ??CrossCallReturnLabel_123:
   \   000559   74..         MOV     A,#ACTIVE & 0xff
   \   00055B   2E           ADD     A,R6
   \   00055C   F582         MOV     DPL,A
   \   00055E   74..         MOV     A,#(ACTIVE >> 8) & 0xff
   \   000560   3F           ADDC    A,R7
   \   000561   F583         MOV     DPH,A
   \   000563   EA           MOV     A,R2
   \   000564   F0           MOVX    @DPTR,A
   \   000565   A3           INC     DPTR
   \   000566   EB           MOV     A,R3
   \   000567   F0           MOVX    @DPTR,A
   1222                  ACTIVE[NEI_NUM-1] = LIFE_TIME;
   \   000568   12....       LCALL   ?Subroutine33 & 0xFFFF
   \                     ??CrossCallReturnLabel_117:
   \   00056B   8882         MOV     DPL,R0
   \   00056D   8983         MOV     DPH,R1
   \   00056F   EA           MOV     A,R2
   \   000570   F0           MOVX    @DPTR,A
   \   000571   A3           INC     DPTR
   \   000572   EB           MOV     A,R3
   \   000573   F0           MOVX    @DPTR,A
   1223                  LOST_nei++;
   \   000574   05..         INC     ?V0 + 0
   1224                }
   1225              }
   \                     ??SampleApp_MessageMSGCB_35:
   \   000576   E5..         MOV     A,?V0 + 6
   \   000578   2401         ADD     A,#0x1
   \   00057A   F5..         MOV     ?V0 + 6,A
   \   00057C   E5..         MOV     A,?V0 + 7
   \   00057E   3400         ADDC    A,#0x0
   \   000580   F5..         MOV     ?V0 + 7,A
   \                     ??SampleApp_MessageMSGCB_33:
   \   000582   12....       LCALL   ?Subroutine52 & 0xFFFF
   \                     ??CrossCallReturnLabel_79:
   \   000585   C3           CLR     C
   \   000586   E5..         MOV     A,?V0 + 6
   \   000588   98           SUBB    A,R0
   \   000589   E5..         MOV     A,?V0 + 7
   \   00058B   99           SUBB    A,R1
   \   00058C   A2D2         MOV     C,0xD0 /* PSW */.2
   \   00058E   65D0         XRL     A,PSW
   \   000590   33           RLC     A
   \   000591   5003         JNC     $+5
   \   000593   02....       LJMP    ??SampleApp_MessageMSGCB_34 & 0xFFFF
   1226              
   1227              NEI_NUM -= LOST_nei;  //邻居个数减少
   \   000596   A8..         MOV     R0,?V0 + 0
   \   000598   E0           MOVX    A,@DPTR
   \   000599   C3           CLR     C
   \   00059A   98           SUBB    A,R0
   \   00059B   F0           MOVX    @DPTR,A
   1228              
   1229              
   1230              
   1231              for(int i=0;i<3;++i)
   \   00059C   7800         MOV     R0,#0x0
   \   00059E   7900         MOV     R1,#0x0
   1232              {
   1233                //邻居表中有该路由
   1234                if(Nei_Table[i]==neighbor_addr_10)
   \                     ??SampleApp_MessageMSGCB_36:
   \   0005A0   12....       LCALL   ?Subroutine41 & 0xFFFF
   \                     ??CrossCallReturnLabel_68:
   \   0005A3   65..         XRL     A,?V0 + 2
   \   0005A5   7004         JNZ     ??SampleApp_MessageMSGCB_37
   \   0005A7   A3           INC     DPTR
   \   0005A8   E0           MOVX    A,@DPTR
   \   0005A9   65..         XRL     A,?V0 + 3
   \                     ??SampleApp_MessageMSGCB_37:
   \   0005AB   7014         JNZ     ??SampleApp_MessageMSGCB_38
   1235                {
   1236                  ACTIVE[i] = LIFE_TIME; //收到该邻居信息,更新存活时间
   \   0005AD   12....       LCALL   ?Subroutine33 & 0xFFFF
   \                     ??CrossCallReturnLabel_118:
   \   0005B0   E8           MOV     A,R0
   \   0005B1   C3           CLR     C
   \   0005B2   33           RLC     A
   \   0005B3   F8           MOV     R0,A
   \   0005B4   E9           MOV     A,R1
   \   0005B5   33           RLC     A
   \   0005B6   F9           MOV     R1,A
   \   0005B7   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_24:
   \   0005BA   EA           MOV     A,R2
   \   0005BB   F0           MOVX    @DPTR,A
   \   0005BC   A3           INC     DPTR
   \   0005BD   EB           MOV     A,R3
   \   0005BE   F0           MOVX    @DPTR,A
   1237                  break;
   \   0005BF   804A         SJMP    ??SampleApp_MessageMSGCB_39
   1238                }
   1239                
   1240                //其他合法路由
   1241                else if((Nei_Table[i]!=(int16)65534) && (Nei_Table[i]!=neighbor_addr_10))
   \                     ??SampleApp_MessageMSGCB_38:
   \   0005C1   12....       LCALL   ?Subroutine41 & 0xFFFF
   \                     ??CrossCallReturnLabel_69:
   \   0005C4   64FE         XRL     A,#0xfe
   \   0005C6   7003         JNZ     ??SampleApp_MessageMSGCB_40
   \   0005C8   A3           INC     DPTR
   \   0005C9   E0           MOVX    A,@DPTR
   \   0005CA   F4           CPL     A
   \                     ??SampleApp_MessageMSGCB_40:
   \   0005CB   6014         JZ      ??SampleApp_MessageMSGCB_41
   \   0005CD   E8           MOV     A,R0
   \   0005CE   2401         ADD     A,#0x1
   \   0005D0   08           INC     R0
   \   0005D1   E9           MOV     A,R1
   \   0005D2   3400         ADDC    A,#0x0
   \   0005D4   F9           MOV     R1,A
   \   0005D5   C3           CLR     C
   \   0005D6   E8           MOV     A,R0
   \   0005D7   9403         SUBB    A,#0x3
   \   0005D9   E9           MOV     A,R1
   \   0005DA   12....       LCALL   ??Subroutine72_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_149:
   \   0005DD   502C         JNC     ??SampleApp_MessageMSGCB_39
   \   0005DF   80BF         SJMP    ??SampleApp_MessageMSGCB_36
   1242                  continue;
   1243                
   1244                //添加路由
   1245                else
   1246                {
   1247                  Nei_Table[i]=neighbor_addr_10;
   \                     ??SampleApp_MessageMSGCB_41:
   \   0005E1   E8           MOV     A,R0
   \   0005E2   C3           CLR     C
   \   0005E3   33           RLC     A
   \   0005E4   F8           MOV     R0,A
   \   0005E5   E9           MOV     A,R1
   \   0005E6   12....       LCALL   ?Subroutine45 & 0xFFFF
   \                     ??CrossCallReturnLabel_102:
   \   0005E9   E5..         MOV     A,?V0 + 2
   \   0005EB   F0           MOVX    @DPTR,A
   \   0005EC   A3           INC     DPTR
   \   0005ED   E5..         MOV     A,?V0 + 3
   \   0005EF   F0           MOVX    @DPTR,A
   1248                  NEI_NUM++;
   \   0005F0   90....       MOV     DPTR,#NEI_NUM
   \   0005F3   E0           MOVX    A,@DPTR
   \   0005F4   04           INC     A
   \   0005F5   F0           MOVX    @DPTR,A
   1249                  
   1250                  //输出邻居的活跃点数
   1251                  HalUARTWrite(0,"\n------------\n",14);
   \   0005F6                ; Setup parameters for call to function HalUARTWrite
   \   0005F6   12....       LCALL   ?Subroutine17 & 0xFFFF
   1252                  HalUARTWrite(0,"active: ",strlen("active: "));
   1253                  for (int j=0;j<NEI_NUM;++j)
   \                     ??CrossCallReturnLabel_33:
   \   0005F9   8003         SJMP    ??CrossCallReturnLabel_0
   1254                  {
   1255                    active = '0' + ACTIVE[j];
   \                     ??SampleApp_MessageMSGCB_42:
   \   0005FB   12....       LCALL   ?Subroutine2 & 0xFFFF
   1256                    HalUARTWrite(0,&active,1);
   1257                    HalUARTWrite(0," ",1);
   1258                  }
   \                     ??CrossCallReturnLabel_0:
   \   0005FE   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_50:
   \   000601   40F8         JC      ??SampleApp_MessageMSGCB_42
   1259                  //输出邻居个数
   1260                  HalUARTWrite(0,"\n有",3);
   \   000603                ; Setup parameters for call to function HalUARTWrite
   \   000603   12....       LCALL   ?Subroutine15 & 0xFFFF
   1261                  active = '0' + NEI_NUM;
   1262                  HalUARTWrite(0,&active,1);
   1263                  HalUARTWrite(0,"个邻居",6);
   1264                  
   1265                  HalUARTWrite(0,"\n------------\n",14);
   \                     ??CrossCallReturnLabel_29:
   \   000606   7900         MOV     R1,#0x0
   \   000608   12....       LCALL   ??HalUARTWrite?relay
   1266                  
   1267                  break;
   1268                }
   1269              }
   1270              
   1271              if(LOST_nei != 0)
   \                     ??SampleApp_MessageMSGCB_39:
   \   00060B   E5..         MOV     A,?V0 + 0
   \   00060D   6056         JZ      ??SampleApp_MessageMSGCB_0
   1272              {
   1273                //输出邻居的活跃点数
   1274                HalUARTWrite(0,"\n------------\n",14);
   \   00060F                ; Setup parameters for call to function HalUARTWrite
   \   00060F   12....       LCALL   ?Subroutine17 & 0xFFFF
   1275                HalUARTWrite(0,"active: ",strlen("active: "));
   1276                for (int j=0;j<NEI_NUM;++j)
   \                     ??CrossCallReturnLabel_34:
   \   000612   8003         SJMP    ??CrossCallReturnLabel_1
   1277                {
   1278                  active = '0' + ACTIVE[j];
   \                     ??SampleApp_MessageMSGCB_43:
   \   000614   12....       LCALL   ?Subroutine2 & 0xFFFF
   1279                  HalUARTWrite(0,&active,1);
   1280                  HalUARTWrite(0," ",1);
   1281                }
   \                     ??CrossCallReturnLabel_1:
   \   000617   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_51:
   \   00061A   40F8         JC      ??SampleApp_MessageMSGCB_43
   1282                //输出邻居个数
   1283                HalUARTWrite(0,"\n有",3);
   \   00061C                ; Setup parameters for call to function HalUARTWrite
   \   00061C   12....       LCALL   ?Subroutine15 & 0xFFFF
   1284                active = '0' + NEI_NUM;
   1285                HalUARTWrite(0,&active,1);
   1286                HalUARTWrite(0,"个邻居",6);
   1287                
   1288                HalUARTWrite(0,"\n------------\n",14);
   1289              }
   \                     ??CrossCallReturnLabel_30:
   \   00061F   803F         SJMP    ??SampleApp_MessageMSGCB_9
   1290              
   1291              
   1292              //HalLedBlink( HAL_LED_2, 2, 50, (flashTime / 5) ); //二号灯闪烁,两次,亮度50%,时间间隔0.2s
   1293              break;
   1294              
   1295              
   1296              
   1297              /*******************************************
   1298              收到 周期性 消息
   1299              ********************************************/
   1300            case SAMPLEAPP_PERIODIC_CLUSTERID:
   1301              
   1302              //NLME_UpdateLinkStatus(); //更新链路信息
   1303              //HalLedBlink( HAL_LED_2, 2, 60, (flashTime / 6) ); //三号灯闪烁,三次,亮度50%,时间间隔0.25s
   1304              break;
   1305              /*收到 对方串口透传 消息*/
   1306            case SAMPLEAPP_COM_CLUSTERID:
   1307              HalUARTWrite(0,"对方说: ",strlen("对方说: "));
   \                     ??SampleApp_MessageMSGCB_2:
   \   000621                ; Setup parameters for call to function HalUARTWrite
   \   000621   7C08         MOV     R4,#0x8
   \   000623   7D00         MOV     R5,#0x0
   \   000625   7A..         MOV     R2,#`?<Constant "\\266\\324\\267\\275\\313\\265: ">` & 0xff
   \   000627   7B..         MOV     R3,#(`?<Constant "\\266\\324\\267\\275\\313\\265: ">` >> 8) & 0xff
   \   000629   7900         MOV     R1,#0x0
   \   00062B   12....       LCALL   ??HalUARTWrite?relay
   1308              len=pkt->cmd.Data[0];
   \   00062E   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_18:
   \   000631   F5..         MOV     ?V0 + 1,A
   1309              for(i=0;i<len;i++)
   \   000633   801C         SJMP    ??SampleApp_MessageMSGCB_44
   1310                HalUARTWrite(0,&pkt->cmd.Data[i+1],1);//发给 PC 机
   \                     ??SampleApp_MessageMSGCB_45:
   \   000635                ; Setup parameters for call to function HalUARTWrite
   \   000635   A8..         MOV     R0,?V0 + 0
   \   000637   12....       LCALL   ?Subroutine57 & 0xFFFF
   \                     ??CrossCallReturnLabel_87:
   \   00063A   E0           MOVX    A,@DPTR
   \   00063B   28           ADD     A,R0
   \   00063C   FA           MOV     R2,A
   \   00063D   A3           INC     DPTR
   \   00063E   E0           MOVX    A,@DPTR
   \   00063F   3400         ADDC    A,#0x0
   \   000641   8A82         MOV     DPL,R2
   \   000643   F583         MOV     DPH,A
   \   000645   A3           INC     DPTR
   \   000646   AA82         MOV     R2,DPL
   \   000648   AB83         MOV     R3,DPH
   \   00064A   7900         MOV     R1,#0x0
   \   00064C   12....       LCALL   ??HalUARTWrite?relay
   \   00064F   05..         INC     ?V0 + 0
   \                     ??SampleApp_MessageMSGCB_44:
   \   000651   E5..         MOV     A,?V0 + 0
   \   000653   C3           CLR     C
   \   000654   95..         SUBB    A,?V0 + 1
   \   000656   7C01         MOV     R4,#0x1
   \   000658   7D00         MOV     R5,#0x0
   \   00065A   40D9         JC      ??SampleApp_MessageMSGCB_45
   1311              HalUARTWrite(0,"\n",1); // 回车换行
   \   00065C                ; Setup parameters for call to function HalUARTWrite
   \   00065C   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   00065E   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \                     ??SampleApp_MessageMSGCB_9:
   \   000660   7900         MOV     R1,#0x0
   \   000662   12....       LCALL   ??HalUARTWrite?relay
   1312              break;
   1313              
   1314            }
   1315          }
   \                     ??SampleApp_MessageMSGCB_0:
   \   000665   740D         MOV     A,#0xd
   \   000667   12....       LCALL   ?DEALLOC_XSTACK8
   \   00066A   7F0C         MOV     R7,#0xc
   \   00066C   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine41:
   \   000000   E8           MOV     A,R0
   \   000001   FA           MOV     R2,A
   \   000002   E9           MOV     A,R1
   \   000003   FB           MOV     R3,A
   \   000004   EA           MOV     A,R2
   \   000005   C3           CLR     C
   \   000006   33           RLC     A
   \   000007   FA           MOV     R2,A
   \   000008   EB           MOV     A,R3
   \   000009   33           RLC     A
   \   00000A   FB           MOV     R3,A
   \   00000B   74..         MOV     A,#Nei_Table & 0xff
   \   00000D   2A           ADD     A,R2
   \   00000E   F582         MOV     DPL,A
   \   000010   74..         MOV     A,#(Nei_Table >> 8) & 0xff
   \   000012   3B           ADDC    A,R3
   \   000013   F583         MOV     DPH,A
   \   000015   E0           MOVX    A,@DPTR
   \   000016   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine38:
   \   000000   12....       LCALL   ??osal_getClock?relay
   \   000003   12....       LCALL   ??srand?relay
   \   000006                ; Setup parameters for call to function rand
   \   000006                ; Setup parameters for call to function rand
   \   000006                REQUIRE ??Subroutine64_0
   \   000006                ; // Fall through to label ??Subroutine64_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine64_0:
   \   000000   12....       LCALL   ??rand?relay
   \   000003   EA           MOV     A,R2
   \   000004   F8           MOV     R0,A
   \   000005   EB           MOV     A,R3
   \   000006   F9           MOV     R1,A
   \   000007   7A05         MOV     R2,#0x5
   \   000009   7B00         MOV     R3,#0x0
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine37:
   \   000000   A9..         MOV     R1,?V0 + 0
   \   000002   12....       LCALL   ??Power_of_2?relay
   \   000005   EA           MOV     A,R2
   \   000006   5E           ANL     A,R6
   \   000007   F8           MOV     R0,A
   \   000008   EB           MOV     A,R3
   \   000009   5F           ANL     A,R7
   \   00000A   F9           MOV     R1,A
   \   00000B   E8           MOV     A,R0
   \   00000C   49           ORL     A,R1
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine36:
   \   000000   7920         MOV     R1,#0x20
   \   000002   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000004   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000006   7A..         MOV     R2,#Point_To_Point_DstAddr & 0xff
   \   000008   7B..         MOV     R3,#(Point_To_Point_DstAddr >> 8) & 0xff
   \   00000A                REQUIRE ??Subroutine65_0
   \   00000A                ; // Fall through to label ??Subroutine65_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine33:
   \   000000   90....       MOV     DPTR,#LIFE_TIME
   \   000003                REQUIRE ??Subroutine66_0
   \   000003                ; // Fall through to label ??Subroutine66_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine66_0:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   33           RLC     A
   \   000003   95E0         SUBB    A,0xE0 /* A   */
   \   000005   FB           MOV     R3,A
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine32:
   \   000000   F9           MOV     R1,A
   \   000001   8882         MOV     DPL,R0
   \   000003   8983         MOV     DPH,R1
   \   000005                REQUIRE ??Subroutine67_0
   \   000005                ; // Fall through to label ??Subroutine67_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine29:
   \   000000   12....       LCALL   ?Subroutine52 & 0xFFFF
   \                     ??CrossCallReturnLabel_80:
   \   000003   C3           CLR     C
   \   000004   EE           MOV     A,R6
   \   000005   98           SUBB    A,R0
   \   000006   EF           MOV     A,R7
   \   000007   99           SUBB    A,R1
   \   000008   A2D2         MOV     C,0xD0 /* PSW */.2
   \   00000A   65D0         XRL     A,PSW
   \   00000C   33           RLC     A
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine52:
   \   000000   90....       MOV     DPTR,#NEI_NUM
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F8           MOV     R0,A
   \   000005   33           RLC     A
   \   000006   95E0         SUBB    A,0xE0 /* A   */
   \   000008   F9           MOV     R1,A
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine28:
   \   000000   85....       MOV     ?V0 + 0,?V0 + 4
   \   000003                REQUIRE ??Subroutine69_0
   \   000003                ; // Fall through to label ??Subroutine69_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine69_0:
   \   000000   90....       MOV     DPTR,#MAX_Degree
   \   000003   12....       LCALL   ?Subroutine50 & 0xFFFF
   \                     ??CrossCallReturnLabel_138:
   \   000006   C3           CLR     C
   \   000007   E5..         MOV     A,?V0 + 0
   \   000009   98           SUBB    A,R0
   \   00000A   E4           CLR     A
   \   00000B   99           SUBB    A,R1
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine27:
   \   000000   12....       LCALL   ?Subroutine50 & 0xFFFF
   \                     ??CrossCallReturnLabel_137:
   \   000003   8882         MOV     DPL,R0
   \   000005   8983         MOV     DPH,R1
   \   000007   A3           INC     DPTR
   \   000008   E0           MOVX    A,@DPTR
   \   000009   F5..         MOV     ?V0 + 5,A
   \   00000B   8882         MOV     DPL,R0
   \   00000D   8983         MOV     DPH,R1
   \   00000F   A3           INC     DPTR
   \   000010   A3           INC     DPTR
   \   000011   A3           INC     DPTR
   \   000012   E0           MOVX    A,@DPTR
   \   000013   FA           MOV     R2,A
   \   000014   8882         MOV     DPL,R0
   \   000016   8983         MOV     DPH,R1
   \   000018   A3           INC     DPTR
   \   000019   A3           INC     DPTR
   \   00001A   E0           MOVX    A,@DPTR
   \   00001B   F8           MOV     R0,A
   \   00001C   E4           CLR     A
   \   00001D   C8           XCH     A,R0
   \   00001E   F9           MOV     R1,A
   \   00001F   EA           MOV     A,R2
   \   000020   FE           MOV     R6,A
   \   000021   E9           MOV     A,R1
   \   000022   FF           MOV     R7,A
   \   000023   88..         MOV     ?V0 + 4,R0
   \   000025   88..         MOV     ?V0 + 2,R0
   \   000027   88..         MOV     ?V0 + 0,R0
   \   000029   88..         MOV     ?V0 + 1,R0
   \   00002B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine50:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F9           MOV     R1,A
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine25:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   A3           INC     DPTR
   \   000002                REQUIRE ??Subroutine70_0
   \   000002                ; // Fall through to label ??Subroutine70_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine22:
   \   000000   12....       LCALL   ?Subroutine55 & 0xFFFF
   \                     ??CrossCallReturnLabel_83:
   \   000003   E5..         MOV     A,?V0 + 5
   \   000005   12....       LCALL   ?Subroutine48 & 0xFFFF
   \                     ??CrossCallReturnLabel_97:
   \   000008   EE           MOV     A,R6
   \   000009   F0           MOVX    @DPTR,A
   \   00000A   A3           INC     DPTR
   \   00000B   EF           MOV     A,R7
   \   00000C   F0           MOVX    @DPTR,A
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine21:
   \   000000   7900         MOV     R1,#0x0
   \   000002   12....       LCALL   ??HalUARTWrite?relay
   \   000005   EE           MOV     A,R6
   \   000006   2422         ADD     A,#0x22
   \   000008   F5..         MOV     ?V0 + 0,A
   \   00000A   EF           MOV     A,R7
   \   00000B   3400         ADDC    A,#0x0
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine20:
   \   000000   12....       LCALL   ?Subroutine54 & 0xFFFF
   \                     ??CrossCallReturnLabel_125:
   \   000003                REQUIRE ??Subroutine71_0
   \   000003                ; // Fall through to label ??Subroutine71_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine17:
   \   000000   7C0E         MOV     R4,#0xe
   \   000002   7D00         MOV     R5,#0x0
   \   000004   7A..         MOV     R2,#`?<Constant "\\n------------\\n">` & 0xff
   \   000006   7B..         MOV     R3,#(`?<Constant "\\n------------\\n">` >> 8) & 0xff
   \   000008   7900         MOV     R1,#0x0
   \   00000A   12....       LCALL   ??HalUARTWrite?relay
   \   00000D                ; Setup parameters for call to function HalUARTWrite
   \   00000D                ; Setup parameters for call to function HalUARTWrite
   \   00000D   7C08         MOV     R4,#0x8
   \   00000F   7D00         MOV     R5,#0x0
   \   000011   7A..         MOV     R2,#`?<Constant "active: ">` & 0xff
   \   000013   7B..         MOV     R3,#(`?<Constant "active: ">` >> 8) & 0xff
   \   000015   7900         MOV     R1,#0x0
   \   000017   12....       LCALL   ??HalUARTWrite?relay
   \   00001A   7E00         MOV     R6,#0x0
   \   00001C   7F00         MOV     R7,#0x0
   \   00001E   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   12....       LCALL   ??Subroutine73_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_155:
   \   000003   85..82       MOV     DPL,?V0 + 0
   \   000006   85..83       MOV     DPH,?V0 + 1
   \   000009   E0           MOVX    A,@DPTR
   \   00000A   F8           MOV     R0,A
   \   00000B   12....       LCALL   ??Subroutine74_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_156:
   \   00000E   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine44:
   \   000000   7C03         MOV     R4,#0x3
   \   000002   7D00         MOV     R5,#0x0
   \   000004   AA..         MOV     R2,?V0 + 0
   \   000006   AB..         MOV     R3,?V0 + 1
   \   000008                REQUIRE ??Subroutine73_0
   \   000008                ; // Fall through to label ??Subroutine73_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   7C03         MOV     R4,#0x3
   \   000002   7D00         MOV     R5,#0x0
   \   000004   7A..         MOV     R2,#`?<Constant "\\n\\323\\320">` & 0xff
   \   000006   7B..         MOV     R3,#(`?<Constant "\\n\\323\\320">` >> 8) & 0xff
   \   000008   7900         MOV     R1,#0x0
   \   00000A   12....       LCALL   ??HalUARTWrite?relay
   \   00000D   90....       MOV     DPTR,#NEI_NUM
   \   000010   12....       LCALL   ?Subroutine47 & 0xFFFF
   \                     ??CrossCallReturnLabel_75:
   \   000013                ; Setup parameters for call to function HalUARTWrite
   \   000013                ; Setup parameters for call to function HalUARTWrite
   \   000013   7C06         MOV     R4,#0x6
   \   000015   7D00         MOV     R5,#0x0
   \   000017   7A..         MOV     R2,#`?<Constant "\\270\\366\\301\\332\\276\\323">` & 0xff
   \   000019   7B..         MOV     R3,#(`?<Constant "\\270\\366\\301\\332\\276\\323">` >> 8) & 0xff
   \   00001B   7900         MOV     R1,#0x0
   \   00001D   12....       LCALL   ??HalUARTWrite?relay
   \   000020                ; Setup parameters for call to function HalUARTWrite
   \   000020                ; Setup parameters for call to function HalUARTWrite
   \   000020   7C0E         MOV     R4,#0xe
   \   000022   7D00         MOV     R5,#0x0
   \   000024   7A..         MOV     R2,#`?<Constant "\\n------------\\n">` & 0xff
   \   000026   7B..         MOV     R3,#(`?<Constant "\\n------------\\n">` >> 8) & 0xff
   \   000028   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   7900         MOV     R1,#0x0
   \   000002   12....       LCALL   ??HalUARTWrite?relay
   \   000005                ; Setup parameters for call to function HalUARTWrite
   \   000005                ; Setup parameters for call to function HalUARTWrite
   \   000005   7C0E         MOV     R4,#0xe
   \   000007   7D00         MOV     R5,#0x0
   \   000009   7A..         MOV     R2,#`?<Constant "peer_degree = ">` & 0xff
   \   00000B   7B..         MOV     R3,#(`?<Constant "peer_degree = ">` >> 8) & 0xff
   \   00000D   7900         MOV     R1,#0x0
   \   00000F   12....       LCALL   ??HalUARTWrite?relay
   \   000012                ; Setup parameters for call to function Show_Num
   \   000012                ; Setup parameters for call to function Show_Num
   \   000012   85....       MOV     ?V0 + 0,?V0 + 4
   \   000015   AA..         MOV     R2,?V0 + 0
   \   000017   7B00         MOV     R3,#0x0
   \   000019   12....       LCALL   ??Show_Num?relay
   \   00001C                ; Setup parameters for call to function HalUARTWrite
   \   00001C                ; Setup parameters for call to function HalUARTWrite
   \   00001C   7C02         MOV     R4,#0x2
   \   00001E   7D00         MOV     R5,#0x0
   \   000020   7A..         MOV     R2,#`?<Constant "\\n\\n">` & 0xff
   \   000022   7B..         MOV     R3,#(`?<Constant "\\n\\n">` >> 8) & 0xff
   \   000024   7900         MOV     R1,#0x0
   \   000026   12....       LCALL   ??HalUARTWrite?relay
   \   000029   12....       LCALL   ?Subroutine51 & 0xFFFF
   \                     ??CrossCallReturnLabel_77:
   \   00002C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine51:
   \   000000   90....       MOV     DPTR,#Exchange_index
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F5..         MOV     ?V0 + 0,A
   \   000006   75..00       MOV     ?V0 + 1,#0x0
   \   000009   7402         MOV     A,#0x2
   \   00000B   78..         MOV     R0,#?V0 + 0
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   7C0E         MOV     R4,#0xe
   \   000002   7D00         MOV     R5,#0x0
   \   000004   7A..         MOV     R2,#`?<Constant "encoding...\\n^^">` & 0xff
   \   000006   7B..         MOV     R3,#(`?<Constant "encoding...\\n^^">` >> 8) & 0xff
   \   000008   7900         MOV     R1,#0x0
   \   00000A   12....       LCALL   ??HalUARTWrite?relay
   \   00000D   75....       MOV     ?V0 + 0,#`?<Constant "\\n||">` & 0xff
   \   000010   75....       MOV     ?V0 + 1,#(`?<Constant "\\n||">` >> 8) & 0xff
   \   000013                ; Setup parameters for call to function HalUARTWrite
   \   000013                ; Setup parameters for call to function HalUARTWrite
   \   000013   12....       LCALL   ?Subroutine44 & 0xFFFF
   \                     ??CrossCallReturnLabel_152:
   \   000016   EE           MOV     A,R6
   \   000017   FA           MOV     R2,A
   \   000018   EF           MOV     A,R7
   \   000019   FB           MOV     R3,A
   \   00001A   12....       LCALL   ??Show_Bit?relay
   \   00001D   75....       MOV     ?V0 + 2,#`?<Constant " ">` & 0xff
   \   000020   75....       MOV     ?V0 + 3,#(`?<Constant " ">` >> 8) & 0xff
   \   000023                ; Setup parameters for call to function HalUARTWrite
   \   000023                ; Setup parameters for call to function HalUARTWrite
   \   000023   12....       LCALL   ?Subroutine42 & 0xFFFF
   \                     ??CrossCallReturnLabel_70:
   \   000026                ; Setup parameters for call to function HalUARTWrite
   \   000026                ; Setup parameters for call to function HalUARTWrite
   \   000026   12....       LCALL   ?Subroutine44 & 0xFFFF
   \                     ??CrossCallReturnLabel_153:
   \   000029   AA..         MOV     R2,?V0 + 6
   \   00002B   AB..         MOV     R3,?V0 + 7
   \   00002D   12....       LCALL   ?Subroutine61 & 0xFFFF
   \                     ??CrossCallReturnLabel_129:
   \   000030   AA..         MOV     R2,?V0 + 2
   \   000032   AB..         MOV     R3,?V0 + 3
   \   000034   7900         MOV     R1,#0x0
   \   000036   12....       LCALL   ??HalUARTWrite?relay
   \   000039                ; Setup parameters for call to function Show_Num
   \   000039                ; Setup parameters for call to function Show_Num
   \   000039   AA..         MOV     R2,?V0 + 6
   \   00003B   AB..         MOV     R3,?V0 + 7
   \   00003D   12....       LCALL   ??Show_Num?relay
   \   000040                ; Setup parameters for call to function HalUARTWrite
   \   000040                ; Setup parameters for call to function HalUARTWrite
   \   000040   7C03         MOV     R4,#0x3
   \   000042   7D00         MOV     R5,#0x0
   \   000044   7A..         MOV     R2,#`?<Constant "\\n->">` & 0xff
   \   000046   7B..         MOV     R3,#(`?<Constant "\\n->">` >> 8) & 0xff
   \   000048   7900         MOV     R1,#0x0
   \   00004A   12....       LCALL   ??HalUARTWrite?relay
   \   00004D   E5..         MOV     A,?V0 + 6
   \   00004F   4E           ORL     A,R6
   \   000050   FE           MOV     R6,A
   \   000051   E5..         MOV     A,?V0 + 7
   \   000053   4F           ORL     A,R7
   \   000054   FF           MOV     R7,A
   \   000055                ; Setup parameters for call to function Show_Bit
   \   000055                ; Setup parameters for call to function Show_Bit
   \   000055   7908         MOV     R1,#0x8
   \   000057   EE           MOV     A,R6
   \   000058   FA           MOV     R2,A
   \   000059   EF           MOV     A,R7
   \   00005A   FB           MOV     R3,A
   \   00005B   12....       LCALL   ??Show_Bit?relay
   \   00005E                ; Setup parameters for call to function HalUARTWrite
   \   00005E                ; Setup parameters for call to function HalUARTWrite
   \   00005E   12....       LCALL   ?Subroutine42 & 0xFFFF
   \                     ??CrossCallReturnLabel_71:
   \   000061                ; Setup parameters for call to function HalUARTWrite
   \   000061                ; Setup parameters for call to function HalUARTWrite
   \   000061   7C01         MOV     R4,#0x1
   \   000063   7D00         MOV     R5,#0x0
   \   000065   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000067   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   000069   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine42:
   \   000000   7C01         MOV     R4,#0x1
   \   000002   7D00         MOV     R5,#0x0
   \   000004   AA..         MOV     R2,?V0 + 2
   \   000006   AB..         MOV     R3,?V0 + 3
   \   000008   7900         MOV     R1,#0x0
   \   00000A   12....       LCALL   ??HalUARTWrite?relay
   \   00000D                ; Setup parameters for call to function Show_Num
   \   00000D                ; Setup parameters for call to function Show_Num
   \   00000D                ; Setup parameters for call to function Show_Num
   \   00000D                ; Setup parameters for call to function Show_Num
   \   00000D   EE           MOV     A,R6
   \   00000E   FA           MOV     R2,A
   \   00000F   EF           MOV     A,R7
   \   000010   FB           MOV     R3,A
   \   000011   12....       LCALL   ??Show_Num?relay
   \   000014   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   12....       LCALL   ?Subroutine57 & 0xFFFF
   \                     ??CrossCallReturnLabel_88:
   \   000003   A3           INC     DPTR
   \   000004   E0           MOVX    A,@DPTR
   \   000005   F583         MOV     DPH,A
   \   000007   8882         MOV     DPL,R0
   \   000009   E0           MOVX    A,@DPTR
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine57:
   \   000000   12....       LCALL   ?Subroutine60 & 0xFFFF
   \                     ??CrossCallReturnLabel_95:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine60:
   \   000000   EE           MOV     A,R6
   \   000001   2422         ADD     A,#0x22
   \   000003   F582         MOV     DPL,A
   \   000005   EF           MOV     A,R7
   \   000006   3400         ADDC    A,#0x0
   \   000008   F583         MOV     DPH,A
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   12....       LCALL   ?Subroutine53 & 0xFFFF
   \                     ??CrossCallReturnLabel_82:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine53:
   \   000000   12....       LCALL   ?Subroutine60 & 0xFFFF
   \                     ??CrossCallReturnLabel_94:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F8           MOV     R0,A
   \   000005   A3           INC     DPTR
   \   000006   E0           MOVX    A,@DPTR
   \   000007   F583         MOV     DPH,A
   \   000009   8882         MOV     DPL,R0
   \   00000B   E0           MOVX    A,@DPTR
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   12....       LCALL   ?Subroutine53 & 0xFFFF
   \                     ??CrossCallReturnLabel_81:
   \   000003   642A         XRL     A,#0x2a
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   E5..         MOV     A,?V0 + 0
   \   000002   2401         ADD     A,#0x1
   \   000004   F5..         MOV     ?V0 + 0,A
   \   000006   E5..         MOV     A,?V0 + 1
   \   000008   3400         ADDC    A,#0x0
   \   00000A   F5..         MOV     ?V0 + 1,A
   \   00000C   C3           CLR     C
   \   00000D   E5..         MOV     A,?V0 + 0
   \   00000F   9410         SUBB    A,#0x10
   \   000011   E5..         MOV     A,?V0 + 1
   \   000013   9400         SUBB    A,#0x0
   \   000015   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000017   65D0         XRL     A,PSW
   \   000019   33           RLC     A
   \   00001A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   12....       LCALL   ?Subroutine49 & 0xFFFF
   \                     ??CrossCallReturnLabel_159:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   12....       LCALL   ?Subroutine49 & 0xFFFF
   \                     ??CrossCallReturnLabel_158:
   \   000003   A3           INC     DPTR
   \   000004   E0           MOVX    A,@DPTR
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine49:
   \   000000   12....       LCALL   ?Subroutine60 & 0xFFFF
   \                     ??CrossCallReturnLabel_93:
   \   000003                REQUIRE ??Subroutine74_0
   \   000003                ; // Fall through to label ??Subroutine74_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine74_0:
   \   000000   A3           INC     DPTR
   \   000001   E0           MOVX    A,@DPTR
   \   000002   F583         MOV     DPH,A
   \   000004   8882         MOV     DPL,R0
   \   000006   A3           INC     DPTR
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   12....       LCALL   ?Subroutine49 & 0xFFFF
   \                     ??CrossCallReturnLabel_157:
   \   000003   A3           INC     DPTR
   \   000004   A3           INC     DPTR
   \   000005   E0           MOVX    A,@DPTR
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   EE           MOV     A,R6
   \   000001   F8           MOV     R0,A
   \   000002   EF           MOV     A,R7
   \   000003   F9           MOV     R1,A
   \   000004   E8           MOV     A,R0
   \   000005   C3           CLR     C
   \   000006   33           RLC     A
   \   000007   F8           MOV     R0,A
   \   000008   E9           MOV     A,R1
   \   000009   33           RLC     A
   \   00000A   F9           MOV     R1,A
   \   00000B   12....       LCALL   ?Subroutine46 & 0xFFFF
   \                     ??CrossCallReturnLabel_72:
   \   00000E   12....       LCALL   ?Subroutine58 & 0xFFFF
   \                     ??CrossCallReturnLabel_90:
   \   000011   12....       LCALL   ?Subroutine43 & 0xFFFF
   \                     ??CrossCallReturnLabel_160:
   \   000014   7A..         MOV     R2,#`?<Constant " ">` & 0xff
   \   000016   7B..         MOV     R3,#(`?<Constant " ">` >> 8) & 0xff
   \   000018   7900         MOV     R1,#0x0
   \   00001A   12....       LCALL   ??HalUARTWrite?relay
   \   00001D   EE           MOV     A,R6
   \   00001E   2401         ADD     A,#0x1
   \   000020   0E           INC     R6
   \   000021   EF           MOV     A,R7
   \   000022   3400         ADDC    A,#0x0
   \   000024   FF           MOV     R7,A
   \   000025   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine43:
   \   000000   7900         MOV     R1,#0x0
   \   000002                REQUIRE ??Subroutine75_0
   \   000002                ; // Fall through to label ??Subroutine75_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine75_0:
   \   000000   12....       LCALL   ??HalUARTWrite?relay
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003   7C01         MOV     R4,#0x1
   \   000005   7D00         MOV     R5,#0x0
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine23:
   \   000000   12....       LCALL   ?Subroutine55 & 0xFFFF
   \                     ??CrossCallReturnLabel_84:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine55:
   \   000000   12....       LCALL   ?Subroutine59 & 0xFFFF
   \                     ??CrossCallReturnLabel_92:
   \   000003   8882         MOV     DPL,R0
   \   000005   8983         MOV     DPH,R1
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine18:
   \   000000   12....       LCALL   ??Subroutine75_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_162:
   \   000003   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000005   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   000007   7900         MOV     R1,#0x0
   \   000009   12....       LCALL   ??HalUARTWrite?relay
   \   00000C   22           RET
   1316          
   1317          
   1318          
   1319          //给掉线的邻居发送重置信号

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1320          void Reset_down_neighbor(int16 nei_addr)
   \                     Reset_down_neighbor:
   1321          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1322            short flashTime = 1000;
   1323            Point_To_Point_DstAddr.addr.shortAddr = nei_addr;
   \   00000A   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   00000D   EA           MOV     A,R2
   \   00000E   F0           MOVX    @DPTR,A
   \   00000F   A3           INC     DPTR
   \   000010   EB           MOV     A,R3
   \   000011   F0           MOVX    @DPTR,A
   1324            unsigned char DATA[] = "!";
   \   000012   85..82       MOV     DPL,?XSP + 0
   \   000015   85..83       MOV     DPH,?XSP + 1
   \   000018   AC82         MOV     R4,DPL
   \   00001A   AD83         MOV     R5,DPH
   \   00001C   7583..       MOV     DPH,#(`?<Constant "!">` >> 8) & 0xff
   \   00001F   7582..       MOV     DPL,#`?<Constant "!">` & 0xff
   \   000022   7402         MOV     A,#0x2
   \   000024   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1325            if ( AF_DataRequest( &Point_To_Point_DstAddr, //点对点通信方式目标地址
   1326                                  &SampleApp_epDesc,
   1327                                  SAMPLEAPP_POINT_TO_POINT_CLUSTERID, //点对点簇ID
   1328                                  1,
   1329                                  DATA,
   1330                                  &SampleApp_TransID,
   1331                                  AF_DISCV_ROUTE,
   1332                                  AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000027                ; Setup parameters for call to function AF_DataRequest
   \   000027   75..1E       MOV     ?V0 + 0,#0x1e
   \   00002A   78..         MOV     R0,#?V0 + 0
   \   00002C   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00002F   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000032   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000035   78..         MOV     R0,#?V0 + 0
   \   000037   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00003A   7403         MOV     A,#0x3
   \   00003C   12....       LCALL   ?XSTACK_DISP0_8
   \   00003F   8582..       MOV     ?V0 + 0,DPL
   \   000042   8583..       MOV     ?V0 + 1,DPH
   \   000045   78..         MOV     R0,#?V0 + 0
   \   000047   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00004A   75..01       MOV     ?V0 + 0,#0x1
   \   00004D   75..00       MOV     ?V0 + 1,#0x0
   \   000050   78..         MOV     R0,#?V0 + 0
   \   000052   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000055   75..04       MOV     ?V0 + 0,#0x4
   \   000058   78..         MOV     R0,#?V0 + 0
   \   00005A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005D   12....       LCALL   ?Subroutine36 & 0xFFFF
   \                     ??CrossCallReturnLabel_111:
   \   000060   12....       LCALL   ?DEALLOC_XSTACK8
   \   000063   E9           MOV     A,R1
   \   000064   700D         JNZ     ??Reset_down_neighbor_0
   1333              {
   1334                HalLedBlink( HAL_LED_3, 1, 60, (flashTime / 3) ); //led3闪
   \   000066                ; Setup parameters for call to function HalLedBlink
   \   000066   7C4D         MOV     R4,#0x4d
   \   000068   7D01         MOV     R5,#0x1
   \   00006A   7B3C         MOV     R3,#0x3c
   \   00006C   7A01         MOV     R2,#0x1
   \   00006E   7904         MOV     R1,#0x4
   \   000070   12....       LCALL   ??HalLedBlink?relay
   1335              }
   1336              else
   1337              {
   1338          
   1339              }
   1340          }
   \                     ??Reset_down_neighbor_0:
   \   000073   7402         MOV     A,#0x2
   \   000075                REQUIRE ?Subroutine0
   \   000075                ; // Fall through to label ?Subroutine0
   1341          
   1342          
   1343          /***********************************************************<><><><><><><>*****
   1344                             自定义 点对点 发送函数
   1345          ************************************************************<><><><><><><>****/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1346          void SampleApp_SendPointToPointMessage( void )
   \                     SampleApp_SendPointToPointMessage:
   1347          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 5
   \   000005   74FB         MOV     A,#-0x5
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1348            uint16 flashTime = 1000;
   1349            srand((int)osal_getClock()); //生成随机数种子
   \   00000A                ; Setup parameters for call to function srand
   \   00000A                ; Setup parameters for call to function osal_getClock
   \   00000A   12....       LCALL   ??osal_getClock?relay
   \   00000D   12....       LCALL   ??srand?relay
   1350            int8 nei_index = random(NEI_NUM);  //挑选随机邻居节点
   \   000010                ; Setup parameters for call to function rand
   \   000010   12....       LCALL   ??rand?relay
   \   000013   8A..         MOV     ?V0 + 0,R2
   \   000015   8B..         MOV     ?V0 + 1,R3
   \   000017   A8..         MOV     R0,?V0 + 0
   \   000019   A9..         MOV     R1,?V0 + 1
   \   00001B   90....       MOV     DPTR,#NEI_NUM
   \   00001E   12....       LCALL   ??Subroutine66_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_116:
   \   000021   12....       LCALL   ?S_DIV_MOD
   \   000024   EA           MOV     A,R2
   \   000025   FE           MOV     R6,A
   1351            Exchange_index = random(5)+1;//挑选随机交换码字
   \   000026                ; Setup parameters for call to function rand
   \   000026   12....       LCALL   ??Subroutine64_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_106:
   \   000029   12....       LCALL   ?S_DIV_MOD
   \   00002C   EA           MOV     A,R2
   \   00002D   2401         ADD     A,#0x1
   \   00002F   90....       MOV     DPTR,#Exchange_index
   \   000032   F0           MOVX    @DPTR,A
   1352          
   1353            Exchanging_Neighbor = Nei_Table[nei_index];  //即将交换码字的邻居
   \   000033   EE           MOV     A,R6
   \   000034   F8           MOV     R0,A
   \   000035   33           RLC     A
   \   000036   95E0         SUBB    A,0xE0 /* A   */
   \   000038   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_101:
   \   00003B   FA           MOV     R2,A
   \   00003C   A3           INC     DPTR
   \   00003D   E0           MOVX    A,@DPTR
   \   00003E   FB           MOV     R3,A
   \   00003F   90....       MOV     DPTR,#Exchanging_Neighbor
   \   000042   EA           MOV     A,R2
   \   000043   F0           MOVX    @DPTR,A
   \   000044   A3           INC     DPTR
   \   000045   EB           MOV     A,R3
   \   000046   F0           MOVX    @DPTR,A
   1354            Exchanging_Data = DATA_SLOT[Exchange_index].data; //即将交换的码字
   \   000047   12....       LCALL   ?Subroutine51 & 0xFFFF
   \                     ??CrossCallReturnLabel_76:
   \   00004A   12....       LCALL   ?S_SHL
   \   00004D   12....       LCALL   ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_43:
   \   000050   90....       MOV     DPTR,#Exchanging_Data
   \   000053   12....       LCALL   ??Subroutine62_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_98:
   \   000056   12....       LCALL   ?Subroutine50 & 0xFFFF
   \                     ??CrossCallReturnLabel_135:
   \   000059   E8           MOV     A,R0
   \   00005A   F5..         MOV     ?V0 + 0,A
   1355          
   1356            uint8 data = Exchanging_Data;  //赋值交换的随机数据
   1357            uint8 degree_high = DATA_SLOT[Exchange_index].Degree_ID >>8; //高位码字度信息
   1358            uint8 degree_low = (uint8)DATA_SLOT[Exchange_index].Degree_ID;  //低位码字度信息
   1359            uint8 _DATA[] = {'*', data, degree_high, degree_low};  //发送数据交换请求 用'*' 表示请求类型
   \   00005C   7401         MOV     A,#0x1
   \   00005E   12....       LCALL   ?XSTACK_DISP0_8
   \   000061   AC82         MOV     R4,DPL
   \   000063   AD83         MOV     R5,DPH
   \   000065   7583..       MOV     DPH,#(`?<Constant {42, 0, 0, 0}>` >> 8) & 0xff
   \   000068   7582..       MOV     DPL,#`?<Constant {42, 0, 0, 0}>` & 0xff
   \   00006B   7404         MOV     A,#0x4
   \   00006D   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   \   000070   90....       MOV     DPTR,#Exchanging_Data
   \   000073   E0           MOVX    A,@DPTR
   \   000074   C0E0         PUSH    A
   \   000076   7402         MOV     A,#0x2
   \   000078   12....       LCALL   ?XSTACK_DISP0_8
   \   00007B   D0E0         POP     A
   \   00007D   F0           MOVX    @DPTR,A
   \   00007E   7403         MOV     A,#0x3
   \   000080   12....       LCALL   ?XSTACK_DISP0_8
   \   000083   E9           MOV     A,R1
   \   000084   F0           MOVX    @DPTR,A
   \   000085   7404         MOV     A,#0x4
   \   000087   12....       LCALL   ?XSTACK_DISP0_8
   \   00008A   E8           MOV     A,R0
   \   00008B   F0           MOVX    @DPTR,A
   1360            /*给选出的邻居发送数据*/
   1361            if((Nei_Table[nei_index] != (int16)65534) && (0<=nei_index) && (nei_index<NEI_NUM))
   \   00008C   74FE         MOV     A,#-0x2
   \   00008E   6A           XRL     A,R2
   \   00008F   7003         JNZ     ??SampleApp_SendPointToPointMessage_0
   \   000091   74FF         MOV     A,#-0x1
   \   000093   6B           XRL     A,R3
   \                     ??SampleApp_SendPointToPointMessage_0:
   \   000094   7003         JNZ     $+5
   \   000096   02....       LJMP    ??CrossCallReturnLabel_36 & 0xFFFF
   \   000099   EE           MOV     A,R6
   \   00009A   C3           CLR     C
   \   00009B   9400         SUBB    A,#0x0
   \   00009D   65D0         XRL     A,PSW
   \   00009F   33           RLC     A
   \   0000A0   5003         JNC     $+5
   \   0000A2   02....       LJMP    ??CrossCallReturnLabel_36 & 0xFFFF
   \   0000A5   90....       MOV     DPTR,#NEI_NUM
   \   0000A8   E0           MOVX    A,@DPTR
   \   0000A9   F8           MOV     R0,A
   \   0000AA   EE           MOV     A,R6
   \   0000AB   C3           CLR     C
   \   0000AC   98           SUBB    A,R0
   \   0000AD   A2D2         MOV     C,0xD0 /* PSW */.2
   \   0000AF   65D0         XRL     A,PSW
   \   0000B1   33           RLC     A
   \   0000B2   4003         JC      $+5
   \   0000B4   02....       LJMP    ??CrossCallReturnLabel_36 & 0xFFFF
   1362            {
   1363              Point_To_Point_DstAddr.addr.shortAddr = Exchanging_Neighbor;
   \   0000B7   90....       MOV     DPTR,#Exchanging_Neighbor
   \   0000BA   12....       LCALL   ?Subroutine50 & 0xFFFF
   \                     ??CrossCallReturnLabel_136:
   \   0000BD   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   0000C0   E8           MOV     A,R0
   \   0000C1   F0           MOVX    @DPTR,A
   \   0000C2   A3           INC     DPTR
   \   0000C3   E9           MOV     A,R1
   \   0000C4   F0           MOVX    @DPTR,A
   1364              if ( AF_DataRequest( &Point_To_Point_DstAddr, //点对点通信方式目标地址
   1365                                  &SampleApp_epDesc,
   1366                                  SAMPLEAPP_POINT_TO_POINT_CLUSTERID, //点对点簇ID
   1367                                  4,
   1368                                  _DATA,
   1369                                  &SampleApp_TransID,
   1370                                  AF_DISCV_ROUTE,
   1371                                  AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   0000C5                ; Setup parameters for call to function AF_DataRequest
   \   0000C5   75..1E       MOV     ?V0 + 1,#0x1e
   \   0000C8   78..         MOV     R0,#?V0 + 1
   \   0000CA   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000CD   75....       MOV     ?V0 + 2,#SampleApp_TransID & 0xff
   \   0000D0   75....       MOV     ?V0 + 3,#(SampleApp_TransID >> 8) & 0xff
   \   0000D3   78..         MOV     R0,#?V0 + 2
   \   0000D5   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000D8   7404         MOV     A,#0x4
   \   0000DA   12....       LCALL   ?XSTACK_DISP0_8
   \   0000DD   8582..       MOV     ?V0 + 2,DPL
   \   0000E0   8583..       MOV     ?V0 + 3,DPH
   \   0000E3   78..         MOV     R0,#?V0 + 2
   \   0000E5   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E8   75..04       MOV     ?V0 + 2,#0x4
   \   0000EB   75..00       MOV     ?V0 + 3,#0x0
   \   0000EE   78..         MOV     R0,#?V0 + 2
   \   0000F0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000F3   78..         MOV     R0,#?V0 + 2
   \   0000F5   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000F8   12....       LCALL   ?Subroutine36 & 0xFFFF
   \                     ??CrossCallReturnLabel_112:
   \   0000FB   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000FE   E9           MOV     A,R1
   \   0000FF   7015         JNZ     ??SampleApp_SendPointToPointMessage_1
   1372              {
   1373                HalLedBlink( HAL_LED_1, 1, 60, (flashTime / 3) ); //led1闪
   \   000101                ; Setup parameters for call to function HalLedBlink
   \   000101   7C4D         MOV     R4,#0x4d
   \   000103   7D01         MOV     R5,#0x1
   \   000105   7B3C         MOV     R3,#0x3c
   \   000107   7A01         MOV     R2,#0x1
   \   000109   7901         MOV     R1,#0x1
   \   00010B   12....       LCALL   ??HalLedBlink?relay
   1374                Waiting_Request = TRUE; //请求交换数据包标志位
   \   00010E   90....       MOV     DPTR,#Waiting_Request
   \   000111   7401         MOV     A,#0x1
   \   000113   F0           MOVX    @DPTR,A
   \   000114   800D         SJMP    ??SampleApp_SendPointToPointMessage_2
   1375              }
   1376              else
   1377              {
   1378                HalUARTWrite(0,"交换数据包请求发送失败.",strlen("交换数据包请求发送失败."));
   \                     ??SampleApp_SendPointToPointMessage_1:
   \   000116                ; Setup parameters for call to function HalUARTWrite
   \   000116   7C17         MOV     R4,#0x17
   \   000118   7D00         MOV     R5,#0x0
   \   00011A   7A..         MOV     R2,#`?<Constant "\\275\\273\\273\\273\\312\\375\\276\\335\\2` & 0xff
   \   00011C   7B..         MOV     R3,#(`?<Constant "\\275\\273\\273\\273\\312\\375\\276\\335\\2` >> 8) & 0xff
   \   00011E   7900         MOV     R1,#0x0
   \   000120   12....       LCALL   ??HalUARTWrite?relay
   1379              }
   1380              
   1381              
   1382              uchar INDEX = nei_index + '0';
   \                     ??SampleApp_SendPointToPointMessage_2:
   \   000123   7430         MOV     A,#0x30
   \   000125   2E           ADD     A,R6
   \   000126   85..82       MOV     DPL,?XSP + 0
   \   000129   85..83       MOV     DPH,?XSP + 1
   \   00012C   F0           MOVX    @DPTR,A
   1383              HalUARTWrite(0,"send      *", 11);
   \   00012D                ; Setup parameters for call to function HalUARTWrite
   \   00012D   7C0B         MOV     R4,#0xb
   \   00012F   7D00         MOV     R5,#0x0
   \   000131   7A..         MOV     R2,#`?<Constant "send      *">` & 0xff
   \   000133   7B..         MOV     R3,#(`?<Constant "send      *">` >> 8) & 0xff
   \   000135   12....       LCALL   ??Subroutine71_0 & 0xFFFF
   1384              
   1385              Show_Bit(Exchanging_Data, 8);
   \                     ??CrossCallReturnLabel_147:
   \   000138   90....       MOV     DPTR,#Exchanging_Data
   \   00013B   E0           MOVX    A,@DPTR
   \   00013C   FA           MOV     R2,A
   \   00013D   12....       LCALL   ?Subroutine20 & 0xFFFF
   1386              HalUARTWrite(0," ",1);
   1387          //    Show_Bit(degree_high,8);
   1388          //    HalUARTWrite(0," ",1);
   1389              Show_Bit(degree_low,8);
   \                     ??CrossCallReturnLabel_144:
   \   000140   AA..         MOV     R2,?V0 + 0
   \   000142   7B00         MOV     R3,#0x0
   \   000144   12....       LCALL   ??Show_Bit?relay
   1390              
   1391              HalUARTWrite(0," to addr ", 9);
   \   000147                ; Setup parameters for call to function HalUARTWrite
   \   000147   7C09         MOV     R4,#0x9
   \   000149   7D00         MOV     R5,#0x0
   \   00014B   7A..         MOV     R2,#`?<Constant " to addr ">` & 0xff
   \   00014D   7B..         MOV     R3,#(`?<Constant " to addr ">` >> 8) & 0xff
   \   00014F   12....       LCALL   ?Subroutine43 & 0xFFFF
   1392              HalUARTWrite(0,&INDEX,1);
   1393              HalUARTWrite(0,"\n",1);
   1394            }
   \                     ??CrossCallReturnLabel_161:
   \   000152   85..82       MOV     DPL,?XSP + 0
   \   000155   85..83       MOV     DPH,?XSP + 1
   \   000158   AA82         MOV     R2,DPL
   \   00015A   AB83         MOV     R3,DPH
   \   00015C   7900         MOV     R1,#0x0
   \   00015E   12....       LCALL   ?Subroutine18 & 0xFFFF
   1395          
   1396          }
   \                     ??CrossCallReturnLabel_36:
   \   000161   7405         MOV     A,#0x5
   \   000163   12....       LCALL   ?DEALLOC_XSTACK8
   \   000166   02....       LJMP    ?Subroutine1 & 0xFFFF

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for SOURCE_DATA>`:
   \   000000   08           DB 8

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for Device_ID>`:
   \   000000   03           DB 3

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for LIFE_TIME>`:
   \   000000   05           DB 5

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for MAX_Degree>`:
   \   000000   0100         DW 1

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Show_Bit?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Show_Bit

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Show_Num?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Show_Num

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Power_of_2?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Power_of_2

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_ProcessEvent?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_ProcessEvent

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendGroupMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendGroupMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendPeriodicMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendPeriodicMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendFlashMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendFlashMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_HandleKeys?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_HandleKeys

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SerialCMD?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SerialCMD

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_MessageMSGCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_MessageMSGCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Reset_down_neighbor?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Reset_down_neighbor

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendPointToPointMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendPointToPointMessage

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {48, 49}>`:
   \   000000   30           DB 48
   \   000001   31           DB 49

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "0">`:
   \   000000   3000         DB "0"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "System is started.\\n\\n">`:
   \   000000   53797374     DB "System is started.\012\012"
   \            656D2069
   \            73207374
   \            61727465
   \            642E0A0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Group 1">`:
   \   000000   47726F75     DB "Group 1"
   \            70203100

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "SampleApp">`:
   \   000000   53616D70     DB "SampleApp"
   \            6C654170
   \            7000    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\nsource_data: ">`:
   \   000000   0A736F75     DB "\012source_data: "
   \            7263655F
   \            64617461
   \            3A2000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant " ">`:
   \   000000   2000         DB " "

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n">`:
   \   000000   0A00         DB "\012"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant ":">`:
   \   000000   3A00         DB ":"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant " info:">`:
   \   000000   20696E66     DB " info:"
   \            6F3A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "nei_num:">`:
   \   000000   6E65695F     DB "nei_num:"
   \            6E756D3A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant ">> ">`:
   \   000000   3E3E2000     DB ">> "

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant " >">`:
   \   000000   203E00       DB " >"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "####">`:
   \   000000   23232323     DB 23H, 23H, 23H, 23H

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\326\\330\\326\\303\\326\\320...">`:
   \   000000   D6D8D6C3     DB "\326\330\326\303\326\320..."
   \            D6D02E2E
   \            2E00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {37, 37, 37, 37}>`:
   \   000000   25           DB 37
   \   000001   25           DB 37
   \   000002   25           DB 37
   \   000003   25           DB 37

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\317\\362Sink\\275\\332\\265\\343\\267\\2`:
   \   000000   CFF25369     DB "\317\362Sink\275\332\265\343\267\242\313\315\302\353\327\326\312\247\260\334\012"
   \            6E6BBDDA
   \            B5E3B7A2
   \            CBCDC2EB
   \            D7D6CAA7
   \            B0DC0A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {43, 0, 0, 0}>`:
   \   000000   2B           DB 43
   \   000001   00           DB 0
   \   000002   00           DB 0
   \   000003   00           DB 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "received  ">`:
   \   000000   72656365     DB "received  "
   \            69766564
   \            202000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "peer is busy">`:
   \   000000   70656572     DB "peer is busy"
   \            20697320
   \            62757379
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\260\\374\\272\\254\\327\\324\\311\\355\\3`:
   \   000000   B0FCBAAC     DB "\260\374\272\254\327\324\311\355\320\305\317\242"
   \            D7D4C9ED
   \            D0C5CFA2
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\307\\322">`:
   \   000000   C7D200       DB "\307\322"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\322\\321\\264\\357\\327\\356\\264\\363\\2`:
   \   000000   D2D1B4EF     DB "\322\321\264\357\327\356\264\363\266\310,"
   \            D7EEB4F3
   \            B6C82C00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant ",">`:
   \   000000   2C00         DB ","

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "encoding...\\n^^">`:
   \   000000   656E636F     DB "encoding...\012^^"
   \            64696E67
   \            2E2E2E0A
   \            5E5E00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n||">`:
   \   000000   0A7C7C00     DB "\012||"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n->">`:
   \   000000   0A2D3E00     DB "\012->"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\316\\264\\261\\340\\302\\353.\\n">`:
   \   000000   CEB4B1E0     DB "\316\264\261\340\302\353.\012"
   \            C2EB2E0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "peer_degree = ">`:
   \   000000   70656572     DB "peer_degree = "
   \            5F646567
   \            72656520
   \            3D2000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n\\n">`:
   \   000000   0A0A00       DB "\012\012"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "i am busy!\\n">`:
   \   000000   6920616D     DB "i am busy!\012"
   \            20627573
   \            79210A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {36, 0, 0, 0}>`:
   \   000000   24           DB 36
   \   000001   00           DB 0
   \   000002   00           DB 0
   \   000003   00           DB 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "send back $">`:
   \   000000   73656E64     DB "send back $"
   \            20626163
   \            6B202400

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "failed to send back\\n">`:
   \   000000   6661696C     DB "failed to send back\012"
   \            65642074
   \            6F207365
   \            6E642062
   \            61636B0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n------------\\n">`:
   \   000000   0A2D2D2D     DB "\012------------\012"
   \            2D2D2D2D
   \            2D2D2D2D
   \            2D0A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "active: ">`:
   \   000000   61637469     DB "active: "
   \            76653A20
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n\\323\\320">`:
   \   000000   0AD3D000     DB "\012\323\320"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\270\\366\\301\\332\\276\\323">`:
   \   000000   B8F6C1DA     DB "\270\366\301\332\276\323"
   \            BED300  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\266\\324\\267\\275\\313\\265: ">`:
   \   000000   B6D4B7BD     DB "\266\324\267\275\313\265: "
   \            CBB53A20
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "!">`:
   \   000000   2100         DB "!"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {42, 0, 0, 0}>`:
   \   000000   2A           DB 42
   \   000001   00           DB 0
   \   000002   00           DB 0
   \   000003   00           DB 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\275\\273\\273\\273\\312\\375\\276\\335\\2`:
   \   000000   BDBBBBBB     DB "\275\273\273\273\312\375\276\335\260\374\307\353\307\363\267\242\313\315\312\247\260\334."
   \            CAFDBEDD
   \            B0FCC7EB
   \            C7F3B7A2
   \            CBCDCAA7
   \            B0DC2E00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "send      *">`:
   \   000000   73656E64     DB "send      *"
   \            20202020
   \            20202A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant " to addr ">`:
   \   000000   20746F20     DB " to addr "
   \            61646472
   \            2000    
   1397          
   1398          
   1399          /*********************************************************************
   1400          *********************************************************************/
   1401          

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     Power_of_2                         0      0     33
     Reset_down_neighbor                2      0     54
       -> AF_DataRequest                0      0     42
       -> HalLedBlink                   0      0     24
     SampleApp_HandleKeys               0      0     22
       -> aps_FindGroup                 0      0     20
       -> aps_RemoveGroup               0      0     20
       -> aps_AddGroup                  0      0     20
       -> HalUARTWrite                  0      0     20
       -> Show_Bit                      0      0     20
       -> HalUARTWrite                  0      0     20
       -> Power_of_2                    0      0     20
       -> Show_Bit                      0      0     20
       -> HalUARTWrite                  0      0     20
       -> Show_Num                      0      0     20
       -> HalUARTWrite                  0      0     20
       -> Show_Bit                      0      0     20
       -> HalUARTWrite                  0      0     20
       -> Show_Bit                      0      0     20
       -> HalUARTWrite                  0      0     20
       -> HalUARTWrite                  0      0     20
       -> Show_Num                      0      0     20
       -> HalUARTWrite                  0      0     20
     SampleApp_Init                     0      0     14
       -> MT_UartInit                   0      0     22
       -> MT_UartRegisterTaskID         0      0     22
       -> HalUARTWrite                  0      0     22
       -> Power_of_2                    0      0     22
       -> afRegister                    0      0     22
       -> RegisterForKeys               0      0     22
       -> osal_memcpy                   0      0     28
       -> aps_AddGroup                  0      0     22
       -> HalLcdWriteString             0      0     22
     SampleApp_MessageMSGCB             2      0     54
       -> Power_of_2                    0      0     66
       -> HalUARTWrite                  0      0     66
       -> Onboard_soft_reset            0      0     66
       -> AF_DataRequest                0      0     84
       -> HalLedBlink                   0      0     66
       -> HalUARTWrite                  0      0     66
       -> osal_getClock                 0      0     66
       -> srand                         0      0     66
       -> rand                          0      0     66
       -> AF_DataRequest                0      0     84
       -> HalLedBlink                   0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> Show_Bit                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> Show_Bit                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> Power_of_2                    0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> Show_Bit                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> Show_Num                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> Show_Bit                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> Show_Num                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> Show_Bit                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> Show_Num                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> Show_Num                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> AF_DataRequest                0      0     84
       -> HalUARTWrite                  0      0     66
       -> osal_getClock                 0      0     66
       -> srand                         0      0     66
       -> rand                          0      0     66
       -> AF_DataRequest                0      0     84
       -> HalUARTWrite                  0      0     66
       -> Show_Bit                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> Show_Bit                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> Power_of_2                    0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> Show_Bit                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> Show_Num                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> Show_Bit                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> Show_Num                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> Show_Bit                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> Show_Num                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> Show_Num                      0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalLedBlink                   0      0     66
       -> Reset_down_neighbor           0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
       -> HalUARTWrite                  0      0     66
     SampleApp_ProcessEvent             0      0     12
       -> osal_msg_receive              0      0     24
       -> osal_start_timerEx            0      0     24
       -> osal_msg_deallocate           0      0     24
       -> osal_msg_receive              0      0     24
       -> SampleApp_SerialCMD           0      0     24
       -> SampleApp_HandleKeys          0      0     24
       -> SampleApp_MessageMSGCB        0      0     24
       -> SampleApp_SendGroupMessage
                                        0      0     24
       -> SampleApp_SendPointToPointMessage
                                        0      0     24
       -> osal_rand                     0      0     24
       -> osal_start_timerEx            0      0     24
     SampleApp_SendFlashMessage         1      0     22
       -> AF_DataRequest                0      0     44
     SampleApp_SendGroupMessage         0      0     31
       -> AF_DataRequest                0      0     38
     SampleApp_SendPeriodicMessage      0      0     19
       -> AF_DataRequest                0      0     38
       -> HalLedBlink                   0      0     20
     SampleApp_SendPointToPointMessage
                                        2      0     38
       -> osal_getClock                 0      0     34
       -> srand                         0      0     34
       -> rand                          0      0     34
       -> rand                          0      0     34
       -> AF_DataRequest                0      0     52
       -> HalLedBlink                   0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> Show_Bit                      0      0     34
       -> HalUARTWrite                  0      0     34
       -> Show_Bit                      0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
     SampleApp_SerialCMD                0      0     24
       -> HalUARTWrite                  0      0     24
       -> HalUARTWrite                  0      0     24
       -> HalUARTWrite                  0      0     24
       -> Show_Num                      0      0     24
       -> HalUARTWrite                  0      0     24
       -> Show_Bit                      0      0     24
       -> HalUARTWrite                  0      0     24
       -> Show_Bit                      0      0     24
       -> HalUARTWrite                  0      0     24
       -> Show_Num                      0      0     24
       -> HalUARTWrite                  0      0     24
     Show_Bit                           2      0     48
       -> HalUARTWrite                  0      0     30
     Show_Num                           1      0     48
       -> HalUARTWrite                  0      0     30
       -> HalUARTWrite                  0      0     30


   Segment part sizes:

     Function/Label                                 Bytes
     --------------                                 -----
     SOURCE_DATA                                       1
     Device_ID                                         1
     LIFE_TIME                                         1
     NEI_NUM                                           1
     Nei_Table                                         6
     ACTIVE                                            6
     _TURN                                             1
     Slot_Size                                         2
     DATA_SLOT                                        24
     MAX_Degree                                        2
     Exchanging_Neighbor                               2
     Exchanging_Data                                   1
     Exchange_index                                    1
     Waiting_Request                                   1
     Exchange_Lock                                     1
     Is_AgentNode                                      2
     SampleApp_ClusterList                             8
     SampleApp_SimpleDesc                             12
     SampleApp_epDesc                                  6
     SampleApp_TaskID                                  1
     SampleApp_NwkState                                1
     SampleApp_TransID                                 1
     SampleApp_Periodic_DstAddr                       12
     SampleApp_Flash_DstAddr                          12
     Point_To_Point_DstAddr                           12
     SampleApp_Group                                  18
     SampleAppPeriodicCounter                          1
     SampleAppFlashCounter                             1
     Show_Bit                                        103
     ?Subroutine11                                     9
     ??Subroutine72_0                                  8
     Show_Num                                        104
     ?Subroutine24                                    13
     ?Subroutine47                                     9
     ?Subroutine58                                    19
     ?Subroutine0                                      3
     ??Subroutine76_0                                  5
     Power_of_2                                       33
     SampleApp_Init                                  301
     ?Subroutine48                                     3
     ??Subroutine62_0                                  8
     ?Subroutine26                                    12
     ?Subroutine7                                      6
     ??Subroutine63_0                                  5
     ?Subroutine34                                     9
     ?Subroutine45                                    13
     ?Subroutine19                                     1
     ?Subroutine12                                     4
     ?Subroutine46                                    11
     ?Subroutine59                                    11
     SampleApp_ProcessEvent                          212
     ?Subroutine1                                      5
     SampleApp_SendGroupMessage                       70
     ??Subroutine65_0                                  6
     SampleApp_SendPeriodicMessage                    86
     SampleApp_SendFlashMessage                      113
     ??Subroutine70_0                                  7
     SampleApp_HandleKeys                            234
     ?Subroutine40                                    17
     ?Subroutine35                                    22
     ?Subroutine31                                     9
     ?Subroutine39                                     9
     ?Subroutine56                                     8
     ?Subroutine30                                     6
     ?Subroutine54                                     2
     ??Subroutine68_0                                  8
     ?Subroutine61                                     8
     ??Subroutine71_0                                  4
     ??Subroutine73_0                                  8
     SampleApp_SerialCMD                             202
     ??Subroutine67_0                                  6
     SampleApp_MessageMSGCB                         1647
     ?Subroutine41                                    23
     ?Subroutine38                                     6
     ??Subroutine64_0                                 12
     ?Subroutine37                                    14
     ?Subroutine36                                    10
     ?Subroutine33                                     3
     ??Subroutine66_0                                  7
     ?Subroutine32                                     5
     ?Subroutine29                                    14
     ?Subroutine52                                    10
     ?Subroutine28                                     3
     ??Subroutine69_0                                 13
     ?Subroutine27                                    44
     ?Subroutine50                                     6
     ?Subroutine25                                     2
     ?Subroutine22                                    14
     ?Subroutine21                                    14
     ?Subroutine20                                     3
     ?Subroutine17                                    31
     ?Subroutine16                                    15
     ?Subroutine44                                     8
     ?Subroutine15                                    41
     ?Subroutine14                                    45
     ?Subroutine51                                    14
     ?Subroutine13                                   106
     ?Subroutine42                                    21
     ?Subroutine10                                    11
     ?Subroutine57                                     4
     ?Subroutine60                                    11
     ?Subroutine9                                      4
     ?Subroutine53                                    13
     ?Subroutine8                                      6
     ?Subroutine6                                     27
     ?Subroutine5                                      5
     ?Subroutine4                                      6
     ?Subroutine49                                     3
     ??Subroutine74_0                                  8
     ?Subroutine3                                      7
     ?Subroutine2                                     38
     ?Subroutine43                                     2
     ??Subroutine75_0                                  8
     ?Subroutine23                                     5
     ?Subroutine55                                     8
     ?Subroutine18                                    13
     Reset_down_neighbor                             117
     SampleApp_SendPointToPointMessage
                                                     361
     ?<Initializer for SOURCE_DATA>                    1
     ?<Initializer for Device_ID>                      1
     ?<Initializer for LIFE_TIME>                      1
     ?<Initializer for MAX_Degree>                     2
     ??Show_Bit?relay                                  6
     ??Show_Num?relay                                  6
     ??Power_of_2?relay                                6
     ??SampleApp_Init?relay                            6
     ??SampleApp_ProcessEvent?relay                    6
     ??SampleApp_SendGroupMessage?relay                6
     ??SampleApp_SendPeriodicMessage?relay             6
     ??SampleApp_SendFlashMessage?relay                6
     ??SampleApp_HandleKeys?relay                      6
     ??SampleApp_SerialCMD?relay                       6
     ??SampleApp_MessageMSGCB?relay                    6
     ??Reset_down_neighbor?relay                       6
     ??SampleApp_SendPointToPointMessage?relay         6
     ?<Constant {48, 49}>                              2
     ?<Constant "0">                                   2
     ?<Constant "System is started.\n\n">             21
     ?<Constant "Group 1">                             8
     ?<Constant "SampleApp">                          10
     ?<Constant "\nsource_data: ">                    15
     ?<Constant " ">                                   2
     ?<Constant "\n">                                  2
     ?<Constant ":">                                   2
     ?<Constant " info:">                              7
     ?<Constant "nei_num:">                            9
     ?<Constant ">> ">                                 4
     ?<Constant " >">                                  3
     ?<Constant "####">                                4
     ?<Constant "\326\330\326\303\326\320...">        10
     ?<Constant {37, 37, 37, 37}>                      4
     ?<Constant "\317\362Sink\275\332\265\343\267\2   24
     ?<Constant {43, 0, 0, 0}>                         4
     ?<Constant "received  ">                         11
     ?<Constant "peer is busy">                       13
     ?<Constant "\260\374\272\254\327\324\311\355\3   13
     ?<Constant "\307\322">                            3
     ?<Constant "\322\321\264\357\327\356\264\363\2   12
     ?<Constant ",">                                   2
     ?<Constant "encoding...\n^^">                    15
     ?<Constant "\n||">                                4
     ?<Constant "\n->">                                4
     ?<Constant "\316\264\261\340\302\353.\n">         9
     ?<Constant "peer_degree = ">                     15
     ?<Constant "\n\n">                                3
     ?<Constant "i am busy!\n">                       12
     ?<Constant {36, 0, 0, 0}>                         4
     ?<Constant "send back $">                        12
     ?<Constant "failed to send back\n">              21
     ?<Constant "\n------------\n">                   15
     ?<Constant "active: ">                            9
     ?<Constant "\n\323\320">                          4
     ?<Constant "\270\366\301\332\276\323">            7
     ?<Constant "\266\324\267\275\313\265: ">          9
     ?<Constant "!">                                   2
     ?<Constant {42, 0, 0, 0}>                         4
     ?<Constant "\275\273\273\273\312\375\276\335\2   24
     ?<Constant "send      *">                        12
     ?<Constant " to addr ">                          10

 
 4 520 bytes in segment BANKED_CODE
    78 bytes in segment BANK_RELAYS
     5 bytes in segment XDATA_I
     5 bytes in segment XDATA_ID
   404 bytes in segment XDATA_ROM_C
   111 bytes in segment XDATA_Z
 
 4 603 bytes of CODE  memory
   404 bytes of CONST memory
   116 bytes of XDATA memory

Errors: none
Warnings: none
