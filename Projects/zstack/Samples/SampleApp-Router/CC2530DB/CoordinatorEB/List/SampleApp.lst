###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.1.10194/W32 for 8051         09/Sep/2019  10:02:03 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a\ #
#                          Projects\zstack\Samples\SampleApp\Source\SampleApp #
#                          .c                                                 #
#    Command line       =  -f "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5 #
#                          .1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\Tools\CC2530DB\f8wCoord.cfg" (-DCPU32MHZ     #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8       #
#                          -DMAC_CFG_RX_MAX=5 -DZDO_COORDINATOR -DRTR_NWK)    #
#                          -f "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5 #
#                          .1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          ..\..\Tools\CC2530DB\f8wConfig.cfg" (-DZIGBEEPRO   #
#                          -DSECURE=0 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR       #
#                          -DDEFAULT_CHANLIST=0x02000000                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFF0                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 "F:\ZStack-CC2530(2019.09.0 #
#                          7)\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sa #
#                          mpleApp\Source\SampleApp.c" -D ZTOOL_P1 -D         #
#                          xMT_TASK -D xMT_SYS_FUNC -D xMT_ZDO_FUNC -D        #
#                          xLCD_SUPPORTED=DEBUG -D WDT_IN_PM1 -lC             #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\Coordi #
#                          natorEB\List\" -lA "F:\ZStack-CC2530(2019.09.07)\Z #
#                          Stack-CC2530-2.5.1a\Projects\zstack\Samples\Sample #
#                          App\CC2530DB\CoordinatorEB\List\" --diag_suppress  #
#                          Pe001,Pa010 -o "F:\ZStack-CC2530(2019.09.07)\ZStac #
#                          k-CC2530-2.5.1a\Projects\zstack\Samples\SampleApp\ #
#                          CC2530DB\CoordinatorEB\Obj\" -e --no_code_motion   #
#                          --debug --core=plain --dptr=16,1                   #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 16    #
#                          -I "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5 #
#                          .1a\Projects\zstack\Samples\SampleApp\CC2530DB\"   #
#                          -I "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5 #
#                          .1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\ #
#                          Source\" -I "F:\ZStack-CC2530(2019.09.07)\ZStack-C #
#                          C2530-2.5.1a\Projects\zstack\Samples\SampleApp\CC2 #
#                          530DB\..\..\..\ZMain\TI2530DB\" -I                 #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\hal\include\" -I               #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\hal\target\CC2530EB\" -I       #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\mac\include\" -I               #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\mac\high_level\" -I            #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\mac\low_level\srf04\" -I       #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\mac\low_level\srf04\single_chi #
#                          p\" -I "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530 #
#                          -2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB #
#                          \..\..\..\..\..\Components\mt\" -I                 #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\osal\include\" -I              #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\services\saddr\" -I            #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\services\sdata\" -I            #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\stack\af\" -I                  #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\stack\nwk\" -I                 #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\stack\sapi\" -I                #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\stack\sec\" -I                 #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\stack\sys\" -I                 #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\stack\zdo\" -I                 #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\zmac\" -I                      #
#                          "F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\zmac\f8w\" -Ohz                #
#                          --require_prototypes                               #
#    List file          =  F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a\ #
#                          Projects\zstack\Samples\SampleApp\CC2530DB\Coordin #
#                          atorEB\List\SampleApp.lst                          #
#    Object file        =  F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a\ #
#                          Projects\zstack\Samples\SampleApp\CC2530DB\Coordin #
#                          atorEB\Obj\SampleApp.r51                           #
#                                                                             #
#                                                                             #
###############################################################################

F:\ZStack-CC2530(2019.09.07)\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\SampleApp\Source\SampleApp.c
      1          /**************************************************************************************************
      2            Filename:       SampleApp.c
      3            Revised:        $Date: 2009-03-18 15:56:27 -0700 (Wed, 18 Mar 2009) $
      4            Revision:       $Revision: 19453 $
      5          
      6            Description:    Sample Application (no Profile).
      7          
      8          
      9            Copyright 2007 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          /*********************************************************************
     41            This application isn't intended to do anything useful, it is
     42            intended to be a simple example of an application's structure.
     43          
     44            This application sends it's messages either as broadcast or
     45            broadcast filtered group messages.  The other (more normal)
     46            message addressing is unicast.  Most of the other sample
     47            applications are written to support the unicast message model.
     48          
     49            Key control:
     50              SW1:  Sends a flash command to all devices in Group 1.
     51              SW2:  Adds/Removes (toggles) this device in and out
     52                    of Group 1.  This will enable and disable the
     53                    reception of the flash command.
     54          *********************************************************************/
     55          
     56          /*********************************************************************
     57           * INCLUDES
     58           */
     59          #include "OSAL.h"
     60          #include "ZGlobals.h"
     61          #include "AF.h"
     62          #include "aps_groups.h"
     63          #include "ZDApp.h"
     64          #include "MT.h"  //透传中CMD_SERIAL_MSG的定义
     65          
     66          #include "SampleApp.h"
     67          #include "SampleAppHw.h"
     68          
     69          #include "OnBoard.h"
     70          #include "string.h"
     71          
     72          /* HAL */
     73          #include "hal_lcd.h"
     74          #include "hal_led.h"
     75          #include "hal_key.h"
     76          
     77          extern uint16 NLME_GetShortAddr( void ); //获取自身短地址
     78          extern void NLME_UpdateLinkStatus( void ); //更新连接状态
     79          
     80          
     81          
     82          /*********** 注意: 每个设备不一样,记得修改!  **********/

   \                                 In  segment XDATA_I, align 1, keep-with-next
     83          uint8 SOURCE_DATA = 1<<0;    //采集的数据 1
   \                     SOURCE_DATA:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for SOURCE_DATA>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     84          uint8 Device_ID  = 0;    //设备ID
   \                     Device_ID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
     85          
     86          //uint8 SOURCE_DATA = 1<<1;    //采集的数据 2l
     87          //uint8 Device_ID  = 1;    //设备ID
     88          
     89          //uint8 SOURCE_DATA = 1<<2;    //采集的数据 3
     90          //uint8 Device_ID  = 2;    //设备ID
     91          
     92          //uint8 SOURCE_DATA = 1<<3;      //采集的数据 4
     93          //uint8 Device_ID  = 3;      //设备ID
     94          
     95          
     96          /*********************************************************************
     97           * MACROS
     98           */
     99          #define random(x) (rand() % x)
    100          #define uchar unsigned char
    101          #define Node_Num uint8 3  //网络中节点的数量
    102          /*********************************************************************
    103           * CONSTANTS
    104           */
    105          //用户引入的头文件
    106          #include "MT_UART.h"
    107          #include <stdio.h>
    108          #include "nwk_util.h"
    109          #include <stdlib.h>
    110          #include "OSAL_Clock.h"
    111          #include <math.h>
    112          
    113          
    114          /*********************************************************************
    115           * TYPEDEFS
    116           */
    117          /*<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
    118           * GLOBAL VARIABLES 全局变量
    119           */

   \                                 In  segment XDATA_I, align 1, keep-with-next
    120          int8 LIFE_TIME=5;               //邻居活跃度初始值
   \                     LIFE_TIME:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for LIFE_TIME>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    121          int8 NEI_NUM = 0;               //邻居数量
   \                     NEI_NUM:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    122          int16 Nei_Table[3] = {0};       //邻居表
   \                     Nei_Table:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    123          unsigned short ACTIVE[3] = {0}; //邻居活跃度列表
   \                     ACTIVE:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    124          int8 _TURN = 0;                 //发送轮次控制
   \                     _TURN:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    125          
    126          
    127          /*#######################以下是Sink节点的配置############################*/
    128          
    129          /*一个码字的组成*/
    130          typedef struct Encoded_PKT  //编码过的码字
    131          {
    132              /*数据域*/
    133              short data; //码字数据
    134              /*编码信息,由哪几个节点的数据包组成*/
    135              uint16 Degree_ID;
    136          }PKT;
    137          
    138          

   \                                 In  segment XDATA_ROM_C, align 1
    139          const int Slot_Size = 6;        //码字槽大小
   \                     Slot_Size:
   \   000000   0600         DW 6
    140          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    141          PKT DATA_SLOT[5+1];             //码字结构体数组
   \                     DATA_SLOT:
   \   000000                DS 24
   \   000018                REQUIRE __INIT_XDATA_Z
    142          
    143          
    144          //uint8 DATA_SLOT[5+1] = {0};     //码字槽
    145          //uint8 DATA_Degree[5+1] = {0};   //码字度

   \                                 In  segment XDATA_I, align 1, keep-with-next
    146          unsigned short MAX_Degree = 4;  //初始化允许的最大度
   \                     MAX_Degree:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for MAX_Degree>`
   \   000002                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    147          uint8 Decoded_X[100] = {0};     //初始化已解码的码字数组
   \                     Decoded_X:
   \   000000                DS 100
   \   000064                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    148          uint8 Undecoded_Y[100] = {0};   //初始化未解码的复杂码字数组
   \                     Undecoded_Y:
   \   000000                DS 100
   \   000064                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    149          int16 Exchanging_Neighbor;      //待进行码字交换的邻居
   \                     Exchanging_Neighbor:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    150          uint8 Exchanging_Data;          //待交换的码字
   \                     Exchanging_Data:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    151          uint8 Exchange_index;           //待交换的码字的索引
   \                     Exchange_index:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    152          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    153          uint8 Waiting_Request = FALSE;   //是否在等待对方返回交换的数据包回应
   \                     Waiting_Request:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    154          uint8 Exchange_Lock = FALSE;     //码字槽操作锁
   \                     Exchange_Lock:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    155          
    156          /*<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
    157          * end
    158          */
    159          
    160          
    161          
    162          
    163          // This list should be filled with Application specific Cluster IDs.

   \                                 In  segment XDATA_ROM_C, align 1
    164          const cId_t SampleApp_ClusterList[SAMPLEAPP_MAX_CLUSTERS] =
   \                     SampleApp_ClusterList:
   \   000000   0100         DW 1
   \   000002   0200         DW 2
   \   000004   0000         DW 0
   \   000006   0000         DW 0
    165          {
    166            SAMPLEAPP_PERIODIC_CLUSTERID,
    167            SAMPLEAPP_FLASH_CLUSTERID
    168          };
    169          

   \                                 In  segment XDATA_ROM_C, align 1
    170          const SimpleDescriptionFormat_t SampleApp_SimpleDesc =
   \                     SampleApp_SimpleDesc:
   \   000000   14           DB 20
   \   000001   080F         DW 3848
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   04           DB 4
   \   000007   ....         DW SampleApp_ClusterList
   \   000009   04           DB 4
   \   00000A   ....         DW SampleApp_ClusterList
    171          {
    172            SAMPLEAPP_ENDPOINT,              //  int Endpoint;
    173            SAMPLEAPP_PROFID,                //  uint16 AppProfId[2];
    174            SAMPLEAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    175            SAMPLEAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
    176            SAMPLEAPP_FLAGS,                 //  int   AppFlags:4;
    177            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    178            (cId_t *)SampleApp_ClusterList,  //  uint8 *pAppInClusterList;
    179            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    180            (cId_t *)SampleApp_ClusterList   //  uint8 *pAppInClusterList;
    181          };
    182          
    183          // This is the Endpoint/Interface description.  It is defined here, but
    184          // filled-in in SampleApp_Init().  Another way to go would be to fill
    185          // in the structure here and make it a "const" (in code space).  The
    186          // way it's defined in this sample app it is define in RAM.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    187          endPointDesc_t SampleApp_epDesc;
   \                     SampleApp_epDesc:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z
    188          
    189          /*********************************************************************
    190           * EXTERNAL VARIABLES
    191           */
    192          
    193          /*********************************************************************
    194           * EXTERNAL FUNCTIONS
    195           */
    196          
    197          /*********************************************************************
    198           * LOCAL VARIABLES
    199           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    200          uint8 SampleApp_TaskID;   // Task ID for internal task/event processing
   \                     SampleApp_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    201                                    // This variable will be received when
    202                                    // SampleApp_Init() is called.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    203          devStates_t SampleApp_NwkState;
   \                     SampleApp_NwkState:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    204          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    205          uint8 SampleApp_TransID;  // This is the unique message ID (counter)
   \                     SampleApp_TransID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    206          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    207          afAddrType_t SampleApp_Periodic_DstAddr;
   \                     SampleApp_Periodic_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    208          afAddrType_t SampleApp_Flash_DstAddr; //组播
   \                     SampleApp_Flash_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    209          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    210          afAddrType_t Point_To_Point_DstAddr; //WeBee点对点通信定义
   \                     Point_To_Point_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    211          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    212          aps_Group_t SampleApp_Group; //分组内容
   \                     SampleApp_Group:
   \   000000                DS 18
   \   000012                REQUIRE __INIT_XDATA_Z
    213          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    214          uint8 SampleAppPeriodicCounter = 0;
   \                     SampleAppPeriodicCounter:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    215          uint8 SampleAppFlashCounter = 0;
   \                     SampleAppFlashCounter:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    216          
    217          /*********************************************************************
    218           * LOCAL FUNCTIONS     函数声明
    219           */
    220          void SampleApp_HandleKeys( uint8 shift, uint8 keys );
    221          void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pckt );
    222          void SampleApp_SendPeriodicMessage( void );
    223          void SampleApp_SendFlashMessage( uint16 flashTime );
    224          void SampleApp_SerialCMD(mtOSALSerialData_t *cmdMsg); // 串口通信
    225          void SampleApp_SendPointToPointMessage( void ); //点对点
    226          void SampleApp_SendGroupMessage( void );// 网蜂组播通讯发送函数定义
    227          void Reset_down_neighbor(int16 nei_addr); //重置邻居设备函数
    228          void Show_Bit(uint16 X, uint8 N); //串口打印一个8位比特二进制数字
    229          void Show_Num(uint16 X);  //串口打印8bit数字
    230          uint16 Power_of_2(uint8 X);
    231          /*********************************************************************
    232           * NETWORK LAYER CALLBACKS
    233           */
    234          
    235          /*********************************************************************
    236           * PUBLIC FUNCTIONS
    237           */
    238          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    239          void Show_Bit( uint16 X, uint8 N )
   \                     Show_Bit:
    240          {
   \   000000   74F3         MOV     A,#-0xd
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 13
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 0,R2
   \   00000C   8B..         MOV     ?V0 + 1,R3
    241            uchar Bit[2] = {'0','1'};
   \   00000E   85..82       MOV     DPL,?XSP + 0
   \   000011   85..83       MOV     DPH,?XSP + 1
   \   000014   AC82         MOV     R4,DPL
   \   000016   AD83         MOV     R5,DPH
   \   000018   7583..       MOV     DPH,#(`?<Constant {48, 49}>` >> 8) & 0xff
   \   00001B   7582..       MOV     DPL,#`?<Constant {48, 49}>` & 0xff
   \   00001E   7402         MOV     A,#0x2
   \   000020   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    242            uint8 index;
    243            for(short j=N-1;j>=0;--j)
   \   000023   E9           MOV     A,R1
   \   000024   24FF         ADD     A,#-0x1
   \   000026   FE           MOV     R6,A
   \   000027   E4           CLR     A
   \   000028   8029         SJMP    ??Show_Bit_0
    244            {
    245              index = (X>>j) & 1;
    246              HalUARTWrite(0,&Bit[index],1);
   \                     ??Show_Bit_1:
   \   00002A                ; Setup parameters for call to function HalUARTWrite
   \   00002A   7C01         MOV     R4,#0x1
   \   00002C   7D00         MOV     R5,#0x0
   \   00002E   85....       MOV     ?V0 + 2,?V0 + 0
   \   000031   85....       MOV     ?V0 + 3,?V0 + 1
   \   000034   EE           MOV     A,R6
   \   000035   78..         MOV     R0,#?V0 + 2
   \   000037   12....       LCALL   ?US_SHR
   \   00003A   E5..         MOV     A,?V0 + 2
   \   00003C   5401         ANL     A,#0x1
   \   00003E   F8           MOV     R0,A
   \   00003F   85..82       MOV     DPL,?XSP + 0
   \   000042   85..83       MOV     DPH,?XSP + 1
   \   000045   E582         MOV     A,DPL
   \   000047   28           ADD     A,R0
   \   000048   FA           MOV     R2,A
   \   000049   E583         MOV     A,DPH
   \   00004B   12....       LCALL   ?Subroutine8 & 0xFFFF
    247            }
   \                     ??CrossCallReturnLabel_12:
   \   00004E   EE           MOV     A,R6
   \   00004F   24FF         ADD     A,#-0x1
   \   000051   1E           DEC     R6
   \   000052   EF           MOV     A,R7
   \                     ??Show_Bit_0:
   \   000053   34FF         ADDC    A,#-0x1
   \   000055   FF           MOV     R7,A
   \   000056   C3           CLR     C
   \   000057   EF           MOV     A,R7
   \   000058   12....       LCALL   ??Subroutine65_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_123:
   \   00005B   50CD         JNC     ??Show_Bit_1
    248          //  HalUARTWrite(0,"\n",1);
    249          }
   \   00005D   7402         MOV     A,#0x2
   \   00005F   12....       LCALL   ?DEALLOC_XSTACK8
   \   000062   7F05         MOV     R7,#0x5
   \   000064   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   3400         ADDC    A,#0x0
   \   000002   FB           MOV     R3,A
   \   000003   7900         MOV     R1,#0x0
   \   000005   12....       LCALL   ??HalUARTWrite?relay
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine65_0:
   \   000000   9400         SUBB    A,#0x0
   \   000002   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000004   65D0         XRL     A,PSW
   \   000006   33           RLC     A
   \   000007   22           RET
    250          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    251          void Show_Num( uint16 X )
   \                     Show_Num:
    252          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 5
   \   000005   74FB         MOV     A,#-0x5
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FC           MOV     R4,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FD           MOV     R5,A
    253            if(X == 0)
   \   00000E   EC           MOV     A,R4
   \   00000F   4D           ORL     A,R5
   \   000010   7012         JNZ     ??Show_Num_0
    254            {
    255              HalUARTWrite(0,"0",1);
   \   000012                ; Setup parameters for call to function HalUARTWrite
   \   000012   7C01         MOV     R4,#0x1
   \   000014   7D00         MOV     R5,#0x0
   \   000016   7A..         MOV     R2,#`?<Constant "0">` & 0xff
   \   000018   7B..         MOV     R3,#(`?<Constant "0">` >> 8) & 0xff
   \   00001A   7900         MOV     R1,#0x0
   \   00001C   12....       LCALL   ??HalUARTWrite?relay
    256            }
    257            else
    258            {
    259              uint8 N = 0;
    260              uint8 Num[4];
    261              
    262              while(X)
    263              {
    264                Num[N++] = X % 10;
    265                X /=10;
    266                
    267              }
    268              while(N > 0)
    269              {
    270                uchar temp = '0' + Num[--N];
    271                HalUARTWrite(0,&temp,1);
    272              }
    273            }
    274            
    275            
    276          }
   \                     ??Show_Num_1:
   \   00001F   7405         MOV     A,#0x5
   \   000021   02....       LJMP    ?Subroutine0 & 0xFFFF
   \                     ??Show_Num_0:
   \   000024   7E00         MOV     R6,#0x0
   \                     ??Show_Num_2:
   \   000026   EC           MOV     A,R4
   \   000027   F8           MOV     R0,A
   \   000028   ED           MOV     A,R5
   \   000029   F9           MOV     R1,A
   \   00002A   7A0A         MOV     R2,#0xa
   \   00002C   7B00         MOV     R3,#0x0
   \   00002E   12....       LCALL   ?US_DIV_MOD
   \   000031   8E..         MOV     ?V0 + 0,R6
   \   000033   7401         MOV     A,#0x1
   \   000035   12....       LCALL   ?XSTACK_DISP0_8
   \   000038   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_36:
   \   00003B   EA           MOV     A,R2
   \   00003C   F0           MOVX    @DPTR,A
   \   00003D   0E           INC     R6
   \   00003E   EC           MOV     A,R4
   \   00003F   F8           MOV     R0,A
   \   000040   ED           MOV     A,R5
   \   000041   F9           MOV     R1,A
   \   000042   7A0A         MOV     R2,#0xa
   \   000044   7B00         MOV     R3,#0x0
   \   000046   12....       LCALL   ?US_DIV_MOD
   \   000049   88..         MOV     ?V0 + 0,R0
   \   00004B   89..         MOV     ?V0 + 1,R1
   \   00004D   AC..         MOV     R4,?V0 + 0
   \   00004F   AD..         MOV     R5,?V0 + 1
   \   000051   EC           MOV     A,R4
   \   000052   4D           ORL     A,R5
   \   000053   70D1         JNZ     ??Show_Num_2
   \                     ??Show_Num_3:
   \   000055   EE           MOV     A,R6
   \   000056   60C7         JZ      ??Show_Num_1
   \   000058   1E           DEC     R6
   \   000059   8E..         MOV     ?V0 + 0,R6
   \   00005B   7401         MOV     A,#0x1
   \   00005D   12....       LCALL   ?XSTACK_DISP0_8
   \   000060   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_37:
   \   000063   12....       LCALL   ?Subroutine46 & 0xFFFF
   \                     ??CrossCallReturnLabel_72:
   \   000066   80ED         SJMP    ??Show_Num_3

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine22:
   \   000000   E582         MOV     A,DPL
   \   000002   25..         ADD     A,?V0 + 0
   \   000004   F582         MOV     DPL,A
   \   000006   E583         MOV     A,DPH
   \   000008   3400         ADDC    A,#0x0
   \   00000A   F583         MOV     DPH,A
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine46:
   \   000000   12....       LCALL   ?Subroutine56 & 0xFFFF
   \                     ??CrossCallReturnLabel_90:
   \   000003   7900         MOV     R1,#0x0
   \   000005   12....       LCALL   ??HalUARTWrite?relay
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine56:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   2430         ADD     A,#0x30
   \   000003   85..82       MOV     DPL,?XSP + 0
   \   000006   85..83       MOV     DPH,?XSP + 1
   \   000009   F0           MOVX    @DPTR,A
   \   00000A                ; Setup parameters for call to function HalUARTWrite
   \   00000A                ; Setup parameters for call to function HalUARTWrite
   \   00000A                ; Setup parameters for call to function HalUARTWrite
   \   00000A                ; Setup parameters for call to function HalUARTWrite
   \   00000A                ; Setup parameters for call to function HalUARTWrite
   \   00000A   7C01         MOV     R4,#0x1
   \   00000C   7D00         MOV     R5,#0x0
   \   00000E   AA82         MOV     R2,DPL
   \   000010   AB83         MOV     R3,DPH
   \   000012   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003                REQUIRE ??Subroutine71_0
   \   000003                ; // Fall through to label ??Subroutine71_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine71_0:
   \   000000   7F02         MOV     R7,#0x2
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    277          
    278          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    279          uint16 Power_of_2( uint8 X )
   \                     Power_of_2:
    280          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    281            if(X == 0)
   \   000000   E9           MOV     A,R1
   \   000001   7006         JNZ     ??Power_of_2_0
    282              return 1;
   \   000003   7A01         MOV     R2,#0x1
   \   000005   7B00         MOV     R3,#0x0
   \   000007   8015         SJMP    ??Power_of_2_1
    283            else
    284            {
    285              uint16 temp = 2;
   \                     ??Power_of_2_0:
   \   000009   7A02         MOV     R2,#0x2
   \   00000B   7B00         MOV     R3,#0x0
    286              for(uchar i=2;i<=X;++i)
   \   00000D   7802         MOV     R0,#0x2
   \   00000F   8008         SJMP    ??Power_of_2_2
    287              {
    288                temp *=2;
   \                     ??Power_of_2_3:
   \   000011   EA           MOV     A,R2
   \   000012   C3           CLR     C
   \   000013   33           RLC     A
   \   000014   FA           MOV     R2,A
   \   000015   EB           MOV     A,R3
   \   000016   33           RLC     A
   \   000017   FB           MOV     R3,A
    289              }
   \   000018   08           INC     R0
   \                     ??Power_of_2_2:
   \   000019   E9           MOV     A,R1
   \   00001A   C3           CLR     C
   \   00001B   98           SUBB    A,R0
   \   00001C   50F3         JNC     ??Power_of_2_3
    290              return temp;
   \                     ??Power_of_2_1:
   \   00001E   02....       LJMP    ?BRET
    291            }
    292              
    293          }
    294          /*********************************************************************
    295           * @fn      SampleApp_Init   应用初始化
    296           *
    297           * @brief   Initialization function for the Generic App Task.
    298           *          This is called during initialization and should contain
    299           *          any application specific initialization (ie. hardware
    300           *          initialization/setup, table initialization, power up
    301           *          notificaiton ... ).
    302           *
    303           * @param   task_id - the ID assigned by OSAL.  This ID should be
    304           *                    used to send messages and set timers.
    305           *
    306           * @return  none
    307           */
    308          
    309          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    310          void SampleApp_Init( uint8 task_id )
   \                     SampleApp_Init:
    311          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    312            SampleApp_TaskID = task_id;
   \   000007   90....       MOV     DPTR,#SampleApp_TaskID
   \   00000A   F0           MOVX    @DPTR,A
    313            SampleApp_NwkState = DEV_INIT;
   \   00000B   90....       MOV     DPTR,#SampleApp_NwkState
   \   00000E   7401         MOV     A,#0x1
   \   000010   F0           MOVX    @DPTR,A
    314            SampleApp_TransID = 0;
   \   000011   90....       MOV     DPTR,#SampleApp_TransID
   \   000014   E4           CLR     A
   \   000015   F0           MOVX    @DPTR,A
    315            MT_UartInit(); //初始化UART
   \   000016                ; Setup parameters for call to function MT_UartInit
   \   000016   12....       LCALL   ??MT_UartInit?relay
    316            MT_UartRegisterTaskID(task_id);// 登记任务号
   \   000019                ; Setup parameters for call to function MT_UartRegisterTaskID
   \   000019   EE           MOV     A,R6
   \   00001A   F9           MOV     R1,A
   \   00001B   12....       LCALL   ??MT_UartRegisterTaskID?relay
    317            HalUARTWrite(0, "System is started.\n\n", 20); // （串口 0 ，'字符’,字符个数）
   \   00001E                ; Setup parameters for call to function HalUARTWrite
   \   00001E   7C14         MOV     R4,#0x14
   \   000020   7D00         MOV     R5,#0x0
   \   000022   7A..         MOV     R2,#`?<Constant "System is started.\\n\\n">` & 0xff
   \   000024   7B..         MOV     R3,#(`?<Constant "System is started.\\n\\n">` >> 8) & 0xff
   \   000026   7900         MOV     R1,#0x0
   \   000028   12....       LCALL   ??HalUARTWrite?relay
    318          
    319          
    320            //路由表初始化
    321            for(short i=0;i<3;++i)
   \   00002B   7A00         MOV     R2,#0x0
   \   00002D   7B00         MOV     R3,#0x0
    322            {
    323              Nei_Table[i] += 65534;
   \                     ??SampleApp_Init_0:
   \   00002F   EA           MOV     A,R2
   \   000030   F8           MOV     R0,A
   \   000031   EB           MOV     A,R3
   \   000032   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_100:
   \   000035   24FE         ADD     A,#-0x2
   \   000037   F0           MOVX    @DPTR,A
   \   000038   A3           INC     DPTR
   \   000039   E0           MOVX    A,@DPTR
   \   00003A   34FF         ADDC    A,#-0x1
   \   00003C   F0           MOVX    @DPTR,A
    324              ACTIVE[i] += LIFE_TIME;  //邻居活跃度初始化
   \   00003D   90....       MOV     DPTR,#LIFE_TIME
   \   000040   E0           MOVX    A,@DPTR
   \   000041   FC           MOV     R4,A
   \   000042   33           RLC     A
   \   000043   95E0         SUBB    A,0xE0 /* A   */
   \   000045   FD           MOV     R5,A
   \   000046   12....       LCALL   ?Subroutine9 & 0xFFFF
    325            }
   \                     ??CrossCallReturnLabel_14:
   \   000049   E0           MOVX    A,@DPTR
   \   00004A   2C           ADD     A,R4
   \   00004B   F0           MOVX    @DPTR,A
   \   00004C   A3           INC     DPTR
   \   00004D   E0           MOVX    A,@DPTR
   \   00004E   3D           ADDC    A,R5
   \   00004F   12....       LCALL   ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_38:
   \   000052   9403         SUBB    A,#0x3
   \   000054   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_125:
   \   000057   40D6         JC      ??SampleApp_Init_0
    326          
    327          
    328            uint16 Source_DATA_info = Power_of_2(Device_ID);
   \   000059                ; Setup parameters for call to function Power_of_2
   \   000059   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_49:
   \   00005C   8A..         MOV     ?V0 + 0,R2
   \   00005E   8B..         MOV     ?V0 + 1,R3
   \   000060   AC..         MOV     R4,?V0 + 0
   \   000062   AD..         MOV     R5,?V0 + 1
    329            //给码字槽赋初值(除了sink节点)
    330            for(short i=0;i<6;++i)
   \   000064   7A00         MOV     R2,#0x0
   \   000066   7B00         MOV     R3,#0x0
    331            {
    332              DATA_SLOT[i].data = SOURCE_DATA;    //给码字槽赋初值
   \                     ??SampleApp_Init_1:
   \   000068   8A..         MOV     ?V0 + 0,R2
   \   00006A   8B..         MOV     ?V0 + 1,R3
   \   00006C   7402         MOV     A,#0x2
   \   00006E   78..         MOV     R0,#?V0 + 0
   \   000070   12....       LCALL   ?S_SHL
   \   000073   12....       LCALL   ?Subroutine57 & 0xFFFF
    333              DATA_SLOT[i].Degree_ID = Source_DATA_info; //给码字赋节点信息
    334          //    
    335            }
   \                     ??CrossCallReturnLabel_92:
   \   000076   90....       MOV     DPTR,#SOURCE_DATA
   \   000079   E0           MOVX    A,@DPTR
   \   00007A   8882         MOV     DPL,R0
   \   00007C   8983         MOV     DPH,R1
   \   00007E   12....       LCALL   ?Subroutine47 & 0xFFFF
   \                     ??CrossCallReturnLabel_96:
   \   000081   EC           MOV     A,R4
   \   000082   F0           MOVX    @DPTR,A
   \   000083   A3           INC     DPTR
   \   000084   ED           MOV     A,R5
   \   000085   12....       LCALL   ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_39:
   \   000088   9406         SUBB    A,#0x6
   \   00008A   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_126:
   \   00008D   40D9         JC      ??SampleApp_Init_1
    336          
    337          //  uint8 X = 1;
    338          //  uint8 Y = 4;
    339          //  printf(" %d\n",X|Y);
    340           
    341            
    342            
    343            
    344            
    345            
    346            
    347            
    348            
    349            
    350            
    351          
    352            // Device hardware initialization can be added here or in main() (Zmain.c).
    353            // If the hardware is application specific - add it here.
    354            // If the hardware is other parts of the device add it in main().
    355          
    356           #if defined ( BUILD_ALL_DEVICES )
    357            // The "Demo" target is setup to have BUILD_ALL_DEVICES and HOLD_AUTO_START
    358            // We are looking at a jumper (defined in SampleAppHw.c) to be jumpered
    359            // together - if they are - we will start up a coordinator. Otherwise,
    360            // the device will start as a router.
    361            if ( readCoordinatorJumper() )
    362              zgDeviceLogicalType = ZG_DEVICETYPE_COORDINATOR;
    363            else
    364              zgDeviceLogicalType = ZG_DEVICETYPE_ROUTER;
    365          #endif // BUILD_ALL_DEVICES
    366          
    367          #if defined ( HOLD_AUTO_START )
    368            // HOLD_AUTO_START is a compile option that will surpress ZDApp
    369            //  from starting the device and wait for the application to
    370            //  start the device.
    371            ZDOInitDevice(0);
    372          #endif
    373          
    374          
    375          
    376            //WeBee点对点通讯定义
    377            Point_To_Point_DstAddr.addrMode = (afAddrMode_t)Addr16Bit; //点播模式
   \   00008F   90....       MOV     DPTR,#Point_To_Point_DstAddr + 8
   \   000092   7402         MOV     A,#0x2
   \   000094   F0           MOVX    @DPTR,A
    378            Point_To_Point_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   000095   A3           INC     DPTR
   \   000096   7414         MOV     A,#0x14
   \   000098   F0           MOVX    @DPTR,A
    379            Point_To_Point_DstAddr.addr.shortAddr = 0xB6AE; //发给协调器
   \   000099   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   00009C   74AE         MOV     A,#-0x52
   \   00009E   F0           MOVX    @DPTR,A
   \   00009F   A3           INC     DPTR
   \   0000A0   74B6         MOV     A,#-0x4a
   \   0000A2   F0           MOVX    @DPTR,A
    380          
    381          
    382          
    383          
    384          
    385          
    386            // Setup for the periodic message's destination address
    387            // Broadcast to everyone     广播方式定义
    388            SampleApp_Periodic_DstAddr.addrMode = (afAddrMode_t)AddrBroadcast;
   \   0000A3   90....       MOV     DPTR,#SampleApp_Periodic_DstAddr + 8
   \   0000A6   740F         MOV     A,#0xf
   \   0000A8   F0           MOVX    @DPTR,A
    389            SampleApp_Periodic_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   0000A9   A3           INC     DPTR
   \   0000AA   7414         MOV     A,#0x14
   \   0000AC   F0           MOVX    @DPTR,A
    390            SampleApp_Periodic_DstAddr.addr.shortAddr = 0xFFFF;//发送给所有设备,睡眠中的节点由父节点暂存直到超时
   \   0000AD   90....       MOV     DPTR,#SampleApp_Periodic_DstAddr
   \   0000B0   74FF         MOV     A,#-0x1
   \   0000B2   F0           MOVX    @DPTR,A
   \   0000B3   A3           INC     DPTR
   \   0000B4   F0           MOVX    @DPTR,A
    391            //0xFFFD 发送给非睡眠状态的所有设备
    392            //0xFFFC 发送给所有路由器以及协调器
    393          
    394          
    395          
    396          
    397            //组播Group1设置
    398            // Setup for the flash command's destination address - Group 1
    399            SampleApp_Flash_DstAddr.addrMode = (afAddrMode_t)afAddrGroup;
   \   0000B5   90....       MOV     DPTR,#SampleApp_Flash_DstAddr + 8
   \   0000B8   7401         MOV     A,#0x1
   \   0000BA   F0           MOVX    @DPTR,A
    400            SampleApp_Flash_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;  //endpoint 端点
   \   0000BB   A3           INC     DPTR
   \   0000BC   7414         MOV     A,#0x14
   \   0000BE   F0           MOVX    @DPTR,A
    401            SampleApp_Flash_DstAddr.addr.shortAddr = SAMPLEAPP_FLASH_GROUP;
   \   0000BF   90....       MOV     DPTR,#SampleApp_Flash_DstAddr
   \   0000C2   7402         MOV     A,#0x2
   \   0000C4   F0           MOVX    @DPTR,A
   \   0000C5   A3           INC     DPTR
   \   0000C6   E4           CLR     A
   \   0000C7   F0           MOVX    @DPTR,A
    402          
    403          
    404          
    405          
    406          
    407            // Fill out the endpoint description.
    408            SampleApp_epDesc.endPoint = SAMPLEAPP_ENDPOINT;
   \   0000C8   90....       MOV     DPTR,#SampleApp_epDesc
   \   0000CB   7414         MOV     A,#0x14
   \   0000CD   F0           MOVX    @DPTR,A
    409            SampleApp_epDesc.task_id = &SampleApp_TaskID;
   \   0000CE   A3           INC     DPTR
   \   0000CF   74..         MOV     A,#SampleApp_TaskID & 0xff
   \   0000D1   F0           MOVX    @DPTR,A
   \   0000D2   A3           INC     DPTR
   \   0000D3   74..         MOV     A,#(SampleApp_TaskID >> 8) & 0xff
   \   0000D5   F0           MOVX    @DPTR,A
    410            SampleApp_epDesc.simpleDesc
    411                      = (SimpleDescriptionFormat_t *)&SampleApp_SimpleDesc;
   \   0000D6   A3           INC     DPTR
   \   0000D7   74..         MOV     A,#SampleApp_SimpleDesc & 0xff
   \   0000D9   F0           MOVX    @DPTR,A
   \   0000DA   A3           INC     DPTR
   \   0000DB   74..         MOV     A,#(SampleApp_SimpleDesc >> 8) & 0xff
   \   0000DD   F0           MOVX    @DPTR,A
    412            SampleApp_epDesc.latencyReq = noLatencyReqs;
   \   0000DE   A3           INC     DPTR
   \   0000DF   E4           CLR     A
   \   0000E0   F0           MOVX    @DPTR,A
    413          
    414            // Register the endpoint description with the AF
    415            afRegister( &SampleApp_epDesc );
   \   0000E1                ; Setup parameters for call to function afRegister
   \   0000E1   7A..         MOV     R2,#SampleApp_epDesc & 0xff
   \   0000E3   7B..         MOV     R3,#(SampleApp_epDesc >> 8) & 0xff
   \   0000E5   12....       LCALL   ??afRegister?relay
    416          
    417            // Register for all key events - This app will handle all key events
    418            RegisterForKeys( SampleApp_TaskID );
   \   0000E8                ; Setup parameters for call to function RegisterForKeys
   \   0000E8   90....       MOV     DPTR,#SampleApp_TaskID
   \   0000EB   E0           MOVX    A,@DPTR
   \   0000EC   F9           MOV     R1,A
   \   0000ED   12....       LCALL   ??RegisterForKeys?relay
    419          
    420          
    421          
    422            /***********设置 Group_ID*************/
    423            // By default, all devices start out in Group 1
    424            SampleApp_Group.ID = SAMPLEAPP_FLASH_GROUP; //0x0001
   \   0000F0   90....       MOV     DPTR,#SampleApp_Group
   \   0000F3   7402         MOV     A,#0x2
   \   0000F5   F0           MOVX    @DPTR,A
   \   0000F6   A3           INC     DPTR
   \   0000F7   E4           CLR     A
   \   0000F8   F0           MOVX    @DPTR,A
    425            osal_memcpy( SampleApp_Group.name, "Group 1", 7  );
   \   0000F9                ; Setup parameters for call to function osal_memcpy
   \   0000F9   75....       MOV     ?V0 + 0,#`?<Constant "Group 1">` & 0xff
   \   0000FC   75....       MOV     ?V0 + 1,#(`?<Constant "Group 1">` >> 8) & 0xff
   \   0000FF   F5..         MOV     ?V0 + 2,A
   \   000101   78..         MOV     R0,#?V0 + 0
   \   000103   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000106   7C07         MOV     R4,#0x7
   \   000108   7D00         MOV     R5,#0x0
   \   00010A   7A..         MOV     R2,#(SampleApp_Group + 2) & 0xff
   \   00010C   7B..         MOV     R3,#((SampleApp_Group + 2) >> 8) & 0xff
   \   00010E   12....       LCALL   ??osal_memcpy?relay
   \   000111   7403         MOV     A,#0x3
   \   000113   12....       LCALL   ?DEALLOC_XSTACK8
    426            aps_AddGroup( SAMPLEAPP_ENDPOINT, &SampleApp_Group );
   \   000116                ; Setup parameters for call to function aps_AddGroup
   \   000116   7A..         MOV     R2,#SampleApp_Group & 0xff
   \   000118   7B..         MOV     R3,#(SampleApp_Group >> 8) & 0xff
   \   00011A   7914         MOV     R1,#0x14
   \   00011C   12....       LCALL   ??aps_AddGroup?relay
    427          
    428          
    429          
    430          #if defined ( LCD_SUPPORTED )
    431            HalLcdWriteString( "SampleApp", HAL_LCD_LINE_1 );
    432          #endif
    433          }
   \   00011F   7F03         MOV     R7,#0x3
   \   000121   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine47:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   A3           INC     DPTR
   \   000002   E4           CLR     A
   \   000003                REQUIRE ??Subroutine59_0
   \   000003                ; // Fall through to label ??Subroutine59_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine59_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   8882         MOV     DPL,R0
   \   000003   8983         MOV     DPH,R1
   \   000005   A3           INC     DPTR
   \   000006   A3           INC     DPTR
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine23:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   EA           MOV     A,R2
   \   000002   2401         ADD     A,#0x1
   \   000004   0A           INC     R2
   \   000005   EB           MOV     A,R3
   \   000006   3400         ADDC    A,#0x0
   \   000008   FB           MOV     R3,A
   \   000009   C3           CLR     C
   \   00000A   EA           MOV     A,R2
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   F9           MOV     R1,A
   \   000001   E8           MOV     A,R0
   \   000002   C3           CLR     C
   \   000003   33           RLC     A
   \   000004   F8           MOV     R0,A
   \   000005   E9           MOV     A,R1
   \   000006                REQUIRE ??Subroutine60_0
   \   000006                ; // Fall through to label ??Subroutine60_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine60_0:
   \   000000   12....       LCALL   ?Subroutine44 & 0xFFFF
   \                     ??CrossCallReturnLabel_103:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine31:
   \   000000   90....       MOV     DPTR,#Device_ID
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F9           MOV     R1,A
   \   000005   12....       LCALL   ??Power_of_2?relay
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine44:
   \   000000   33           RLC     A
   \   000001   F9           MOV     R1,A
   \   000002   74..         MOV     A,#Nei_Table & 0xff
   \   000004   28           ADD     A,R0
   \   000005   F582         MOV     DPL,A
   \   000007   74..         MOV     A,#(Nei_Table >> 8) & 0xff
   \   000009   39           ADDC    A,R1
   \   00000A   F583         MOV     DPH,A
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine18:
   \   000000   EB           MOV     A,R3
   \   000001                REQUIRE ??Subroutine65_0
   \   000001                ; // Fall through to label ??Subroutine65_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   12....       LCALL   ?Subroutine45 & 0xFFFF
   \                     ??CrossCallReturnLabel_71:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine45:
   \   000000   74..         MOV     A,#ACTIVE & 0xff
   \   000002   28           ADD     A,R0
   \   000003   F582         MOV     DPL,A
   \   000005   74..         MOV     A,#(ACTIVE >> 8) & 0xff
   \   000007   39           ADDC    A,R1
   \   000008   F583         MOV     DPH,A
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine57:
   \   000000   74..         MOV     A,#DATA_SLOT & 0xff
   \   000002   25..         ADD     A,?V0 + 0
   \   000004   F8           MOV     R0,A
   \   000005   74..         MOV     A,#(DATA_SLOT >> 8) & 0xff
   \   000007   35..         ADDC    A,?V0 + 1
   \   000009   F9           MOV     R1,A
   \   00000A   22           RET
    434          
    435          /*********************************************************************
    436           * @fn      SampleApp_ProcessEvent
    437           *
    438           *        ******************应用处理程序***************************
    439           *
    440           * @brief   Generic Application Task event processor.  This function
    441           *          is called to process all events for the task.  Events
    442           *          include timers, messages and any other user defined events.
    443           *
    444           * @param   task_id  - The OSAL assigned task ID.
    445           * @param   events - events to process.  This is a bit map and can
    446           *                   contain more than one event.
    447           *
    448           * @return  none
    449           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    450          uint16 SampleApp_ProcessEvent( uint8 task_id, uint16 events )
   \                     SampleApp_ProcessEvent:
    451          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    452            afIncomingMSGPacket_t *MSGpkt;
    453            (void)task_id;  // Intentionally unreferenced parameter
    454          
    455            if ( events & SYS_EVENT_MSG ) //系统信息发送事件
   \   000009   5480         ANL     A,#0x80
   \   00000B   7003         JNZ     $+5
   \   00000D   02....       LJMP    ??SampleApp_ProcessEvent_0 & 0xFFFF
    456            {
    457              MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
   \   000010                ; Setup parameters for call to function osal_msg_receive
   \   000010   802B         SJMP    ??SampleApp_ProcessEvent_1
    458              while ( MSGpkt )
    459              {
    460                switch ( MSGpkt->hdr.event )
    461                {
    462                  case CMD_SERIAL_MSG:    // 串口收到数据后由MT_UART层传递过的数据，用网蜂方法接收，编译时不定义MT相关内容
    463                      SampleApp_SerialCMD((mtOSALSerialData_t *)MSGpkt);
    464                      break;
    465          
    466                  // Received when a key is pressed
    467                  case KEY_CHANGE: //按键事件及处理函数
    468                    //HalUARTWrite(0, "KEY ", 4);
    469                    SampleApp_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
    470                    break;
    471          
    472                  // Received when a messages is received (OTA) for this endpoint
    473                  // 接收处理函数
    474                  case AF_INCOMING_MSG_CMD:
    475                    SampleApp_MessageMSGCB( MSGpkt );
    476                    break;
    477          
    478                  // Received whenever the device changes state in the network
    479                  case ZDO_STATE_CHANGE:  //网络状态改变，如未连接上网络
    480                    SampleApp_NwkState = (devStates_t)(MSGpkt->hdr.status);
   \                     ??SampleApp_ProcessEvent_2:
   \   000012   A3           INC     DPTR
   \   000013   E0           MOVX    A,@DPTR
   \   000014   90....       MOV     DPTR,#SampleApp_NwkState
   \   000017   F0           MOVX    @DPTR,A
    481                    if ( (SampleApp_NwkState == DEV_ZB_COORD) //协调器
    482                        || (SampleApp_NwkState == DEV_ROUTER) //路由器
    483                        || (SampleApp_NwkState == DEV_END_DEVICE) ) //终端 都执行
   \   000018   6409         XRL     A,#0x9
   \   00001A   600A         JZ      ??SampleApp_ProcessEvent_3
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   6407         XRL     A,#0x7
   \   00001F   6005         JZ      ??SampleApp_ProcessEvent_3
   \   000021   E0           MOVX    A,@DPTR
   \   000022   6406         XRL     A,#0x6
   \   000024   7010         JNZ     ??SampleApp_ProcessEvent_4
    484                    {
    485                      // Start sending the periodic message in a regular interval.
    486                      osal_start_timerEx( SampleApp_TaskID,
    487                                        SAMPLEAPP_SEND_PERIODIC_MSG_EVT,
    488                                        SAMPLEAPP_SEND_PERIODIC_MSG_TIMEOUT );
   \                     ??SampleApp_ProcessEvent_3:
   \   000026                ; Setup parameters for call to function osal_start_timerEx
   \   000026   7C88         MOV     R4,#-0x78
   \   000028   7D13         MOV     R5,#0x13
   \   00002A   7A01         MOV     R2,#0x1
   \   00002C   7B00         MOV     R3,#0x0
   \   00002E   90....       MOV     DPTR,#SampleApp_TaskID
   \   000031   E0           MOVX    A,@DPTR
   \   000032   F9           MOV     R1,A
   \   000033   12....       LCALL   ??osal_start_timerEx?relay
    489                    }
    490                    else
    491                    {
    492                      // Device is no longer in the network
    493          //              HalUARTWrite(0,"网络断开",8);
    494                    }
    495                    break;
    496          
    497                  default:
    498                    break;
    499                }
    500          
    501                // Release the memory
    502                osal_msg_deallocate( (uint8 *)MSGpkt );
   \                     ??SampleApp_ProcessEvent_4:
   \   000036                ; Setup parameters for call to function osal_msg_deallocate
   \   000036   AA..         MOV     R2,?V0 + 0
   \   000038   AB..         MOV     R3,?V0 + 1
   \   00003A   12....       LCALL   ??osal_msg_deallocate?relay
    503          
    504                // Next - if one is available
    505                MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
   \   00003D                ; Setup parameters for call to function osal_msg_receive
   \                     ??SampleApp_ProcessEvent_1:
   \   00003D   90....       MOV     DPTR,#SampleApp_TaskID
   \   000040   E0           MOVX    A,@DPTR
   \   000041   F9           MOV     R1,A
   \   000042   12....       LCALL   ??osal_msg_receive?relay
   \   000045   8A..         MOV     ?V0 + 0,R2
   \   000047   8B..         MOV     ?V0 + 1,R3
   \   000049   E5..         MOV     A,?V0 + 0
   \   00004B   45..         ORL     A,?V0 + 1
   \   00004D   603E         JZ      ??SampleApp_ProcessEvent_5
   \   00004F   85..82       MOV     DPL,?V0 + 0
   \   000052   85..83       MOV     DPH,?V0 + 1
   \   000055   E0           MOVX    A,@DPTR
   \   000056   14           DEC     A
   \   000057   600E         JZ      ??SampleApp_ProcessEvent_6
   \   000059   24E7         ADD     A,#-0x19
   \   00005B   6027         JZ      ??SampleApp_ProcessEvent_7
   \   00005D   245A         ADD     A,#0x5a
   \   00005F   600F         JZ      ??SampleApp_ProcessEvent_8
   \   000061   24EF         ADD     A,#-0x11
   \   000063   60AD         JZ      ??SampleApp_ProcessEvent_2
   \   000065   80CF         SJMP    ??SampleApp_ProcessEvent_4
   \                     ??SampleApp_ProcessEvent_6:
   \   000067                ; Setup parameters for call to function SampleApp_SerialCMD
   \   000067   AA..         MOV     R2,?V0 + 0
   \   000069   AB..         MOV     R3,?V0 + 1
   \   00006B   12....       LCALL   ??SampleApp_SerialCMD?relay
   \   00006E   80C6         SJMP    ??SampleApp_ProcessEvent_4
   \                     ??SampleApp_ProcessEvent_8:
   \   000070                ; Setup parameters for call to function SampleApp_HandleKeys
   \   000070   A3           INC     DPTR
   \   000071   A3           INC     DPTR
   \   000072   A3           INC     DPTR
   \   000073   E0           MOVX    A,@DPTR
   \   000074   FA           MOV     R2,A
   \   000075   85..82       MOV     DPL,?V0 + 0
   \   000078   85..83       MOV     DPH,?V0 + 1
   \   00007B   A3           INC     DPTR
   \   00007C   A3           INC     DPTR
   \   00007D   E0           MOVX    A,@DPTR
   \   00007E   F9           MOV     R1,A
   \   00007F   12....       LCALL   ??SampleApp_HandleKeys?relay
   \   000082   80B2         SJMP    ??SampleApp_ProcessEvent_4
   \                     ??SampleApp_ProcessEvent_7:
   \   000084                ; Setup parameters for call to function SampleApp_MessageMSGCB
   \   000084   AA..         MOV     R2,?V0 + 0
   \   000086   AB..         MOV     R3,?V0 + 1
   \   000088   12....       LCALL   ??SampleApp_MessageMSGCB?relay
   \   00008B   80A9         SJMP    ??SampleApp_ProcessEvent_4
    506              }
    507          
    508              // return unprocessed events
    509              return (events ^ SYS_EVENT_MSG);
   \                     ??SampleApp_ProcessEvent_5:
   \   00008D   EE           MOV     A,R6
   \   00008E   FA           MOV     R2,A
   \   00008F   EF           MOV     A,R7
   \   000090   6480         XRL     A,#0x80
   \                     ??SampleApp_ProcessEvent_9:
   \   000092   FB           MOV     R3,A
   \   000093   803F         SJMP    ??SampleApp_ProcessEvent_10
    510            }
    511          
    512            // Send a message out - This event is generated by a timer
    513            //  (setup in SampleApp_Init()).
    514            if ( events & SAMPLEAPP_SEND_PERIODIC_MSG_EVT )  //*****周期性发送函数*****
   \                     ??SampleApp_ProcessEvent_0:
   \   000095   EE           MOV     A,R6
   \   000096   A2E0         MOV     C,0xE0 /* A   */.0
   \   000098   5036         JNC     ??SampleApp_ProcessEvent_11
    515            {
    516          
    517          
    518          /***********************************周期性发送函数****************************************/
    519          
    520              /*Send the periodic message*/
    521              //SampleApp_SendPeriodicMessage(); //用户周期性广播发送函数
    522          
    523              if(_TURN == 0){
   \   00009A   90....       MOV     DPTR,#_TURN
   \   00009D   E0           MOVX    A,@DPTR
   \   00009E   700A         JNZ     ??SampleApp_ProcessEvent_12
    524                /*Group*/
    525                SampleApp_SendGroupMessage(); //组播通讯程序
   \   0000A0                ; Setup parameters for call to function SampleApp_SendGroupMessage
   \   0000A0   12....       LCALL   ??SampleApp_SendGroupMessage?relay
    526                _TURN = 1;
   \   0000A3   90....       MOV     DPTR,#_TURN
   \   0000A6   7401         MOV     A,#0x1
   \   0000A8   8007         SJMP    ??SampleApp_ProcessEvent_13
    527              }
    528          
    529              else{
    530                /*Point_to_Point*/
    531                SampleApp_SendPointToPointMessage(); //点对点发送函数
   \                     ??SampleApp_ProcessEvent_12:
   \   0000AA                ; Setup parameters for call to function SampleApp_SendPointToPointMessage
   \   0000AA   12....       LCALL   ??SampleApp_SendPointToPointMessage?relay
    532                _TURN = 0;
   \   0000AD   90....       MOV     DPTR,#_TURN
   \   0000B0   E4           CLR     A
   \                     ??SampleApp_ProcessEvent_13:
   \   0000B1   F0           MOVX    @DPTR,A
    533              }
    534          
    535          /**********************************周期性发送函数*****************************************/
    536          
    537          
    538          
    539          
    540              // Setup to send message again in normal period (+ a little jitter)
    541              osal_start_timerEx( SampleApp_TaskID, SAMPLEAPP_SEND_PERIODIC_MSG_EVT,
    542                                 (SAMPLEAPP_SEND_PERIODIC_MSG_TIMEOUT + (osal_rand() & 0x00FF)) );
   \   0000B2                ; Setup parameters for call to function osal_rand
   \   0000B2   12....       LCALL   ??osal_rand?relay
   \   0000B5                ; Setup parameters for call to function osal_start_timerEx
   \   0000B5   EA           MOV     A,R2
   \   0000B6   2488         ADD     A,#-0x78
   \   0000B8   FC           MOV     R4,A
   \   0000B9   E4           CLR     A
   \   0000BA   3413         ADDC    A,#0x13
   \   0000BC   FD           MOV     R5,A
   \   0000BD   7A01         MOV     R2,#0x1
   \   0000BF   7B00         MOV     R3,#0x0
   \   0000C1   90....       MOV     DPTR,#SampleApp_TaskID
   \   0000C4   E0           MOVX    A,@DPTR
   \   0000C5   F9           MOV     R1,A
   \   0000C6   12....       LCALL   ??osal_start_timerEx?relay
    543          
    544              // return unprocessed events
    545              return (events ^ SAMPLEAPP_SEND_PERIODIC_MSG_EVT);
   \   0000C9   EE           MOV     A,R6
   \   0000CA   6401         XRL     A,#0x1
   \   0000CC   FA           MOV     R2,A
   \   0000CD   EF           MOV     A,R7
   \   0000CE   80C2         SJMP    ??SampleApp_ProcessEvent_9
    546          
    547            }
    548          
    549            // Discard unknown events
    550            return 0;
   \                     ??SampleApp_ProcessEvent_11:
   \   0000D0   7A00         MOV     R2,#0x0
   \   0000D2   7B00         MOV     R3,#0x0
   \                     ??SampleApp_ProcessEvent_10:
   \   0000D4                REQUIRE ?Subroutine1
   \   0000D4                ; // Fall through to label ?Subroutine1
    551          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   7F04         MOV     R7,#0x4
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA
    552          
    553          
    554          
    555          
    556          
    557          
    558          
    559          /********************************************************
    560                              组播 发送函数
    561          *********************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    562          void SampleApp_SendGroupMessage( void )
   \                     SampleApp_SendGroupMessage:
    563          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    564            //uint8 data[10]={'G','R','O','U','P',' ','1',' ','r','4'};// 自定义数据
    565            if ( AF_DataRequest( & SampleApp_Flash_DstAddr,
    566                                &SampleApp_epDesc,
    567                                SAMPLEAPP_FLASH_CLUSTERID,
    568                                1,
    569                                (uint8*)&SampleAppPeriodicCounter, //要发送的内容
    570                                &SampleApp_TransID,
    571                                AF_DISCV_ROUTE,
    572                                AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000005                ; Setup parameters for call to function AF_DataRequest
   \   000005   75..1E       MOV     ?V0 + 0,#0x1e
   \   000008   78..         MOV     R0,#?V0 + 0
   \   00000A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00000D   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000010   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000013   78..         MOV     R0,#?V0 + 0
   \   000015   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000018   75....       MOV     ?V0 + 0,#SampleAppPeriodicCounter & 0xff
   \   00001B   75....       MOV     ?V0 + 1,#(SampleAppPeriodicCounter >> 8) & 0xff
   \   00001E   78..         MOV     R0,#?V0 + 0
   \   000020   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000023   75..01       MOV     ?V0 + 0,#0x1
   \   000026   75..00       MOV     ?V0 + 1,#0x0
   \   000029   78..         MOV     R0,#?V0 + 0
   \   00002B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00002E   75..02       MOV     ?V0 + 0,#0x2
   \   000031   78..         MOV     R0,#?V0 + 0
   \   000033   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000036   7920         MOV     R1,#0x20
   \   000038   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   00003A   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   00003C   7A..         MOV     R2,#SampleApp_Flash_DstAddr & 0xff
   \   00003E   7B..         MOV     R3,#(SampleApp_Flash_DstAddr >> 8) & 0xff
   \   000040   12....       LCALL   ??Subroutine61_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_108:
   \   000043   02....       LJMP    ?Subroutine0 & 0xFFFF
    573            {
    574            }
    575            else
    576            {
    577              // Error occurred in request to send.
    578            }
    579          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine61_0:
   \   000000   12....       LCALL   ??AF_DataRequest?relay
   \   000003   7409         MOV     A,#0x9
   \   000005   22           RET
    580          
    581          
    582          /*********************************************************************
    583           * @fn      SampleApp_SendPeriodicMessage
    584           *
    585           * @brief   Send the periodic message.
    586           *
    587           * @param   none
    588           *
    589           * @return  none
    590           *
    591           *********************************************************
    592                              周期性广播 发送函数
    593           **********************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    594          void SampleApp_SendPeriodicMessage( void )
   \                     SampleApp_SendPeriodicMessage:
    595          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    596            unsigned int flashTime=1000;
    597            if ( AF_DataRequest( &SampleApp_Periodic_DstAddr, &SampleApp_epDesc,
    598                                 SAMPLEAPP_PERIODIC_CLUSTERID,
    599                                 1,  //数据长度
    600                                 (uint8*)&SampleAppPeriodicCounter, //要发送的内容
    601                                 &SampleApp_TransID,
    602                                 AF_DISCV_ROUTE,
    603                                 AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000005                ; Setup parameters for call to function AF_DataRequest
   \   000005   75..1E       MOV     ?V0 + 0,#0x1e
   \   000008   78..         MOV     R0,#?V0 + 0
   \   00000A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00000D   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000010   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000013   78..         MOV     R0,#?V0 + 0
   \   000015   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000018   75....       MOV     ?V0 + 0,#SampleAppPeriodicCounter & 0xff
   \   00001B   75....       MOV     ?V0 + 1,#(SampleAppPeriodicCounter >> 8) & 0xff
   \   00001E   78..         MOV     R0,#?V0 + 0
   \   000020   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000023   75..01       MOV     ?V0 + 0,#0x1
   \   000026   75..00       MOV     ?V0 + 1,#0x0
   \   000029   78..         MOV     R0,#?V0 + 0
   \   00002B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00002E   78..         MOV     R0,#?V0 + 0
   \   000030   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000033   7920         MOV     R1,#0x20
   \   000035   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000037   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000039   7A..         MOV     R2,#SampleApp_Periodic_DstAddr & 0xff
   \   00003B   7B..         MOV     R3,#(SampleApp_Periodic_DstAddr >> 8) & 0xff
   \   00003D   12....       LCALL   ??Subroutine61_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_109:
   \   000040   12....       LCALL   ?DEALLOC_XSTACK8
   \   000043   E9           MOV     A,R1
   \   000044   700D         JNZ     ??SampleApp_SendPeriodicMessage_0
    604            {
    605              HalLedBlink( HAL_LED_1, 1, 60, (flashTime / 3) );
   \   000046                ; Setup parameters for call to function HalLedBlink
   \   000046   7C4D         MOV     R4,#0x4d
   \   000048   7D01         MOV     R5,#0x1
   \   00004A   7B3C         MOV     R3,#0x3c
   \   00004C   7A01         MOV     R2,#0x1
   \   00004E   7901         MOV     R1,#0x1
   \   000050   12....       LCALL   ??HalLedBlink?relay
    606            }
    607            else
    608            {
    609              // Error occurred in request to send.
    610            }
    611          }
   \                     ??SampleApp_SendPeriodicMessage_0:
   \   000053   02....       LJMP    ??Subroutine71_0 & 0xFFFF
    612          
    613          
    614          /*********************************************************************
    615           * @fn      SampleApp_SendFlashMessage
    616           *
    617           * @brief   Send the flash message to group 1.
    618           *
    619           * @param   flashTime - in milliseconds
    620           *
    621           * @return  none
    622           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    623          void SampleApp_SendFlashMessage( uint16 flashTime )
   \                     SampleApp_SendFlashMessage:
    624          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 3
   \   000005   74FD         MOV     A,#-0x3
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    625            uint8 buffer[3];
    626            buffer[0] = (uint8)(SampleAppFlashCounter++);
   \   00000A   90....       MOV     DPTR,#SampleAppFlashCounter
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   85..82       MOV     DPL,?XSP + 0
   \   000011   85..83       MOV     DPH,?XSP + 1
   \   000014   F0           MOVX    @DPTR,A
   \   000015   90....       MOV     DPTR,#SampleAppFlashCounter
   \   000018   E0           MOVX    A,@DPTR
   \   000019   04           INC     A
   \   00001A   F0           MOVX    @DPTR,A
    627            buffer[1] = LO_UINT16( flashTime );
   \   00001B   7401         MOV     A,#0x1
   \   00001D   12....       LCALL   ?XSTACK_DISP0_8
   \   000020   EA           MOV     A,R2
   \   000021   F0           MOVX    @DPTR,A
    628            buffer[2] = HI_UINT16( flashTime );
   \   000022   7402         MOV     A,#0x2
   \   000024   12....       LCALL   ?XSTACK_DISP0_8
   \   000027   EB           MOV     A,R3
   \   000028   F0           MOVX    @DPTR,A
    629          
    630            if ( AF_DataRequest( &SampleApp_Flash_DstAddr, &SampleApp_epDesc,
    631                                 SAMPLEAPP_FLASH_CLUSTERID,
    632                                 3,
    633                                 buffer,
    634                                 &SampleApp_TransID,
    635                                 AF_DISCV_ROUTE,
    636                                 AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000029                ; Setup parameters for call to function AF_DataRequest
   \   000029   75..1E       MOV     ?V0 + 0,#0x1e
   \   00002C   78..         MOV     R0,#?V0 + 0
   \   00002E   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000031   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000034   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000037   78..         MOV     R0,#?V0 + 0
   \   000039   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00003C   7403         MOV     A,#0x3
   \   00003E   12....       LCALL   ?XSTACK_DISP0_8
   \   000041   8582..       MOV     ?V0 + 0,DPL
   \   000044   8583..       MOV     ?V0 + 1,DPH
   \   000047   78..         MOV     R0,#?V0 + 0
   \   000049   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00004C   75..03       MOV     ?V0 + 0,#0x3
   \   00004F   75..00       MOV     ?V0 + 1,#0x0
   \   000052   78..         MOV     R0,#?V0 + 0
   \   000054   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000057   75..02       MOV     ?V0 + 0,#0x2
   \   00005A   78..         MOV     R0,#?V0 + 0
   \   00005C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005F   7920         MOV     R1,#0x20
   \   000061   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000063   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000065   7A..         MOV     R2,#SampleApp_Flash_DstAddr & 0xff
   \   000067   7B..         MOV     R3,#(SampleApp_Flash_DstAddr >> 8) & 0xff
   \   000069   12....       LCALL   ??Subroutine61_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_110:
   \   00006C   12....       LCALL   ?DEALLOC_XSTACK8
    637            {
    638            }
    639            else
    640            {
    641              // Error occurred in request to send.
    642            }
    643          }
   \   00006F   7403         MOV     A,#0x3
   \   000071   02....       LJMP    ?Subroutine0 & 0xFFFF
    644          
    645          
    646          
    647          
    648          /*********************************************************************
    649           * Event Generation Functions
    650           */
    651          /*********************************************************************
    652           * @fn      SampleApp_HandleKeys 按键处理函数
    653           *
    654           * @brief   Handles all key events for this device.
    655           *
    656           * @param   shift - true if in shift/alt.
    657           * @param   keys - bit field for key events. Valid entries:
    658           *                 HAL_KEY_SW_2
    659           *                 HAL_KEY_SW_1
    660           *
    661           * @return  none
    662           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    663          void SampleApp_HandleKeys( uint8 shift, uint8 keys )
   \                     SampleApp_HandleKeys:
    664          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FF           MOV     R7,A
    665            (void)shift;  // Intentionally unreferenced parameter
    666          
    667            if ( keys & HAL_KEY_SW_1 )
    668            {
    669              /* This key sends the Flash Command is sent to Group 1.
    670              * This device will not receive the Flash Command from this
    671              * device (even if it belongs to group 1).
    672              */
    673              //SampleApp_SendFlashMessage( SAMPLEAPP_FLASH_DURATION );
    674            }
    675          
    676            if ( keys & HAL_KEY_SW_2 )
   \   000007   A2E1         MOV     C,0xE0 /* A   */.1
   \   000009   5024         JNC     ??SampleApp_HandleKeys_0
    677            {
    678              /* The Flashr Command is sent to Group 1.
    679              * This key toggles this device in and out of group 1.
    680              * If this device doesn't belong to group 1, this application
    681              * will not receive the Flash command sent to group 1.
    682              */
    683              aps_Group_t *grp;
    684              grp = aps_FindGroup( SAMPLEAPP_ENDPOINT, SAMPLEAPP_FLASH_GROUP );
    685              if ( grp )
   \   00000B                ; Setup parameters for call to function aps_FindGroup
   \   00000B   7A02         MOV     R2,#0x2
   \   00000D   7B00         MOV     R3,#0x0
   \   00000F   7914         MOV     R1,#0x14
   \   000011   12....       LCALL   ??aps_FindGroup?relay
   \   000014   8B..         MOV     ?V0 + 1,R3
   \   000016   EA           MOV     A,R2
   \   000017   45..         ORL     A,?V0 + 1
   \   000019   600B         JZ      ??SampleApp_HandleKeys_1
    686              {
    687                // Remove from the group
    688                aps_RemoveGroup( SAMPLEAPP_ENDPOINT, SAMPLEAPP_FLASH_GROUP );
   \   00001B                ; Setup parameters for call to function aps_RemoveGroup
   \   00001B   7A02         MOV     R2,#0x2
   \   00001D   7B00         MOV     R3,#0x0
   \   00001F   7914         MOV     R1,#0x14
   \   000021   12....       LCALL   ??aps_RemoveGroup?relay
   \   000024   8009         SJMP    ??SampleApp_HandleKeys_0
    689              }
    690              else
    691              {
    692                // Add to the flash group
    693                aps_AddGroup( SAMPLEAPP_ENDPOINT, &SampleApp_Group );
   \                     ??SampleApp_HandleKeys_1:
   \   000026                ; Setup parameters for call to function aps_AddGroup
   \   000026   7A..         MOV     R2,#SampleApp_Group & 0xff
   \   000028   7B..         MOV     R3,#(SampleApp_Group >> 8) & 0xff
   \   00002A   7914         MOV     R1,#0x14
   \   00002C   12....       LCALL   ??aps_AddGroup?relay
    694              }
    695            }
    696            //判断按键S2按下，发送数据到串口
    697            if ( keys & HAL_KEY_SW_6 )
   \                     ??SampleApp_HandleKeys_0:
   \   00002F   EF           MOV     A,R7
   \   000030   A2E5         MOV     C,0xE0 /* A   */.5
   \   000032   4003         JC      $+5
   \   000034   02....       LJMP    ??CrossCallReturnLabel_58 & 0xFFFF
    698            {
    699          //    int self_addr_10 = NLME_GetShortAddr();
    700          //    int neig_addr_10;
    701          //    uchar Self_ADDR[4]; //16进制地址格式
    702          //    uchar Neig_ADDR[4];
    703          //    uchar Num[2];
    704          
    705              //串口输出自身地址
    706          //    HalUARTWrite(0,"自身地址为: 0x",strlen("自身地址为: 0x"));
    707          //    if(self_addr_10 == 0)
    708          //    {
    709          //      HalUARTWrite(0,"0000",4);
    710          //      HalUARTWrite(0,"\n",1);
    711          //    }
    712          //    else
    713          //    {
    714          //      sprintf((char*)Self_ADDR, "%X", self_addr_10); //10进制整型转换成16进制字符串
    715          //
    716          //      for (int i=0;i<4;++i)
    717          //      {
    718          //        HalUARTWrite(0,&Self_ADDR[i],1);
    719          //      }
    720          //      HalUARTWrite(0,"\n",1);
    721          //    }
    722          
    723              //串口输出源数据
    724              HalUARTWrite(0,"\nsource_data: ",14);
   \   000037                ; Setup parameters for call to function HalUARTWrite
   \   000037   7C0E         MOV     R4,#0xe
   \   000039   7D00         MOV     R5,#0x0
   \   00003B   7A..         MOV     R2,#`?<Constant "\\nsource_data: ">` & 0xff
   \   00003D   7B..         MOV     R3,#(`?<Constant "\\nsource_data: ">` >> 8) & 0xff
   \   00003F   12....       LCALL   ??Subroutine67_0 & 0xFFFF
    725              Show_Bit(SOURCE_DATA,8);
   \                     ??CrossCallReturnLabel_131:
   \   000042   90....       MOV     DPTR,#SOURCE_DATA
   \   000045   12....       LCALL   ?Subroutine28 & 0xFFFF
    726              HalUARTWrite(0," ",1);
   \                     ??CrossCallReturnLabel_47:
   \   000048   7A..         MOV     R2,#`?<Constant " ">` & 0xff
   \   00004A   7B..         MOV     R3,#(`?<Constant " ">` >> 8) & 0xff
   \   00004C   7900         MOV     R1,#0x0
   \   00004E   12....       LCALL   ??HalUARTWrite?relay
    727              Show_Bit(Power_of_2(Device_ID),16);
   \   000051                ; Setup parameters for call to function Show_Bit
   \   000051                ; Setup parameters for call to function Power_of_2
   \   000051   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_50:
   \   000054   7410         MOV     A,#0x10
   \   000056   F9           MOV     R1,A
   \   000057   12....       LCALL   ?Subroutine37 & 0xFFFF
    728              HalUARTWrite(0,"\n",1);
   \                     ??CrossCallReturnLabel_60:
   \   00005A   7900         MOV     R1,#0x0
   \   00005C   12....       LCALL   ??HalUARTWrite?relay
    729          //
    730              for(int8 p=1;p<6;++p)
   \   00005F   7E01         MOV     R6,#0x1
    731              {
    732                Show_Num(p);
   \                     ??SampleApp_HandleKeys_2:
   \   000061                ; Setup parameters for call to function Show_Num
   \   000061   EE           MOV     A,R6
   \   000062   12....       LCALL   ?Subroutine33 & 0xFFFF
    733                HalUARTWrite(0,":",1);
    734                Show_Bit(DATA_SLOT[p].data, 8);
   \                     ??CrossCallReturnLabel_54:
   \   000065   EE           MOV     A,R6
   \   000066   F5..         MOV     ?V0 + 0,A
   \   000068   33           RLC     A
   \   000069   95E0         SUBB    A,0xE0 /* A   */
   \   00006B   F5..         MOV     ?V0 + 1,A
   \   00006D   7402         MOV     A,#0x2
   \   00006F   78..         MOV     R0,#?V0 + 0
   \   000071   12....       LCALL   ?S_SHL
   \   000074   74..         MOV     A,#DATA_SLOT & 0xff
   \   000076   25..         ADD     A,?V0 + 0
   \   000078   F5..         MOV     ?V0 + 0,A
   \   00007A   74..         MOV     A,#(DATA_SLOT >> 8) & 0xff
   \   00007C   35..         ADDC    A,?V0 + 1
   \   00007E   F5..         MOV     ?V0 + 1,A
   \   000080                ; Setup parameters for call to function Show_Bit
   \   000080   7908         MOV     R1,#0x8
   \   000082   85..82       MOV     DPL,?V0 + 0
   \   000085   F583         MOV     DPH,A
   \   000087   12....       LCALL   ?Subroutine27 & 0xFFFF
    735                HalUARTWrite(0," info:",6);
   \                     ??CrossCallReturnLabel_44:
   \   00008A                ; Setup parameters for call to function HalUARTWrite
   \   00008A   7C06         MOV     R4,#0x6
   \   00008C   7D00         MOV     R5,#0x0
   \   00008E   7A..         MOV     R2,#`?<Constant " info:">` & 0xff
   \   000090   7B..         MOV     R3,#(`?<Constant " info:">` >> 8) & 0xff
   \   000092   7900         MOV     R1,#0x0
   \   000094   12....       LCALL   ??HalUARTWrite?relay
    736                Show_Bit(DATA_SLOT[p].Degree_ID, 4);
   \   000097                ; Setup parameters for call to function Show_Bit
   \   000097   7904         MOV     R1,#0x4
   \   000099   85..82       MOV     DPL,?V0 + 0
   \   00009C   85..83       MOV     DPH,?V0 + 1
   \   00009F   A3           INC     DPTR
   \   0000A0   A3           INC     DPTR
   \   0000A1   12....       LCALL   ?Subroutine27 & 0xFFFF
    737                HalUARTWrite(0,"\n",1);
   \                     ??CrossCallReturnLabel_45:
   \   0000A4                ; Setup parameters for call to function HalUARTWrite
   \   0000A4   7C01         MOV     R4,#0x1
   \   0000A6   7D00         MOV     R5,#0x0
   \   0000A8   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   0000AA   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   0000AC   7900         MOV     R1,#0x0
   \   0000AE   12....       LCALL   ??HalUARTWrite?relay
    738              }
   \   0000B1   0E           INC     R6
   \   0000B2   EE           MOV     A,R6
   \   0000B3   C3           CLR     C
   \   0000B4   9406         SUBB    A,#0x6
   \   0000B6   A2D2         MOV     C,0xD0 /* PSW */.2
   \   0000B8   65D0         XRL     A,PSW
   \   0000BA   33           RLC     A
   \   0000BB   40A4         JC      ??SampleApp_HandleKeys_2
    739              
    740              //显示邻居个数
    741              uint8 nei_N = 0;
   \   0000BD   75..00       MOV     ?V0 + 0,#0x0
    742              for(uchar num_nei=0;num_nei<3;++num_nei)
   \   0000C0   7A00         MOV     R2,#0x0
    743              {
    744                if(Nei_Table[num_nei] != (int16)65534)
   \                     ??SampleApp_HandleKeys_3:
   \   0000C2   EA           MOV     A,R2
   \   0000C3   C3           CLR     C
   \   0000C4   33           RLC     A
   \   0000C5   F8           MOV     R0,A
   \   0000C6   E4           CLR     A
   \   0000C7   12....       LCALL   ??Subroutine60_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_99:
   \   0000CA   64FE         XRL     A,#0xfe
   \   0000CC   7003         JNZ     ??SampleApp_HandleKeys_4
   \   0000CE   A3           INC     DPTR
   \   0000CF   E0           MOVX    A,@DPTR
   \   0000D0   F4           CPL     A
   \                     ??SampleApp_HandleKeys_4:
   \   0000D1   6002         JZ      ??SampleApp_HandleKeys_5
    745                  nei_N++;
   \   0000D3   05..         INC     ?V0 + 0
    746              }
   \                     ??SampleApp_HandleKeys_5:
   \   0000D5   0A           INC     R2
   \   0000D6   EA           MOV     A,R2
   \   0000D7   C3           CLR     C
   \   0000D8   9403         SUBB    A,#0x3
   \   0000DA   40E6         JC      ??SampleApp_HandleKeys_3
    747              HalUARTWrite(0,"nei_num:",8);
   \   0000DC                ; Setup parameters for call to function HalUARTWrite
   \   0000DC   7C08         MOV     R4,#0x8
   \   0000DE   7D00         MOV     R5,#0x0
   \   0000E0   7A..         MOV     R2,#`?<Constant "nei_num:">` & 0xff
   \   0000E2   7B..         MOV     R3,#(`?<Constant "nei_num:">` >> 8) & 0xff
   \   0000E4   7900         MOV     R1,#0x0
   \   0000E6   12....       LCALL   ??HalUARTWrite?relay
    748              Show_Num(nei_N);
   \   0000E9                ; Setup parameters for call to function Show_Num
   \   0000E9   AA..         MOV     R2,?V0 + 0
   \   0000EB   7B00         MOV     R3,#0x0
   \   0000ED   12....       LCALL   ?Subroutine36 & 0xFFFF
    749              HalUARTWrite(0,"\n",1);
    750              
    751              //串口输出所有邻居地址
    752          //    for(int i=0;i<3;++i)
    753          //    {
    754          //      neig_addr_10 = Nei_Table[i];
    755          //
    756          //      sprintf((char*)Num, "%d", i+1);
    757          //      sprintf((char*)Neig_ADDR, "%X", neig_addr_10);
    758          //      HalUARTWrite(0,"邻居",strlen("邻居"));
    759          //      for (int j=0;j<2;++j)
    760          //      {
    761          //        HalUARTWrite(0,&Num[j],1);
    762          //      }
    763          //
    764          //      HalUARTWrite(0,": 0x",strlen(": 0x"));
    765          //
    766          //      if(neig_addr_10 == 0)
    767          //      {
    768          //        HalUARTWrite(0,"0000",4);
    769          //      }
    770          //      else
    771          //      {
    772          //        for (int j=0;j<4;++j)
    773          //        {
    774          //          HalUARTWrite(0,&Neig_ADDR[j],1);
    775          //        }
    776          //      }
    777          //      HalUARTWrite(0,"\n",1);
    778          //    }
    779          
    780          //    HalLedBlink( HAL_LED_3, 2,50, 500 ); //LED3 闪烁提示
    781            }
    782          }
   \                     ??CrossCallReturnLabel_58:
   \   0000F0   02....       LJMP    ??Subroutine71_0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine36:
   \   000000   12....       LCALL   ??Show_Num?relay
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003   7C01         MOV     R4,#0x1
   \   000005   7D00         MOV     R5,#0x0
   \   000007   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000009   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   00000B   7900         MOV     R1,#0x0
   \   00000D   12....       LCALL   ??HalUARTWrite?relay
   \   000010   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine33:
   \   000000   FA           MOV     R2,A
   \   000001   33           RLC     A
   \   000002   95E0         SUBB    A,0xE0 /* A   */
   \   000004   FB           MOV     R3,A
   \   000005   12....       LCALL   ??Show_Num?relay
   \   000008                ; Setup parameters for call to function HalUARTWrite
   \   000008                ; Setup parameters for call to function HalUARTWrite
   \   000008   7C01         MOV     R4,#0x1
   \   00000A   7D00         MOV     R5,#0x0
   \   00000C   7A..         MOV     R2,#`?<Constant ":">` & 0xff
   \   00000E   7B..         MOV     R3,#(`?<Constant ":">` >> 8) & 0xff
   \   000010   7900         MOV     R1,#0x0
   \   000012   12....       LCALL   ??HalUARTWrite?relay
   \   000015   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine27:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   FB           MOV     R3,A
   \   000005   12....       LCALL   ??Show_Bit?relay
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine37:
   \   000000   12....       LCALL   ?Subroutine54 & 0xFFFF
   \                     ??CrossCallReturnLabel_86:
   \   000003   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000005   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine54:
   \   000000   12....       LCALL   ??Show_Bit?relay
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003   7C01         MOV     R4,#0x1
   \   000005   7D00         MOV     R5,#0x0
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine52:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   7B00         MOV     R3,#0x0
   \   000004   12....       LCALL   ??Show_Bit?relay
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine28:
   \   000000   12....       LCALL   ?Subroutine52 & 0xFFFF
   \                     ??CrossCallReturnLabel_82:
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003   7C01         MOV     R4,#0x1
   \   000005   7D00         MOV     R5,#0x0
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine67_0:
   \   000000   12....       LCALL   ??Subroutine68_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_137:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine68_0:
   \   000000   7900         MOV     R1,#0x0
   \   000002   12....       LCALL   ??HalUARTWrite?relay
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005   7908         MOV     R1,#0x8
   \   000007   22           RET
    783          
    784          
    785          
    786          
    787          
    788          /*自行定义的 处理串口发来数据包 的函数*/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    789          void SampleApp_SerialCMD(mtOSALSerialData_t *cmdMsg)
   \                     SampleApp_SerialCMD:
    790          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
    791              uint8 i,len,*str=NULL; //len 有用数据长度
    792              str=cmdMsg->msg; //指向数据开头
   \   000005   8A82         MOV     DPL,R2
   \   000007   8B83         MOV     DPH,R3
   \   000009   A3           INC     DPTR
   \   00000A   A3           INC     DPTR
   \   00000B   E0           MOVX    A,@DPTR
   \   00000C   F5..         MOV     ?V0 + 0,A
   \   00000E   A3           INC     DPTR
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   F5..         MOV     ?V0 + 1,A
    793              len=*str; //msg 里的第 1 个字节代表后面的数据长度
   \   000012   85..82       MOV     DPL,?V0 + 0
   \   000015   F583         MOV     DPH,A
   \   000017   E0           MOVX    A,@DPTR
   \   000018   FE           MOV     R6,A
    794              /********打印出串口接收到的数据，用于提示*********/
    795              HalUARTWrite(0,">> ", 3);
   \   000019                ; Setup parameters for call to function HalUARTWrite
   \   000019   7C03         MOV     R4,#0x3
   \   00001B   7D00         MOV     R5,#0x0
   \   00001D   7A..         MOV     R2,#`?<Constant ">> ">` & 0xff
   \   00001F   7B..         MOV     R3,#(`?<Constant ">> ">` >> 8) & 0xff
   \   000021   7900         MOV     R1,#0x0
   \   000023   12....       LCALL   ??HalUARTWrite?relay
    796              for(i=1;i<=len;i++)
   \   000026   7F01         MOV     R7,#0x1
   \   000028   800D         SJMP    ??SampleApp_SerialCMD_0
    797              {
    798                HalUARTWrite(0,str+i,1);
   \                     ??SampleApp_SerialCMD_1:
   \   00002A                ; Setup parameters for call to function HalUARTWrite
   \   00002A   8F..         MOV     ?V0 + 2,R7
   \   00002C   E5..         MOV     A,?V0 + 0
   \   00002E   25..         ADD     A,?V0 + 2
   \   000030   FA           MOV     R2,A
   \   000031   E5..         MOV     A,?V0 + 1
   \   000033   12....       LCALL   ?Subroutine8 & 0xFFFF
    799              }
   \                     ??CrossCallReturnLabel_13:
   \   000036   0F           INC     R7
   \                     ??SampleApp_SerialCMD_0:
   \   000037   EE           MOV     A,R6
   \   000038   C3           CLR     C
   \   000039   9F           SUBB    A,R7
   \   00003A   7C01         MOV     R4,#0x1
   \   00003C   7D00         MOV     R5,#0x0
   \   00003E   50EA         JNC     ??SampleApp_SerialCMD_1
    800          
    801              HalUARTWrite(0,"\n",1 );//换行
   \   000040                ; Setup parameters for call to function HalUARTWrite
   \   000040   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000042   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   000044   7900         MOV     R1,#0x0
   \   000046   12....       LCALL   ??HalUARTWrite?relay
    802          
    803              if ( len == 2 && *(str+1) == 'k' && *(str+2) == '1')
   \   000049   7402         MOV     A,#0x2
   \   00004B   6E           XRL     A,R6
   \   00004C   707D         JNZ     ??SampleApp_SerialCMD_2
   \   00004E   85..82       MOV     DPL,?V0 + 0
   \   000051   85..83       MOV     DPH,?V0 + 1
   \   000054   A3           INC     DPTR
   \   000055   E0           MOVX    A,@DPTR
   \   000056   646B         XRL     A,#0x6b
   \   000058   7071         JNZ     ??SampleApp_SerialCMD_2
   \   00005A   85..82       MOV     DPL,?V0 + 0
   \   00005D   85..83       MOV     DPH,?V0 + 1
   \   000060   A3           INC     DPTR
   \   000061   A3           INC     DPTR
   \   000062   E0           MOVX    A,@DPTR
   \   000063   6431         XRL     A,#0x31
   \   000065   7064         JNZ     ??SampleApp_SerialCMD_2
    804              {
    805          //      HalUARTWrite(0,"\n0:",7);
    806          //      Show_Bit(SOURCE_DATA,8);
    807          //      HalUARTWrite(0,"\n",1);
    808                
    809                for(int8 p=0;p<1;++p)
   \   000067   75..00       MOV     ?V0 + 0,#0x0
    810                {
    811                  Show_Num(p);
   \                     ??SampleApp_SerialCMD_3:
   \   00006A                ; Setup parameters for call to function Show_Num
   \   00006A   E5..         MOV     A,?V0 + 0
   \   00006C   12....       LCALL   ?Subroutine33 & 0xFFFF
    812                  HalUARTWrite(0,":",1);
    813                  Show_Bit(DATA_SLOT[p].data, 8);
   \                     ??CrossCallReturnLabel_55:
   \   00006F   E5..         MOV     A,?V0 + 0
   \   000071   F5..         MOV     ?V0 + 2,A
   \   000073   33           RLC     A
   \   000074   95E0         SUBB    A,0xE0 /* A   */
   \   000076   F5..         MOV     ?V0 + 3,A
   \   000078   7402         MOV     A,#0x2
   \   00007A   78..         MOV     R0,#?V0 + 2
   \   00007C   12....       LCALL   ?S_SHL
   \   00007F   74..         MOV     A,#DATA_SLOT & 0xff
   \   000081   25..         ADD     A,?V0 + 2
   \   000083   FE           MOV     R6,A
   \   000084   74..         MOV     A,#(DATA_SLOT >> 8) & 0xff
   \   000086   35..         ADDC    A,?V0 + 3
   \   000088   FF           MOV     R7,A
   \   000089                ; Setup parameters for call to function Show_Bit
   \   000089   7908         MOV     R1,#0x8
   \   00008B   8E82         MOV     DPL,R6
   \   00008D   8F83         MOV     DPH,R7
   \   00008F   12....       LCALL   ?Subroutine27 & 0xFFFF
    814                  HalUARTWrite(0," >",2);
   \                     ??CrossCallReturnLabel_46:
   \   000092                ; Setup parameters for call to function HalUARTWrite
   \   000092   7C02         MOV     R4,#0x2
   \   000094   7D00         MOV     R5,#0x0
   \   000096   7A..         MOV     R2,#`?<Constant " >">` & 0xff
   \   000098   7B..         MOV     R3,#(`?<Constant " >">` >> 8) & 0xff
   \   00009A   7900         MOV     R1,#0x0
   \   00009C   12....       LCALL   ??HalUARTWrite?relay
    815                  Show_Bit(256, 16);
   \   00009F                ; Setup parameters for call to function Show_Bit
   \   00009F   7910         MOV     R1,#0x10
   \   0000A1   7A00         MOV     R2,#0x0
   \   0000A3   7B01         MOV     R3,#0x1
   \   0000A5   12....       LCALL   ?Subroutine54 & 0xFFFF
    816                  HalUARTWrite(0," ",1);
   \                     ??CrossCallReturnLabel_85:
   \   0000A8   7A..         MOV     R2,#`?<Constant " ">` & 0xff
   \   0000AA   7B..         MOV     R3,#(`?<Constant " ">` >> 8) & 0xff
   \   0000AC   7900         MOV     R1,#0x0
   \   0000AE   12....       LCALL   ??HalUARTWrite?relay
    817                  Show_Num(DATA_SLOT[p].Degree_ID);
   \   0000B1                ; Setup parameters for call to function Show_Num
   \   0000B1   8E82         MOV     DPL,R6
   \   0000B3   8F83         MOV     DPH,R7
   \   0000B5   A3           INC     DPTR
   \   0000B6   A3           INC     DPTR
   \   0000B7   12....       LCALL   ??Subroutine63_0 & 0xFFFF
    818                  HalUARTWrite(0,"\n",1);
    819                }
   \                     ??CrossCallReturnLabel_114:
   \   0000BA   12....       LCALL   ?Subroutine36 & 0xFFFF
   \                     ??CrossCallReturnLabel_59:
   \   0000BD   05..         INC     ?V0 + 0
   \   0000BF   E5..         MOV     A,?V0 + 0
   \   0000C1   C3           CLR     C
   \   0000C2   9401         SUBB    A,#0x1
   \   0000C4   A2D2         MOV     C,0xD0 /* PSW */.2
   \   0000C6   65D0         XRL     A,PSW
   \   0000C8   33           RLC     A
   \   0000C9   409F         JC      ??SampleApp_SerialCMD_3
    820              }
    821          
    822              //模拟异或操作
    823          //    int8 A[] = {'1','0','0','0','0','0','0','1'};
    824          //    unsigned char One = '1',Zero = '0';
    825          //    for (i=0;i<8;++i)
    826          //    {
    827          //      if(A[i]-*(str+i+1))
    828          //      {
    829          //        HalUARTWrite(0,&One,1);
    830          //        *(str+1+i) = One;
    831          //      }
    832          //      else
    833          //      {
    834          //        HalUARTWrite(0,&Zero,1);
    835          //        *(str+1+i) = Zero;
    836          //      }
    837          //
    838          //    }
    839          //
    840          
    841          }
   \                     ??SampleApp_SerialCMD_2:
   \   0000CB   02....       LJMP    ?Subroutine1 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine63_0:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   FB           MOV     R3,A
   \   000005   22           RET
    842          
    843          
    844          
    845          
    846          
    847          
    848          
    849          /*********************************************************************
    850           * LOCAL FUNCTIONS
    851           */
    852          
    853          /*********************************************************************
    854           * @fn      SampleApp_MessageMSGCB  接收函数
    855           *
    856           *          处理接收到的数据,可能是从其他设备收到的数据.
    857           *
    858           * @brief   Data message processor callback.  This function processes
    859           *          any incoming data - probably from other devices.  So, based
    860           *          on cluster ID, perform the intended action.
    861           * @param   none
    862           *
    863           * @return  none
    864           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    865          void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pkt )
   \                     SampleApp_MessageMSGCB:
    866          {
   \   000000   74EE         MOV     A,#-0x12
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 18
   \   000005                ; Auto size: 9
   \   000005   74F7         MOV     A,#-0x9
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    867            uint16 flashTime=1000;//一秒,1000ms
    868            uint8 i,len; //透传
    869            unsigned short neighbor_addr_10 = pkt->srcAddr.addr.shortAddr;  //发送方的数字地址
   \   00000E   8E82         MOV     DPL,R6
   \   000010   8F83         MOV     DPH,R7
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   A3           INC     DPTR
   \   000015   A3           INC     DPTR
   \   000016   A3           INC     DPTR
   \   000017   A3           INC     DPTR
   \   000018   E0           MOVX    A,@DPTR
   \   000019   F5..         MOV     ?V0 + 6,A
   \   00001B   A3           INC     DPTR
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   F5..         MOV     ?V0 + 7,A
    870          //  unsigned char ADDR[4]; //数字地址转换后的字符地址
    871            int8 LOST_nei = 0;
   \   00001F   75..00       MOV     ?V0 + 0,#0x0
    872            uchar active;
    873            
    874            uchar BUSY[4] = "####";
   \   000022   7405         MOV     A,#0x5
   \   000024   12....       LCALL   ?XSTACK_DISP0_8
   \   000027   AC82         MOV     R4,DPL
   \   000029   AD83         MOV     R5,DPH
   \   00002B   7583..       MOV     DPH,#(`?<Constant "####">` >> 8) & 0xff
   \   00002E   7582..       MOV     DPL,#`?<Constant "####">` & 0xff
   \   000031   7404         MOV     A,#0x4
   \   000033   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    875            uint8 Peer_data; //对方数据
    876            int16 Peer_info; //对方码字信息
    877            uint8 Self_data; //己方数据
    878            int16 Self_info; //己方码字信息
    879            int8 degree_low; //码字信息低位
    880            int8 degree_high;//码字信息高位
    881            uint16 Source_info = Power_of_2(Device_ID);
   \   000036                ; Setup parameters for call to function Power_of_2
   \   000036   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_51:
   \   000039   8A..         MOV     ?V0 + 8,R2
   \   00003B   8B..         MOV     ?V0 + 9,R3
    882            switch ( pkt->clusterId )
   \   00003D   8E82         MOV     DPL,R6
   \   00003F   8F83         MOV     DPH,R7
   \   000041   A3           INC     DPTR
   \   000042   A3           INC     DPTR
   \   000043   A3           INC     DPTR
   \   000044   A3           INC     DPTR
   \   000045   E0           MOVX    A,@DPTR
   \   000046   F5..         MOV     ?V0 + 2,A
   \   000048   A3           INC     DPTR
   \   000049   E0           MOVX    A,@DPTR
   \   00004A   F5..         MOV     ?V0 + 3,A
   \   00004C   78..         MOV     R0,#?V0 + 2
   \   00004E   12....       LCALL   ?US_SWITCH_DENSE
   \                     `?<Jumptable for SampleApp_MessageMSGCB>_0`:
   \   000051   0200         DW        2
   \   000053   02           DB        2
   \   000054   ....         DW        ??SampleApp_MessageMSGCB_0
   \   000056   ....         DW        ??SampleApp_MessageMSGCB_1
   \   000058   ....         DW        ??SampleApp_MessageMSGCB_2
   \   00005A   ....         DW        ??SampleApp_MessageMSGCB_3
    883            {
    884              
    885              /*************************收到 点对点 消息********************************/
    886            case SAMPLEAPP_POINT_TO_POINT_CLUSTERID:
    887              //收到重置信号
    888              if(pkt->cmd.Data[0] == '!')
   \                     ??SampleApp_MessageMSGCB_3:
   \   00005C   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_6:
   \   00005F   6421         XRL     A,#0x21
   \   000061   7010         JNZ     ??SampleApp_MessageMSGCB_4
    889              {
    890                HalUARTWrite(0,"重置中...",strlen("重置中..."));
   \   000063                ; Setup parameters for call to function HalUARTWrite
   \   000063   7C09         MOV     R4,#0x9
   \   000065   7D00         MOV     R5,#0x0
   \   000067   7A..         MOV     R2,#`?<Constant "\\326\\330\\326\\303\\326\\320...">` & 0xff
   \   000069   7B..         MOV     R3,#(`?<Constant "\\326\\330\\326\\303\\326\\320...">` >> 8) & 0xff
   \   00006B   7900         MOV     R1,#0x0
   \   00006D   12....       LCALL   ??HalUARTWrite?relay
    891                SystemResetSoft();
   \   000070                ; Setup parameters for call to function Onboard_soft_reset
   \   000070   12....       LCALL   Onboard_soft_reset & 0xFFFF
    892              }
    893              
    894              HalUARTWrite(0, "received  ", 10);  //给串口发送提示
   \                     ??SampleApp_MessageMSGCB_4:
   \   000073                ; Setup parameters for call to function HalUARTWrite
   \   000073   7C0A         MOV     R4,#0xa
   \   000075   7D00         MOV     R5,#0x0
   \   000077   7A..         MOV     R2,#`?<Constant "received  ">` & 0xff
   \   000079   7B..         MOV     R3,#(`?<Constant "received  ">` >> 8) & 0xff
   \   00007B   12....       LCALL   ?Subroutine19 & 0xFFFF
    895              HalUARTWrite(0, &pkt->cmd.Data[0], 1); // 打印收到数据
   \                     ??CrossCallReturnLabel_30:
   \   00007E   F5..         MOV     ?V0 + 1,A
   \   000080                ; Setup parameters for call to function HalUARTWrite
   \   000080   7C01         MOV     R4,#0x1
   \   000082   7D00         MOV     R5,#0x0
   \   000084   85..82       MOV     DPL,?V0 + 0
   \   000087   F583         MOV     DPH,A
   \   000089   12....       LCALL   ??Subroutine63_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_115:
   \   00008C   12....       LCALL   ??Subroutine67_0 & 0xFFFF
    896              
    897              Show_Bit(pkt->cmd.Data[1],8);
   \                     ??CrossCallReturnLabel_132:
   \   00008F   12....       LCALL   ?Subroutine48 & 0xFFFF
   \                     ??CrossCallReturnLabel_141:
   \   000092   12....       LCALL   ?Subroutine32 & 0xFFFF
    898              HalUARTWrite(0," ",1);
   \                     ??CrossCallReturnLabel_52:
   \   000095   75....       MOV     ?V0 + 2,#`?<Constant " ">` & 0xff
   \   000098   75....       MOV     ?V0 + 3,#(`?<Constant " ">` >> 8) & 0xff
   \   00009B                ; Setup parameters for call to function HalUARTWrite
   \   00009B   12....       LCALL   ?Subroutine14 & 0xFFFF
    899              Show_Bit(pkt->cmd.Data[2],8);
   \                     ??CrossCallReturnLabel_24:
   \   00009E   12....       LCALL   ?Subroutine32 & 0xFFFF
    900              HalUARTWrite(0," ",1);
   \                     ??CrossCallReturnLabel_53:
   \   0000A1                ; Setup parameters for call to function HalUARTWrite
   \   0000A1   12....       LCALL   ?Subroutine14 & 0xFFFF
    901              Show_Bit(pkt->cmd.Data[3],8);
   \                     ??CrossCallReturnLabel_25:
   \   0000A4   A3           INC     DPTR
   \   0000A5   12....       LCALL   ?Subroutine28 & 0xFFFF
    902              //    sprintf((char*)ADDR, "%X", neighbor_addr_10);
    903              //    HalUARTWrite(0," from ",6);
    904              //    HalUARTWrite(0,ADDR,4);
    905              HalUARTWrite(0, "\n", 1); // 回车换行
   \                     ??CrossCallReturnLabel_48:
   \   0000A8   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   0000AA   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   0000AC   7900         MOV     R1,#0x0
   \   0000AE   12....       LCALL   ??HalUARTWrite?relay
    906              
    907              /*如果在自身已经发起交换请求的情况下,收到对方发来的交换数据包响应*/
    908              if(Waiting_Request && (neighbor_addr_10 == Exchanging_Neighbor)) 
   \   0000B1   90....       MOV     DPTR,#Waiting_Request
   \   0000B4   E0           MOVX    A,@DPTR
   \   0000B5   7003         JNZ     $+5
   \   0000B7   02....       LJMP    ??SampleApp_MessageMSGCB_5 & 0xFFFF
   \   0000BA   90....       MOV     DPTR,#Exchanging_Neighbor
   \   0000BD   E0           MOVX    A,@DPTR
   \   0000BE   65..         XRL     A,?V0 + 6
   \   0000C0   7004         JNZ     ??SampleApp_MessageMSGCB_6
   \   0000C2   A3           INC     DPTR
   \   0000C3   E0           MOVX    A,@DPTR
   \   0000C4   65..         XRL     A,?V0 + 7
   \                     ??SampleApp_MessageMSGCB_6:
   \   0000C6   6003         JZ      $+5
   \   0000C8   02....       LJMP    ??SampleApp_MessageMSGCB_7 & 0xFFFF
    909              {
    910                /*对方正忙*/
    911                if(pkt->cmd.Data[0] == '#' && pkt->cmd.Data[1] == '#' && pkt->cmd.Data[2] == '#' && pkt->cmd.Data[3] == '#')
   \   0000CB   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   0000CE   6423         XRL     A,#0x23
   \   0000D0   702C         JNZ     ??CrossCallReturnLabel_28
   \   0000D2   12....       LCALL   ?Subroutine39 & 0xFFFF
   \                     ??CrossCallReturnLabel_64:
   \   0000D5   12....       LCALL   ??Subroutine69_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_139:
   \   0000D8   E0           MOVX    A,@DPTR
   \   0000D9   6423         XRL     A,#0x23
   \   0000DB   7021         JNZ     ??CrossCallReturnLabel_28
   \   0000DD   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_10:
   \   0000E0   E0           MOVX    A,@DPTR
   \   0000E1   6423         XRL     A,#0x23
   \   0000E3   7019         JNZ     ??CrossCallReturnLabel_28
   \   0000E5   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_11:
   \   0000E8   A3           INC     DPTR
   \   0000E9   E0           MOVX    A,@DPTR
   \   0000EA   6423         XRL     A,#0x23
   \   0000EC   7010         JNZ     ??CrossCallReturnLabel_28
    912                {
    913                  Waiting_Request = FALSE;
   \   0000EE   90....       MOV     DPTR,#Waiting_Request
   \   0000F1   E4           CLR     A
   \   0000F2   F0           MOVX    @DPTR,A
    914                  HalUARTWrite(0,"peer is busy",12);
   \   0000F3                ; Setup parameters for call to function HalUARTWrite
   \   0000F3   7C0C         MOV     R4,#0xc
   \   0000F5   FD           MOV     R5,A
   \   0000F6   7A..         MOV     R2,#`?<Constant "peer is busy">` & 0xff
   \   0000F8   7B..         MOV     R3,#(`?<Constant "peer is busy">` >> 8) & 0xff
   \   0000FA   F9           MOV     R1,A
   \   0000FB   12....       LCALL   ?Subroutine17 & 0xFFFF
    915                  HalUARTWrite(0,"\n",1);
    916                  //        SampleApp_SendPointToPointMessage(); //再次发起交换请求
    917                }
    918                /*对方正常响应*/
    919                if(!Exchange_Lock && (pkt->cmd.Data[0] == '$'))
   \                     ??CrossCallReturnLabel_28:
   \   0000FE   90....       MOV     DPTR,#Exchange_Lock
   \   000101   E0           MOVX    A,@DPTR
   \   000102   6003         JZ      $+5
   \   000104   02....       LJMP    ??SampleApp_MessageMSGCB_8 & 0xFFFF
   \   000107   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   00010A   6424         XRL     A,#0x24
   \   00010C   6003         JZ      $+5
   \   00010E   02....       LJMP    ??SampleApp_MessageMSGCB_8 & 0xFFFF
    920                {
    921                  Exchange_Lock = TRUE; //开启码字槽的锁
   \   000111   90....       MOV     DPTR,#Exchange_Lock
   \   000114   7401         MOV     A,#0x1
   \   000116   F0           MOVX    @DPTR,A
    922                  
    923                  Peer_data = pkt->cmd.Data[1]; //对方发来的数据
   \   000117   85..82       MOV     DPL,?V0 + 0
   \   00011A   85..83       MOV     DPH,?V0 + 1
   \   00011D   12....       LCALL   ?Subroutine24 & 0xFFFF
    924                  Peer_info = pkt->cmd.Data[3]; 
    925                  Peer_info |= pkt->cmd.Data[2]*256; //对方码字信息
    926                  //查看发来的数据包的度
    927                  uint8 Peer_degree = 0;
    928                  uint8 Self_included = FALSE;
    929                  for(short k=0;k<16;++k)
    930                  {
    931                    if(Power_of_2(k) & Peer_info)
   \                     ??CrossCallReturnLabel_40:
   \   000120                ; Setup parameters for call to function Power_of_2
   \   000120   12....       LCALL   ?Subroutine35 & 0xFFFF
   \                     ??CrossCallReturnLabel_56:
   \   000123   601E         JZ      ??SampleApp_MessageMSGCB_9
    932                    {
    933                      ++Peer_degree;
   \   000125   05..         INC     ?V0 + 4
    934                      if(k == Device_ID)
   \   000127   90....       MOV     DPTR,#Device_ID
   \   00012A   E0           MOVX    A,@DPTR
   \   00012B   65..         XRL     A,?V0 + 0
   \   00012D   7002         JNZ     ??SampleApp_MessageMSGCB_10
   \   00012F   E5..         MOV     A,?V0 + 1
   \                     ??SampleApp_MessageMSGCB_10:
   \   000131   7010         JNZ     ??SampleApp_MessageMSGCB_9
    935                      {
    936                        Self_included = TRUE; //码字包含自身的节点数据包
   \   000133   75..01       MOV     ?V0 + 2,#0x1
    937                        HalUARTWrite(0,"包含自身信息",12);
   \   000136                ; Setup parameters for call to function HalUARTWrite
   \   000136   7C0C         MOV     R4,#0xc
   \   000138   7D00         MOV     R5,#0x0
   \   00013A   7A..         MOV     R2,#`?<Constant "\\260\\374\\272\\254\\327\\324\\311\\355\\3` & 0xff
   \   00013C   7B..         MOV     R3,#(`?<Constant "\\260\\374\\272\\254\\327\\324\\311\\355\\3` >> 8) & 0xff
   \   00013E   7900         MOV     R1,#0x0
   \   000140   12....       LCALL   ??HalUARTWrite?relay
    938                      }
    939                      
    940                    }
    941                  }
   \                     ??SampleApp_MessageMSGCB_9:
   \   000143   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_2:
   \   000146   40D8         JC      ??CrossCallReturnLabel_40
    942                  if(Peer_degree>=MAX_Degree)
   \   000148   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_121:
   \   00014B   401D         JC      ??SampleApp_MessageMSGCB_11
    943                  {
    944                    if(Self_included)
   \   00014D   E5..         MOV     A,?V0 + 2
   \   00014F   A2E0         MOV     C,0xE0 /* A   */.0
   \   000151   500D         JNC     ??SampleApp_MessageMSGCB_12
    945                      HalUARTWrite(0,"且",2);
   \   000153                ; Setup parameters for call to function HalUARTWrite
   \   000153   7C02         MOV     R4,#0x2
   \   000155   7D00         MOV     R5,#0x0
   \   000157   7A..         MOV     R2,#`?<Constant "\\307\\322">` & 0xff
   \   000159   7B..         MOV     R3,#(`?<Constant "\\307\\322">` >> 8) & 0xff
   \   00015B   7900         MOV     R1,#0x0
   \   00015D   12....       LCALL   ??HalUARTWrite?relay
    946                    HalUARTWrite(0,"已达最大度,",11);
   \                     ??SampleApp_MessageMSGCB_12:
   \   000160                ; Setup parameters for call to function HalUARTWrite
   \   000160   7C0B         MOV     R4,#0xb
   \   000162   7D00         MOV     R5,#0x0
   \   000164   7A..         MOV     R2,#`?<Constant "\\322\\321\\264\\357\\327\\356\\264\\363\\2` & 0xff
   \   000166   7B..         MOV     R3,#(`?<Constant "\\322\\321\\264\\357\\327\\356\\264\\363\\2` >> 8) & 0xff
   \   000168   8008         SJMP    ??SampleApp_MessageMSGCB_13
    947                  }
    948                  else
    949                  {
    950                    HalUARTWrite(0,",",1);
   \                     ??SampleApp_MessageMSGCB_11:
   \   00016A                ; Setup parameters for call to function HalUARTWrite
   \   00016A   7C01         MOV     R4,#0x1
   \   00016C   7D00         MOV     R5,#0x0
   \   00016E   7A..         MOV     R2,#`?<Constant ",">` & 0xff
   \   000170   7B..         MOV     R3,#(`?<Constant ",">` >> 8) & 0xff
   \                     ??SampleApp_MessageMSGCB_13:
   \   000172   7900         MOV     R1,#0x0
   \   000174   12....       LCALL   ??HalUARTWrite?relay
    951                  }
    952                  //判断是否符合编码条件,不包含自身的数据包,且度不大于最大允许的度
    953                  if( !Self_included && (Peer_degree < MAX_Degree) )
   \   000177   E5..         MOV     A,?V0 + 2
   \   000179   A2E0         MOV     C,0xE0 /* A   */.0
   \   00017B   400D         JC      ??SampleApp_MessageMSGCB_14
   \   00017D   12....       LCALL   ??Subroutine64_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_119:
   \   000180   5008         JNC     ??SampleApp_MessageMSGCB_14
    954                  {
    955                    HalUARTWrite(0,"encoding...\n^^",14);
   \   000182                ; Setup parameters for call to function HalUARTWrite
   \   000182   12....       LCALL   ?Subroutine13 & 0xFFFF
    956          //          Show_Bit(Peer_data,8);          //对方数据
    957          //          HalUARTWrite(0,"\n^^",3);
    958          //          Show_Bit(DATA_SLOT[0].data,8);  //自身数据
    959          //          
    960          //          HalUARTWrite(0,"\n->",3);
    961          //          Peer_data ^= DATA_SLOT[0].data; //异或编码
    962          //          
    963          //          Show_Bit(Peer_data, 8);         //编码后数据
    964                    
    965                    HalUARTWrite(0,"\n||",3);
    966                    Show_Bit(Peer_info,8);
    967                    HalUARTWrite(0," ",1);
    968                    Show_Num(Peer_info);          //对方码字信息
    969                    
    970                    HalUARTWrite(0,"\n||",3);
    971                    Show_Bit(Source_info,8);  //**
    972                    HalUARTWrite(0," ",1);
    973                    Show_Num(Source_info);         //自身码字信息
    974                    
    975                    HalUARTWrite(0,"\n->",3);      
    976                    Peer_info |= Source_info; //码字信息中添加自身的设备ID
    977                    Show_Bit(Peer_info,8);   //**
    978                    HalUARTWrite(0," ",1);
    979                    Show_Num(Peer_info);          //融合后码字信息
    980                    HalUARTWrite(0,"\n",1);
    981                  }
   \                     ??CrossCallReturnLabel_22:
   \   000185                ; Setup parameters for call to function HalUARTWrite
   \   000185   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_16:
   \   000188   8008         SJMP    ??SampleApp_MessageMSGCB_15
    982                  else
    983                  {
    984                    HalUARTWrite(0,"未编码.\n",8);
   \                     ??SampleApp_MessageMSGCB_14:
   \   00018A                ; Setup parameters for call to function HalUARTWrite
   \   00018A   7C08         MOV     R4,#0x8
   \   00018C   7D00         MOV     R5,#0x0
   \   00018E   7A..         MOV     R2,#`?<Constant "\\316\\264\\261\\340\\302\\353.\\n">` & 0xff
   \   000190   7B..         MOV     R3,#(`?<Constant "\\316\\264\\261\\340\\302\\353.\\n">` >> 8) & 0xff
    985                    
    986                  }
   \                     ??SampleApp_MessageMSGCB_15:
   \   000192   12....       LCALL   ?Subroutine11 & 0xFFFF
    987                  
    988                  HalUARTWrite(0,"peer_degree = ",14);
    989                  Show_Num(Peer_degree);
    990                  HalUARTWrite(0,"\n\n",2);     
    991                  DATA_SLOT[Exchange_index].data = Peer_data; //对应位置替换为对方的码字
   \                     ??CrossCallReturnLabel_18:
   \   000195   12....       LCALL   ?S_SHL
   \   000198   12....       LCALL   ?Subroutine20 & 0xFFFF
    992                  DATA_SLOT[Exchange_index].Degree_ID = Peer_info; //记录码字信息
    993                  
    994                  Waiting_Request = FALSE; //关闭等待回复状态
   \                     ??CrossCallReturnLabel_32:
   \   00019B   90....       MOV     DPTR,#Waiting_Request
   \   00019E   E4           CLR     A
   \   00019F   F0           MOVX    @DPTR,A
    995                  Exchange_Lock = FALSE; //关闭码字槽的锁
   \   0001A0   90....       MOV     DPTR,#Exchange_Lock
   \   0001A3   02....       LJMP    ??SampleApp_MessageMSGCB_16 & 0xFFFF
    996                }
    997                
    998                
    999                
   1000                
   1001                
   1002              }
   \                     ??SampleApp_MessageMSGCB_7:
   \   0001A6   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_4:
   \   0001A9   6003         JZ      $+5
   \   0001AB   02....       LJMP    ??SampleApp_MessageMSGCB_8 & 0xFFFF
   1003              
   1004              /*在等待对方返回交换数据包的过程中收到其他节点的交换请求*/
   1005              else if(Waiting_Request && (neighbor_addr_10 != Exchanging_Neighbor) && (pkt->cmd.Data[0] == '*')) 
   1006              {
   1007                /*返回正忙信号 "####" */ 
   1008                Point_To_Point_DstAddr.addr.shortAddr = neighbor_addr_10;
   \   0001AE   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   0001B1   E5..         MOV     A,?V0 + 6
   \   0001B3   F0           MOVX    @DPTR,A
   \   0001B4   A3           INC     DPTR
   \   0001B5   E5..         MOV     A,?V0 + 7
   \   0001B7   F0           MOVX    @DPTR,A
   1009                if(AF_DataRequest( &Point_To_Point_DstAddr, //点对点通信方式目标地址
   1010                                  &SampleApp_epDesc,
   1011                                  SAMPLEAPP_POINT_TO_POINT_CLUSTERID, //点对点簇ID
   1012                                  4,
   1013                                  BUSY,
   1014                                  &SampleApp_TransID,
   1015                                  AF_DISCV_ROUTE,
   1016                                  AF_DEFAULT_RADIUS )== afStatus_SUCCESS )
   \   0001B8                ; Setup parameters for call to function AF_DataRequest
   \   0001B8   75..1E       MOV     ?V0 + 0,#0x1e
   \   0001BB   78..         MOV     R0,#?V0 + 0
   \   0001BD   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001C0   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   0001C3   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   0001C6   78..         MOV     R0,#?V0 + 0
   \   0001C8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001CB   7408         MOV     A,#0x8
   \   0001CD   12....       LCALL   ?XSTACK_DISP0_8
   \   0001D0   8582..       MOV     ?V0 + 0,DPL
   \   0001D3   8583..       MOV     ?V0 + 1,DPH
   \   0001D6   78..         MOV     R0,#?V0 + 0
   \   0001D8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001DB   75..04       MOV     ?V0 + 0,#0x4
   \   0001DE   75..00       MOV     ?V0 + 1,#0x0
   \   0001E1   78..         MOV     R0,#?V0 + 0
   \   0001E3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001E6   78..         MOV     R0,#?V0 + 0
   \   0001E8   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001EB   12....       LCALL   ?Subroutine34 & 0xFFFF
   \                     ??CrossCallReturnLabel_104:
   \   0001EE   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001F1   E9           MOV     A,R1
   \   0001F2   6003         JZ      $+5
   \   0001F4   02....       LJMP    ??SampleApp_MessageMSGCB_8 & 0xFFFF
   1017                {
   1018                  HalUARTWrite(0,"i am busy!\n",strlen("i am busy!\n"));
   \   0001F7                ; Setup parameters for call to function HalUARTWrite
   \   0001F7   7C0B         MOV     R4,#0xb
   \   0001F9   7D00         MOV     R5,#0x0
   \   0001FB   7A..         MOV     R2,#`?<Constant "i am busy!\\n">` & 0xff
   \   0001FD   7B..         MOV     R3,#(`?<Constant "i am busy!\\n">` >> 8) & 0xff
   \   0001FF   7900         MOV     R1,#0x0
   \   000201   12....       LCALL   ??HalUARTWrite?relay
   \   000204   02....       LJMP    ??SampleApp_MessageMSGCB_8 & 0xFFFF
   1019                }
   1020                else
   1021                {
   1022                }
   1023                
   1024                
   1025              }
   1026              
   1027              /*如果收到对方发来的交换数据包请求*/
   1028              else if(!Waiting_Request && !Exchange_Lock && (pkt->cmd.Data[0] == '*'))
   \                     ??SampleApp_MessageMSGCB_5:
   \   000207   90....       MOV     DPTR,#Exchange_Lock
   \   00020A   E0           MOVX    A,@DPTR
   \   00020B   6003         JZ      $+5
   \   00020D   02....       LJMP    ??SampleApp_MessageMSGCB_8 & 0xFFFF
   \   000210   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_5:
   \   000213   6003         JZ      $+5
   \   000215   02....       LJMP    ??SampleApp_MessageMSGCB_8 & 0xFFFF
   1029              {
   1030                Exchange_Lock = TRUE; //开启码字槽的锁
   \   000218   90....       MOV     DPTR,#Exchange_Lock
   \   00021B   7401         MOV     A,#0x1
   \   00021D   F0           MOVX    @DPTR,A
   1031                /*挑选自身随机的数据包发送给对方*/
   1032                srand((int)osal_getClock());
   \   00021E                ; Setup parameters for call to function srand
   \   00021E                ; Setup parameters for call to function osal_getClock
   \   00021E   12....       LCALL   ??osal_getClock?relay
   \   000221   12....       LCALL   ??srand?relay
   1033                Exchange_index = random(5)+1;//挑选随机交换码字
   \   000224                ; Setup parameters for call to function rand
   \   000224   12....       LCALL   ?Subroutine38 & 0xFFFF
   \                     ??CrossCallReturnLabel_62:
   \   000227   12....       LCALL   ?S_DIV_MOD
   \   00022A   EA           MOV     A,R2
   \   00022B   04           INC     A
   \   00022C   90....       MOV     DPTR,#Exchange_index
   \   00022F   F0           MOVX    @DPTR,A
   1034                Self_data = DATA_SLOT[Exchange_index].data; //即将交换的码字
   \   000230   F5..         MOV     ?V0 + 0,A
   \   000232   75..00       MOV     ?V0 + 1,#0x0
   \   000235   7402         MOV     A,#0x2
   \   000237   78..         MOV     R0,#?V0 + 0
   \   000239   12....       LCALL   ?S_SHL
   \   00023C   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_34:
   \   00023F   F5..         MOV     ?V0 + 0,A
   1035                Self_info = DATA_SLOT[Exchange_index].Degree_ID; //码字信息
   \   000241   A3           INC     DPTR
   \   000242   A3           INC     DPTR
   \   000243   E0           MOVX    A,@DPTR
   \   000244   F5..         MOV     ?V0 + 2,A
   \   000246   A3           INC     DPTR
   \   000247   E0           MOVX    A,@DPTR
   \   000248   F5..         MOV     ?V0 + 3,A
   1036                degree_low = (uint8)Self_info;
   \   00024A   E5..         MOV     A,?V0 + 2
   \   00024C   F5..         MOV     ?V0 + 4,A
   1037                degree_high = (uint8)(Self_info>>8);  //此处不加括号会出错
   \   00024E   7408         MOV     A,#0x8
   \   000250   78..         MOV     R0,#?V0 + 2
   \   000252   12....       LCALL   ?SS_SHR
   \   000255   E5..         MOV     A,?V0 + 2
   \   000257   F5..         MOV     ?V0 + 1,A
   1038                
   1039                //发送
   1040                uint8 _DATA[4] = {'$', Self_data, degree_high, degree_low};
   \   000259   7401         MOV     A,#0x1
   \   00025B   12....       LCALL   ?XSTACK_DISP0_8
   \   00025E   AC82         MOV     R4,DPL
   \   000260   AD83         MOV     R5,DPH
   \   000262   7583..       MOV     DPH,#(`?<Constant {36, 0, 0, 0}>` >> 8) & 0xff
   \   000265   7582..       MOV     DPL,#`?<Constant {36, 0, 0, 0}>` & 0xff
   \   000268   7404         MOV     A,#0x4
   \   00026A   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   \   00026D   7402         MOV     A,#0x2
   \   00026F   12....       LCALL   ?XSTACK_DISP0_8
   \   000272   E5..         MOV     A,?V0 + 0
   \   000274   F0           MOVX    @DPTR,A
   \   000275   7403         MOV     A,#0x3
   \   000277   12....       LCALL   ?XSTACK_DISP0_8
   \   00027A   E5..         MOV     A,?V0 + 1
   \   00027C   F0           MOVX    @DPTR,A
   \   00027D   7404         MOV     A,#0x4
   \   00027F   12....       LCALL   ?XSTACK_DISP0_8
   \   000282   E5..         MOV     A,?V0 + 4
   \   000284   F0           MOVX    @DPTR,A
   1041                Point_To_Point_DstAddr.addr.shortAddr = neighbor_addr_10;
   \   000285   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   000288   E5..         MOV     A,?V0 + 6
   \   00028A   F0           MOVX    @DPTR,A
   \   00028B   A3           INC     DPTR
   \   00028C   E5..         MOV     A,?V0 + 7
   \   00028E   F0           MOVX    @DPTR,A
   1042                if(AF_DataRequest( &Point_To_Point_DstAddr, //点对点通信方式目标地址
   1043                                  &SampleApp_epDesc,
   1044                                  SAMPLEAPP_POINT_TO_POINT_CLUSTERID, //点对点簇ID
   1045                                  4,
   1046                                  _DATA,
   1047                                  &SampleApp_TransID,
   1048                                  AF_DISCV_ROUTE,
   1049                                  AF_DEFAULT_RADIUS )== afStatus_SUCCESS )
   \   00028F                ; Setup parameters for call to function AF_DataRequest
   \   00028F   75..1E       MOV     ?V0 + 2,#0x1e
   \   000292   78..         MOV     R0,#?V0 + 2
   \   000294   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000297   75....       MOV     ?V0 + 2,#SampleApp_TransID & 0xff
   \   00029A   75....       MOV     ?V0 + 3,#(SampleApp_TransID >> 8) & 0xff
   \   00029D   78..         MOV     R0,#?V0 + 2
   \   00029F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0002A2   7404         MOV     A,#0x4
   \   0002A4   12....       LCALL   ?XSTACK_DISP0_8
   \   0002A7   8582..       MOV     ?V0 + 2,DPL
   \   0002AA   8583..       MOV     ?V0 + 3,DPH
   \   0002AD   78..         MOV     R0,#?V0 + 2
   \   0002AF   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0002B2   75..04       MOV     ?V0 + 2,#0x4
   \   0002B5   75..00       MOV     ?V0 + 3,#0x0
   \   0002B8   78..         MOV     R0,#?V0 + 2
   \   0002BA   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0002BD   78..         MOV     R0,#?V0 + 2
   \   0002BF   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0002C2   12....       LCALL   ?Subroutine34 & 0xFFFF
   \                     ??CrossCallReturnLabel_105:
   \   0002C5   12....       LCALL   ?DEALLOC_XSTACK8
   \   0002C8   E9           MOV     A,R1
   \   0002C9   702C         JNZ     ??SampleApp_MessageMSGCB_17
   1050                {
   1051                  HalUARTWrite(0,"send back $",11);
   \   0002CB                ; Setup parameters for call to function HalUARTWrite
   \   0002CB   7C0B         MOV     R4,#0xb
   \   0002CD   7D00         MOV     R5,#0x0
   \   0002CF   7A..         MOV     R2,#`?<Constant "send back $">` & 0xff
   \   0002D1   7B..         MOV     R3,#(`?<Constant "send back $">` >> 8) & 0xff
   \   0002D3   12....       LCALL   ??Subroutine67_0 & 0xFFFF
   1052                  Show_Bit(Self_data,8);
   \                     ??CrossCallReturnLabel_133:
   \   0002D6   85....       MOV     ?V0 + 2,?V0 + 0
   \   0002D9   AA..         MOV     R2,?V0 + 2
   \   0002DB   12....       LCALL   ?Subroutine16 & 0xFFFF
   1053                  HalUARTWrite(0," ",1);
   1054                  Show_Bit(degree_high,8);
   \                     ??CrossCallReturnLabel_127:
   \   0002DE   E5..         MOV     A,?V0 + 1
   \   0002E0   FA           MOV     R2,A
   \   0002E1   33           RLC     A
   \   0002E2   95E0         SUBB    A,0xE0 /* A   */
   \   0002E4   FB           MOV     R3,A
   \   0002E5   12....       LCALL   ??Show_Bit?relay
   1055                  HalUARTWrite(0," ",1);
   \   0002E8                ; Setup parameters for call to function HalUARTWrite
   \   0002E8   12....       LCALL   ??Subroutine66_0 & 0xFFFF
   1056                  Show_Bit(degree_low,8);
   1057                  HalUARTWrite(0,"\n",1);
   1058                }
   \                     ??CrossCallReturnLabel_129:
   \   0002EB   E5..         MOV     A,?V0 + 4
   \   0002ED   FA           MOV     R2,A
   \   0002EE   33           RLC     A
   \   0002EF   95E0         SUBB    A,0xE0 /* A   */
   \   0002F1   FB           MOV     R3,A
   \   0002F2   12....       LCALL   ?Subroutine37 & 0xFFFF
   \                     ??CrossCallReturnLabel_61:
   \   0002F5   8008         SJMP    ??SampleApp_MessageMSGCB_18
   1059                else
   1060                {
   1061                  HalUARTWrite(0,"failed to send back\n",20);
   \                     ??SampleApp_MessageMSGCB_17:
   \   0002F7                ; Setup parameters for call to function HalUARTWrite
   \   0002F7   7C14         MOV     R4,#0x14
   \   0002F9   7D00         MOV     R5,#0x0
   \   0002FB   7A..         MOV     R2,#`?<Constant "failed to send back\\n">` & 0xff
   \   0002FD   7B..         MOV     R3,#(`?<Constant "failed to send back\\n">` >> 8) & 0xff
   1062                }
   \                     ??SampleApp_MessageMSGCB_18:
   \   0002FF   12....       LCALL   ?Subroutine19 & 0xFFFF
   1063                
   1064                /*将对方发来的数据包和自身随机挑选的数据包编码 <先判断是否需要编码> */
   1065                Peer_data = pkt->cmd.Data[1]; //对方发来的数据
   \                     ??CrossCallReturnLabel_31:
   \   000302   85..82       MOV     DPL,?V0 + 0
   \   000305   F583         MOV     DPH,A
   \   000307   12....       LCALL   ?Subroutine24 & 0xFFFF
   1066                Peer_info = pkt->cmd.Data[3];
   1067                Peer_info |= pkt->cmd.Data[2]*256; //对方码字信息
   1068                //查看发来的数据包的度
   1069                uint8 Peer_degree = 0;
   1070                uint8 Self_included = FALSE;
   1071                for(short k=0;k<16;++k)
   1072                  {
   1073                    if(Power_of_2(k) & Peer_info)
   \                     ??CrossCallReturnLabel_41:
   \   00030A                ; Setup parameters for call to function Power_of_2
   \   00030A   12....       LCALL   ?Subroutine35 & 0xFFFF
   \                     ??CrossCallReturnLabel_57:
   \   00030D   601E         JZ      ??SampleApp_MessageMSGCB_19
   1074                    {
   1075                      ++Peer_degree;
   \   00030F   05..         INC     ?V0 + 4
   1076                      if(k == Device_ID)
   \   000311   90....       MOV     DPTR,#Device_ID
   \   000314   E0           MOVX    A,@DPTR
   \   000315   65..         XRL     A,?V0 + 0
   \   000317   7002         JNZ     ??SampleApp_MessageMSGCB_20
   \   000319   E5..         MOV     A,?V0 + 1
   \                     ??SampleApp_MessageMSGCB_20:
   \   00031B   7010         JNZ     ??SampleApp_MessageMSGCB_19
   1077                      {
   1078                        Self_included = TRUE; //码字包含自身的节点数据包
   \   00031D   75..01       MOV     ?V0 + 2,#0x1
   1079                        HalUARTWrite(0,"包含自身信息",12);
   \   000320                ; Setup parameters for call to function HalUARTWrite
   \   000320   7C0C         MOV     R4,#0xc
   \   000322   7D00         MOV     R5,#0x0
   \   000324   7A..         MOV     R2,#`?<Constant "\\260\\374\\272\\254\\327\\324\\311\\355\\3` & 0xff
   \   000326   7B..         MOV     R3,#(`?<Constant "\\260\\374\\272\\254\\327\\324\\311\\355\\3` >> 8) & 0xff
   \   000328   7900         MOV     R1,#0x0
   \   00032A   12....       LCALL   ??HalUARTWrite?relay
   1080                      }
   1081                      
   1082                    }
   1083                  }
   \                     ??SampleApp_MessageMSGCB_19:
   \   00032D   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_3:
   \   000330   40D8         JC      ??CrossCallReturnLabel_41
   1084                  if(Peer_degree>=MAX_Degree)
   \   000332   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_122:
   \   000335   401D         JC      ??SampleApp_MessageMSGCB_21
   1085                  {
   1086                    if(Self_included)
   \   000337   E5..         MOV     A,?V0 + 2
   \   000339   A2E0         MOV     C,0xE0 /* A   */.0
   \   00033B   500D         JNC     ??SampleApp_MessageMSGCB_22
   1087                      HalUARTWrite(0,"且",2);
   \   00033D                ; Setup parameters for call to function HalUARTWrite
   \   00033D   7C02         MOV     R4,#0x2
   \   00033F   7D00         MOV     R5,#0x0
   \   000341   7A..         MOV     R2,#`?<Constant "\\307\\322">` & 0xff
   \   000343   7B..         MOV     R3,#(`?<Constant "\\307\\322">` >> 8) & 0xff
   \   000345   7900         MOV     R1,#0x0
   \   000347   12....       LCALL   ??HalUARTWrite?relay
   1088                    HalUARTWrite(0,"已达最大度,",11);
   \                     ??SampleApp_MessageMSGCB_22:
   \   00034A                ; Setup parameters for call to function HalUARTWrite
   \   00034A   7C0B         MOV     R4,#0xb
   \   00034C   7D00         MOV     R5,#0x0
   \   00034E   7A..         MOV     R2,#`?<Constant "\\322\\321\\264\\357\\327\\356\\264\\363\\2` & 0xff
   \   000350   7B..         MOV     R3,#(`?<Constant "\\322\\321\\264\\357\\327\\356\\264\\363\\2` >> 8) & 0xff
   \   000352   8008         SJMP    ??SampleApp_MessageMSGCB_23
   1089                  }
   1090                  else
   1091                  {
   1092                    HalUARTWrite(0,",",1);
   \                     ??SampleApp_MessageMSGCB_21:
   \   000354                ; Setup parameters for call to function HalUARTWrite
   \   000354   7C01         MOV     R4,#0x1
   \   000356   7D00         MOV     R5,#0x0
   \   000358   7A..         MOV     R2,#`?<Constant ",">` & 0xff
   \   00035A   7B..         MOV     R3,#(`?<Constant ",">` >> 8) & 0xff
   \                     ??SampleApp_MessageMSGCB_23:
   \   00035C   7900         MOV     R1,#0x0
   \   00035E   12....       LCALL   ??HalUARTWrite?relay
   1093                  }
   1094                  //判断是否符合编码条件,不包含自身的数据包,且度不大于最大允许的度
   1095                  if( !Self_included && (Peer_degree < MAX_Degree) )
   \   000361   E5..         MOV     A,?V0 + 2
   \   000363   A2E0         MOV     C,0xE0 /* A   */.0
   \   000365   4010         JC      ??SampleApp_MessageMSGCB_24
   \   000367   12....       LCALL   ??Subroutine64_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_120:
   \   00036A   500B         JNC     ??SampleApp_MessageMSGCB_24
   1096                  {
   1097                    HalUARTWrite(0,"encoding...\n^^",14);
   \   00036C                ; Setup parameters for call to function HalUARTWrite
   \   00036C   12....       LCALL   ?Subroutine13 & 0xFFFF
   1098          //          Show_Bit(Peer_data,8);          //对方数据
   1099          //          HalUARTWrite(0,"\n^^",3);
   1100          //          Show_Bit(DATA_SLOT[0].data,8);  //自身数据
   1101          //          
   1102          //          HalUARTWrite(0,"\n->",3);
   1103          //          Peer_data ^= DATA_SLOT[0].data; //异或编码
   1104          //          
   1105          //          Show_Bit(Peer_data, 8);         //编码后数据
   1106                    
   1107                    HalUARTWrite(0,"\n||",3);
   1108                    Show_Bit(Peer_info,8);
   1109                    HalUARTWrite(0," ",1);
   1110                    Show_Num(Peer_info);          //对方码字信息
   1111                    
   1112                    HalUARTWrite(0,"\n||",3);
   1113                    Show_Bit(Source_info,8);  //**
   1114                    HalUARTWrite(0," ",1);
   1115                    Show_Num(Source_info);         //自身码字信息
   1116                    
   1117                    HalUARTWrite(0,"\n->",3);      
   1118                    Peer_info |= Source_info; //码字信息中添加自身的设备ID
   1119                    Show_Bit(Peer_info,8);   //**
   1120                    HalUARTWrite(0," ",1);
   1121                    Show_Num(Peer_info);          //融合后码字信息
   1122                    HalUARTWrite(0,"\n",1);
   1123                  }
   \                     ??CrossCallReturnLabel_23:
   \   00036F   75....       MOV     ?V0 + 3,#(`?<Constant " ">` >> 8) & 0xff
   \   000372                ; Setup parameters for call to function HalUARTWrite
   \   000372   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_17:
   \   000375   8008         SJMP    ??SampleApp_MessageMSGCB_25
   1124                  else
   1125                  {
   1126                    HalUARTWrite(0,"未编码.\n",8);
   \                     ??SampleApp_MessageMSGCB_24:
   \   000377                ; Setup parameters for call to function HalUARTWrite
   \   000377   7C08         MOV     R4,#0x8
   \   000379   7D00         MOV     R5,#0x0
   \   00037B   7A..         MOV     R2,#`?<Constant "\\316\\264\\261\\340\\302\\353.\\n">` & 0xff
   \   00037D   7B..         MOV     R3,#(`?<Constant "\\316\\264\\261\\340\\302\\353.\\n">` >> 8) & 0xff
   1127                    
   1128                  }
   \                     ??SampleApp_MessageMSGCB_25:
   \   00037F   12....       LCALL   ?Subroutine11 & 0xFFFF
   1129                
   1130                HalUARTWrite(0,"peer_degree = ",14);
   1131                Show_Num(Peer_degree);
   1132                HalUARTWrite(0,"\n\n",2);
   1133                DATA_SLOT[Exchange_index].data = Peer_data; //对应位置替换为对方的码字
   \                     ??CrossCallReturnLabel_19:
   \   000382   12....       LCALL   ?S_SHL
   \   000385   12....       LCALL   ?Subroutine20 & 0xFFFF
   1134                DATA_SLOT[Exchange_index].Degree_ID = Peer_info; //记录码字信息
   1135                
   1136                Exchange_Lock = FALSE; //关闭码字槽的锁
   \                     ??CrossCallReturnLabel_33:
   \   000388   90....       MOV     DPTR,#Exchange_Lock
   \   00038B   E4           CLR     A
   \                     ??SampleApp_MessageMSGCB_16:
   \   00038C   F0           MOVX    @DPTR,A
   1137              }
   1138              
   1139              
   1140              
   1141              HalLedBlink( HAL_LED_2, 2, 60, (flashTime / 6) ); //二号灯闪烁,两次,亮度60%,时间间隔0.125s
   \                     ??SampleApp_MessageMSGCB_8:
   \   00038D                ; Setup parameters for call to function HalLedBlink
   \   00038D   7CA6         MOV     R4,#-0x5a
   \   00038F   7D00         MOV     R5,#0x0
   \   000391   7B3C         MOV     R3,#0x3c
   \   000393   7A02         MOV     R2,#0x2
   \   000395   7902         MOV     R1,#0x2
   \   000397   12....       LCALL   ??HalLedBlink?relay
   1142              break;
   \   00039A   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
   1143              
   1144              
   1145              
   1146              /*************************************************************************************************************************
   1147              收到 组播 消息
   1148              **************************************************************************************************************************/
   1149            case SAMPLEAPP_FLASH_CLUSTERID:
   1150              
   1151              
   1152              for(int i=0;i<NEI_NUM;++i)
   \                     ??SampleApp_MessageMSGCB_1:
   \   00039D   75..00       MOV     ?V0 + 4,#0x0
   \   0003A0   75..00       MOV     ?V0 + 5,#0x0
   \   0003A3   02....       LJMP    ??SampleApp_MessageMSGCB_26 & 0xFFFF
   1153              {
   1154                if(ACTIVE[i]-- <= 0)
   \                     ??SampleApp_MessageMSGCB_27:
   \   0003A6   E5..         MOV     A,?V0 + 4
   \   0003A8   C3           CLR     C
   \   0003A9   33           RLC     A
   \   0003AA   FE           MOV     R6,A
   \   0003AB   E5..         MOV     A,?V0 + 5
   \   0003AD   33           RLC     A
   \   0003AE   FF           MOV     R7,A
   \   0003AF   74..         MOV     A,#ACTIVE & 0xff
   \   0003B1   2E           ADD     A,R6
   \   0003B2   F8           MOV     R0,A
   \   0003B3   74..         MOV     A,#(ACTIVE >> 8) & 0xff
   \   0003B5   3F           ADDC    A,R7
   \   0003B6   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_117:
   \   0003B9   EA           MOV     A,R2
   \   0003BA   24FF         ADD     A,#-0x1
   \   0003BC   FC           MOV     R4,A
   \   0003BD   EB           MOV     A,R3
   \   0003BE   34FF         ADDC    A,#-0x1
   \   0003C0   FD           MOV     R5,A
   \   0003C1   8882         MOV     DPL,R0
   \   0003C3   8983         MOV     DPH,R1
   \   0003C5   EC           MOV     A,R4
   \   0003C6   F0           MOVX    @DPTR,A
   \   0003C7   A3           INC     DPTR
   \   0003C8   ED           MOV     A,R5
   \   0003C9   F0           MOVX    @DPTR,A
   \   0003CA   EA           MOV     A,R2
   \   0003CB   4B           ORL     A,R3
   \   0003CC   706C         JNZ     ??SampleApp_MessageMSGCB_28
   1155                {
   1156                  Reset_down_neighbor(Nei_Table[i]); //给掉线邻居发送设备重置信号
   \   0003CE   74..         MOV     A,#Nei_Table & 0xff
   \   0003D0   2E           ADD     A,R6
   \   0003D1   F5..         MOV     ?V0 + 2,A
   \   0003D3   74..         MOV     A,#(Nei_Table >> 8) & 0xff
   \   0003D5   3F           ADDC    A,R7
   \   0003D6   F5..         MOV     ?V0 + 3,A
   \   0003D8                ; Setup parameters for call to function Reset_down_neighbor
   \   0003D8   85..82       MOV     DPL,?V0 + 2
   \   0003DB   F583         MOV     DPH,A
   \   0003DD   12....       LCALL   ??Subroutine63_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_116:
   \   0003E0   12....       LCALL   ??Reset_down_neighbor?relay
   1157                  Nei_Table[i] = Nei_Table[NEI_NUM-1];
   \   0003E3   12....       LCALL   ?Subroutine50 & 0xFFFF
   \                     ??CrossCallReturnLabel_76:
   \   0003E6   E8           MOV     A,R0
   \   0003E7   C3           CLR     C
   \   0003E8   33           RLC     A
   \   0003E9   F8           MOV     R0,A
   \   0003EA   E9           MOV     A,R1
   \   0003EB   33           RLC     A
   \   0003EC   F9           MOV     R1,A
   \   0003ED   74..         MOV     A,#(Nei_Table + 254) & 0xff
   \   0003EF   28           ADD     A,R0
   \   0003F0   FA           MOV     R2,A
   \   0003F1   74..         MOV     A,#((Nei_Table - 2) >> 8) & 0xff
   \   0003F3   39           ADDC    A,R1
   \   0003F4   FB           MOV     R3,A
   \   0003F5   8A82         MOV     DPL,R2
   \   0003F7   8B83         MOV     DPH,R3
   \   0003F9   E0           MOVX    A,@DPTR
   \   0003FA   FC           MOV     R4,A
   \   0003FB   A3           INC     DPTR
   \   0003FC   E0           MOVX    A,@DPTR
   \   0003FD   FD           MOV     R5,A
   \   0003FE   85..82       MOV     DPL,?V0 + 2
   \   000401   85..83       MOV     DPH,?V0 + 3
   \   000404   EC           MOV     A,R4
   \   000405   F0           MOVX    @DPTR,A
   \   000406   A3           INC     DPTR
   \   000407   ED           MOV     A,R5
   \   000408   F0           MOVX    @DPTR,A
   1158                  Nei_Table[NEI_NUM-1] = (int16)65534;
   \   000409   8A82         MOV     DPL,R2
   \   00040B   8B83         MOV     DPH,R3
   \   00040D   74FE         MOV     A,#-0x2
   \   00040F   F0           MOVX    @DPTR,A
   \   000410   A3           INC     DPTR
   \   000411   04           INC     A
   \   000412   F0           MOVX    @DPTR,A
   1159                  ACTIVE[i] = ACTIVE[NEI_NUM-1];
   \   000413   74..         MOV     A,#(ACTIVE + 254) & 0xff
   \   000415   28           ADD     A,R0
   \   000416   F8           MOV     R0,A
   \   000417   74..         MOV     A,#((ACTIVE - 2) >> 8) & 0xff
   \   000419   39           ADDC    A,R1
   \   00041A   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_118:
   \   00041D   74..         MOV     A,#ACTIVE & 0xff
   \   00041F   2E           ADD     A,R6
   \   000420   F582         MOV     DPL,A
   \   000422   74..         MOV     A,#(ACTIVE >> 8) & 0xff
   \   000424   3F           ADDC    A,R7
   \   000425   F583         MOV     DPH,A
   \   000427   EA           MOV     A,R2
   \   000428   F0           MOVX    @DPTR,A
   \   000429   A3           INC     DPTR
   \   00042A   EB           MOV     A,R3
   \   00042B   F0           MOVX    @DPTR,A
   1160                  ACTIVE[NEI_NUM-1] = LIFE_TIME;
   \   00042C   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_112:
   \   00042F   8882         MOV     DPL,R0
   \   000431   8983         MOV     DPH,R1
   \   000433   EA           MOV     A,R2
   \   000434   F0           MOVX    @DPTR,A
   \   000435   A3           INC     DPTR
   \   000436   EB           MOV     A,R3
   \   000437   F0           MOVX    @DPTR,A
   1161                  LOST_nei++;
   \   000438   05..         INC     ?V0 + 0
   1162                }
   1163              }
   \                     ??SampleApp_MessageMSGCB_28:
   \   00043A   E5..         MOV     A,?V0 + 4
   \   00043C   2401         ADD     A,#0x1
   \   00043E   F5..         MOV     ?V0 + 4,A
   \   000440   E5..         MOV     A,?V0 + 5
   \   000442   3400         ADDC    A,#0x0
   \   000444   F5..         MOV     ?V0 + 5,A
   \                     ??SampleApp_MessageMSGCB_26:
   \   000446   12....       LCALL   ?Subroutine50 & 0xFFFF
   \                     ??CrossCallReturnLabel_77:
   \   000449   C3           CLR     C
   \   00044A   E5..         MOV     A,?V0 + 4
   \   00044C   98           SUBB    A,R0
   \   00044D   E5..         MOV     A,?V0 + 5
   \   00044F   99           SUBB    A,R1
   \   000450   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000452   65D0         XRL     A,PSW
   \   000454   33           RLC     A
   \   000455   5003         JNC     $+5
   \   000457   02....       LJMP    ??SampleApp_MessageMSGCB_27 & 0xFFFF
   1164              
   1165              NEI_NUM -= LOST_nei;  //邻居个数减少
   \   00045A   A8..         MOV     R0,?V0 + 0
   \   00045C   E0           MOVX    A,@DPTR
   \   00045D   C3           CLR     C
   \   00045E   98           SUBB    A,R0
   \   00045F   F0           MOVX    @DPTR,A
   1166              
   1167              
   1168              
   1169              for(int i=0;i<3;++i)
   \   000460   7800         MOV     R0,#0x0
   \   000462   7900         MOV     R1,#0x0
   1170              {
   1171                //邻居表中有该路由
   1172                if(Nei_Table[i]==neighbor_addr_10)
   \                     ??SampleApp_MessageMSGCB_29:
   \   000464   12....       LCALL   ?Subroutine40 & 0xFFFF
   \                     ??CrossCallReturnLabel_66:
   \   000467   65..         XRL     A,?V0 + 6
   \   000469   7004         JNZ     ??SampleApp_MessageMSGCB_30
   \   00046B   A3           INC     DPTR
   \   00046C   E0           MOVX    A,@DPTR
   \   00046D   65..         XRL     A,?V0 + 7
   \                     ??SampleApp_MessageMSGCB_30:
   \   00046F   7014         JNZ     ??SampleApp_MessageMSGCB_31
   1173                {
   1174                  ACTIVE[i] = LIFE_TIME; //收到该邻居信息,更新存活时间
   \   000471   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_113:
   \   000474   E8           MOV     A,R0
   \   000475   C3           CLR     C
   \   000476   33           RLC     A
   \   000477   F8           MOV     R0,A
   \   000478   E9           MOV     A,R1
   \   000479   33           RLC     A
   \   00047A   F9           MOV     R1,A
   \   00047B   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_15:
   \   00047E   EA           MOV     A,R2
   \   00047F   F0           MOVX    @DPTR,A
   \   000480   A3           INC     DPTR
   \   000481   EB           MOV     A,R3
   \   000482   F0           MOVX    @DPTR,A
   1175                  break;
   \   000483   804A         SJMP    ??SampleApp_MessageMSGCB_32
   1176                }
   1177                
   1178                //其他合法路由
   1179                else if((Nei_Table[i]!=(int16)65534) && (Nei_Table[i]!=neighbor_addr_10))
   \                     ??SampleApp_MessageMSGCB_31:
   \   000485   12....       LCALL   ?Subroutine40 & 0xFFFF
   \                     ??CrossCallReturnLabel_67:
   \   000488   64FE         XRL     A,#0xfe
   \   00048A   7003         JNZ     ??SampleApp_MessageMSGCB_33
   \   00048C   A3           INC     DPTR
   \   00048D   E0           MOVX    A,@DPTR
   \   00048E   F4           CPL     A
   \                     ??SampleApp_MessageMSGCB_33:
   \   00048F   6014         JZ      ??SampleApp_MessageMSGCB_34
   \   000491   E8           MOV     A,R0
   \   000492   2401         ADD     A,#0x1
   \   000494   08           INC     R0
   \   000495   E9           MOV     A,R1
   \   000496   3400         ADDC    A,#0x0
   \   000498   F9           MOV     R1,A
   \   000499   C3           CLR     C
   \   00049A   E8           MOV     A,R0
   \   00049B   9403         SUBB    A,#0x3
   \   00049D   E9           MOV     A,R1
   \   00049E   12....       LCALL   ??Subroutine65_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_124:
   \   0004A1   502C         JNC     ??SampleApp_MessageMSGCB_32
   \   0004A3   80BF         SJMP    ??SampleApp_MessageMSGCB_29
   1180                  continue;
   1181                
   1182                //添加路由
   1183                else
   1184                {
   1185                  Nei_Table[i]=neighbor_addr_10;
   \                     ??SampleApp_MessageMSGCB_34:
   \   0004A5   E8           MOV     A,R0
   \   0004A6   C3           CLR     C
   \   0004A7   33           RLC     A
   \   0004A8   F8           MOV     R0,A
   \   0004A9   E9           MOV     A,R1
   \   0004AA   12....       LCALL   ?Subroutine44 & 0xFFFF
   \                     ??CrossCallReturnLabel_102:
   \   0004AD   E5..         MOV     A,?V0 + 6
   \   0004AF   F0           MOVX    @DPTR,A
   \   0004B0   A3           INC     DPTR
   \   0004B1   E5..         MOV     A,?V0 + 7
   \   0004B3   F0           MOVX    @DPTR,A
   1186                  NEI_NUM++;
   \   0004B4   90....       MOV     DPTR,#NEI_NUM
   \   0004B7   E0           MOVX    A,@DPTR
   \   0004B8   04           INC     A
   \   0004B9   F0           MOVX    @DPTR,A
   1187                  
   1188                  //输出邻居的活跃点数
   1189                  HalUARTWrite(0,"\n------------\n",14);
   \   0004BA                ; Setup parameters for call to function HalUARTWrite
   \   0004BA   12....       LCALL   ?Subroutine15 & 0xFFFF
   1190                  HalUARTWrite(0,"active: ",strlen("active: "));
   1191                  for (int j=0;j<NEI_NUM;++j)
   \                     ??CrossCallReturnLabel_26:
   \   0004BD   8003         SJMP    ??CrossCallReturnLabel_0
   1192                  {
   1193                    active = '0' + ACTIVE[j];
   \                     ??SampleApp_MessageMSGCB_35:
   \   0004BF   12....       LCALL   ?Subroutine2 & 0xFFFF
   1194                    HalUARTWrite(0,&active,1);
   1195                    HalUARTWrite(0," ",1);
   1196                  }
   \                     ??CrossCallReturnLabel_0:
   \   0004C2   12....       LCALL   ?Subroutine26 & 0xFFFF
   \                     ??CrossCallReturnLabel_42:
   \   0004C5   40F8         JC      ??SampleApp_MessageMSGCB_35
   1197                  //输出邻居个数
   1198                  HalUARTWrite(0,"\n有",3);
   \   0004C7                ; Setup parameters for call to function HalUARTWrite
   \   0004C7   12....       LCALL   ?Subroutine12 & 0xFFFF
   1199                  active = '0' + NEI_NUM;
   1200                  HalUARTWrite(0,&active,1);
   1201                  HalUARTWrite(0,"个邻居",6);
   1202                  
   1203                  HalUARTWrite(0,"\n------------\n",14);
   \                     ??CrossCallReturnLabel_20:
   \   0004CA   7900         MOV     R1,#0x0
   \   0004CC   12....       LCALL   ??HalUARTWrite?relay
   1204                  
   1205                  break;
   1206                }
   1207              }
   1208              
   1209              if(LOST_nei != 0)
   \                     ??SampleApp_MessageMSGCB_32:
   \   0004CF   E5..         MOV     A,?V0 + 0
   \   0004D1   6056         JZ      ??SampleApp_MessageMSGCB_0
   1210              {
   1211                //输出邻居的活跃点数
   1212                HalUARTWrite(0,"\n------------\n",14);
   \   0004D3                ; Setup parameters for call to function HalUARTWrite
   \   0004D3   12....       LCALL   ?Subroutine15 & 0xFFFF
   1213                HalUARTWrite(0,"active: ",strlen("active: "));
   1214                for (int j=0;j<NEI_NUM;++j)
   \                     ??CrossCallReturnLabel_27:
   \   0004D6   8003         SJMP    ??CrossCallReturnLabel_1
   1215                {
   1216                  active = '0' + ACTIVE[j];
   \                     ??SampleApp_MessageMSGCB_36:
   \   0004D8   12....       LCALL   ?Subroutine2 & 0xFFFF
   1217                  HalUARTWrite(0,&active,1);
   1218                  HalUARTWrite(0," ",1);
   1219                }
   \                     ??CrossCallReturnLabel_1:
   \   0004DB   12....       LCALL   ?Subroutine26 & 0xFFFF
   \                     ??CrossCallReturnLabel_43:
   \   0004DE   40F8         JC      ??SampleApp_MessageMSGCB_36
   1220                //输出邻居个数
   1221                HalUARTWrite(0,"\n有",3);
   \   0004E0                ; Setup parameters for call to function HalUARTWrite
   \   0004E0   12....       LCALL   ?Subroutine12 & 0xFFFF
   1222                active = '0' + NEI_NUM;
   1223                HalUARTWrite(0,&active,1);
   1224                HalUARTWrite(0,"个邻居",6);
   1225                
   1226                HalUARTWrite(0,"\n------------\n",14);
   1227              }
   \                     ??CrossCallReturnLabel_21:
   \   0004E3   803F         SJMP    ??SampleApp_MessageMSGCB_37
   1228              
   1229              
   1230              //HalLedBlink( HAL_LED_2, 2, 50, (flashTime / 5) ); //二号灯闪烁,两次,亮度50%,时间间隔0.2s
   1231              break;
   1232              
   1233              
   1234              
   1235              /*******************************************
   1236              收到 周期性 消息
   1237              ********************************************/
   1238            case SAMPLEAPP_PERIODIC_CLUSTERID:
   1239              
   1240              //NLME_UpdateLinkStatus(); //更新链路信息
   1241              //HalLedBlink( HAL_LED_2, 2, 60, (flashTime / 6) ); //三号灯闪烁,三次,亮度50%,时间间隔0.25s
   1242              break;
   1243              /*收到 对方串口透传 消息*/
   1244            case SAMPLEAPP_COM_CLUSTERID:
   1245              HalUARTWrite(0,"对方说: ",strlen("对方说: "));
   \                     ??SampleApp_MessageMSGCB_2:
   \   0004E5                ; Setup parameters for call to function HalUARTWrite
   \   0004E5   7C08         MOV     R4,#0x8
   \   0004E7   7D00         MOV     R5,#0x0
   \   0004E9   7A..         MOV     R2,#`?<Constant "\\266\\324\\267\\275\\313\\265: ">` & 0xff
   \   0004EB   7B..         MOV     R3,#(`?<Constant "\\266\\324\\267\\275\\313\\265: ">` >> 8) & 0xff
   \   0004ED   7900         MOV     R1,#0x0
   \   0004EF   12....       LCALL   ??HalUARTWrite?relay
   1246              len=pkt->cmd.Data[0];
   \   0004F2   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_9:
   \   0004F5   F5..         MOV     ?V0 + 1,A
   1247              for(i=0;i<len;i++)
   \   0004F7   801C         SJMP    ??SampleApp_MessageMSGCB_38
   1248                HalUARTWrite(0,&pkt->cmd.Data[i+1],1);//发给 PC 机
   \                     ??SampleApp_MessageMSGCB_39:
   \   0004F9                ; Setup parameters for call to function HalUARTWrite
   \   0004F9   A8..         MOV     R0,?V0 + 0
   \   0004FB   12....       LCALL   ?Subroutine39 & 0xFFFF
   \                     ??CrossCallReturnLabel_65:
   \   0004FE   E0           MOVX    A,@DPTR
   \   0004FF   28           ADD     A,R0
   \   000500   FA           MOV     R2,A
   \   000501   A3           INC     DPTR
   \   000502   E0           MOVX    A,@DPTR
   \   000503   3400         ADDC    A,#0x0
   \   000505   8A82         MOV     DPL,R2
   \   000507   F583         MOV     DPH,A
   \   000509   A3           INC     DPTR
   \   00050A   AA82         MOV     R2,DPL
   \   00050C   AB83         MOV     R3,DPH
   \   00050E   7900         MOV     R1,#0x0
   \   000510   12....       LCALL   ??HalUARTWrite?relay
   \   000513   05..         INC     ?V0 + 0
   \                     ??SampleApp_MessageMSGCB_38:
   \   000515   E5..         MOV     A,?V0 + 0
   \   000517   C3           CLR     C
   \   000518   95..         SUBB    A,?V0 + 1
   \   00051A   7C01         MOV     R4,#0x1
   \   00051C   7D00         MOV     R5,#0x0
   \   00051E   40D9         JC      ??SampleApp_MessageMSGCB_39
   1249              HalUARTWrite(0,"\n",1); // 回车换行
   \   000520                ; Setup parameters for call to function HalUARTWrite
   \   000520   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000522   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \                     ??SampleApp_MessageMSGCB_37:
   \   000524   7900         MOV     R1,#0x0
   \   000526   12....       LCALL   ??HalUARTWrite?relay
   1250              break;
   1251              
   1252            }
   1253          }
   \                     ??SampleApp_MessageMSGCB_0:
   \   000529   7409         MOV     A,#0x9
   \   00052B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00052E   7F0A         MOV     R7,#0xa
   \   000530   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine40:
   \   000000   E8           MOV     A,R0
   \   000001   FA           MOV     R2,A
   \   000002   E9           MOV     A,R1
   \   000003   FB           MOV     R3,A
   \   000004   EA           MOV     A,R2
   \   000005   C3           CLR     C
   \   000006   33           RLC     A
   \   000007   FA           MOV     R2,A
   \   000008   EB           MOV     A,R3
   \   000009   33           RLC     A
   \   00000A   FB           MOV     R3,A
   \   00000B   74..         MOV     A,#Nei_Table & 0xff
   \   00000D   2A           ADD     A,R2
   \   00000E   F582         MOV     DPL,A
   \   000010   74..         MOV     A,#(Nei_Table >> 8) & 0xff
   \   000012   3B           ADDC    A,R3
   \   000013   F583         MOV     DPH,A
   \   000015   E0           MOVX    A,@DPTR
   \   000016   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine39:
   \   000000   12....       LCALL   ?Subroutine55 & 0xFFFF
   \                     ??CrossCallReturnLabel_89:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine55:
   \   000000   12....       LCALL   ?Subroutine58 & 0xFFFF
   \                     ??CrossCallReturnLabel_95:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine58:
   \   000000   EE           MOV     A,R6
   \   000001   2422         ADD     A,#0x22
   \   000003   F582         MOV     DPL,A
   \   000005   EF           MOV     A,R7
   \   000006   3400         ADDC    A,#0x0
   \   000008   F583         MOV     DPH,A
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine35:
   \   000000   A9..         MOV     R1,?V0 + 0
   \   000002   12....       LCALL   ??Power_of_2?relay
   \   000005   EA           MOV     A,R2
   \   000006   5E           ANL     A,R6
   \   000007   F8           MOV     R0,A
   \   000008   EB           MOV     A,R3
   \   000009   5F           ANL     A,R7
   \   00000A   F9           MOV     R1,A
   \   00000B   E8           MOV     A,R0
   \   00000C   49           ORL     A,R1
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine34:
   \   000000   7920         MOV     R1,#0x20
   \   000002   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000004   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000006   7A..         MOV     R2,#Point_To_Point_DstAddr & 0xff
   \   000008   7B..         MOV     R3,#(Point_To_Point_DstAddr >> 8) & 0xff
   \   00000A                REQUIRE ??Subroutine61_0
   \   00000A                ; // Fall through to label ??Subroutine61_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine32:
   \   000000   12....       LCALL   ?Subroutine52 & 0xFFFF
   \                     ??CrossCallReturnLabel_81:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine30:
   \   000000   90....       MOV     DPTR,#LIFE_TIME
   \   000003                REQUIRE ??Subroutine62_0
   \   000003                ; // Fall through to label ??Subroutine62_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine62_0:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   33           RLC     A
   \   000003   95E0         SUBB    A,0xE0 /* A   */
   \   000005   FB           MOV     R3,A
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine29:
   \   000000   F9           MOV     R1,A
   \   000001   8882         MOV     DPL,R0
   \   000003   8983         MOV     DPH,R1
   \   000005                REQUIRE ??Subroutine63_0
   \   000005                ; // Fall through to label ??Subroutine63_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine26:
   \   000000   12....       LCALL   ?Subroutine50 & 0xFFFF
   \                     ??CrossCallReturnLabel_78:
   \   000003   C3           CLR     C
   \   000004   EE           MOV     A,R6
   \   000005   98           SUBB    A,R0
   \   000006   EF           MOV     A,R7
   \   000007   99           SUBB    A,R1
   \   000008   A2D2         MOV     C,0xD0 /* PSW */.2
   \   00000A   65D0         XRL     A,PSW
   \   00000C   33           RLC     A
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine50:
   \   000000   90....       MOV     DPTR,#NEI_NUM
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F8           MOV     R0,A
   \   000005   33           RLC     A
   \   000006   95E0         SUBB    A,0xE0 /* A   */
   \   000008   F9           MOV     R1,A
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine25:
   \   000000   85....       MOV     ?V0 + 0,?V0 + 4
   \   000003                REQUIRE ??Subroutine64_0
   \   000003                ; // Fall through to label ??Subroutine64_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine64_0:
   \   000000   90....       MOV     DPTR,#MAX_Degree
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F8           MOV     R0,A
   \   000005   A3           INC     DPTR
   \   000006   E0           MOVX    A,@DPTR
   \   000007   F9           MOV     R1,A
   \   000008   C3           CLR     C
   \   000009   E5..         MOV     A,?V0 + 0
   \   00000B   98           SUBB    A,R0
   \   00000C   E4           CLR     A
   \   00000D   99           SUBB    A,R1
   \   00000E   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine24:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F9           MOV     R1,A
   \   000005   8882         MOV     DPL,R0
   \   000007   8983         MOV     DPH,R1
   \   000009   A3           INC     DPTR
   \   00000A   E0           MOVX    A,@DPTR
   \   00000B   F5..         MOV     ?V0 + 5,A
   \   00000D   8882         MOV     DPL,R0
   \   00000F   8983         MOV     DPH,R1
   \   000011   A3           INC     DPTR
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   E0           MOVX    A,@DPTR
   \   000015   FA           MOV     R2,A
   \   000016   8882         MOV     DPL,R0
   \   000018   8983         MOV     DPH,R1
   \   00001A   A3           INC     DPTR
   \   00001B   A3           INC     DPTR
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   F8           MOV     R0,A
   \   00001E   E4           CLR     A
   \   00001F   C8           XCH     A,R0
   \   000020   F9           MOV     R1,A
   \   000021   EA           MOV     A,R2
   \   000022   FE           MOV     R6,A
   \   000023   E9           MOV     A,R1
   \   000024   FF           MOV     R7,A
   \   000025   88..         MOV     ?V0 + 4,R0
   \   000027   88..         MOV     ?V0 + 2,R0
   \   000029   88..         MOV     ?V0 + 0,R0
   \   00002B   88..         MOV     ?V0 + 1,R0
   \   00002D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine20:
   \   000000   12....       LCALL   ?Subroutine53 & 0xFFFF
   \                     ??CrossCallReturnLabel_83:
   \   000003   E5..         MOV     A,?V0 + 5
   \   000005   12....       LCALL   ?Subroutine47 & 0xFFFF
   \                     ??CrossCallReturnLabel_97:
   \   000008   EE           MOV     A,R6
   \   000009   F0           MOVX    @DPTR,A
   \   00000A   A3           INC     DPTR
   \   00000B   EF           MOV     A,R7
   \   00000C   F0           MOVX    @DPTR,A
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine19:
   \   000000   7900         MOV     R1,#0x0
   \   000002   12....       LCALL   ??HalUARTWrite?relay
   \   000005   EE           MOV     A,R6
   \   000006   2422         ADD     A,#0x22
   \   000008   F5..         MOV     ?V0 + 0,A
   \   00000A   EF           MOV     A,R7
   \   00000B   3400         ADDC    A,#0x0
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   7B00         MOV     R3,#0x0
   \   000002   12....       LCALL   ??Show_Bit?relay
   \   000005   75....       MOV     ?V0 + 2,#`?<Constant " ">` & 0xff
   \   000008   75....       MOV     ?V0 + 3,#(`?<Constant " ">` >> 8) & 0xff
   \   00000B                ; Setup parameters for call to function HalUARTWrite
   \   00000B                ; Setup parameters for call to function HalUARTWrite
   \   00000B                REQUIRE ??Subroutine66_0
   \   00000B                ; // Fall through to label ??Subroutine66_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine66_0:
   \   000000   7C01         MOV     R4,#0x1
   \   000002   7D00         MOV     R5,#0x0
   \   000004   AA..         MOV     R2,?V0 + 2
   \   000006   AB..         MOV     R3,?V0 + 3
   \   000008                REQUIRE ??Subroutine67_0
   \   000008                ; // Fall through to label ??Subroutine67_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   7C0E         MOV     R4,#0xe
   \   000002   7D00         MOV     R5,#0x0
   \   000004   7A..         MOV     R2,#`?<Constant "\\n------------\\n">` & 0xff
   \   000006   7B..         MOV     R3,#(`?<Constant "\\n------------\\n">` >> 8) & 0xff
   \   000008   7900         MOV     R1,#0x0
   \   00000A   12....       LCALL   ??HalUARTWrite?relay
   \   00000D                ; Setup parameters for call to function HalUARTWrite
   \   00000D                ; Setup parameters for call to function HalUARTWrite
   \   00000D   7C08         MOV     R4,#0x8
   \   00000F   7D00         MOV     R5,#0x0
   \   000011   7A..         MOV     R2,#`?<Constant "active: ">` & 0xff
   \   000013   7B..         MOV     R3,#(`?<Constant "active: ">` >> 8) & 0xff
   \   000015   7900         MOV     R1,#0x0
   \   000017   12....       LCALL   ??HalUARTWrite?relay
   \   00001A   7E00         MOV     R6,#0x0
   \   00001C   7F00         MOV     R7,#0x0
   \   00001E   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   7C01         MOV     R4,#0x1
   \   000002   7D00         MOV     R5,#0x0
   \   000004   AA..         MOV     R2,?V0 + 2
   \   000006   AB..         MOV     R3,?V0 + 3
   \   000008   12....       LCALL   ??Subroutine68_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_138:
   \   00000B   12....       LCALL   ?Subroutine48 & 0xFFFF
   \                     ??CrossCallReturnLabel_142:
   \   00000E   A3           INC     DPTR
   \   00000F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   7C0E         MOV     R4,#0xe
   \   000002   7D00         MOV     R5,#0x0
   \   000004   7A..         MOV     R2,#`?<Constant "encoding...\\n^^">` & 0xff
   \   000006   7B..         MOV     R3,#(`?<Constant "encoding...\\n^^">` >> 8) & 0xff
   \   000008   7900         MOV     R1,#0x0
   \   00000A   12....       LCALL   ??HalUARTWrite?relay
   \   00000D   75....       MOV     ?V0 + 0,#`?<Constant "\\n||">` & 0xff
   \   000010   75....       MOV     ?V0 + 1,#(`?<Constant "\\n||">` >> 8) & 0xff
   \   000013                ; Setup parameters for call to function HalUARTWrite
   \   000013                ; Setup parameters for call to function HalUARTWrite
   \   000013   12....       LCALL   ?Subroutine43 & 0xFFFF
   \                     ??CrossCallReturnLabel_135:
   \   000016   EE           MOV     A,R6
   \   000017   FA           MOV     R2,A
   \   000018   EF           MOV     A,R7
   \   000019   FB           MOV     R3,A
   \   00001A   12....       LCALL   ??Show_Bit?relay
   \   00001D   75....       MOV     ?V0 + 2,#`?<Constant " ">` & 0xff
   \   000020   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine43:
   \   000000   7C03         MOV     R4,#0x3
   \   000002   7D00         MOV     R5,#0x0
   \   000004   AA..         MOV     R2,?V0 + 0
   \   000006   AB..         MOV     R3,?V0 + 1
   \   000008                REQUIRE ??Subroutine68_0
   \   000008                ; // Fall through to label ??Subroutine68_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   7C03         MOV     R4,#0x3
   \   000002   7D00         MOV     R5,#0x0
   \   000004   7A..         MOV     R2,#`?<Constant "\\n\\323\\320">` & 0xff
   \   000006   7B..         MOV     R3,#(`?<Constant "\\n\\323\\320">` >> 8) & 0xff
   \   000008   7900         MOV     R1,#0x0
   \   00000A   12....       LCALL   ??HalUARTWrite?relay
   \   00000D   90....       MOV     DPTR,#NEI_NUM
   \   000010   12....       LCALL   ?Subroutine46 & 0xFFFF
   \                     ??CrossCallReturnLabel_73:
   \   000013                ; Setup parameters for call to function HalUARTWrite
   \   000013                ; Setup parameters for call to function HalUARTWrite
   \   000013   7C06         MOV     R4,#0x6
   \   000015   7D00         MOV     R5,#0x0
   \   000017   7A..         MOV     R2,#`?<Constant "\\270\\366\\301\\332\\276\\323">` & 0xff
   \   000019   7B..         MOV     R3,#(`?<Constant "\\270\\366\\301\\332\\276\\323">` >> 8) & 0xff
   \   00001B   7900         MOV     R1,#0x0
   \   00001D   12....       LCALL   ??HalUARTWrite?relay
   \   000020                ; Setup parameters for call to function HalUARTWrite
   \   000020                ; Setup parameters for call to function HalUARTWrite
   \   000020   7C0E         MOV     R4,#0xe
   \   000022   7D00         MOV     R5,#0x0
   \   000024   7A..         MOV     R2,#`?<Constant "\\n------------\\n">` & 0xff
   \   000026   7B..         MOV     R3,#(`?<Constant "\\n------------\\n">` >> 8) & 0xff
   \   000028   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   7900         MOV     R1,#0x0
   \   000002   12....       LCALL   ??HalUARTWrite?relay
   \   000005                ; Setup parameters for call to function HalUARTWrite
   \   000005                ; Setup parameters for call to function HalUARTWrite
   \   000005   7C0E         MOV     R4,#0xe
   \   000007   7D00         MOV     R5,#0x0
   \   000009   7A..         MOV     R2,#`?<Constant "peer_degree = ">` & 0xff
   \   00000B   7B..         MOV     R3,#(`?<Constant "peer_degree = ">` >> 8) & 0xff
   \   00000D   7900         MOV     R1,#0x0
   \   00000F   12....       LCALL   ??HalUARTWrite?relay
   \   000012                ; Setup parameters for call to function Show_Num
   \   000012                ; Setup parameters for call to function Show_Num
   \   000012   85....       MOV     ?V0 + 0,?V0 + 4
   \   000015   AA..         MOV     R2,?V0 + 0
   \   000017   7B00         MOV     R3,#0x0
   \   000019   12....       LCALL   ??Show_Num?relay
   \   00001C                ; Setup parameters for call to function HalUARTWrite
   \   00001C                ; Setup parameters for call to function HalUARTWrite
   \   00001C   7C02         MOV     R4,#0x2
   \   00001E   7D00         MOV     R5,#0x0
   \   000020   7A..         MOV     R2,#`?<Constant "\\n\\n">` & 0xff
   \   000022   7B..         MOV     R3,#(`?<Constant "\\n\\n">` >> 8) & 0xff
   \   000024   7900         MOV     R1,#0x0
   \   000026   12....       LCALL   ??HalUARTWrite?relay
   \   000029   12....       LCALL   ?Subroutine49 & 0xFFFF
   \                     ??CrossCallReturnLabel_75:
   \   00002C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine49:
   \   000000   90....       MOV     DPTR,#Exchange_index
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F5..         MOV     ?V0 + 0,A
   \   000006   75..00       MOV     ?V0 + 1,#0x0
   \   000009   7402         MOV     A,#0x2
   \   00000B   78..         MOV     R0,#?V0 + 0
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   12....       LCALL   ?Subroutine41 & 0xFFFF
   \                     ??CrossCallReturnLabel_68:
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003   12....       LCALL   ?Subroutine43 & 0xFFFF
   \                     ??CrossCallReturnLabel_136:
   \   000006   AA..         MOV     R2,?V0 + 8
   \   000008   AB..         MOV     R3,?V0 + 9
   \   00000A   12....       LCALL   ?Subroutine54 & 0xFFFF
   \                     ??CrossCallReturnLabel_87:
   \   00000D   AA..         MOV     R2,?V0 + 2
   \   00000F   AB..         MOV     R3,?V0 + 3
   \   000011   7900         MOV     R1,#0x0
   \   000013   12....       LCALL   ??HalUARTWrite?relay
   \   000016                ; Setup parameters for call to function Show_Num
   \   000016                ; Setup parameters for call to function Show_Num
   \   000016   AA..         MOV     R2,?V0 + 8
   \   000018   AB..         MOV     R3,?V0 + 9
   \   00001A   12....       LCALL   ??Show_Num?relay
   \   00001D                ; Setup parameters for call to function HalUARTWrite
   \   00001D                ; Setup parameters for call to function HalUARTWrite
   \   00001D   7C03         MOV     R4,#0x3
   \   00001F   7D00         MOV     R5,#0x0
   \   000021   7A..         MOV     R2,#`?<Constant "\\n->">` & 0xff
   \   000023   7B..         MOV     R3,#(`?<Constant "\\n->">` >> 8) & 0xff
   \   000025   7900         MOV     R1,#0x0
   \   000027   12....       LCALL   ??HalUARTWrite?relay
   \   00002A   E5..         MOV     A,?V0 + 8
   \   00002C   4E           ORL     A,R6
   \   00002D   FE           MOV     R6,A
   \   00002E   E5..         MOV     A,?V0 + 9
   \   000030   4F           ORL     A,R7
   \   000031   FF           MOV     R7,A
   \   000032                ; Setup parameters for call to function Show_Bit
   \   000032                ; Setup parameters for call to function Show_Bit
   \   000032   7908         MOV     R1,#0x8
   \   000034   EE           MOV     A,R6
   \   000035   FA           MOV     R2,A
   \   000036   EF           MOV     A,R7
   \   000037   FB           MOV     R3,A
   \   000038   12....       LCALL   ??Show_Bit?relay
   \   00003B                ; Setup parameters for call to function HalUARTWrite
   \   00003B                ; Setup parameters for call to function HalUARTWrite
   \   00003B   12....       LCALL   ?Subroutine41 & 0xFFFF
   \                     ??CrossCallReturnLabel_69:
   \   00003E                ; Setup parameters for call to function HalUARTWrite
   \   00003E                ; Setup parameters for call to function HalUARTWrite
   \   00003E   7C01         MOV     R4,#0x1
   \   000040   7D00         MOV     R5,#0x0
   \   000042   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000044   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   000046   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine41:
   \   000000   7C01         MOV     R4,#0x1
   \   000002   7D00         MOV     R5,#0x0
   \   000004   AA..         MOV     R2,?V0 + 2
   \   000006   AB..         MOV     R3,?V0 + 3
   \   000008   7900         MOV     R1,#0x0
   \   00000A   12....       LCALL   ??HalUARTWrite?relay
   \   00000D                ; Setup parameters for call to function Show_Num
   \   00000D                ; Setup parameters for call to function Show_Num
   \   00000D                ; Setup parameters for call to function Show_Num
   \   00000D                ; Setup parameters for call to function Show_Num
   \   00000D   EE           MOV     A,R6
   \   00000E   FA           MOV     R2,A
   \   00000F   EF           MOV     A,R7
   \   000010   FB           MOV     R3,A
   \   000011   12....       LCALL   ??Show_Num?relay
   \   000014   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   12....       LCALL   ?Subroutine55 & 0xFFFF
   \                     ??CrossCallReturnLabel_88:
   \   000003   12....       LCALL   ??Subroutine69_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_140:
   \   000006   A3           INC     DPTR
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine48:
   \   000000   85..82       MOV     DPL,?V0 + 0
   \   000003   85..83       MOV     DPH,?V0 + 1
   \   000006   E0           MOVX    A,@DPTR
   \   000007   F8           MOV     R0,A
   \   000008                REQUIRE ??Subroutine69_0
   \   000008                ; // Fall through to label ??Subroutine69_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine69_0:
   \   000000   A3           INC     DPTR
   \   000001   E0           MOVX    A,@DPTR
   \   000002   F583         MOV     DPH,A
   \   000004   8882         MOV     DPL,R0
   \   000006   A3           INC     DPTR
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   12....       LCALL   ?Subroutine51 & 0xFFFF
   \                     ??CrossCallReturnLabel_80:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine51:
   \   000000   12....       LCALL   ?Subroutine58 & 0xFFFF
   \                     ??CrossCallReturnLabel_94:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F8           MOV     R0,A
   \   000005   A3           INC     DPTR
   \   000006   E0           MOVX    A,@DPTR
   \   000007   F583         MOV     DPH,A
   \   000009   8882         MOV     DPL,R0
   \   00000B   E0           MOVX    A,@DPTR
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   12....       LCALL   ?Subroutine51 & 0xFFFF
   \                     ??CrossCallReturnLabel_79:
   \   000003   642A         XRL     A,#0x2a
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   E5..         MOV     A,?V0 + 0
   \   000002   2401         ADD     A,#0x1
   \   000004   F5..         MOV     ?V0 + 0,A
   \   000006   E5..         MOV     A,?V0 + 1
   \   000008   3400         ADDC    A,#0x0
   \   00000A   F5..         MOV     ?V0 + 1,A
   \   00000C   C3           CLR     C
   \   00000D   E5..         MOV     A,?V0 + 0
   \   00000F   9410         SUBB    A,#0x10
   \   000011   E5..         MOV     A,?V0 + 1
   \   000013   9400         SUBB    A,#0x0
   \   000015   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000017   65D0         XRL     A,PSW
   \   000019   33           RLC     A
   \   00001A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   EE           MOV     A,R6
   \   000001   F8           MOV     R0,A
   \   000002   EF           MOV     A,R7
   \   000003   F9           MOV     R1,A
   \   000004   E8           MOV     A,R0
   \   000005   C3           CLR     C
   \   000006   33           RLC     A
   \   000007   F8           MOV     R0,A
   \   000008   E9           MOV     A,R1
   \   000009   33           RLC     A
   \   00000A   F9           MOV     R1,A
   \   00000B   12....       LCALL   ?Subroutine45 & 0xFFFF
   \                     ??CrossCallReturnLabel_70:
   \   00000E   12....       LCALL   ?Subroutine56 & 0xFFFF
   \                     ??CrossCallReturnLabel_91:
   \   000011   12....       LCALL   ?Subroutine42 & 0xFFFF
   \                     ??CrossCallReturnLabel_143:
   \   000014   7A..         MOV     R2,#`?<Constant " ">` & 0xff
   \   000016   7B..         MOV     R3,#(`?<Constant " ">` >> 8) & 0xff
   \   000018   7900         MOV     R1,#0x0
   \   00001A   12....       LCALL   ??HalUARTWrite?relay
   \   00001D   EE           MOV     A,R6
   \   00001E   2401         ADD     A,#0x1
   \   000020   0E           INC     R6
   \   000021   EF           MOV     A,R7
   \   000022   3400         ADDC    A,#0x0
   \   000024   FF           MOV     R7,A
   \   000025   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine42:
   \   000000   7900         MOV     R1,#0x0
   \   000002                REQUIRE ??Subroutine70_0
   \   000002                ; // Fall through to label ??Subroutine70_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine70_0:
   \   000000   12....       LCALL   ??HalUARTWrite?relay
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003   7C01         MOV     R4,#0x1
   \   000005   7D00         MOV     R5,#0x0
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine38:
   \   000000   12....       LCALL   ??rand?relay
   \   000003   EA           MOV     A,R2
   \   000004   F8           MOV     R0,A
   \   000005   EB           MOV     A,R3
   \   000006   F9           MOV     R1,A
   \   000007   7A05         MOV     R2,#0x5
   \   000009   7B00         MOV     R3,#0x0
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine21:
   \   000000   12....       LCALL   ?Subroutine53 & 0xFFFF
   \                     ??CrossCallReturnLabel_84:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine53:
   \   000000   12....       LCALL   ?Subroutine57 & 0xFFFF
   \                     ??CrossCallReturnLabel_93:
   \   000003   8882         MOV     DPL,R0
   \   000005   8983         MOV     DPH,R1
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine17:
   \   000000   12....       LCALL   ??Subroutine70_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_145:
   \   000003   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000005   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   000007   7900         MOV     R1,#0x0
   \   000009   12....       LCALL   ??HalUARTWrite?relay
   \   00000C   22           RET
   1254          
   1255          
   1256          //给掉线的邻居发送重置信号

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1257          void Reset_down_neighbor(int16 nei_addr)
   \                     Reset_down_neighbor:
   1258          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1259            short flashTime = 1000;
   1260            Point_To_Point_DstAddr.addr.shortAddr = nei_addr;
   \   00000A   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   00000D   EA           MOV     A,R2
   \   00000E   F0           MOVX    @DPTR,A
   \   00000F   A3           INC     DPTR
   \   000010   EB           MOV     A,R3
   \   000011   F0           MOVX    @DPTR,A
   1261            unsigned char DATA[] = "!";
   \   000012   85..82       MOV     DPL,?XSP + 0
   \   000015   85..83       MOV     DPH,?XSP + 1
   \   000018   AC82         MOV     R4,DPL
   \   00001A   AD83         MOV     R5,DPH
   \   00001C   7583..       MOV     DPH,#(`?<Constant "!">` >> 8) & 0xff
   \   00001F   7582..       MOV     DPL,#`?<Constant "!">` & 0xff
   \   000022   7402         MOV     A,#0x2
   \   000024   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1262            if ( AF_DataRequest( &Point_To_Point_DstAddr, //点对点通信方式目标地址
   1263                                  &SampleApp_epDesc,
   1264                                  SAMPLEAPP_POINT_TO_POINT_CLUSTERID, //点对点簇ID
   1265                                  1,
   1266                                  DATA,
   1267                                  &SampleApp_TransID,
   1268                                  AF_DISCV_ROUTE,
   1269                                  AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000027                ; Setup parameters for call to function AF_DataRequest
   \   000027   75..1E       MOV     ?V0 + 0,#0x1e
   \   00002A   78..         MOV     R0,#?V0 + 0
   \   00002C   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00002F   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000032   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000035   78..         MOV     R0,#?V0 + 0
   \   000037   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00003A   7403         MOV     A,#0x3
   \   00003C   12....       LCALL   ?XSTACK_DISP0_8
   \   00003F   8582..       MOV     ?V0 + 0,DPL
   \   000042   8583..       MOV     ?V0 + 1,DPH
   \   000045   78..         MOV     R0,#?V0 + 0
   \   000047   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00004A   75..01       MOV     ?V0 + 0,#0x1
   \   00004D   75..00       MOV     ?V0 + 1,#0x0
   \   000050   78..         MOV     R0,#?V0 + 0
   \   000052   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000055   75..04       MOV     ?V0 + 0,#0x4
   \   000058   78..         MOV     R0,#?V0 + 0
   \   00005A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005D   12....       LCALL   ?Subroutine34 & 0xFFFF
   \                     ??CrossCallReturnLabel_106:
   \   000060   12....       LCALL   ?DEALLOC_XSTACK8
   \   000063   E9           MOV     A,R1
   \   000064   700D         JNZ     ??Reset_down_neighbor_0
   1270              {
   1271                HalLedBlink( HAL_LED_3, 1, 60, (flashTime / 3) ); //led3闪
   \   000066                ; Setup parameters for call to function HalLedBlink
   \   000066   7C4D         MOV     R4,#0x4d
   \   000068   7D01         MOV     R5,#0x1
   \   00006A   7B3C         MOV     R3,#0x3c
   \   00006C   7A01         MOV     R2,#0x1
   \   00006E   7904         MOV     R1,#0x4
   \   000070   12....       LCALL   ??HalLedBlink?relay
   1272              }
   1273              else
   1274              {
   1275          
   1276              }
   1277          }
   \                     ??Reset_down_neighbor_0:
   \   000073   7402         MOV     A,#0x2
   \   000075                REQUIRE ?Subroutine0
   \   000075                ; // Fall through to label ?Subroutine0
   1278          
   1279          
   1280          /***********************************************************<><><><><><><>*****
   1281                             自定义 点对点 发送函数
   1282          ************************************************************<><><><><><><>****/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1283          void SampleApp_SendPointToPointMessage( void )
   \                     SampleApp_SendPointToPointMessage:
   1284          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 5
   \   000005   74FB         MOV     A,#-0x5
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1285            uint16 flashTime = 1000;
   1286            srand((int)osal_getClock()); //生成随机数种子
   \   00000A                ; Setup parameters for call to function srand
   \   00000A                ; Setup parameters for call to function osal_getClock
   \   00000A   12....       LCALL   ??osal_getClock?relay
   \   00000D   12....       LCALL   ??srand?relay
   1287            int8 nei_index = random(NEI_NUM);  //挑选随机邻居节点
   \   000010                ; Setup parameters for call to function rand
   \   000010   12....       LCALL   ??rand?relay
   \   000013   8A..         MOV     ?V0 + 0,R2
   \   000015   8B..         MOV     ?V0 + 1,R3
   \   000017   A8..         MOV     R0,?V0 + 0
   \   000019   A9..         MOV     R1,?V0 + 1
   \   00001B   90....       MOV     DPTR,#NEI_NUM
   \   00001E   12....       LCALL   ??Subroutine62_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_111:
   \   000021   12....       LCALL   ?S_DIV_MOD
   \   000024   EA           MOV     A,R2
   \   000025   FF           MOV     R7,A
   1288            Exchange_index = random(5)+1;//挑选随机交换码字
   \   000026                ; Setup parameters for call to function rand
   \   000026   12....       LCALL   ?Subroutine38 & 0xFFFF
   \                     ??CrossCallReturnLabel_63:
   \   000029   12....       LCALL   ?S_DIV_MOD
   \   00002C   EA           MOV     A,R2
   \   00002D   2401         ADD     A,#0x1
   \   00002F   90....       MOV     DPTR,#Exchange_index
   \   000032   F0           MOVX    @DPTR,A
   1289          
   1290            Exchanging_Neighbor = Nei_Table[nei_index];  //即将交换码字的邻居
   \   000033   EF           MOV     A,R7
   \   000034   F8           MOV     R0,A
   \   000035   33           RLC     A
   \   000036   95E0         SUBB    A,0xE0 /* A   */
   \   000038   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_101:
   \   00003B   F5..         MOV     ?V0 + 2,A
   \   00003D   A3           INC     DPTR
   \   00003E   E0           MOVX    A,@DPTR
   \   00003F   F5..         MOV     ?V0 + 3,A
   \   000041   90....       MOV     DPTR,#Exchanging_Neighbor
   \   000044   E5..         MOV     A,?V0 + 2
   \   000046   F0           MOVX    @DPTR,A
   \   000047   A3           INC     DPTR
   \   000048   E5..         MOV     A,?V0 + 3
   \   00004A   F0           MOVX    @DPTR,A
   1291            Exchanging_Data = DATA_SLOT[Exchange_index].data; //即将交换的码字
   \   00004B   12....       LCALL   ?Subroutine49 & 0xFFFF
   \                     ??CrossCallReturnLabel_74:
   \   00004E   12....       LCALL   ?S_SHL
   \   000051   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_35:
   \   000054   90....       MOV     DPTR,#Exchanging_Data
   \   000057   12....       LCALL   ??Subroutine59_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_98:
   \   00005A   E0           MOVX    A,@DPTR
   \   00005B   FA           MOV     R2,A
   \   00005C   A3           INC     DPTR
   \   00005D   E0           MOVX    A,@DPTR
   \   00005E   F5..         MOV     ?V0 + 0,A
   1292          
   1293            uint8 data = Exchanging_Data;  //赋值交换的随机数据
   1294            uint8 degree_high = DATA_SLOT[Exchange_index].Degree_ID >>8; //高位码字度信息
   1295            uint8 degree_low = (uint8)DATA_SLOT[Exchange_index].Degree_ID;  //低位码字度信息
   \   000060   EA           MOV     A,R2
   \   000061   FE           MOV     R6,A
   1296            uint8 _DATA[] = {'*', data, degree_high, degree_low};  //发送数据交换请求 用'*' 表示请求类型
   \   000062   7401         MOV     A,#0x1
   \   000064   12....       LCALL   ?XSTACK_DISP0_8
   \   000067   AC82         MOV     R4,DPL
   \   000069   AD83         MOV     R5,DPH
   \   00006B   7583..       MOV     DPH,#(`?<Constant {42, 0, 0, 0}>` >> 8) & 0xff
   \   00006E   7582..       MOV     DPL,#`?<Constant {42, 0, 0, 0}>` & 0xff
   \   000071   7404         MOV     A,#0x4
   \   000073   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   \   000076   90....       MOV     DPTR,#Exchanging_Data
   \   000079   E0           MOVX    A,@DPTR
   \   00007A   C0E0         PUSH    A
   \   00007C   7402         MOV     A,#0x2
   \   00007E   12....       LCALL   ?XSTACK_DISP0_8
   \   000081   D0E0         POP     A
   \   000083   F0           MOVX    @DPTR,A
   \   000084   7403         MOV     A,#0x3
   \   000086   12....       LCALL   ?XSTACK_DISP0_8
   \   000089   E5..         MOV     A,?V0 + 0
   \   00008B   F0           MOVX    @DPTR,A
   \   00008C   7404         MOV     A,#0x4
   \   00008E   12....       LCALL   ?XSTACK_DISP0_8
   \   000091   EA           MOV     A,R2
   \   000092   F0           MOVX    @DPTR,A
   1297            /*给选出的邻居发送数据*/
   1298            if((Nei_Table[nei_index] != (int16)65534) && (0<=nei_index) && (nei_index<NEI_NUM))
   \   000093   74FE         MOV     A,#-0x2
   \   000095   65..         XRL     A,?V0 + 2
   \   000097   7004         JNZ     ??SampleApp_SendPointToPointMessage_0
   \   000099   74FF         MOV     A,#-0x1
   \   00009B   65..         XRL     A,?V0 + 3
   \                     ??SampleApp_SendPointToPointMessage_0:
   \   00009D   7003         JNZ     $+5
   \   00009F   02....       LJMP    ??CrossCallReturnLabel_29 & 0xFFFF
   \   0000A2   EF           MOV     A,R7
   \   0000A3   C3           CLR     C
   \   0000A4   9400         SUBB    A,#0x0
   \   0000A6   65D0         XRL     A,PSW
   \   0000A8   33           RLC     A
   \   0000A9   5003         JNC     $+5
   \   0000AB   02....       LJMP    ??CrossCallReturnLabel_29 & 0xFFFF
   \   0000AE   90....       MOV     DPTR,#NEI_NUM
   \   0000B1   E0           MOVX    A,@DPTR
   \   0000B2   F8           MOV     R0,A
   \   0000B3   EF           MOV     A,R7
   \   0000B4   C3           CLR     C
   \   0000B5   98           SUBB    A,R0
   \   0000B6   A2D2         MOV     C,0xD0 /* PSW */.2
   \   0000B8   65D0         XRL     A,PSW
   \   0000BA   33           RLC     A
   \   0000BB   4003         JC      $+5
   \   0000BD   02....       LJMP    ??CrossCallReturnLabel_29 & 0xFFFF
   1299            {
   1300              Point_To_Point_DstAddr.addr.shortAddr = Exchanging_Neighbor;
   \   0000C0   90....       MOV     DPTR,#Exchanging_Neighbor
   \   0000C3   E0           MOVX    A,@DPTR
   \   0000C4   F8           MOV     R0,A
   \   0000C5   A3           INC     DPTR
   \   0000C6   E0           MOVX    A,@DPTR
   \   0000C7   F9           MOV     R1,A
   \   0000C8   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   0000CB   E8           MOV     A,R0
   \   0000CC   F0           MOVX    @DPTR,A
   \   0000CD   A3           INC     DPTR
   \   0000CE   E9           MOV     A,R1
   \   0000CF   F0           MOVX    @DPTR,A
   1301              if ( AF_DataRequest( &Point_To_Point_DstAddr, //点对点通信方式目标地址
   1302                                  &SampleApp_epDesc,
   1303                                  SAMPLEAPP_POINT_TO_POINT_CLUSTERID, //点对点簇ID
   1304                                  4,
   1305                                  _DATA,
   1306                                  &SampleApp_TransID,
   1307                                  AF_DISCV_ROUTE,
   1308                                  AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   0000D0                ; Setup parameters for call to function AF_DataRequest
   \   0000D0   75..1E       MOV     ?V0 + 1,#0x1e
   \   0000D3   78..         MOV     R0,#?V0 + 1
   \   0000D5   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000D8   75....       MOV     ?V0 + 2,#SampleApp_TransID & 0xff
   \   0000DB   75....       MOV     ?V0 + 3,#(SampleApp_TransID >> 8) & 0xff
   \   0000DE   78..         MOV     R0,#?V0 + 2
   \   0000E0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E3   7404         MOV     A,#0x4
   \   0000E5   12....       LCALL   ?XSTACK_DISP0_8
   \   0000E8   8582..       MOV     ?V0 + 2,DPL
   \   0000EB   8583..       MOV     ?V0 + 3,DPH
   \   0000EE   78..         MOV     R0,#?V0 + 2
   \   0000F0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000F3   75..04       MOV     ?V0 + 2,#0x4
   \   0000F6   75..00       MOV     ?V0 + 3,#0x0
   \   0000F9   78..         MOV     R0,#?V0 + 2
   \   0000FB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000FE   78..         MOV     R0,#?V0 + 2
   \   000100   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000103   12....       LCALL   ?Subroutine34 & 0xFFFF
   \                     ??CrossCallReturnLabel_107:
   \   000106   12....       LCALL   ?DEALLOC_XSTACK8
   \   000109   E9           MOV     A,R1
   \   00010A   7015         JNZ     ??SampleApp_SendPointToPointMessage_1
   1309              {
   1310                HalLedBlink( HAL_LED_1, 1, 60, (flashTime / 3) ); //led1闪
   \   00010C                ; Setup parameters for call to function HalLedBlink
   \   00010C   7C4D         MOV     R4,#0x4d
   \   00010E   7D01         MOV     R5,#0x1
   \   000110   7B3C         MOV     R3,#0x3c
   \   000112   7A01         MOV     R2,#0x1
   \   000114   7901         MOV     R1,#0x1
   \   000116   12....       LCALL   ??HalLedBlink?relay
   1311                Waiting_Request = TRUE; //请求交换数据包标志位
   \   000119   90....       MOV     DPTR,#Waiting_Request
   \   00011C   7401         MOV     A,#0x1
   \   00011E   F0           MOVX    @DPTR,A
   \   00011F   800D         SJMP    ??SampleApp_SendPointToPointMessage_2
   1312              }
   1313              else
   1314              {
   1315                HalUARTWrite(0,"交换数据包请求发送失败.",strlen("交换数据包请求发送失败."));
   \                     ??SampleApp_SendPointToPointMessage_1:
   \   000121                ; Setup parameters for call to function HalUARTWrite
   \   000121   7C17         MOV     R4,#0x17
   \   000123   7D00         MOV     R5,#0x0
   \   000125   7A..         MOV     R2,#`?<Constant "\\275\\273\\273\\273\\312\\375\\276\\335\\2` & 0xff
   \   000127   7B..         MOV     R3,#(`?<Constant "\\275\\273\\273\\273\\312\\375\\276\\335\\2` >> 8) & 0xff
   \   000129   7900         MOV     R1,#0x0
   \   00012B   12....       LCALL   ??HalUARTWrite?relay
   1316              }
   1317              
   1318              
   1319              uchar INDEX = nei_index + '0';
   \                     ??SampleApp_SendPointToPointMessage_2:
   \   00012E   7430         MOV     A,#0x30
   \   000130   2F           ADD     A,R7
   \   000131   85..82       MOV     DPL,?XSP + 0
   \   000134   85..83       MOV     DPH,?XSP + 1
   \   000137   F0           MOVX    @DPTR,A
   1320              HalUARTWrite(0,"send      *", 11);
   \   000138                ; Setup parameters for call to function HalUARTWrite
   \   000138   7C0B         MOV     R4,#0xb
   \   00013A   7D00         MOV     R5,#0x0
   \   00013C   7A..         MOV     R2,#`?<Constant "send      *">` & 0xff
   \   00013E   7B..         MOV     R3,#(`?<Constant "send      *">` >> 8) & 0xff
   \   000140   12....       LCALL   ??Subroutine67_0 & 0xFFFF
   1321              
   1322              Show_Bit(Exchanging_Data, 8);
   \                     ??CrossCallReturnLabel_134:
   \   000143   90....       MOV     DPTR,#Exchanging_Data
   \   000146   E0           MOVX    A,@DPTR
   \   000147   FA           MOV     R2,A
   \   000148   12....       LCALL   ?Subroutine16 & 0xFFFF
   1323              HalUARTWrite(0," ",1);
   1324              Show_Bit(degree_high,8);
   \                     ??CrossCallReturnLabel_128:
   \   00014B   AA..         MOV     R2,?V0 + 0
   \   00014D   7B00         MOV     R3,#0x0
   \   00014F   12....       LCALL   ??Show_Bit?relay
   1325              HalUARTWrite(0," ",1);
   \   000152                ; Setup parameters for call to function HalUARTWrite
   \   000152   12....       LCALL   ??Subroutine66_0 & 0xFFFF
   1326              Show_Bit(degree_low,8);
   \                     ??CrossCallReturnLabel_130:
   \   000155   8E..         MOV     ?V0 + 0,R6
   \   000157   AA..         MOV     R2,?V0 + 0
   \   000159   7B00         MOV     R3,#0x0
   \   00015B   12....       LCALL   ??Show_Bit?relay
   1327              
   1328              HalUARTWrite(0," to addr ", 9);
   \   00015E                ; Setup parameters for call to function HalUARTWrite
   \   00015E   7C09         MOV     R4,#0x9
   \   000160   7D00         MOV     R5,#0x0
   \   000162   7A..         MOV     R2,#`?<Constant " to addr ">` & 0xff
   \   000164   7B..         MOV     R3,#(`?<Constant " to addr ">` >> 8) & 0xff
   \   000166   12....       LCALL   ?Subroutine42 & 0xFFFF
   1329              HalUARTWrite(0,&INDEX,1);
   1330              HalUARTWrite(0,"\n",1);
   1331            }
   \                     ??CrossCallReturnLabel_144:
   \   000169   85..82       MOV     DPL,?XSP + 0
   \   00016C   85..83       MOV     DPH,?XSP + 1
   \   00016F   AA82         MOV     R2,DPL
   \   000171   AB83         MOV     R3,DPH
   \   000173   7900         MOV     R1,#0x0
   \   000175   12....       LCALL   ?Subroutine17 & 0xFFFF
   1332          
   1333          }
   \                     ??CrossCallReturnLabel_29:
   \   000178   7405         MOV     A,#0x5
   \   00017A   12....       LCALL   ?DEALLOC_XSTACK8
   \   00017D   02....       LJMP    ?Subroutine1 & 0xFFFF

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for SOURCE_DATA>`:
   \   000000   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for LIFE_TIME>`:
   \   000000   05           DB 5

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for MAX_Degree>`:
   \   000000   0400         DW 4

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Show_Bit?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Show_Bit

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Show_Num?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Show_Num

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Power_of_2?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Power_of_2

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_ProcessEvent?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_ProcessEvent

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendGroupMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendGroupMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendPeriodicMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendPeriodicMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendFlashMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendFlashMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_HandleKeys?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_HandleKeys

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SerialCMD?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SerialCMD

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_MessageMSGCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_MessageMSGCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Reset_down_neighbor?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Reset_down_neighbor

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendPointToPointMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendPointToPointMessage

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {48, 49}>`:
   \   000000   30           DB 48
   \   000001   31           DB 49

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "0">`:
   \   000000   3000         DB "0"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "System is started.\\n\\n">`:
   \   000000   53797374     DB "System is started.\012\012"
   \            656D2069
   \            73207374
   \            61727465
   \            642E0A0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Group 1">`:
   \   000000   47726F75     DB "Group 1"
   \            70203100

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\nsource_data: ">`:
   \   000000   0A736F75     DB "\012source_data: "
   \            7263655F
   \            64617461
   \            3A2000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant " ">`:
   \   000000   2000         DB " "

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n">`:
   \   000000   0A00         DB "\012"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant ":">`:
   \   000000   3A00         DB ":"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant " info:">`:
   \   000000   20696E66     DB " info:"
   \            6F3A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "nei_num:">`:
   \   000000   6E65695F     DB "nei_num:"
   \            6E756D3A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant ">> ">`:
   \   000000   3E3E2000     DB ">> "

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant " >">`:
   \   000000   203E00       DB " >"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "####">`:
   \   000000   23232323     DB 23H, 23H, 23H, 23H

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\326\\330\\326\\303\\326\\320...">`:
   \   000000   D6D8D6C3     DB "\326\330\326\303\326\320..."
   \            D6D02E2E
   \            2E00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "received  ">`:
   \   000000   72656365     DB "received  "
   \            69766564
   \            202000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "peer is busy">`:
   \   000000   70656572     DB "peer is busy"
   \            20697320
   \            62757379
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\260\\374\\272\\254\\327\\324\\311\\355\\3`:
   \   000000   B0FCBAAC     DB "\260\374\272\254\327\324\311\355\320\305\317\242"
   \            D7D4C9ED
   \            D0C5CFA2
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\307\\322">`:
   \   000000   C7D200       DB "\307\322"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\322\\321\\264\\357\\327\\356\\264\\363\\2`:
   \   000000   D2D1B4EF     DB "\322\321\264\357\327\356\264\363\266\310,"
   \            D7EEB4F3
   \            B6C82C00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant ",">`:
   \   000000   2C00         DB ","

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "encoding...\\n^^">`:
   \   000000   656E636F     DB "encoding...\012^^"
   \            64696E67
   \            2E2E2E0A
   \            5E5E00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n||">`:
   \   000000   0A7C7C00     DB "\012||"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n->">`:
   \   000000   0A2D3E00     DB "\012->"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\316\\264\\261\\340\\302\\353.\\n">`:
   \   000000   CEB4B1E0     DB "\316\264\261\340\302\353.\012"
   \            C2EB2E0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "peer_degree = ">`:
   \   000000   70656572     DB "peer_degree = "
   \            5F646567
   \            72656520
   \            3D2000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n\\n">`:
   \   000000   0A0A00       DB "\012\012"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "i am busy!\\n">`:
   \   000000   6920616D     DB "i am busy!\012"
   \            20627573
   \            79210A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {36, 0, 0, 0}>`:
   \   000000   24           DB 36
   \   000001   00           DB 0
   \   000002   00           DB 0
   \   000003   00           DB 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "send back $">`:
   \   000000   73656E64     DB "send back $"
   \            20626163
   \            6B202400

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "failed to send back\\n">`:
   \   000000   6661696C     DB "failed to send back\012"
   \            65642074
   \            6F207365
   \            6E642062
   \            61636B0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n------------\\n">`:
   \   000000   0A2D2D2D     DB "\012------------\012"
   \            2D2D2D2D
   \            2D2D2D2D
   \            2D0A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "active: ">`:
   \   000000   61637469     DB "active: "
   \            76653A20
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n\\323\\320">`:
   \   000000   0AD3D000     DB "\012\323\320"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\270\\366\\301\\332\\276\\323">`:
   \   000000   B8F6C1DA     DB "\270\366\301\332\276\323"
   \            BED300  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\266\\324\\267\\275\\313\\265: ">`:
   \   000000   B6D4B7BD     DB "\266\324\267\275\313\265: "
   \            CBB53A20
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "!">`:
   \   000000   2100         DB "!"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {42, 0, 0, 0}>`:
   \   000000   2A           DB 42
   \   000001   00           DB 0
   \   000002   00           DB 0
   \   000003   00           DB 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\275\\273\\273\\273\\312\\375\\276\\335\\2`:
   \   000000   BDBBBBBB     DB "\275\273\273\273\312\375\276\335\260\374\307\353\307\363\267\242\313\315\312\247\260\334."
   \            CAFDBEDD
   \            B0FCC7EB
   \            C7F3B7A2
   \            CBCDCAA7
   \            B0DC2E00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "send      *">`:
   \   000000   73656E64     DB "send      *"
   \            20202020
   \            20202A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant " to addr ">`:
   \   000000   20746F20     DB " to addr "
   \            61646472
   \            2000    
   1334          
   1335          
   1336          /*********************************************************************
   1337          *********************************************************************/
   1338          

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     Power_of_2                         0      0     27
     Reset_down_neighbor                2      0     48
       -> AF_DataRequest                0      0     42
       -> HalLedBlink                   0      0     24
     SampleApp_HandleKeys               0      0     22
       -> aps_FindGroup                 0      0     20
       -> aps_RemoveGroup               0      0     20
       -> aps_AddGroup                  0      0     20
       -> HalUARTWrite                  0      0     20
       -> Show_Bit                      0      0     20
       -> HalUARTWrite                  0      0     20
       -> Power_of_2                    0      0     20
       -> Show_Bit                      0      0     20
       -> HalUARTWrite                  0      0     20
       -> Show_Num                      0      0     20
       -> HalUARTWrite                  0      0     20
       -> Show_Bit                      0      0     20
       -> HalUARTWrite                  0      0     20
       -> Show_Bit                      0      0     20
       -> HalUARTWrite                  0      0     20
       -> HalUARTWrite                  0      0     20
       -> Show_Num                      0      0     20
       -> HalUARTWrite                  0      0     20
     SampleApp_Init                     0      0     14
       -> MT_UartInit                   0      0     22
       -> MT_UartRegisterTaskID         0      0     22
       -> HalUARTWrite                  0      0     22
       -> Power_of_2                    0      0     22
       -> afRegister                    0      0     22
       -> RegisterForKeys               0      0     22
       -> osal_memcpy                   0      0     28
       -> aps_AddGroup                  0      0     22
     SampleApp_MessageMSGCB             2      0     48
       -> Power_of_2                    0      0     54
       -> HalUARTWrite                  0      0     54
       -> Onboard_soft_reset            0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Bit                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Bit                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Bit                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> Power_of_2                    0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Bit                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Num                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Bit                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Num                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Bit                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Num                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Num                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> AF_DataRequest                0      0     72
       -> HalUARTWrite                  0      0     54
       -> osal_getClock                 0      0     54
       -> srand                         0      0     54
       -> rand                          0      0     54
       -> AF_DataRequest                0      0     72
       -> HalUARTWrite                  0      0     54
       -> Show_Bit                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Bit                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Bit                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> Power_of_2                    0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Bit                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Num                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Bit                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Num                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Bit                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Num                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> Show_Num                      0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalLedBlink                   0      0     54
       -> Reset_down_neighbor           0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
       -> HalUARTWrite                  0      0     54
     SampleApp_ProcessEvent             0      0     12
       -> osal_msg_receive              0      0     24
       -> osal_start_timerEx            0      0     24
       -> osal_msg_deallocate           0      0     24
       -> osal_msg_receive              0      0     24
       -> SampleApp_SerialCMD           0      0     24
       -> SampleApp_HandleKeys          0      0     24
       -> SampleApp_MessageMSGCB        0      0     24
       -> SampleApp_SendGroupMessage
                                        0      0     24
       -> SampleApp_SendPointToPointMessage
                                        0      0     24
       -> osal_rand                     0      0     24
       -> osal_start_timerEx            0      0     24
     SampleApp_SendFlashMessage         1      0     22
       -> AF_DataRequest                0      0     44
     SampleApp_SendGroupMessage         0      0     31
       -> AF_DataRequest                0      0     38
     SampleApp_SendPeriodicMessage      0      0     19
       -> AF_DataRequest                0      0     38
       -> HalLedBlink                   0      0     20
     SampleApp_SendPointToPointMessage
                                        2      0     38
       -> osal_getClock                 0      0     34
       -> srand                         0      0     34
       -> rand                          0      0     34
       -> rand                          0      0     34
       -> AF_DataRequest                0      0     52
       -> HalLedBlink                   0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> Show_Bit                      0      0     34
       -> HalUARTWrite                  0      0     34
       -> Show_Bit                      0      0     34
       -> HalUARTWrite                  0      0     34
       -> Show_Bit                      0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
     SampleApp_SerialCMD                0      0     24
       -> HalUARTWrite                  0      0     24
       -> HalUARTWrite                  0      0     24
       -> HalUARTWrite                  0      0     24
       -> Show_Num                      0      0     24
       -> HalUARTWrite                  0      0     24
       -> Show_Bit                      0      0     24
       -> HalUARTWrite                  0      0     24
       -> Show_Bit                      0      0     24
       -> HalUARTWrite                  0      0     24
       -> Show_Num                      0      0     24
       -> HalUARTWrite                  0      0     24
     Show_Bit                           2      0     42
       -> HalUARTWrite                  0      0     30
     Show_Num                           1      0     42
       -> HalUARTWrite                  0      0     30
       -> HalUARTWrite                  0      0     30


   Segment part sizes:

     Function/Label                                 Bytes
     --------------                                 -----
     SOURCE_DATA                                       1
     Device_ID                                         1
     LIFE_TIME                                         1
     NEI_NUM                                           1
     Nei_Table                                         6
     ACTIVE                                            6
     _TURN                                             1
     Slot_Size                                         2
     DATA_SLOT                                        24
     MAX_Degree                                        2
     Decoded_X                                       100
     Undecoded_Y                                     100
     Exchanging_Neighbor                               2
     Exchanging_Data                                   1
     Exchange_index                                    1
     Waiting_Request                                   1
     Exchange_Lock                                     1
     SampleApp_ClusterList                             8
     SampleApp_SimpleDesc                             12
     SampleApp_epDesc                                  6
     SampleApp_TaskID                                  1
     SampleApp_NwkState                                1
     SampleApp_TransID                                 1
     SampleApp_Periodic_DstAddr                       12
     SampleApp_Flash_DstAddr                          12
     Point_To_Point_DstAddr                           12
     SampleApp_Group                                  18
     SampleAppPeriodicCounter                          1
     SampleAppFlashCounter                             1
     Show_Bit                                        103
     ?Subroutine8                                      9
     ??Subroutine65_0                                  8
     Show_Num                                        104
     ?Subroutine22                                    13
     ?Subroutine46                                     9
     ?Subroutine56                                    19
     ?Subroutine0                                      3
     ??Subroutine71_0                                  5
     Power_of_2                                       33
     SampleApp_Init                                  292
     ?Subroutine47                                     3
     ??Subroutine59_0                                  8
     ?Subroutine23                                    12
     ?Subroutine4                                      6
     ??Subroutine60_0                                  5
     ?Subroutine31                                     9
     ?Subroutine44                                    13
     ?Subroutine18                                     1
     ?Subroutine9                                      4
     ?Subroutine45                                    11
     ?Subroutine57                                    11
     SampleApp_ProcessEvent                          212
     ?Subroutine1                                      5
     SampleApp_SendGroupMessage                       70
     ??Subroutine61_0                                  6
     SampleApp_SendPeriodicMessage                    86
     SampleApp_SendFlashMessage                      116
     SampleApp_HandleKeys                            243
     ?Subroutine36                                    17
     ?Subroutine33                                    22
     ?Subroutine27                                     9
     ?Subroutine37                                     8
     ?Subroutine54                                     8
     ?Subroutine52                                     8
     ?Subroutine28                                     8
     ??Subroutine67_0                                  4
     ??Subroutine68_0                                  8
     SampleApp_SerialCMD                             206
     ??Subroutine63_0                                  6
     SampleApp_MessageMSGCB                         1331
     ?Subroutine40                                    23
     ?Subroutine39                                     4
     ?Subroutine55                                     4
     ?Subroutine58                                    11
     ?Subroutine35                                    14
     ?Subroutine34                                    10
     ?Subroutine32                                     4
     ?Subroutine30                                     3
     ??Subroutine62_0                                  7
     ?Subroutine29                                     5
     ?Subroutine26                                    14
     ?Subroutine50                                    10
     ?Subroutine25                                     3
     ??Subroutine64_0                                 15
     ?Subroutine24                                    46
     ?Subroutine20                                    14
     ?Subroutine19                                    14
     ?Subroutine16                                    11
     ??Subroutine66_0                                  8
     ?Subroutine15                                    31
     ?Subroutine14                                    16
     ?Subroutine13                                    33
     ?Subroutine43                                     8
     ?Subroutine12                                    41
     ?Subroutine11                                    45
     ?Subroutine49                                    14
     ?Subroutine10                                    71
     ?Subroutine41                                    21
     ?Subroutine7                                      8
     ?Subroutine48                                     8
     ??Subroutine69_0                                  8
     ?Subroutine6                                      4
     ?Subroutine51                                    13
     ?Subroutine5                                      6
     ?Subroutine3                                     27
     ?Subroutine2                                     38
     ?Subroutine42                                     2
     ??Subroutine70_0                                  8
     ?Subroutine38                                    12
     ?Subroutine21                                     5
     ?Subroutine53                                     8
     ?Subroutine17                                    13
     Reset_down_neighbor                             117
     SampleApp_SendPointToPointMessage
                                                     384
     ?<Initializer for SOURCE_DATA>                    1
     ?<Initializer for LIFE_TIME>                      1
     ?<Initializer for MAX_Degree>                     2
     ??Show_Bit?relay                                  6
     ??Show_Num?relay                                  6
     ??Power_of_2?relay                                6
     ??SampleApp_Init?relay                            6
     ??SampleApp_ProcessEvent?relay                    6
     ??SampleApp_SendGroupMessage?relay                6
     ??SampleApp_SendPeriodicMessage?relay             6
     ??SampleApp_SendFlashMessage?relay                6
     ??SampleApp_HandleKeys?relay                      6
     ??SampleApp_SerialCMD?relay                       6
     ??SampleApp_MessageMSGCB?relay                    6
     ??Reset_down_neighbor?relay                       6
     ??SampleApp_SendPointToPointMessage?relay         6
     ?<Constant {48, 49}>                              2
     ?<Constant "0">                                   2
     ?<Constant "System is started.\n\n">             21
     ?<Constant "Group 1">                             8
     ?<Constant "\nsource_data: ">                    15
     ?<Constant " ">                                   2
     ?<Constant "\n">                                  2
     ?<Constant ":">                                   2
     ?<Constant " info:">                              7
     ?<Constant "nei_num:">                            9
     ?<Constant ">> ">                                 4
     ?<Constant " >">                                  3
     ?<Constant "####">                                4
     ?<Constant "\326\330\326\303\326\320...">        10
     ?<Constant "received  ">                         11
     ?<Constant "peer is busy">                       13
     ?<Constant "\260\374\272\254\327\324\311\355\3   13
     ?<Constant "\307\322">                            3
     ?<Constant "\322\321\264\357\327\356\264\363\2   12
     ?<Constant ",">                                   2
     ?<Constant "encoding...\n^^">                    15
     ?<Constant "\n||">                                4
     ?<Constant "\n->">                                4
     ?<Constant "\316\264\261\340\302\353.\n">         9
     ?<Constant "peer_degree = ">                     15
     ?<Constant "\n\n">                                3
     ?<Constant "i am busy!\n">                       12
     ?<Constant {36, 0, 0, 0}>                         4
     ?<Constant "send back $">                        12
     ?<Constant "failed to send back\n">              21
     ?<Constant "\n------------\n">                   15
     ?<Constant "active: ">                            9
     ?<Constant "\n\323\320">                          4
     ?<Constant "\270\366\301\332\276\323">            7
     ?<Constant "\266\324\267\275\313\265: ">          9
     ?<Constant "!">                                   2
     ?<Constant {42, 0, 0, 0}>                         4
     ?<Constant "\275\273\273\273\312\375\276\335\2   24
     ?<Constant "send      *">                        12
     ?<Constant " to addr ">                          10

 
 4 215 bytes in segment BANKED_CODE
    78 bytes in segment BANK_RELAYS
     4 bytes in segment XDATA_I
     4 bytes in segment XDATA_ID
   362 bytes in segment XDATA_ROM_C
   310 bytes in segment XDATA_Z
 
 4 297 bytes of CODE  memory
   362 bytes of CONST memory
   314 bytes of XDATA memory

Errors: none
Warnings: none
