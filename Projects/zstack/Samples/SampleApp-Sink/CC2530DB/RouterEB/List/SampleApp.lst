###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.1.10194/W32 for 8051         12/Sep/2019  15:18:50 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a\ #
#                          Projects\zstack\Samples\SampleApp-Sink\Source\Samp #
#                          leApp.c                                            #
#    Command line       =  -f "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5 #
#                          .1a\Projects\zstack\Samples\SampleApp-Sink\CC2530D #
#                          B\..\..\..\Tools\CC2530DB\f8wRouter.cfg"           #
#                          (-DCPU32MHZ -DROOT=__near_func                     #
#                          -DMAC_CFG_APP_PENDING_QUEUE=TRUE                   #
#                          -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8         #
#                          -DMAC_CFG_RX_MAX=5 -DRTR_NWK) -f                   #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\Tools\CC2530DB\f8wConfig.cfg"              #
#                          (-DZIGBEEPRO -DSECURE=0 -DZG_SECURE_DYNAMIC=0      #
#                          -DREFLECTOR -DDEFAULT_CHANLIST=0x02000000          #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFF0                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 "F:\ZStack-CC2530(2019.09.1 #
#                          2)\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\Sa #
#                          mpleApp-Sink\Source\SampleApp.c" -D ZTOOL_P1 -D    #
#                          MT_TASK -D MT_SYS_FUNC -D MT_ZDO_FUNC -D           #
#                          LCD_SUPPORTED=DEBUG -lC "F:\ZStack-CC2530(2019.09. #
#                          12)\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\S #
#                          ampleApp-Sink\CC2530DB\RouterEB\List\" -lA         #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\R #
#                          outerEB\List\" --diag_suppress Pe001,Pa010 -o      #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\R #
#                          outerEB\Obj\" -e --no_code_motion --debug          #
#                          --core=plain --dptr=16,1 --data_model=large        #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I "F:\ZStack-CC2530(2019.09. #
#                          12)\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\S #
#                          ampleApp-Sink\CC2530DB\" -I                        #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\Source\" -I "F:\ZStack-CC2530(2019.09.12)\ZStack #
#                          -CC2530-2.5.1a\Projects\zstack\Samples\SampleApp-S #
#                          ink\CC2530DB\..\..\..\ZMain\TI2530DB\" -I          #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\..\..\Components\hal\include\" -I          #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\..\..\Components\hal\target\CC2530EB\" -I  #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\..\..\Components\mac\include\" -I          #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\..\..\Components\mac\high_level\" -I       #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\..\..\Components\mac\low_level\srf04\" -I  #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\..\..\Components\mac\low_level\srf04\singl #
#                          e_chip\" -I "F:\ZStack-CC2530(2019.09.12)\ZStack-C #
#                          C2530-2.5.1a\Projects\zstack\Samples\SampleApp-Sin #
#                          k\CC2530DB\..\..\..\..\..\Components\mt\" -I       #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\..\..\Components\osal\include\" -I         #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\..\..\Components\services\saddr\" -I       #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\..\..\Components\services\sdata\" -I       #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\..\..\Components\stack\af\" -I             #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\..\..\Components\stack\nwk\" -I            #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\..\..\Components\stack\sapi\" -I           #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\..\..\Components\stack\sec\" -I            #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\..\..\Components\stack\sys\" -I            #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\..\..\Components\stack\zdo\" -I            #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\..\..\Components\zmac\" -I                 #
#                          "F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a #
#                          \Projects\zstack\Samples\SampleApp-Sink\CC2530DB\. #
#                          .\..\..\..\..\Components\zmac\f8w\" -Ohz           #
#                          --require_prototypes                               #
#    List file          =  F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a\ #
#                          Projects\zstack\Samples\SampleApp-Sink\CC2530DB\Ro #
#                          uterEB\List\SampleApp.lst                          #
#    Object file        =  F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a\ #
#                          Projects\zstack\Samples\SampleApp-Sink\CC2530DB\Ro #
#                          uterEB\Obj\SampleApp.r51                           #
#                                                                             #
#                                                                             #
###############################################################################

F:\ZStack-CC2530(2019.09.12)\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\SampleApp-Sink\Source\SampleApp.c
      1          /**************************************************************************************************
      2            Filename:       SampleApp.c
      3            Revised:        $Date: 2009-03-18 15:56:27 -0700 (Wed, 18 Mar 2009) $
      4            Revision:       $Revision: 19453 $
      5          
      6            Description:    Sink/Coordinator  汇聚/调制节点
      7          
      8          **************************************************************************************************/
      9          
     10          
     11          /*********************************************************************
     12           * INCLUDES
     13           */
     14          #include "OSAL.h"
     15          #include "ZGlobals.h"
     16          #include "AF.h"
     17          #include "aps_groups.h"
     18          #include "ZDApp.h"
     19          #include "MT.h"  //透传中CMD_SERIAL_MSG的定义
     20          
     21          #include "SampleApp.h"
     22          #include "SampleAppHw.h"
     23          
     24          #include "OnBoard.h"
     25          #include "string.h"
     26          
     27          /* HAL */
     28          #include "hal_lcd.h"
     29          #include "hal_led.h"
     30          #include "hal_key.h"
     31          
     32          extern uint16 NLME_GetShortAddr( void ); //获取自身短地址
     33          extern void NLME_UpdateLinkStatus( void ); //更新连接状态
     34          
     35          
     36          /*********************************************************************
     37           * CONSTANTS
     38           */
     39          //用户引入的头文件
     40          #include "MT_UART.h"
     41          #include <stdio.h>
     42          #include "nwk_util.h"
     43          #include <stdlib.h>
     44          #include "OSAL_Clock.h"
     45          #include <math.h>
     46          
     47          
     48          /*********** 注意: 每个设备不一样,记得修改!  **********/

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     49          unsigned char Life_of_AgentNode = 0;  //代理节点生命周期
   \                     Life_of_AgentNode:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
     50          
     51          
     52          

   \                                 In  segment XDATA_I, align 1, keep-with-next
     53          int16 AgentNode = (int16)65534;  //存放Sink节点的代理节点
   \                     AgentNode:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for AgentNode>`
   \   000002                REQUIRE __INIT_XDATA_I
     54          
     55          
     56          
     57          
     58          
     59          
     60          
     61          
     62          /*********************************************************************
     63           * MACROS
     64           */
     65          #define random(x) (rand() % x)
     66          #define uchar unsigned char
     67          #define Node_Num uint8 3  //网络中节点的数量
     68          
     69          
     70          /*********************************************************************
     71           * TYPEDEFS
     72           */
     73          /*<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
     74           * GLOBAL VARIABLES 全局变量
     75           */

   \                                 In  segment XDATA_I, align 1, keep-with-next
     76          int8 LIFE_TIME=5;               //邻居活跃度初始值
   \                     LIFE_TIME:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for LIFE_TIME>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     77          int8 NEI_NUM = 0;               //邻居数量
   \                     NEI_NUM:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     78          int16 Nei_Table[3] = {0};       //邻居表
   \                     Nei_Table:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     79          unsigned short ACTIVE[3] = {0}; //邻居活跃度列表
   \                     ACTIVE:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     80          int8 _TURN = 0;                 //发送轮次控制
   \                     _TURN:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
     81          
     82          
     83          /*#######################以下是Sink节点的配置############################*/
     84          
     85          /*一个码字的组成*/
     86          typedef struct Encoded_PKT  //编码过的码字
     87          {
     88              /*数据域*/
     89              int8 data; //码字数据
     90              /*编码信息,由哪几个节点的数据包组成*/
     91              uint16 Degree_ID;
     92          }PKT;
     93          
     94          

   \                                 In  segment XDATA_ROM_C, align 1
     95          const int Slot_Size = 6;        //码字槽大小
   \                     Slot_Size:
   \   000000   0600         DW 6
     96          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     97          PKT DATA_SLOT[5+1];             //码字结构体数组
   \                     DATA_SLOT:
   \   000000                DS 18
   \   000012                REQUIRE __INIT_XDATA_Z
     98          
     99          
    100          

   \                                 In  segment XDATA_I, align 1, keep-with-next
    101          unsigned short MAX_Degree = 1;  //初始化允许的最大度
   \                     MAX_Degree:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for MAX_Degree>`
   \   000002                REQUIRE __INIT_XDATA_I
    102          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    103          PKT Decoded_X[100];     //初始化已解码的码字数组
   \                     Decoded_X:
   \   000000                DS 300
   \   00012C                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    104          uint8 X_Num = 0;        //记录已经解码的码字个数
   \                     X_Num:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    105          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    106          PKT Undecoded_Y[100];   //初始化未解码的复杂码字数组
   \                     Undecoded_Y:
   \   000000                DS 300
   \   00012C                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    107          uint8 Y_Num = 0;        //记录尚未解码的码字个数
   \                     Y_Num:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    108          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    109          int16 Building_AgentNode;      //待进行码字交换的邻居
   \                     Building_AgentNode:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    110          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    111          uint8 Waiting_Request = FALSE;   //是否在等待对方返回交换的数据包回应
   \                     Waiting_Request:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    112          //uint8 Exchange_Lock = FALSE;     //码字槽操作锁
    113          
    114          
    115          /*<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>
    116          * end
    117          */
    118          
    119          
    120          
    121          
    122          // This list should be filled with Application specific Cluster IDs.

   \                                 In  segment XDATA_ROM_C, align 1
    123          const cId_t SampleApp_ClusterList[SAMPLEAPP_MAX_CLUSTERS] =
   \                     SampleApp_ClusterList:
   \   000000   0100         DW 1
   \   000002   0200         DW 2
   \   000004   0000         DW 0
   \   000006   0000         DW 0
    124          {
    125            SAMPLEAPP_PERIODIC_CLUSTERID,
    126            SAMPLEAPP_FLASH_CLUSTERID
    127          };
    128          

   \                                 In  segment XDATA_ROM_C, align 1
    129          const SimpleDescriptionFormat_t SampleApp_SimpleDesc =
   \                     SampleApp_SimpleDesc:
   \   000000   14           DB 20
   \   000001   080F         DW 3848
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   04           DB 4
   \   000007   ....         DW SampleApp_ClusterList
   \   000009   04           DB 4
   \   00000A   ....         DW SampleApp_ClusterList
    130          {
    131            SAMPLEAPP_ENDPOINT,              //  int Endpoint;
    132            SAMPLEAPP_PROFID,                //  uint16 AppProfId[2];
    133            SAMPLEAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    134            SAMPLEAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
    135            SAMPLEAPP_FLAGS,                 //  int   AppFlags:4;
    136            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    137            (cId_t *)SampleApp_ClusterList,  //  uint8 *pAppInClusterList;
    138            SAMPLEAPP_MAX_CLUSTERS,          //  uint8  AppNumInClusters;
    139            (cId_t *)SampleApp_ClusterList   //  uint8 *pAppInClusterList;
    140          };
    141          
    142          // This is the Endpoint/Interface description.  It is defined here, but
    143          // filled-in in SampleApp_Init().  Another way to go would be to fill
    144          // in the structure here and make it a "const" (in code space).  The
    145          // way it's defined in this sample app it is define in RAM.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    146          endPointDesc_t SampleApp_epDesc;
   \                     SampleApp_epDesc:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z
    147          
    148          /*********************************************************************
    149           * EXTERNAL VARIABLES
    150           */
    151          
    152          /*********************************************************************
    153           * EXTERNAL FUNCTIONS
    154           */
    155          
    156          /*********************************************************************
    157           * LOCAL VARIABLES
    158           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    159          uint8 SampleApp_TaskID;   // Task ID for internal task/event processing
   \                     SampleApp_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    160                                    // This variable will be received when
    161                                    // SampleApp_Init() is called.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    162          devStates_t SampleApp_NwkState;
   \                     SampleApp_NwkState:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    163          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    164          uint8 SampleApp_TransID;  // This is the unique message ID (counter)
   \                     SampleApp_TransID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    165          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    166          afAddrType_t SampleApp_Periodic_DstAddr;
   \                     SampleApp_Periodic_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    167          afAddrType_t SampleApp_Flash_DstAddr; //组播
   \                     SampleApp_Flash_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    168          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    169          afAddrType_t Point_To_Point_DstAddr; //WeBee点对点通信定义
   \                     Point_To_Point_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    170          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    171          aps_Group_t SampleApp_Group; //分组内容
   \                     SampleApp_Group:
   \   000000                DS 18
   \   000012                REQUIRE __INIT_XDATA_Z
    172          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    173          uint8 SampleAppPeriodicCounter = 0;
   \                     SampleAppPeriodicCounter:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    174          uint8 SampleAppFlashCounter = 0;
   \                     SampleAppFlashCounter:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    175          
    176          /*********************************************************************
    177           * LOCAL FUNCTIONS     函数声明
    178           */
    179          void SampleApp_HandleKeys( uint8 shift, uint8 keys );
    180          void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pckt );
    181          void SampleApp_SendPeriodicMessage( void );
    182          void SampleApp_SendFlashMessage( uint16 flashTime );
    183          void SampleApp_SerialCMD(mtOSALSerialData_t *cmdMsg); // 串口通信
    184          void SampleApp_SendPointToPointMessage( void ); //点对点
    185          void SampleApp_SendGroupMessage( void );// 网蜂组播通讯发送函数定义
    186          void Reset_down_neighbor(int16 nei_addr); //重置邻居设备函数
    187          void Show_Bit(uint16 X, uint8 N); //串口打印一个8位比特二进制数字
    188          void Show_Num(uint16 X);  //串口打印8bit数字
    189          uint16 Power_of_2(uint8 X); //2的多少倍
    190          uint8 Dist_X(uint16 s); //在X集合中但是不在码字中的设备ID个数
    191          void Decode(int8 data, uint16 info);  //解码函数
    192          /*********************************************************************
    193           * NETWORK LAYER CALLBACKS
    194           */
    195          
    196          /*********************************************************************
    197           * PUBLIC FUNCTIONS
    198           */
    199          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    200          void Show_Bit( uint16 X, uint8 N )
   \                     Show_Bit:
    201          {
   \   000000   74F3         MOV     A,#-0xd
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 13
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 0,R2
   \   00000C   8B..         MOV     ?V0 + 1,R3
    202            uchar Bit[2] = {'0','1'};
   \   00000E   85..82       MOV     DPL,?XSP + 0
   \   000011   85..83       MOV     DPH,?XSP + 1
   \   000014   AC82         MOV     R4,DPL
   \   000016   AD83         MOV     R5,DPH
   \   000018   7583..       MOV     DPH,#(`?<Constant {48, 49}>` >> 8) & 0xff
   \   00001B   7582..       MOV     DPL,#`?<Constant {48, 49}>` & 0xff
   \   00001E   7402         MOV     A,#0x2
   \   000020   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    203            uint8 index;
    204            for(short j=N-1;j>=0;--j)
   \   000023   E9           MOV     A,R1
   \   000024   24FF         ADD     A,#-0x1
   \   000026   FE           MOV     R6,A
   \   000027   E4           CLR     A
   \   000028   8029         SJMP    ??Show_Bit_0
    205            {
    206              index = (X>>j) & 1;
    207              HalUARTWrite(0,&Bit[index],1);
   \                     ??Show_Bit_1:
   \   00002A                ; Setup parameters for call to function HalUARTWrite
   \   00002A   7C01         MOV     R4,#0x1
   \   00002C   7D00         MOV     R5,#0x0
   \   00002E   85....       MOV     ?V0 + 2,?V0 + 0
   \   000031   85....       MOV     ?V0 + 3,?V0 + 1
   \   000034   EE           MOV     A,R6
   \   000035   78..         MOV     R0,#?V0 + 2
   \   000037   12....       LCALL   ?US_SHR
   \   00003A   E5..         MOV     A,?V0 + 2
   \   00003C   5401         ANL     A,#0x1
   \   00003E   F8           MOV     R0,A
   \   00003F   85..82       MOV     DPL,?XSP + 0
   \   000042   85..83       MOV     DPH,?XSP + 1
   \   000045   E582         MOV     A,DPL
   \   000047   28           ADD     A,R0
   \   000048   FA           MOV     R2,A
   \   000049   E583         MOV     A,DPH
   \   00004B   12....       LCALL   ?Subroutine10 & 0xFFFF
    208            }
   \                     ??CrossCallReturnLabel_14:
   \   00004E   EE           MOV     A,R6
   \   00004F   24FF         ADD     A,#-0x1
   \   000051   1E           DEC     R6
   \   000052   EF           MOV     A,R7
   \                     ??Show_Bit_0:
   \   000053   34FF         ADDC    A,#-0x1
   \   000055   FF           MOV     R7,A
   \   000056   C3           CLR     C
   \   000057   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_69:
   \   00005A   50CE         JNC     ??Show_Bit_1
    209          //  HalUARTWrite(0,"\n",1);
    210          }
   \   00005C   7402         MOV     A,#0x2
   \   00005E   12....       LCALL   ?DEALLOC_XSTACK8
   \   000061   7F05         MOV     R7,#0x5
   \   000063   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   EF           MOV     A,R7
   \   000001                REQUIRE ??Subroutine40_0
   \   000001                ; // Fall through to label ??Subroutine40_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine40_0:
   \   000000   9400         SUBB    A,#0x0
   \   000002   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000004   65D0         XRL     A,PSW
   \   000006   33           RLC     A
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   3400         ADDC    A,#0x0
   \   000002   FB           MOV     R3,A
   \   000003   7900         MOV     R1,#0x0
   \   000005   12....       LCALL   ??HalUARTWrite?relay
   \   000008   22           RET
    211          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    212          void Show_Num( uint16 X )
   \                     Show_Num:
    213          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 5
   \   000005   74FB         MOV     A,#-0x5
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FC           MOV     R4,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FD           MOV     R5,A
    214            if(X == 0)
   \   00000E   EC           MOV     A,R4
   \   00000F   4D           ORL     A,R5
   \   000010   7012         JNZ     ??Show_Num_0
    215            {
    216              HalUARTWrite(0,"0",1);
   \   000012                ; Setup parameters for call to function HalUARTWrite
   \   000012   7C01         MOV     R4,#0x1
   \   000014   7D00         MOV     R5,#0x0
   \   000016   7A..         MOV     R2,#`?<Constant "0">` & 0xff
   \   000018   7B..         MOV     R3,#(`?<Constant "0">` >> 8) & 0xff
   \   00001A   7900         MOV     R1,#0x0
   \   00001C   12....       LCALL   ??HalUARTWrite?relay
    217            }
    218            else
    219            {
    220              uint8 N = 0;
    221              uint8 Num[4];
    222              
    223              while(X)
    224              {
    225                Num[N++] = X % 10;
    226                X /=10;
    227                
    228              }
    229              while(N > 0)
    230              {
    231                uchar temp = '0' + Num[--N];
    232                HalUARTWrite(0,&temp,1);
    233              }
    234            }
    235            
    236            
    237          }
   \                     ??Show_Num_1:
   \   00001F   7405         MOV     A,#0x5
   \   000021   02....       LJMP    ?Subroutine0 & 0xFFFF
   \                     ??Show_Num_0:
   \   000024   7E00         MOV     R6,#0x0
   \                     ??Show_Num_2:
   \   000026   EC           MOV     A,R4
   \   000027   F8           MOV     R0,A
   \   000028   ED           MOV     A,R5
   \   000029   F9           MOV     R1,A
   \   00002A   7A0A         MOV     R2,#0xa
   \   00002C   7B00         MOV     R3,#0x0
   \   00002E   12....       LCALL   ?US_DIV_MOD
   \   000031   8E..         MOV     ?V0 + 0,R6
   \   000033   7401         MOV     A,#0x1
   \   000035   12....       LCALL   ?XSTACK_DISP0_8
   \   000038   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_21:
   \   00003B   EA           MOV     A,R2
   \   00003C   F0           MOVX    @DPTR,A
   \   00003D   0E           INC     R6
   \   00003E   EC           MOV     A,R4
   \   00003F   F8           MOV     R0,A
   \   000040   ED           MOV     A,R5
   \   000041   F9           MOV     R1,A
   \   000042   7A0A         MOV     R2,#0xa
   \   000044   7B00         MOV     R3,#0x0
   \   000046   12....       LCALL   ?US_DIV_MOD
   \   000049   88..         MOV     ?V0 + 0,R0
   \   00004B   89..         MOV     ?V0 + 1,R1
   \   00004D   AC..         MOV     R4,?V0 + 0
   \   00004F   AD..         MOV     R5,?V0 + 1
   \   000051   EC           MOV     A,R4
   \   000052   4D           ORL     A,R5
   \   000053   70D1         JNZ     ??Show_Num_2
   \                     ??Show_Num_3:
   \   000055   EE           MOV     A,R6
   \   000056   60C7         JZ      ??Show_Num_1
   \   000058   1E           DEC     R6
   \   000059   8E..         MOV     ?V0 + 0,R6
   \   00005B   7401         MOV     A,#0x1
   \   00005D   12....       LCALL   ?XSTACK_DISP0_8
   \   000060   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_22:
   \   000063   12....       LCALL   ?Subroutine35 & 0xFFFF
   \                     ??CrossCallReturnLabel_59:
   \   000066   80ED         SJMP    ??Show_Num_3

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   E582         MOV     A,DPL
   \   000002   25..         ADD     A,?V0 + 0
   \   000004   F582         MOV     DPL,A
   \   000006   E583         MOV     A,DPH
   \   000008   3400         ADDC    A,#0x0
   \   00000A   F583         MOV     DPH,A
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003                REQUIRE ??Subroutine39_0
   \   000003                ; // Fall through to label ??Subroutine39_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine39_0:
   \   000000   7F02         MOV     R7,#0x2
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine35:
   \   000000   12....       LCALL   ?Subroutine38 & 0xFFFF
   \                     ??CrossCallReturnLabel_64:
   \   000003   7900         MOV     R1,#0x0
   \   000005   12....       LCALL   ??HalUARTWrite?relay
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine38:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   2430         ADD     A,#0x30
   \   000003   85..82       MOV     DPL,?XSP + 0
   \   000006   85..83       MOV     DPH,?XSP + 1
   \   000009   F0           MOVX    @DPTR,A
   \   00000A                ; Setup parameters for call to function HalUARTWrite
   \   00000A                ; Setup parameters for call to function HalUARTWrite
   \   00000A                ; Setup parameters for call to function HalUARTWrite
   \   00000A                ; Setup parameters for call to function HalUARTWrite
   \   00000A                ; Setup parameters for call to function HalUARTWrite
   \   00000A   7C01         MOV     R4,#0x1
   \   00000C   7D00         MOV     R5,#0x0
   \   00000E   AA82         MOV     R2,DPL
   \   000010   AB83         MOV     R3,DPH
   \   000012   22           RET
    238          
    239          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    240          uint16 Power_of_2( uint8 X )
   \                     Power_of_2:
    241          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    242            if(X == 0)
   \   000000   E9           MOV     A,R1
   \   000001   7006         JNZ     ??Power_of_2_0
    243              return 1;
   \   000003   7A01         MOV     R2,#0x1
   \   000005   7B00         MOV     R3,#0x0
   \   000007   8015         SJMP    ??Power_of_2_1
    244            else
    245            {
    246              uint16 temp = 2;
   \                     ??Power_of_2_0:
   \   000009   7A02         MOV     R2,#0x2
   \   00000B   7B00         MOV     R3,#0x0
    247              for(uchar i=2;i<=X;++i)
   \   00000D   7802         MOV     R0,#0x2
   \   00000F   8008         SJMP    ??Power_of_2_2
    248              {
    249                temp *=2;
   \                     ??Power_of_2_3:
   \   000011   EA           MOV     A,R2
   \   000012   C3           CLR     C
   \   000013   33           RLC     A
   \   000014   FA           MOV     R2,A
   \   000015   EB           MOV     A,R3
   \   000016   33           RLC     A
   \   000017   FB           MOV     R3,A
    250              }
   \   000018   08           INC     R0
   \                     ??Power_of_2_2:
   \   000019   E9           MOV     A,R1
   \   00001A   C3           CLR     C
   \   00001B   98           SUBB    A,R0
   \   00001C   50F3         JNC     ??Power_of_2_3
    251              return temp;
   \                     ??Power_of_2_1:
   \   00001E   02....       LJMP    ?BRET
    252            }
    253          }
    254          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    255          uint8 Dist_X(uint16 s)
   \                     Dist_X:
    256          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    257            uint16 Temp_X = 0; //所有X中码字的联合表示数字
   \   000005   7C00         MOV     R4,#0x0
   \   000007   7D00         MOV     R5,#0x0
    258            for(unsigned short i=0;i<X_Num;++i)
   \   000009   7800         MOV     R0,#0x0
   \   00000B   7900         MOV     R1,#0x0
   \   00000D   8029         SJMP    ??CrossCallReturnLabel_41
    259            {
    260              Temp_X |= Decoded_X[i].Degree_ID;  //将所有的一度码字包含在Comb_X中
   \                     ??Dist_X_0:
   \   00000F   E8           MOV     A,R0
   \   000010   FE           MOV     R6,A
   \   000011   E9           MOV     A,R1
   \   000012   FF           MOV     R7,A
   \   000013   EE           MOV     A,R6
   \   000014   75F003       MOV     B,#0x3
   \   000017   A4           MUL     AB
   \   000018   FE           MOV     R6,A
   \   000019   85F0..       MOV     ?V0 + 0,B
   \   00001C   75F003       MOV     B,#0x3
   \   00001F   EF           MOV     A,R7
   \   000020   A4           MUL     AB
   \   000021   25..         ADD     A,?V0 + 0
   \   000023   FF           MOV     R7,A
   \   000024   74..         MOV     A,#(Decoded_X + 1) & 0xff
   \   000026   2E           ADD     A,R6
   \   000027   F582         MOV     DPL,A
   \   000029   74..         MOV     A,#((Decoded_X + 1) >> 8) & 0xff
   \   00002B   3F           ADDC    A,R7
   \   00002C   F583         MOV     DPH,A
   \   00002E   E0           MOVX    A,@DPTR
   \   00002F   4C           ORL     A,R4
   \   000030   FC           MOV     R4,A
   \   000031   A3           INC     DPTR
   \   000032   E0           MOVX    A,@DPTR
   \   000033   4D           ORL     A,R5
   \   000034   FD           MOV     R5,A
    261            }
   \   000035   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_41:
   \   000038   90....       MOV     DPTR,#X_Num
   \   00003B   E0           MOVX    A,@DPTR
   \   00003C   FE           MOV     R6,A
   \   00003D   C3           CLR     C
   \   00003E   E8           MOV     A,R0
   \   00003F   9E           SUBB    A,R6
   \   000040   E9           MOV     A,R1
   \   000041   9400         SUBB    A,#0x0
   \   000043   40CA         JC      ??Dist_X_0
    262            Temp_X = (~Temp_X) & s;  //得到s比X多的码字信息
   \   000045   EC           MOV     A,R4
   \   000046   F4           CPL     A
   \   000047   F8           MOV     R0,A
   \   000048   ED           MOV     A,R5
   \   000049   F4           CPL     A
   \   00004A   F9           MOV     R1,A
   \   00004B   E8           MOV     A,R0
   \   00004C   5A           ANL     A,R2
   \   00004D   FC           MOV     R4,A
   \   00004E   E9           MOV     A,R1
   \   00004F   5B           ANL     A,R3
   \   000050   FD           MOV     R5,A
    263            if (Temp_X==0)
   \   000051   EC           MOV     A,R4
   \   000052   4D           ORL     A,R5
   \   000053   7004         JNZ     ??Dist_X_1
    264              return 0;
   \   000055   7900         MOV     R1,#0x0
   \   000057   802B         SJMP    ??Dist_X_2
    265            else
    266            {
    267              for(short j=0;j<16;++j)
   \                     ??Dist_X_1:
   \   000059   7A00         MOV     R2,#0x0
   \   00005B   7B00         MOV     R3,#0x0
    268              {
    269                if( (1<<j) == Temp_X ) //若正好多一度
   \                     ??Dist_X_3:
   \   00005D   75..01       MOV     ?V0 + 0,#0x1
   \   000060   75..00       MOV     ?V0 + 1,#0x0
   \   000063   EA           MOV     A,R2
   \   000064   78..         MOV     R0,#?V0 + 0
   \   000066   12....       LCALL   ?S_SHL
   \   000069   EC           MOV     A,R4
   \   00006A   65..         XRL     A,?V0 + 0
   \   00006C   7003         JNZ     ??Dist_X_4
   \   00006E   ED           MOV     A,R5
   \   00006F   65..         XRL     A,?V0 + 1
   \                     ??Dist_X_4:
   \   000071   7004         JNZ     ??Dist_X_5
    270                {
    271                  return 1; //距离为1
   \   000073   7901         MOV     R1,#0x1
   \   000075   800D         SJMP    ??Dist_X_2
    272                }
    273              }
   \                     ??Dist_X_5:
   \   000077   12....       LCALL   ?Subroutine26 & 0xFFFF
   \                     ??CrossCallReturnLabel_44:
   \   00007A   9410         SUBB    A,#0x10
   \   00007C   EB           MOV     A,R3
   \   00007D   12....       LCALL   ??Subroutine40_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_65:
   \   000080   40DB         JC      ??Dist_X_3
    274              return 2;  //距离大于1,用2表示
   \   000082   7902         MOV     R1,#0x2
    275            }
   \                     ??Dist_X_2:
   \   000084   80..         SJMP    ??Subroutine39_0
    276          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine25:
   \   000000   E8           MOV     A,R0
   \   000001   2401         ADD     A,#0x1
   \   000003   08           INC     R0
   \   000004   E9           MOV     A,R1
   \   000005   3400         ADDC    A,#0x0
   \   000007   F9           MOV     R1,A
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine26:
   \   000000   EA           MOV     A,R2
   \   000001   2401         ADD     A,#0x1
   \   000003   0A           INC     R2
   \   000004   EB           MOV     A,R3
   \   000005   3400         ADDC    A,#0x0
   \   000007   FB           MOV     R3,A
   \   000008   C3           CLR     C
   \   000009   EA           MOV     A,R2
   \   00000A   22           RET
    277          
    278          //Dist_X()为1时,解码并存入X中

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    279          void Decode(int8 data, uint16 info)
   \                     Decode:
    280          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 1,R1
   \   000007   8A..         MOV     ?V0 + 2,R2
   \   000009   8B..         MOV     ?V0 + 3,R3
    281            /*距离为1就递归解码*/
    282            if( Dist_X(info) == 1 )
   \   00000B                ; Setup parameters for call to function Dist_X
   \   00000B   12....       LCALL   ??Dist_X?relay
   \   00000E   E9           MOV     A,R1
   \   00000F   6401         XRL     A,#0x1
   \   000011   6003         JZ      $+5
   \   000013   02....       LJMP    ??Decode_0 & 0xFFFF
    283            {
    284              int8 De_Data = data;
   \   000016   85....       MOV     ?V0 + 0,?V0 + 1
    285              uint16 De_info = info;
   \   000019   AE..         MOV     R6,?V0 + 2
   \   00001B   AF..         MOV     R7,?V0 + 3
    286              
    287              for(short i=0;i<X_Num;++i)
   \   00001D   7800         MOV     R0,#0x0
   \   00001F   7900         MOV     R1,#0x0
   \   000021   8059         SJMP    ??CrossCallReturnLabel_42
    288                if(Decoded_X[i].Degree_ID & info)
   \                     ??Decode_1:
   \   000023   E8           MOV     A,R0
   \   000024   FA           MOV     R2,A
   \   000025   E9           MOV     A,R1
   \   000026   FB           MOV     R3,A
   \   000027   EA           MOV     A,R2
   \   000028   75F003       MOV     B,#0x3
   \   00002B   A4           MUL     AB
   \   00002C   FA           MOV     R2,A
   \   00002D   ACF0         MOV     R4,B
   \   00002F   75F003       MOV     B,#0x3
   \   000032   EB           MOV     A,R3
   \   000033   A4           MUL     AB
   \   000034   2C           ADD     A,R4
   \   000035   FB           MOV     R3,A
   \   000036   74..         MOV     A,#(Decoded_X + 1) & 0xff
   \   000038   2A           ADD     A,R2
   \   000039   F582         MOV     DPL,A
   \   00003B   74..         MOV     A,#((Decoded_X + 1) >> 8) & 0xff
   \   00003D   3B           ADDC    A,R3
   \   00003E   F583         MOV     DPH,A
   \   000040   E0           MOVX    A,@DPTR
   \   000041   55..         ANL     A,?V0 + 2
   \   000043   FA           MOV     R2,A
   \   000044   A3           INC     DPTR
   \   000045   E0           MOVX    A,@DPTR
   \   000046   55..         ANL     A,?V0 + 3
   \   000048   FB           MOV     R3,A
   \   000049   EA           MOV     A,R2
   \   00004A   4B           ORL     A,R3
   \   00004B   602C         JZ      ??Decode_2
    289                {
    290                  De_Data ^= Decoded_X[i].data; //依次异或解码
   \   00004D   E8           MOV     A,R0
   \   00004E   FA           MOV     R2,A
   \   00004F   E9           MOV     A,R1
   \   000050   FB           MOV     R3,A
   \   000051   EA           MOV     A,R2
   \   000052   75F003       MOV     B,#0x3
   \   000055   A4           MUL     AB
   \   000056   FA           MOV     R2,A
   \   000057   75F003       MOV     B,#0x3
   \   00005A   EB           MOV     A,R3
   \   00005B   A4           MUL     AB
   \   00005C   2C           ADD     A,R4
   \   00005D   FB           MOV     R3,A
   \   00005E   74..         MOV     A,#Decoded_X & 0xff
   \   000060   2A           ADD     A,R2
   \   000061   F582         MOV     DPL,A
   \   000063   74..         MOV     A,#(Decoded_X >> 8) & 0xff
   \   000065   3B           ADDC    A,R3
   \   000066   F583         MOV     DPH,A
   \   000068   E0           MOVX    A,@DPTR
   \   000069   62..         XRL     ?V0 + 0,A
    291                  De_info &=(~Decoded_X[i].Degree_ID); //去除相应的码字信息
   \   00006B   A3           INC     DPTR
   \   00006C   E0           MOVX    A,@DPTR
   \   00006D   F4           CPL     A
   \   00006E   FA           MOV     R2,A
   \   00006F   A3           INC     DPTR
   \   000070   E0           MOVX    A,@DPTR
   \   000071   F4           CPL     A
   \   000072   FB           MOV     R3,A
   \   000073   EA           MOV     A,R2
   \   000074   5E           ANL     A,R6
   \   000075   FE           MOV     R6,A
   \   000076   EB           MOV     A,R3
   \   000077   5F           ANL     A,R7
   \   000078   FF           MOV     R7,A
    292                }
   \                     ??Decode_2:
   \   000079   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_42:
   \   00007C   90....       MOV     DPTR,#X_Num
   \   00007F   E0           MOVX    A,@DPTR
   \   000080   FA           MOV     R2,A
   \   000081   C3           CLR     C
   \   000082   E8           MOV     A,R0
   \   000083   9A           SUBB    A,R2
   \   000084   E9           MOV     A,R1
   \   000085   12....       LCALL   ??Subroutine40_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_66:
   \   000088   4099         JC      ??Decode_1
   \   00008A   E0           MOVX    A,@DPTR
   \   00008B   75F003       MOV     B,#0x3
   \   00008E   A4           MUL     AB
   \   00008F   F8           MOV     R0,A
   \   000090   A9F0         MOV     R1,B
   \   000092   74..         MOV     A,#Decoded_X & 0xff
   \   000094   28           ADD     A,R0
   \   000095   F582         MOV     DPL,A
   \   000097   74..         MOV     A,#(Decoded_X >> 8) & 0xff
   \   000099   39           ADDC    A,R1
   \   00009A   F583         MOV     DPH,A
   \   00009C   E5..         MOV     A,?V0 + 0
   \   00009E   F0           MOVX    @DPTR,A
    293              Decoded_X[X_Num].data = De_Data;
    294              Decoded_X[X_Num].Degree_ID = De_info;
   \   00009F   A3           INC     DPTR
   \   0000A0   EE           MOV     A,R6
   \   0000A1   F0           MOVX    @DPTR,A
   \   0000A2   A3           INC     DPTR
   \   0000A3   EF           MOV     A,R7
   \   0000A4   F0           MOVX    @DPTR,A
    295              HalUARTWrite(0,"解码出:",7);
   \   0000A5                ; Setup parameters for call to function HalUARTWrite
   \   0000A5   7C07         MOV     R4,#0x7
   \   0000A7   7D00         MOV     R5,#0x0
   \   0000A9   7A..         MOV     R2,#`?<Constant "\\275\\342\\302\\353\\263\\366:">` & 0xff
   \   0000AB   7B..         MOV     R3,#(`?<Constant "\\275\\342\\302\\353\\263\\366:">` >> 8) & 0xff
   \   0000AD   7900         MOV     R1,#0x0
   \   0000AF   12....       LCALL   ??HalUARTWrite?relay
    296              Show_Bit(De_Data,8);
   \   0000B2                ; Setup parameters for call to function Show_Bit
   \   0000B2   7908         MOV     R1,#0x8
   \   0000B4   E5..         MOV     A,?V0 + 0
   \   0000B6   FA           MOV     R2,A
   \   0000B7   33           RLC     A
   \   0000B8   95E0         SUBB    A,0xE0 /* A   */
   \   0000BA   FB           MOV     R3,A
   \   0000BB   12....       LCALL   ?Subroutine24 & 0xFFFF
    297              HalUARTWrite(0," ",1);
    298              Show_Bit(De_info,16);
   \                     ??CrossCallReturnLabel_39:
   \   0000BE                ; Setup parameters for call to function Show_Bit
   \   0000BE   7910         MOV     R1,#0x10
   \   0000C0   EE           MOV     A,R6
   \   0000C1   FA           MOV     R2,A
   \   0000C2   EF           MOV     A,R7
   \   0000C3   FB           MOV     R3,A
   \   0000C4   12....       LCALL   ?Subroutine21 & 0xFFFF
    299              HalUARTWrite(0,"\n",1);
    300              ++X_Num;
   \                     ??CrossCallReturnLabel_32:
   \   0000C7   90....       MOV     DPTR,#X_Num
   \   0000CA   E0           MOVX    A,@DPTR
   \   0000CB   04           INC     A
   \   0000CC   F0           MOVX    @DPTR,A
    301              
    302              /*递归解码*/
    303              for(short j=0;j<Y_Num;++j)
   \   0000CD   7E00         MOV     R6,#0x0
   \   0000CF   7F00         MOV     R7,#0x0
   \   0000D1   807A         SJMP    ??Decode_3
    304              {
    305                if( Dist_X(Undecoded_Y[j].Degree_ID) == 1 )  //如果Y中的某项距离为1, 则再次解码
   \                     ??Decode_4:
   \   0000D3                ; Setup parameters for call to function Dist_X
   \   0000D3   EE           MOV     A,R6
   \   0000D4   F8           MOV     R0,A
   \   0000D5   EF           MOV     A,R7
   \   0000D6   F9           MOV     R1,A
   \   0000D7   E8           MOV     A,R0
   \   0000D8   75F003       MOV     B,#0x3
   \   0000DB   A4           MUL     AB
   \   0000DC   F8           MOV     R0,A
   \   0000DD   AAF0         MOV     R2,B
   \   0000DF   75F003       MOV     B,#0x3
   \   0000E2   E9           MOV     A,R1
   \   0000E3   A4           MUL     AB
   \   0000E4   2A           ADD     A,R2
   \   0000E5   F9           MOV     R1,A
   \   0000E6   74..         MOV     A,#(Undecoded_Y + 1) & 0xff
   \   0000E8   28           ADD     A,R0
   \   0000E9   F582         MOV     DPL,A
   \   0000EB   74..         MOV     A,#((Undecoded_Y + 1) >> 8) & 0xff
   \   0000ED   39           ADDC    A,R1
   \   0000EE   F583         MOV     DPH,A
   \   0000F0   12....       LCALL   ??Subroutine43_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_82:
   \   0000F3   12....       LCALL   ??Dist_X?relay
   \   0000F6   E9           MOV     A,R1
   \   0000F7   6401         XRL     A,#0x1
   \   0000F9   704A         JNZ     ??Decode_5
    306                {
    307                  /*暂存码字与其信息*/
    308                  int8 temp_data = Undecoded_Y[j].data;
   \   0000FB   EE           MOV     A,R6
   \   0000FC   F8           MOV     R0,A
   \   0000FD   EF           MOV     A,R7
   \   0000FE   F9           MOV     R1,A
   \   0000FF   E8           MOV     A,R0
   \   000100   75F003       MOV     B,#0x3
   \   000103   A4           MUL     AB
   \   000104   F8           MOV     R0,A
   \   000105   AAF0         MOV     R2,B
   \   000107   75F003       MOV     B,#0x3
   \   00010A   E9           MOV     A,R1
   \   00010B   A4           MUL     AB
   \   00010C   2A           ADD     A,R2
   \   00010D   F9           MOV     R1,A
   \   00010E   74..         MOV     A,#Undecoded_Y & 0xff
   \   000110   28           ADD     A,R0
   \   000111   FC           MOV     R4,A
   \   000112   74..         MOV     A,#(Undecoded_Y >> 8) & 0xff
   \   000114   39           ADDC    A,R1
   \   000115   FD           MOV     R5,A
   \   000116   8C82         MOV     DPL,R4
   \   000118   8D83         MOV     DPH,R5
   \   00011A   E0           MOVX    A,@DPTR
   \   00011B   F5..         MOV     ?V0 + 2,A
    309                  uint16 temp_info = Undecoded_Y[j].Degree_ID;
   \   00011D   A3           INC     DPTR
   \   00011E   12....       LCALL   ??Subroutine43_0 & 0xFFFF
    310                  /*将其从Y中移除*/
    311                  Undecoded_Y[j] = Undecoded_Y[--Y_Num]; //同时Y的个数减一
   \                     ??CrossCallReturnLabel_83:
   \   000121   90....       MOV     DPTR,#Y_Num
   \   000124   E0           MOVX    A,@DPTR
   \   000125   14           DEC     A
   \   000126   F0           MOVX    @DPTR,A
   \   000127   75F003       MOV     B,#0x3
   \   00012A   A4           MUL     AB
   \   00012B   F8           MOV     R0,A
   \   00012C   85F0..       MOV     ?V0 + 3,B
   \   00012F   A9..         MOV     R1,?V0 + 3
   \   000131   74..         MOV     A,#Undecoded_Y & 0xff
   \   000133   28           ADD     A,R0
   \   000134   F582         MOV     DPL,A
   \   000136   74..         MOV     A,#(Undecoded_Y >> 8) & 0xff
   \   000138   39           ADDC    A,R1
   \   000139   F583         MOV     DPH,A
   \   00013B   7403         MOV     A,#0x3
   \   00013D   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    312                  /*解码*/
    313                  Decode(temp_data, temp_info); 
   \   000140                ; Setup parameters for call to function Decode
   \   000140   A9..         MOV     R1,?V0 + 2
   \   000142   12....       LCALL   ??Decode?relay
    314                  
    315                }
    316              }
   \                     ??Decode_5:
   \   000145   EE           MOV     A,R6
   \   000146   2401         ADD     A,#0x1
   \   000148   0E           INC     R6
   \   000149   EF           MOV     A,R7
   \   00014A   3400         ADDC    A,#0x0
   \   00014C   FF           MOV     R7,A
   \                     ??Decode_3:
   \   00014D   90....       MOV     DPTR,#Y_Num
   \   000150   E0           MOVX    A,@DPTR
   \   000151   F8           MOV     R0,A
   \   000152   C3           CLR     C
   \   000153   EE           MOV     A,R6
   \   000154   98           SUBB    A,R0
   \   000155   12....       LCALL   ?Subroutine13 & 0xFFFF
    317            }//endif
   \                     ??CrossCallReturnLabel_70:
   \   000158   5003         JNC     $+5
   \   00015A   02....       LJMP    ??Decode_4 & 0xFFFF
    318            
    319          }
   \                     ??Decode_0:
   \   00015D   02....       LJMP    ?Subroutine1 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine21:
   \   000000   12....       LCALL   ??Show_Bit?relay
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003   7C01         MOV     R4,#0x1
   \   000005   7D00         MOV     R5,#0x0
   \   000007   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000009   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   00000B   7900         MOV     R1,#0x0
   \   00000D   12....       LCALL   ??HalUARTWrite?relay
   \   000010   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   7F04         MOV     R7,#0x4
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine24:
   \   000000   12....       LCALL   ?Subroutine37 & 0xFFFF
   \                     ??CrossCallReturnLabel_61:
   \   000003   7900         MOV     R1,#0x0
   \   000005   12....       LCALL   ??HalUARTWrite?relay
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine43_0:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   FB           MOV     R3,A
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine37:
   \   000000   12....       LCALL   ??Show_Bit?relay
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003   7C01         MOV     R4,#0x1
   \   000005   7D00         MOV     R5,#0x0
   \   000007   7A..         MOV     R2,#`?<Constant " ">` & 0xff
   \   000009   7B..         MOV     R3,#(`?<Constant " ">` >> 8) & 0xff
   \   00000B   22           RET
    320          /*********************************************************************
    321           * @fn      SampleApp_Init   应用初始化
    322           *
    323           * @brief   Initialization function for the Generic App Task.
    324           *          This is called during initialization and should contain
    325           *          any application specific initialization (ie. hardware
    326           *          initialization/setup, table initialization, power up
    327           *          notificaiton ... ).
    328           *
    329           * @param   task_id - the ID assigned by OSAL.  This ID should be
    330           *                    used to send messages and set timers.
    331           *
    332           * @return  none
    333           */
    334          
    335          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    336          void SampleApp_Init( uint8 task_id )
   \                     SampleApp_Init:
    337          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    338            SampleApp_TaskID = task_id;
   \   000007   90....       MOV     DPTR,#SampleApp_TaskID
   \   00000A   F0           MOVX    @DPTR,A
    339            SampleApp_NwkState = DEV_INIT;
   \   00000B   90....       MOV     DPTR,#SampleApp_NwkState
   \   00000E   7401         MOV     A,#0x1
   \   000010   F0           MOVX    @DPTR,A
    340            SampleApp_TransID = 0;
   \   000011   90....       MOV     DPTR,#SampleApp_TransID
   \   000014   E4           CLR     A
   \   000015   F0           MOVX    @DPTR,A
    341            MT_UartInit(); //初始化UART
   \   000016                ; Setup parameters for call to function MT_UartInit
   \   000016   12....       LCALL   ??MT_UartInit?relay
    342            MT_UartRegisterTaskID(task_id);// 登记任务号
   \   000019                ; Setup parameters for call to function MT_UartRegisterTaskID
   \   000019   EE           MOV     A,R6
   \   00001A   F9           MOV     R1,A
   \   00001B   12....       LCALL   ??MT_UartRegisterTaskID?relay
    343            HalUARTWrite(0, "System is started.\n\n", 20); // （串口 0 ，'字符’,字符个数）
   \   00001E                ; Setup parameters for call to function HalUARTWrite
   \   00001E   7C14         MOV     R4,#0x14
   \   000020   7D00         MOV     R5,#0x0
   \   000022   7A..         MOV     R2,#`?<Constant "System is started.\\n\\n">` & 0xff
   \   000024   7B..         MOV     R3,#(`?<Constant "System is started.\\n\\n">` >> 8) & 0xff
   \   000026   7900         MOV     R1,#0x0
   \   000028   12....       LCALL   ??HalUARTWrite?relay
    344          
    345          
    346            //路由表初始化
    347            for(short i=0;i<3;++i)
   \   00002B   7A00         MOV     R2,#0x0
   \   00002D   7B00         MOV     R3,#0x0
    348            {
    349              Nei_Table[i] += 65534;
   \                     ??SampleApp_Init_0:
   \   00002F   EA           MOV     A,R2
   \   000030   F8           MOV     R0,A
   \   000031   EB           MOV     A,R3
   \   000032   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_72:
   \   000035   24FE         ADD     A,#-0x2
   \   000037   F0           MOVX    @DPTR,A
   \   000038   A3           INC     DPTR
   \   000039   E0           MOVX    A,@DPTR
   \   00003A   34FF         ADDC    A,#-0x1
   \   00003C   F0           MOVX    @DPTR,A
    350              ACTIVE[i] += LIFE_TIME;  //邻居活跃度初始化
   \   00003D   90....       MOV     DPTR,#LIFE_TIME
   \   000040   E0           MOVX    A,@DPTR
   \   000041   FC           MOV     R4,A
   \   000042   33           RLC     A
   \   000043   95E0         SUBB    A,0xE0 /* A   */
   \   000045   FD           MOV     R5,A
   \   000046   12....       LCALL   ?Subroutine12 & 0xFFFF
    351            }
   \                     ??CrossCallReturnLabel_19:
   \   000049   E0           MOVX    A,@DPTR
   \   00004A   2C           ADD     A,R4
   \   00004B   F0           MOVX    @DPTR,A
   \   00004C   A3           INC     DPTR
   \   00004D   E0           MOVX    A,@DPTR
   \   00004E   3D           ADDC    A,R5
   \   00004F   F0           MOVX    @DPTR,A
   \   000050   12....       LCALL   ?Subroutine26 & 0xFFFF
   \                     ??CrossCallReturnLabel_45:
   \   000053   9403         SUBB    A,#0x3
   \   000055   EB           MOV     A,R3
   \   000056   12....       LCALL   ??Subroutine40_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_67:
   \   000059   40D4         JC      ??SampleApp_Init_0
    352          
    353          
    354          //  uint16 Source_DATA_info = Power_of_2(Device_ID);
    355            //给码字槽赋初值(除了sink节点)
    356          //  for(short i=0;i<6;++i)
    357          //  {
    358          //    DATA_SLOT[i].data = SOURCE_DATA;    //给码字槽赋初值
    359          //    DATA_SLOT[i].Degree_ID = Source_DATA_info; //给码字赋节点信息
    360          //    
    361          //  }
    362          
    363            
    364            
    365            
    366            
    367            
    368            
    369            
    370            
    371            
    372            
    373            
    374          
    375            // Device hardware initialization can be added here or in main() (Zmain.c).
    376            // If the hardware is application specific - add it here.
    377            // If the hardware is other parts of the device add it in main().
    378          
    379           #if defined ( BUILD_ALL_DEVICES )
    380            // The "Demo" target is setup to have BUILD_ALL_DEVICES and HOLD_AUTO_START
    381            // We are looking at a jumper (defined in SampleAppHw.c) to be jumpered
    382            // together - if they are - we will start up a coordinator. Otherwise,
    383            // the device will start as a router.
    384            if ( readCoordinatorJumper() )
    385              zgDeviceLogicalType = ZG_DEVICETYPE_COORDINATOR;
    386            else
    387              zgDeviceLogicalType = ZG_DEVICETYPE_ROUTER;
    388          #endif // BUILD_ALL_DEVICES
    389          
    390          #if defined ( HOLD_AUTO_START )
    391            // HOLD_AUTO_START is a compile option that will surpress ZDApp
    392            //  from starting the device and wait for the application to
    393            //  start the device.
    394            ZDOInitDevice(0);
    395          #endif
    396          
    397          
    398          
    399            //WeBee点对点通讯定义
    400            Point_To_Point_DstAddr.addrMode = (afAddrMode_t)Addr16Bit; //点播模式
   \   00005B   90....       MOV     DPTR,#Point_To_Point_DstAddr + 8
   \   00005E   7402         MOV     A,#0x2
   \   000060   F0           MOVX    @DPTR,A
    401            Point_To_Point_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   000061   A3           INC     DPTR
   \   000062   7414         MOV     A,#0x14
   \   000064   F0           MOVX    @DPTR,A
    402            Point_To_Point_DstAddr.addr.shortAddr = 0xB6AE; //发给协调器
   \   000065   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   000068   74AE         MOV     A,#-0x52
   \   00006A   F0           MOVX    @DPTR,A
   \   00006B   A3           INC     DPTR
   \   00006C   74B6         MOV     A,#-0x4a
   \   00006E   F0           MOVX    @DPTR,A
    403          
    404          
    405          
    406          
    407          
    408          
    409            // Setup for the periodic message's destination address
    410            // Broadcast to everyone     广播方式定义
    411            SampleApp_Periodic_DstAddr.addrMode = (afAddrMode_t)AddrBroadcast;
   \   00006F   90....       MOV     DPTR,#SampleApp_Periodic_DstAddr + 8
   \   000072   740F         MOV     A,#0xf
   \   000074   F0           MOVX    @DPTR,A
    412            SampleApp_Periodic_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;
   \   000075   A3           INC     DPTR
   \   000076   7414         MOV     A,#0x14
   \   000078   F0           MOVX    @DPTR,A
    413            SampleApp_Periodic_DstAddr.addr.shortAddr = 0xFFFF;//发送给所有设备,睡眠中的节点由父节点暂存直到超时
   \   000079   90....       MOV     DPTR,#SampleApp_Periodic_DstAddr
   \   00007C   74FF         MOV     A,#-0x1
   \   00007E   F0           MOVX    @DPTR,A
   \   00007F   A3           INC     DPTR
   \   000080   F0           MOVX    @DPTR,A
    414            //0xFFFD 发送给非睡眠状态的所有设备
    415            //0xFFFC 发送给所有路由器以及协调器
    416          
    417          
    418          
    419          
    420            //组播Group1设置
    421            // Setup for the flash command's destination address - Group 1
    422            SampleApp_Flash_DstAddr.addrMode = (afAddrMode_t)afAddrGroup;
   \   000081   90....       MOV     DPTR,#SampleApp_Flash_DstAddr + 8
   \   000084   7401         MOV     A,#0x1
   \   000086   F0           MOVX    @DPTR,A
    423            SampleApp_Flash_DstAddr.endPoint = SAMPLEAPP_ENDPOINT;  //endpoint 端点
   \   000087   A3           INC     DPTR
   \   000088   7414         MOV     A,#0x14
   \   00008A   F0           MOVX    @DPTR,A
    424            SampleApp_Flash_DstAddr.addr.shortAddr = SAMPLEAPP_FLASH_GROUP;
   \   00008B   90....       MOV     DPTR,#SampleApp_Flash_DstAddr
   \   00008E   7402         MOV     A,#0x2
   \   000090   F0           MOVX    @DPTR,A
   \   000091   A3           INC     DPTR
   \   000092   E4           CLR     A
   \   000093   F0           MOVX    @DPTR,A
    425          
    426          
    427          
    428          
    429          
    430            // Fill out the endpoint description.
    431            SampleApp_epDesc.endPoint = SAMPLEAPP_ENDPOINT;
   \   000094   90....       MOV     DPTR,#SampleApp_epDesc
   \   000097   7414         MOV     A,#0x14
   \   000099   F0           MOVX    @DPTR,A
    432            SampleApp_epDesc.task_id = &SampleApp_TaskID;
   \   00009A   A3           INC     DPTR
   \   00009B   74..         MOV     A,#SampleApp_TaskID & 0xff
   \   00009D   F0           MOVX    @DPTR,A
   \   00009E   A3           INC     DPTR
   \   00009F   74..         MOV     A,#(SampleApp_TaskID >> 8) & 0xff
   \   0000A1   F0           MOVX    @DPTR,A
    433            SampleApp_epDesc.simpleDesc
    434                      = (SimpleDescriptionFormat_t *)&SampleApp_SimpleDesc;
   \   0000A2   A3           INC     DPTR
   \   0000A3   74..         MOV     A,#SampleApp_SimpleDesc & 0xff
   \   0000A5   F0           MOVX    @DPTR,A
   \   0000A6   A3           INC     DPTR
   \   0000A7   74..         MOV     A,#(SampleApp_SimpleDesc >> 8) & 0xff
   \   0000A9   F0           MOVX    @DPTR,A
    435            SampleApp_epDesc.latencyReq = noLatencyReqs;
   \   0000AA   A3           INC     DPTR
   \   0000AB   E4           CLR     A
   \   0000AC   F0           MOVX    @DPTR,A
    436          
    437            // Register the endpoint description with the AF
    438            afRegister( &SampleApp_epDesc );
   \   0000AD                ; Setup parameters for call to function afRegister
   \   0000AD   7A..         MOV     R2,#SampleApp_epDesc & 0xff
   \   0000AF   7B..         MOV     R3,#(SampleApp_epDesc >> 8) & 0xff
   \   0000B1   12....       LCALL   ??afRegister?relay
    439          
    440            // Register for all key events - This app will handle all key events
    441            RegisterForKeys( SampleApp_TaskID );
   \   0000B4                ; Setup parameters for call to function RegisterForKeys
   \   0000B4   90....       MOV     DPTR,#SampleApp_TaskID
   \   0000B7   E0           MOVX    A,@DPTR
   \   0000B8   F9           MOV     R1,A
   \   0000B9   12....       LCALL   ??RegisterForKeys?relay
    442          
    443          
    444          
    445            /***********设置 Group_ID*************/
    446            // By default, all devices start out in Group 1
    447            SampleApp_Group.ID = SAMPLEAPP_FLASH_GROUP; //0x0001
   \   0000BC   90....       MOV     DPTR,#SampleApp_Group
   \   0000BF   7402         MOV     A,#0x2
   \   0000C1   F0           MOVX    @DPTR,A
   \   0000C2   A3           INC     DPTR
   \   0000C3   E4           CLR     A
   \   0000C4   F0           MOVX    @DPTR,A
    448            osal_memcpy( SampleApp_Group.name, "Group 1", 7  );
   \   0000C5                ; Setup parameters for call to function osal_memcpy
   \   0000C5   75....       MOV     ?V0 + 0,#`?<Constant "Group 1">` & 0xff
   \   0000C8   75....       MOV     ?V0 + 1,#(`?<Constant "Group 1">` >> 8) & 0xff
   \   0000CB   F5..         MOV     ?V0 + 2,A
   \   0000CD   78..         MOV     R0,#?V0 + 0
   \   0000CF   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000D2   7C07         MOV     R4,#0x7
   \   0000D4   7D00         MOV     R5,#0x0
   \   0000D6   7A..         MOV     R2,#(SampleApp_Group + 2) & 0xff
   \   0000D8   7B..         MOV     R3,#((SampleApp_Group + 2) >> 8) & 0xff
   \   0000DA   12....       LCALL   ??osal_memcpy?relay
   \   0000DD   7403         MOV     A,#0x3
   \   0000DF   12....       LCALL   ?DEALLOC_XSTACK8
    449            aps_AddGroup( SAMPLEAPP_ENDPOINT, &SampleApp_Group );
   \   0000E2                ; Setup parameters for call to function aps_AddGroup
   \   0000E2   7A..         MOV     R2,#SampleApp_Group & 0xff
   \   0000E4   7B..         MOV     R3,#(SampleApp_Group >> 8) & 0xff
   \   0000E6   7914         MOV     R1,#0x14
   \   0000E8   12....       LCALL   ??aps_AddGroup?relay
    450          
    451          
    452          
    453          #if defined ( LCD_SUPPORTED )
    454            HalLcdWriteString( "SampleApp", HAL_LCD_LINE_1 );
   \   0000EB                ; Setup parameters for call to function HalLcdWriteString
   \   0000EB   7901         MOV     R1,#0x1
   \   0000ED   7A..         MOV     R2,#`?<Constant "SampleApp">` & 0xff
   \   0000EF   7B..         MOV     R3,#(`?<Constant "SampleApp">` >> 8) & 0xff
   \   0000F1   12....       LCALL   ??HalLcdWriteString?relay
    455          #endif
    456          }
   \   0000F4   7F03         MOV     R7,#0x3
   \   0000F6   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   F9           MOV     R1,A
   \   000001   E8           MOV     A,R0
   \   000002   C3           CLR     C
   \   000003   33           RLC     A
   \   000004   F8           MOV     R0,A
   \   000005   E9           MOV     A,R1
   \   000006                REQUIRE ??Subroutine41_0
   \   000006                ; // Fall through to label ??Subroutine41_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine41_0:
   \   000000   12....       LCALL   ?Subroutine33 & 0xFFFF
   \                     ??CrossCallReturnLabel_75:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine33:
   \   000000   33           RLC     A
   \   000001   F9           MOV     R1,A
   \   000002   74..         MOV     A,#Nei_Table & 0xff
   \   000004   28           ADD     A,R0
   \   000005   F582         MOV     DPL,A
   \   000007   74..         MOV     A,#(Nei_Table >> 8) & 0xff
   \   000009   39           ADDC    A,R1
   \   00000A   F583         MOV     DPH,A
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   12....       LCALL   ?Subroutine34 & 0xFFFF
   \                     ??CrossCallReturnLabel_58:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine34:
   \   000000   74..         MOV     A,#ACTIVE & 0xff
   \   000002   28           ADD     A,R0
   \   000003   F582         MOV     DPL,A
   \   000005   74..         MOV     A,#(ACTIVE >> 8) & 0xff
   \   000007   39           ADDC    A,R1
   \   000008   F583         MOV     DPH,A
   \   00000A   22           RET
    457          
    458          /*********************************************************************
    459           * @fn      SampleApp_ProcessEvent
    460           *
    461           *        ******************应用处理程序***************************
    462           *
    463           * @brief   Generic Application Task event processor.  This function
    464           *          is called to process all events for the task.  Events
    465           *          include timers, messages and any other user defined events.
    466           *
    467           * @param   task_id  - The OSAL assigned task ID.
    468           * @param   events - events to process.  This is a bit map and can
    469           *                   contain more than one event.
    470           *
    471           * @return  none
    472           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    473          uint16 SampleApp_ProcessEvent( uint8 task_id, uint16 events )
   \                     SampleApp_ProcessEvent:
    474          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    475            afIncomingMSGPacket_t *MSGpkt;
    476            (void)task_id;  // Intentionally unreferenced parameter
    477          
    478            if ( events & SYS_EVENT_MSG ) //系统信息发送事件
   \   000009   5480         ANL     A,#0x80
   \   00000B   7003         JNZ     $+5
   \   00000D   02....       LJMP    ??SampleApp_ProcessEvent_0 & 0xFFFF
    479            {
    480              MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
   \   000010                ; Setup parameters for call to function osal_msg_receive
   \   000010   802B         SJMP    ??SampleApp_ProcessEvent_1
    481              while ( MSGpkt )
    482              {
    483                switch ( MSGpkt->hdr.event )
    484                {
    485                  case CMD_SERIAL_MSG:    // 串口收到数据后由MT_UART层传递过的数据，用网蜂方法接收，编译时不定义MT相关内容
    486                      SampleApp_SerialCMD((mtOSALSerialData_t *)MSGpkt);
    487                      break;
    488          
    489                  // Received when a key is pressed
    490                  case KEY_CHANGE: //按键事件及处理函数
    491                    //HalUARTWrite(0, "KEY ", 4);
    492                    SampleApp_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
    493                    break;
    494          
    495                  // Received when a messages is received (OTA) for this endpoint
    496                  // 接收处理函数
    497                  case AF_INCOMING_MSG_CMD:
    498                    SampleApp_MessageMSGCB( MSGpkt );
    499                    break;
    500          
    501                  // Received whenever the device changes state in the network
    502                  case ZDO_STATE_CHANGE:  //网络状态改变，如未连接上网络
    503                    SampleApp_NwkState = (devStates_t)(MSGpkt->hdr.status);
   \                     ??SampleApp_ProcessEvent_2:
   \   000012   A3           INC     DPTR
   \   000013   E0           MOVX    A,@DPTR
   \   000014   90....       MOV     DPTR,#SampleApp_NwkState
   \   000017   F0           MOVX    @DPTR,A
    504                    if ( (SampleApp_NwkState == DEV_ZB_COORD) //协调器
    505                        || (SampleApp_NwkState == DEV_ROUTER) //路由器
    506                        || (SampleApp_NwkState == DEV_END_DEVICE) ) //终端 都执行
   \   000018   6409         XRL     A,#0x9
   \   00001A   600A         JZ      ??SampleApp_ProcessEvent_3
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   6407         XRL     A,#0x7
   \   00001F   6005         JZ      ??SampleApp_ProcessEvent_3
   \   000021   E0           MOVX    A,@DPTR
   \   000022   6406         XRL     A,#0x6
   \   000024   7010         JNZ     ??SampleApp_ProcessEvent_4
    507                    {
    508                      // Start sending the periodic message in a regular interval.
    509                      osal_start_timerEx( SampleApp_TaskID,
    510                                        SAMPLEAPP_SEND_PERIODIC_MSG_EVT,
    511                                        SAMPLEAPP_SEND_PERIODIC_MSG_TIMEOUT );
   \                     ??SampleApp_ProcessEvent_3:
   \   000026                ; Setup parameters for call to function osal_start_timerEx
   \   000026   7C88         MOV     R4,#-0x78
   \   000028   7D13         MOV     R5,#0x13
   \   00002A   7A01         MOV     R2,#0x1
   \   00002C   7B00         MOV     R3,#0x0
   \   00002E   90....       MOV     DPTR,#SampleApp_TaskID
   \   000031   E0           MOVX    A,@DPTR
   \   000032   F9           MOV     R1,A
   \   000033   12....       LCALL   ??osal_start_timerEx?relay
    512                    }
    513                    else
    514                    {
    515                      // Device is no longer in the network
    516          //              HalUARTWrite(0,"网络断开",8);
    517                    }
    518                    break;
    519          
    520                  default:
    521                    break;
    522                }
    523          
    524                // Release the memory
    525                osal_msg_deallocate( (uint8 *)MSGpkt );
   \                     ??SampleApp_ProcessEvent_4:
   \   000036                ; Setup parameters for call to function osal_msg_deallocate
   \   000036   AA..         MOV     R2,?V0 + 0
   \   000038   AB..         MOV     R3,?V0 + 1
   \   00003A   12....       LCALL   ??osal_msg_deallocate?relay
    526          
    527                // Next - if one is available
    528                MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( SampleApp_TaskID );
   \   00003D                ; Setup parameters for call to function osal_msg_receive
   \                     ??SampleApp_ProcessEvent_1:
   \   00003D   90....       MOV     DPTR,#SampleApp_TaskID
   \   000040   E0           MOVX    A,@DPTR
   \   000041   F9           MOV     R1,A
   \   000042   12....       LCALL   ??osal_msg_receive?relay
   \   000045   8A..         MOV     ?V0 + 0,R2
   \   000047   8B..         MOV     ?V0 + 1,R3
   \   000049   E5..         MOV     A,?V0 + 0
   \   00004B   45..         ORL     A,?V0 + 1
   \   00004D   603E         JZ      ??SampleApp_ProcessEvent_5
   \   00004F   85..82       MOV     DPL,?V0 + 0
   \   000052   85..83       MOV     DPH,?V0 + 1
   \   000055   E0           MOVX    A,@DPTR
   \   000056   14           DEC     A
   \   000057   600E         JZ      ??SampleApp_ProcessEvent_6
   \   000059   24E7         ADD     A,#-0x19
   \   00005B   6027         JZ      ??SampleApp_ProcessEvent_7
   \   00005D   245A         ADD     A,#0x5a
   \   00005F   600F         JZ      ??SampleApp_ProcessEvent_8
   \   000061   24EF         ADD     A,#-0x11
   \   000063   60AD         JZ      ??SampleApp_ProcessEvent_2
   \   000065   80CF         SJMP    ??SampleApp_ProcessEvent_4
   \                     ??SampleApp_ProcessEvent_6:
   \   000067                ; Setup parameters for call to function SampleApp_SerialCMD
   \   000067   AA..         MOV     R2,?V0 + 0
   \   000069   AB..         MOV     R3,?V0 + 1
   \   00006B   12....       LCALL   ??SampleApp_SerialCMD?relay
   \   00006E   80C6         SJMP    ??SampleApp_ProcessEvent_4
   \                     ??SampleApp_ProcessEvent_8:
   \   000070                ; Setup parameters for call to function SampleApp_HandleKeys
   \   000070   A3           INC     DPTR
   \   000071   A3           INC     DPTR
   \   000072   A3           INC     DPTR
   \   000073   E0           MOVX    A,@DPTR
   \   000074   FA           MOV     R2,A
   \   000075   85..82       MOV     DPL,?V0 + 0
   \   000078   85..83       MOV     DPH,?V0 + 1
   \   00007B   A3           INC     DPTR
   \   00007C   A3           INC     DPTR
   \   00007D   E0           MOVX    A,@DPTR
   \   00007E   F9           MOV     R1,A
   \   00007F   12....       LCALL   ??SampleApp_HandleKeys?relay
   \   000082   80B2         SJMP    ??SampleApp_ProcessEvent_4
   \                     ??SampleApp_ProcessEvent_7:
   \   000084                ; Setup parameters for call to function SampleApp_MessageMSGCB
   \   000084   AA..         MOV     R2,?V0 + 0
   \   000086   AB..         MOV     R3,?V0 + 1
   \   000088   12....       LCALL   ??SampleApp_MessageMSGCB?relay
   \   00008B   80A9         SJMP    ??SampleApp_ProcessEvent_4
    529              }
    530          
    531              // return unprocessed events
    532              return (events ^ SYS_EVENT_MSG);
   \                     ??SampleApp_ProcessEvent_5:
   \   00008D   EE           MOV     A,R6
   \   00008E   FA           MOV     R2,A
   \   00008F   EF           MOV     A,R7
   \   000090   6480         XRL     A,#0x80
   \                     ??SampleApp_ProcessEvent_9:
   \   000092   FB           MOV     R3,A
   \   000093   803F         SJMP    ??SampleApp_ProcessEvent_10
    533            }
    534          
    535            // Send a message out - This event is generated by a timer
    536            //  (setup in SampleApp_Init()).
    537            if ( events & SAMPLEAPP_SEND_PERIODIC_MSG_EVT )  //*****周期性发送函数*****
   \                     ??SampleApp_ProcessEvent_0:
   \   000095   EE           MOV     A,R6
   \   000096   A2E0         MOV     C,0xE0 /* A   */.0
   \   000098   5036         JNC     ??SampleApp_ProcessEvent_11
    538            {
    539          
    540          
    541          /***********************************周期性发送函数****************************************/
    542          
    543              /*Send the periodic message*/
    544              //SampleApp_SendPeriodicMessage(); //用户周期性广播发送函数
    545          
    546              if(_TURN == 0){
   \   00009A   90....       MOV     DPTR,#_TURN
   \   00009D   E0           MOVX    A,@DPTR
   \   00009E   700A         JNZ     ??SampleApp_ProcessEvent_12
    547                /*Group*/
    548                SampleApp_SendGroupMessage(); //组播通讯程序
   \   0000A0                ; Setup parameters for call to function SampleApp_SendGroupMessage
   \   0000A0   12....       LCALL   ??SampleApp_SendGroupMessage?relay
    549                _TURN = 1;
   \   0000A3   90....       MOV     DPTR,#_TURN
   \   0000A6   7401         MOV     A,#0x1
   \   0000A8   8007         SJMP    ??SampleApp_ProcessEvent_13
    550              }
    551          
    552              else{
    553                /*Point_to_Point*/
    554                SampleApp_SendPointToPointMessage(); //点对点发送函数
   \                     ??SampleApp_ProcessEvent_12:
   \   0000AA                ; Setup parameters for call to function SampleApp_SendPointToPointMessage
   \   0000AA   12....       LCALL   ??SampleApp_SendPointToPointMessage?relay
    555                _TURN = 0;
   \   0000AD   90....       MOV     DPTR,#_TURN
   \   0000B0   E4           CLR     A
   \                     ??SampleApp_ProcessEvent_13:
   \   0000B1   F0           MOVX    @DPTR,A
    556              }
    557          
    558          /**********************************周期性发送函数*****************************************/
    559          
    560          
    561          
    562          
    563              // Setup to send message again in normal period (+ a little jitter)
    564              osal_start_timerEx( SampleApp_TaskID, SAMPLEAPP_SEND_PERIODIC_MSG_EVT,
    565                                 (SAMPLEAPP_SEND_PERIODIC_MSG_TIMEOUT + (osal_rand() & 0x00FF)) );
   \   0000B2                ; Setup parameters for call to function osal_rand
   \   0000B2   12....       LCALL   ??osal_rand?relay
   \   0000B5                ; Setup parameters for call to function osal_start_timerEx
   \   0000B5   EA           MOV     A,R2
   \   0000B6   2488         ADD     A,#-0x78
   \   0000B8   FC           MOV     R4,A
   \   0000B9   E4           CLR     A
   \   0000BA   3413         ADDC    A,#0x13
   \   0000BC   FD           MOV     R5,A
   \   0000BD   7A01         MOV     R2,#0x1
   \   0000BF   7B00         MOV     R3,#0x0
   \   0000C1   90....       MOV     DPTR,#SampleApp_TaskID
   \   0000C4   E0           MOVX    A,@DPTR
   \   0000C5   F9           MOV     R1,A
   \   0000C6   12....       LCALL   ??osal_start_timerEx?relay
    566          
    567              // return unprocessed events
    568              return (events ^ SAMPLEAPP_SEND_PERIODIC_MSG_EVT);
   \   0000C9   EE           MOV     A,R6
   \   0000CA   6401         XRL     A,#0x1
   \   0000CC   FA           MOV     R2,A
   \   0000CD   EF           MOV     A,R7
   \   0000CE   80C2         SJMP    ??SampleApp_ProcessEvent_9
    569          
    570            }
    571          
    572            // Discard unknown events
    573            return 0;
   \                     ??SampleApp_ProcessEvent_11:
   \   0000D0   7A00         MOV     R2,#0x0
   \   0000D2   7B00         MOV     R3,#0x0
   \                     ??SampleApp_ProcessEvent_10:
   \   0000D4   02....       LJMP    ?Subroutine1 & 0xFFFF
    574          }
    575          
    576          
    577          
    578          
    579          
    580          
    581          
    582          /********************************************************
    583                              组播 发送函数
    584          *********************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    585          void SampleApp_SendGroupMessage( void )
   \                     SampleApp_SendGroupMessage:
    586          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    587            if ( AF_DataRequest( & SampleApp_Flash_DstAddr,
    588                                &SampleApp_epDesc,
    589                                SAMPLEAPP_FLASH_CLUSTERID,
    590                                1,
    591                                (uint8*)&SampleAppPeriodicCounter, //要发送的内容
    592                                &SampleApp_TransID,
    593                                AF_DISCV_ROUTE,
    594                                AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000005                ; Setup parameters for call to function AF_DataRequest
   \   000005   75..1E       MOV     ?V0 + 0,#0x1e
   \   000008   78..         MOV     R0,#?V0 + 0
   \   00000A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00000D   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000010   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000013   78..         MOV     R0,#?V0 + 0
   \   000015   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000018   75....       MOV     ?V0 + 0,#SampleAppPeriodicCounter & 0xff
   \   00001B   75....       MOV     ?V0 + 1,#(SampleAppPeriodicCounter >> 8) & 0xff
   \   00001E   78..         MOV     R0,#?V0 + 0
   \   000020   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000023   75..01       MOV     ?V0 + 0,#0x1
   \   000026   75..00       MOV     ?V0 + 1,#0x0
   \   000029   78..         MOV     R0,#?V0 + 0
   \   00002B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00002E   75..02       MOV     ?V0 + 0,#0x2
   \   000031   78..         MOV     R0,#?V0 + 0
   \   000033   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000036   7920         MOV     R1,#0x20
   \   000038   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   00003A   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   00003C   7A..         MOV     R2,#SampleApp_Flash_DstAddr & 0xff
   \   00003E   7B..         MOV     R3,#(SampleApp_Flash_DstAddr >> 8) & 0xff
   \   000040   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_79:
   \   000043   02....       LJMP    ?Subroutine0 & 0xFFFF
    595            {
    596            }
    597            else
    598            {
    599              // Error occurred in request to send.
    600            }
    601          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine42_0:
   \   000000   12....       LCALL   ??AF_DataRequest?relay
   \   000003   7409         MOV     A,#0x9
   \   000005   22           RET
    602          
    603          
    604          /*********************************************************************
    605           * @fn      SampleApp_SendPeriodicMessage
    606           *
    607           * @brief   Send the periodic message.
    608           *
    609           * @param   none
    610           *
    611           * @return  none
    612           *
    613           *********************************************************
    614                              周期性广播 发送函数
    615           **********************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    616          void SampleApp_SendPeriodicMessage( void )
   \                     SampleApp_SendPeriodicMessage:
    617          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    618            unsigned int flashTime=1000;
    619            if ( AF_DataRequest( &SampleApp_Periodic_DstAddr, &SampleApp_epDesc,
    620                                 SAMPLEAPP_PERIODIC_CLUSTERID,
    621                                 1,  //数据长度
    622                                 (uint8*)&SampleAppPeriodicCounter, //要发送的内容
    623                                 &SampleApp_TransID,
    624                                 AF_DISCV_ROUTE,
    625                                 AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000005                ; Setup parameters for call to function AF_DataRequest
   \   000005   75..1E       MOV     ?V0 + 0,#0x1e
   \   000008   78..         MOV     R0,#?V0 + 0
   \   00000A   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00000D   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000010   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000013   78..         MOV     R0,#?V0 + 0
   \   000015   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000018   75....       MOV     ?V0 + 0,#SampleAppPeriodicCounter & 0xff
   \   00001B   75....       MOV     ?V0 + 1,#(SampleAppPeriodicCounter >> 8) & 0xff
   \   00001E   78..         MOV     R0,#?V0 + 0
   \   000020   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000023   75..01       MOV     ?V0 + 0,#0x1
   \   000026   75..00       MOV     ?V0 + 1,#0x0
   \   000029   78..         MOV     R0,#?V0 + 0
   \   00002B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00002E   78..         MOV     R0,#?V0 + 0
   \   000030   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000033   7920         MOV     R1,#0x20
   \   000035   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000037   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000039   7A..         MOV     R2,#SampleApp_Periodic_DstAddr & 0xff
   \   00003B   7B..         MOV     R3,#(SampleApp_Periodic_DstAddr >> 8) & 0xff
   \   00003D   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_80:
   \   000040   12....       LCALL   ?DEALLOC_XSTACK8
   \   000043   E9           MOV     A,R1
   \   000044   700D         JNZ     ??SampleApp_SendPeriodicMessage_0
    626            {
    627              HalLedBlink( HAL_LED_1, 1, 60, (flashTime / 3) );
   \   000046                ; Setup parameters for call to function HalLedBlink
   \   000046   7C4D         MOV     R4,#0x4d
   \   000048   7D01         MOV     R5,#0x1
   \   00004A   7B3C         MOV     R3,#0x3c
   \   00004C   7A01         MOV     R2,#0x1
   \   00004E   7901         MOV     R1,#0x1
   \   000050   12....       LCALL   ??HalLedBlink?relay
    628            }
    629            else
    630            {
    631              // Error occurred in request to send.
    632            }
    633          }
   \                     ??SampleApp_SendPeriodicMessage_0:
   \   000053   02....       LJMP    ??Subroutine39_0 & 0xFFFF
    634          
    635          
    636          /*********************************************************************
    637           * @fn      SampleApp_SendFlashMessage
    638           *
    639           * @brief   Send the flash message to group 1.
    640           *
    641           * @param   flashTime - in milliseconds
    642           *
    643           * @return  none
    644           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    645          void SampleApp_SendFlashMessage( uint16 flashTime )
   \                     SampleApp_SendFlashMessage:
    646          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 3
   \   000005   74FD         MOV     A,#-0x3
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    647            uint8 buffer[3];
    648            buffer[0] = (uint8)(SampleAppFlashCounter++);
   \   00000A   90....       MOV     DPTR,#SampleAppFlashCounter
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   85..82       MOV     DPL,?XSP + 0
   \   000011   85..83       MOV     DPH,?XSP + 1
   \   000014   F0           MOVX    @DPTR,A
   \   000015   90....       MOV     DPTR,#SampleAppFlashCounter
   \   000018   E0           MOVX    A,@DPTR
   \   000019   04           INC     A
   \   00001A   F0           MOVX    @DPTR,A
    649            buffer[1] = LO_UINT16( flashTime );
   \   00001B   7401         MOV     A,#0x1
   \   00001D   12....       LCALL   ?XSTACK_DISP0_8
   \   000020   EA           MOV     A,R2
   \   000021   F0           MOVX    @DPTR,A
    650            buffer[2] = HI_UINT16( flashTime );
   \   000022   7402         MOV     A,#0x2
   \   000024   12....       LCALL   ?XSTACK_DISP0_8
   \   000027   EB           MOV     A,R3
   \   000028   F0           MOVX    @DPTR,A
    651          
    652            if ( AF_DataRequest( &SampleApp_Flash_DstAddr, &SampleApp_epDesc,
    653                                 SAMPLEAPP_FLASH_CLUSTERID,
    654                                 3,
    655                                 buffer,
    656                                 &SampleApp_TransID,
    657                                 AF_DISCV_ROUTE,
    658                                 AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   000029                ; Setup parameters for call to function AF_DataRequest
   \   000029   75..1E       MOV     ?V0 + 0,#0x1e
   \   00002C   78..         MOV     R0,#?V0 + 0
   \   00002E   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000031   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000034   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000037   78..         MOV     R0,#?V0 + 0
   \   000039   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00003C   7403         MOV     A,#0x3
   \   00003E   12....       LCALL   ?XSTACK_DISP0_8
   \   000041   8582..       MOV     ?V0 + 0,DPL
   \   000044   8583..       MOV     ?V0 + 1,DPH
   \   000047   78..         MOV     R0,#?V0 + 0
   \   000049   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00004C   75..03       MOV     ?V0 + 0,#0x3
   \   00004F   75..00       MOV     ?V0 + 1,#0x0
   \   000052   78..         MOV     R0,#?V0 + 0
   \   000054   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000057   75..02       MOV     ?V0 + 0,#0x2
   \   00005A   78..         MOV     R0,#?V0 + 0
   \   00005C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005F   7920         MOV     R1,#0x20
   \   000061   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000063   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000065   7A..         MOV     R2,#SampleApp_Flash_DstAddr & 0xff
   \   000067   7B..         MOV     R3,#(SampleApp_Flash_DstAddr >> 8) & 0xff
   \   000069   12....       LCALL   ??Subroutine42_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_81:
   \   00006C   12....       LCALL   ?DEALLOC_XSTACK8
    659            {
    660            }
    661            else
    662            {
    663              // Error occurred in request to send.
    664            }
    665          }
   \   00006F   7403         MOV     A,#0x3
   \   000071   02....       LJMP    ?Subroutine0 & 0xFFFF
    666          
    667          
    668          
    669          
    670          /*********************************************************************
    671           * Event Generation Functions
    672           */
    673          /*********************************************************************
    674           * @fn      SampleApp_HandleKeys 按键处理函数
    675           *
    676           * @brief   Handles all key events for this device.
    677           *
    678           * @param   shift - true if in shift/alt.
    679           * @param   keys - bit field for key events. Valid entries:
    680           *                 HAL_KEY_SW_2
    681           *                 HAL_KEY_SW_1
    682           *
    683           * @return  none
    684           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    685          void SampleApp_HandleKeys( uint8 shift, uint8 keys )
   \                     SampleApp_HandleKeys:
    686          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FF           MOV     R7,A
    687            (void)shift;  // Intentionally unreferenced parameter
    688          
    689            if ( keys & HAL_KEY_SW_1 )
    690            {
    691              /* This key sends the Flash Command is sent to Group 1.
    692              * This device will not receive the Flash Command from this
    693              * device (even if it belongs to group 1).
    694              */
    695              //SampleApp_SendFlashMessage( SAMPLEAPP_FLASH_DURATION );
    696            }
    697          
    698            if ( keys & HAL_KEY_SW_2 )
   \   000007   A2E1         MOV     C,0xE0 /* A   */.1
   \   000009   5024         JNC     ??SampleApp_HandleKeys_0
    699            {
    700              /* The Flashr Command is sent to Group 1.
    701              * This key toggles this device in and out of group 1.
    702              * If this device doesn't belong to group 1, this application
    703              * will not receive the Flash command sent to group 1.
    704              */
    705              aps_Group_t *grp;
    706              grp = aps_FindGroup( SAMPLEAPP_ENDPOINT, SAMPLEAPP_FLASH_GROUP );
    707              if ( grp )
   \   00000B                ; Setup parameters for call to function aps_FindGroup
   \   00000B   7A02         MOV     R2,#0x2
   \   00000D   7B00         MOV     R3,#0x0
   \   00000F   7914         MOV     R1,#0x14
   \   000011   12....       LCALL   ??aps_FindGroup?relay
   \   000014   8B..         MOV     ?V0 + 1,R3
   \   000016   EA           MOV     A,R2
   \   000017   45..         ORL     A,?V0 + 1
   \   000019   600B         JZ      ??SampleApp_HandleKeys_1
    708              {
    709                // Remove from the group
    710                aps_RemoveGroup( SAMPLEAPP_ENDPOINT, SAMPLEAPP_FLASH_GROUP );
   \   00001B                ; Setup parameters for call to function aps_RemoveGroup
   \   00001B   7A02         MOV     R2,#0x2
   \   00001D   7B00         MOV     R3,#0x0
   \   00001F   7914         MOV     R1,#0x14
   \   000021   12....       LCALL   ??aps_RemoveGroup?relay
   \   000024   8009         SJMP    ??SampleApp_HandleKeys_0
    711              }
    712              else
    713              {
    714                // Add to the flash group
    715                aps_AddGroup( SAMPLEAPP_ENDPOINT, &SampleApp_Group );
   \                     ??SampleApp_HandleKeys_1:
   \   000026                ; Setup parameters for call to function aps_AddGroup
   \   000026   7A..         MOV     R2,#SampleApp_Group & 0xff
   \   000028   7B..         MOV     R3,#(SampleApp_Group >> 8) & 0xff
   \   00002A   7914         MOV     R1,#0x14
   \   00002C   12....       LCALL   ??aps_AddGroup?relay
    716              }
    717            }
    718            //判断按键S2按下，发送数据到串口
    719            if ( keys & HAL_KEY_SW_6 )
   \                     ??SampleApp_HandleKeys_0:
   \   00002F   EF           MOV     A,R7
   \   000030   A2E5         MOV     C,0xE0 /* A   */.5
   \   000032   4003         JC      $+5
   \   000034   02....       LJMP    ??CrossCallReturnLabel_48 & 0xFFFF
    720            {
    721          //    int self_addr_10 = NLME_GetShortAddr();
    722          //    int neig_addr_10;
    723          //    uchar Self_ADDR[4]; //16进制地址格式
    724          //    uchar Neig_ADDR[4];
    725          //    uchar Num[2];
    726          
    727              //串口输出自身地址
    728          //    HalUARTWrite(0,"自身地址为: 0x",strlen("自身地址为: 0x"));
    729          //    if(self_addr_10 == 0)
    730          //    {
    731          //      HalUARTWrite(0,"0000",4);
    732          //      HalUARTWrite(0,"\n",1);
    733          //    }
    734          //    else
    735          //    {
    736          //      sprintf((char*)Self_ADDR, "%X", self_addr_10); //10进制整型转换成16进制字符串
    737          //
    738          //      for (int i=0;i<4;++i)
    739          //      {
    740          //        HalUARTWrite(0,&Self_ADDR[i],1);
    741          //      }
    742          //      HalUARTWrite(0,"\n",1);
    743          //    }
    744          
    745              //串口输出源数据
    746              HalUARTWrite(0,"\nsource_data: ",14);
   \   000037                ; Setup parameters for call to function HalUARTWrite
   \   000037   7C0E         MOV     R4,#0xe
   \   000039   7D00         MOV     R5,#0x0
   \   00003B   7A..         MOV     R2,#`?<Constant "\\nsource_data: ">` & 0xff
   \   00003D   7B..         MOV     R3,#(`?<Constant "\\nsource_data: ">` >> 8) & 0xff
   \   00003F   12....       LCALL   ?Subroutine32 & 0xFFFF
    747          //    Show_Bit(SOURCE_DATA,8);
    748              HalUARTWrite(0," ",1);
    749          //    Show_Bit(Power_of_2(Device_ID),16);
    750              HalUARTWrite(0,"\n",1);
   \                     ??CrossCallReturnLabel_55:
   \   000042                ; Setup parameters for call to function HalUARTWrite
   \   000042   7C01         MOV     R4,#0x1
   \   000044   7D00         MOV     R5,#0x0
   \   000046   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000048   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   00004A   7900         MOV     R1,#0x0
   \   00004C   12....       LCALL   ??HalUARTWrite?relay
    751          //
    752              for(int8 p=1;p<6;++p)
   \   00004F   7E01         MOV     R6,#0x1
    753              {
    754                Show_Num(p);
   \                     ??SampleApp_HandleKeys_2:
   \   000051                ; Setup parameters for call to function Show_Num
   \   000051   EE           MOV     A,R6
   \   000052   12....       LCALL   ?Subroutine23 & 0xFFFF
    755                HalUARTWrite(0,":",1);
    756                Show_Bit(DATA_SLOT[p].data, 8);
   \                     ??CrossCallReturnLabel_37:
   \   000055   EE           MOV     A,R6
   \   000056   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_35:
   \   000059   F5..         MOV     ?V0 + 0,A
   \   00005B   74..         MOV     A,#(DATA_SLOT >> 8) & 0xff
   \   00005D   39           ADDC    A,R1
   \   00005E   F5..         MOV     ?V0 + 1,A
   \   000060                ; Setup parameters for call to function Show_Bit
   \   000060   7908         MOV     R1,#0x8
   \   000062   85..82       MOV     DPL,?V0 + 0
   \   000065   F583         MOV     DPH,A
   \   000067   12....       LCALL   ?Subroutine19 & 0xFFFF
    757                HalUARTWrite(0," info:",6);
   \                     ??CrossCallReturnLabel_30:
   \   00006A                ; Setup parameters for call to function HalUARTWrite
   \   00006A   7C06         MOV     R4,#0x6
   \   00006C   7D00         MOV     R5,#0x0
   \   00006E   7A..         MOV     R2,#`?<Constant " info:">` & 0xff
   \   000070   7B..         MOV     R3,#(`?<Constant " info:">` >> 8) & 0xff
   \   000072   7900         MOV     R1,#0x0
   \   000074   12....       LCALL   ??HalUARTWrite?relay
    758                Show_Bit(DATA_SLOT[p].Degree_ID, 4);
   \   000077                ; Setup parameters for call to function Show_Bit
   \   000077   7904         MOV     R1,#0x4
   \   000079   85..82       MOV     DPL,?V0 + 0
   \   00007C   85..83       MOV     DPH,?V0 + 1
   \   00007F   A3           INC     DPTR
   \   000080   12....       LCALL   ??Subroutine43_0 & 0xFFFF
    759                HalUARTWrite(0,"\n",1);
    760              }
   \                     ??CrossCallReturnLabel_84:
   \   000083   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_33:
   \   000086   0E           INC     R6
   \   000087   EE           MOV     A,R6
   \   000088   C3           CLR     C
   \   000089   9406         SUBB    A,#0x6
   \   00008B   A2D2         MOV     C,0xD0 /* PSW */.2
   \   00008D   65D0         XRL     A,PSW
   \   00008F   33           RLC     A
   \   000090   40BF         JC      ??SampleApp_HandleKeys_2
    761              
    762              //显示邻居个数
    763              uint8 nei_N = 0;
   \   000092   75..00       MOV     ?V0 + 0,#0x0
    764              for(uchar num_nei=0;num_nei<3;++num_nei)
   \   000095   7A00         MOV     R2,#0x0
    765              {
    766                if(Nei_Table[num_nei] != (int16)65534)
   \                     ??SampleApp_HandleKeys_3:
   \   000097   EA           MOV     A,R2
   \   000098   C3           CLR     C
   \   000099   33           RLC     A
   \   00009A   F8           MOV     R0,A
   \   00009B   E4           CLR     A
   \   00009C   12....       LCALL   ??Subroutine41_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_71:
   \   00009F   64FE         XRL     A,#0xfe
   \   0000A1   7003         JNZ     ??SampleApp_HandleKeys_4
   \   0000A3   A3           INC     DPTR
   \   0000A4   E0           MOVX    A,@DPTR
   \   0000A5   F4           CPL     A
   \                     ??SampleApp_HandleKeys_4:
   \   0000A6   6002         JZ      ??SampleApp_HandleKeys_5
    767                  nei_N++;
   \   0000A8   05..         INC     ?V0 + 0
    768              }
   \                     ??SampleApp_HandleKeys_5:
   \   0000AA   0A           INC     R2
   \   0000AB   EA           MOV     A,R2
   \   0000AC   C3           CLR     C
   \   0000AD   9403         SUBB    A,#0x3
   \   0000AF   40E6         JC      ??SampleApp_HandleKeys_3
    769              HalUARTWrite(0,"nei_num:",8);
   \   0000B1                ; Setup parameters for call to function HalUARTWrite
   \   0000B1   7C08         MOV     R4,#0x8
   \   0000B3   7D00         MOV     R5,#0x0
   \   0000B5   7A..         MOV     R2,#`?<Constant "nei_num:">` & 0xff
   \   0000B7   7B..         MOV     R3,#(`?<Constant "nei_num:">` >> 8) & 0xff
   \   0000B9   7900         MOV     R1,#0x0
   \   0000BB   12....       LCALL   ??HalUARTWrite?relay
    770              Show_Num(nei_N);
   \   0000BE                ; Setup parameters for call to function Show_Num
   \   0000BE   AA..         MOV     R2,?V0 + 0
   \   0000C0   7B00         MOV     R3,#0x0
   \   0000C2   12....       LCALL   ?Subroutine28 & 0xFFFF
    771              HalUARTWrite(0,"\n",1);
    772              
    773              //串口输出所有邻居地址
    774          //    for(int i=0;i<3;++i)
    775          //    {
    776          //      neig_addr_10 = Nei_Table[i];
    777          //
    778          //      sprintf((char*)Num, "%d", i+1);
    779          //      sprintf((char*)Neig_ADDR, "%X", neig_addr_10);
    780          //      HalUARTWrite(0,"邻居",strlen("邻居"));
    781          //      for (int j=0;j<2;++j)
    782          //      {
    783          //        HalUARTWrite(0,&Num[j],1);
    784          //      }
    785          //
    786          //      HalUARTWrite(0,": 0x",strlen(": 0x"));
    787          //
    788          //      if(neig_addr_10 == 0)
    789          //      {
    790          //        HalUARTWrite(0,"0000",4);
    791          //      }
    792          //      else
    793          //      {
    794          //        for (int j=0;j<4;++j)
    795          //        {
    796          //          HalUARTWrite(0,&Neig_ADDR[j],1);
    797          //        }
    798          //      }
    799          //      HalUARTWrite(0,"\n",1);
    800          //    }
    801          
    802          //    HalLedBlink( HAL_LED_3, 2,50, 500 ); //LED3 闪烁提示
    803            }
    804          }
   \                     ??CrossCallReturnLabel_48:
   \   0000C5   02....       LJMP    ??Subroutine39_0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine28:
   \   000000   12....       LCALL   ??Show_Num?relay
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003                ; Setup parameters for call to function HalUARTWrite
   \   000003   7C01         MOV     R4,#0x1
   \   000005   7D00         MOV     R5,#0x0
   \   000007   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000009   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   00000B   7900         MOV     R1,#0x0
   \   00000D   12....       LCALL   ??HalUARTWrite?relay
   \   000010   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine23:
   \   000000   FA           MOV     R2,A
   \   000001   33           RLC     A
   \   000002   95E0         SUBB    A,0xE0 /* A   */
   \   000004   FB           MOV     R3,A
   \   000005   12....       LCALL   ??Show_Num?relay
   \   000008                ; Setup parameters for call to function HalUARTWrite
   \   000008                ; Setup parameters for call to function HalUARTWrite
   \   000008   7C01         MOV     R4,#0x1
   \   00000A   7D00         MOV     R5,#0x0
   \   00000C   7A..         MOV     R2,#`?<Constant ":">` & 0xff
   \   00000E   7B..         MOV     R3,#(`?<Constant ":">` >> 8) & 0xff
   \   000010   7900         MOV     R1,#0x0
   \   000012   12....       LCALL   ??HalUARTWrite?relay
   \   000015   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine22:
   \   000000   F8           MOV     R0,A
   \   000001   33           RLC     A
   \   000002   95E0         SUBB    A,0xE0 /* A   */
   \   000004   F9           MOV     R1,A
   \   000005   E8           MOV     A,R0
   \   000006   75F003       MOV     B,#0x3
   \   000009   A4           MUL     AB
   \   00000A   F8           MOV     R0,A
   \   00000B   AAF0         MOV     R2,B
   \   00000D   75F003       MOV     B,#0x3
   \   000010   E9           MOV     A,R1
   \   000011   A4           MUL     AB
   \   000012   2A           ADD     A,R2
   \   000013   F9           MOV     R1,A
   \   000014   74..         MOV     A,#DATA_SLOT & 0xff
   \   000016   28           ADD     A,R0
   \   000017   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine19:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   33           RLC     A
   \   000003   95E0         SUBB    A,0xE0 /* A   */
   \   000005   FB           MOV     R3,A
   \   000006   12....       LCALL   ??Show_Bit?relay
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine32:
   \   000000   7900         MOV     R1,#0x0
   \   000002   12....       LCALL   ??HalUARTWrite?relay
   \   000005                ; Setup parameters for call to function HalUARTWrite
   \   000005                ; Setup parameters for call to function HalUARTWrite
   \   000005                ; Setup parameters for call to function HalUARTWrite
   \   000005   7C01         MOV     R4,#0x1
   \   000007   7D00         MOV     R5,#0x0
   \   000009   7A..         MOV     R2,#`?<Constant " ">` & 0xff
   \   00000B   7B..         MOV     R3,#(`?<Constant " ">` >> 8) & 0xff
   \   00000D   7900         MOV     R1,#0x0
   \   00000F   12....       LCALL   ??HalUARTWrite?relay
   \   000012   22           RET
    805          
    806          
    807          
    808          
    809          
    810          /*自行定义的 处理串口发来数据包 的函数*/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    811          void SampleApp_SerialCMD(mtOSALSerialData_t *cmdMsg)
   \                     SampleApp_SerialCMD:
    812          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
    813              uint8 i,len,*str=NULL; //len 有用数据长度
    814              str=cmdMsg->msg; //指向数据开头
   \   000005   8A82         MOV     DPL,R2
   \   000007   8B83         MOV     DPH,R3
   \   000009   A3           INC     DPTR
   \   00000A   A3           INC     DPTR
   \   00000B   E0           MOVX    A,@DPTR
   \   00000C   F5..         MOV     ?V0 + 0,A
   \   00000E   A3           INC     DPTR
   \   00000F   E0           MOVX    A,@DPTR
   \   000010   F5..         MOV     ?V0 + 1,A
    815              len=*str; //msg 里的第 1 个字节代表后面的数据长度
   \   000012   85..82       MOV     DPL,?V0 + 0
   \   000015   F583         MOV     DPH,A
   \   000017   E0           MOVX    A,@DPTR
   \   000018   FE           MOV     R6,A
    816              /********打印出串口接收到的数据，用于提示*********/
    817              HalUARTWrite(0,">> ", 3);
   \   000019                ; Setup parameters for call to function HalUARTWrite
   \   000019   7C03         MOV     R4,#0x3
   \   00001B   7D00         MOV     R5,#0x0
   \   00001D   7A..         MOV     R2,#`?<Constant ">> ">` & 0xff
   \   00001F   7B..         MOV     R3,#(`?<Constant ">> ">` >> 8) & 0xff
   \   000021   7900         MOV     R1,#0x0
   \   000023   12....       LCALL   ??HalUARTWrite?relay
    818              for(i=1;i<=len;i++)
   \   000026   7F01         MOV     R7,#0x1
   \   000028   800D         SJMP    ??SampleApp_SerialCMD_0
    819              {
    820                HalUARTWrite(0,str+i,1);
   \                     ??SampleApp_SerialCMD_1:
   \   00002A                ; Setup parameters for call to function HalUARTWrite
   \   00002A   8F..         MOV     ?V0 + 2,R7
   \   00002C   E5..         MOV     A,?V0 + 0
   \   00002E   25..         ADD     A,?V0 + 2
   \   000030   FA           MOV     R2,A
   \   000031   E5..         MOV     A,?V0 + 1
   \   000033   12....       LCALL   ?Subroutine10 & 0xFFFF
    821              }
   \                     ??CrossCallReturnLabel_15:
   \   000036   0F           INC     R7
   \                     ??SampleApp_SerialCMD_0:
   \   000037   EE           MOV     A,R6
   \   000038   C3           CLR     C
   \   000039   9F           SUBB    A,R7
   \   00003A   7C01         MOV     R4,#0x1
   \   00003C   7D00         MOV     R5,#0x0
   \   00003E   50EA         JNC     ??SampleApp_SerialCMD_1
    822          
    823              HalUARTWrite(0,"\n",1 );//换行
   \   000040                ; Setup parameters for call to function HalUARTWrite
   \   000040   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000042   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \   000044   7900         MOV     R1,#0x0
   \   000046   12....       LCALL   ??HalUARTWrite?relay
    824          
    825              if ( len == 2 && *(str+1) == 'k' && *(str+2) == '1')
   \   000049   7402         MOV     A,#0x2
   \   00004B   6E           XRL     A,R6
   \   00004C   7063         JNZ     ??SampleApp_SerialCMD_2
   \   00004E   85..82       MOV     DPL,?V0 + 0
   \   000051   85..83       MOV     DPH,?V0 + 1
   \   000054   A3           INC     DPTR
   \   000055   E0           MOVX    A,@DPTR
   \   000056   646B         XRL     A,#0x6b
   \   000058   7057         JNZ     ??SampleApp_SerialCMD_2
   \   00005A   85..82       MOV     DPL,?V0 + 0
   \   00005D   85..83       MOV     DPH,?V0 + 1
   \   000060   A3           INC     DPTR
   \   000061   A3           INC     DPTR
   \   000062   E0           MOVX    A,@DPTR
   \   000063   6431         XRL     A,#0x31
   \   000065   704A         JNZ     ??SampleApp_SerialCMD_2
    826              {
    827          //      HalUARTWrite(0,"\n0:",7);
    828          //      Show_Bit(SOURCE_DATA,8);
    829          //      HalUARTWrite(0,"\n",1);
    830                
    831                for(int8 p=0;p<1;++p)
   \   000067   75..00       MOV     ?V0 + 0,#0x0
    832                {
    833                  Show_Num(p);
   \                     ??SampleApp_SerialCMD_3:
   \   00006A                ; Setup parameters for call to function Show_Num
   \   00006A   E5..         MOV     A,?V0 + 0
   \   00006C   12....       LCALL   ?Subroutine23 & 0xFFFF
    834                  HalUARTWrite(0,":",1);
    835                  Show_Bit(DATA_SLOT[p].data, 8);
   \                     ??CrossCallReturnLabel_38:
   \   00006F   E5..         MOV     A,?V0 + 0
   \   000071   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_36:
   \   000074   FE           MOV     R6,A
   \   000075   74..         MOV     A,#(DATA_SLOT >> 8) & 0xff
   \   000077   39           ADDC    A,R1
   \   000078   FF           MOV     R7,A
   \   000079                ; Setup parameters for call to function Show_Bit
   \   000079   7908         MOV     R1,#0x8
   \   00007B   8E82         MOV     DPL,R6
   \   00007D   8F83         MOV     DPH,R7
   \   00007F   12....       LCALL   ?Subroutine19 & 0xFFFF
    836                  HalUARTWrite(0," >",2);
   \                     ??CrossCallReturnLabel_31:
   \   000082                ; Setup parameters for call to function HalUARTWrite
   \   000082   7C02         MOV     R4,#0x2
   \   000084   7D00         MOV     R5,#0x0
   \   000086   7A..         MOV     R2,#`?<Constant " >">` & 0xff
   \   000088   7B..         MOV     R3,#(`?<Constant " >">` >> 8) & 0xff
   \   00008A   7900         MOV     R1,#0x0
   \   00008C   12....       LCALL   ??HalUARTWrite?relay
    837                  Show_Bit(256, 16);
   \   00008F                ; Setup parameters for call to function Show_Bit
   \   00008F   7910         MOV     R1,#0x10
   \   000091   7A00         MOV     R2,#0x0
   \   000093   7B01         MOV     R3,#0x1
   \   000095   12....       LCALL   ?Subroutine24 & 0xFFFF
    838                  HalUARTWrite(0," ",1);
    839                  Show_Num(DATA_SLOT[p].Degree_ID);
   \                     ??CrossCallReturnLabel_40:
   \   000098                ; Setup parameters for call to function Show_Num
   \   000098   8E82         MOV     DPL,R6
   \   00009A   8F83         MOV     DPH,R7
   \   00009C   A3           INC     DPTR
   \   00009D   12....       LCALL   ??Subroutine43_0 & 0xFFFF
    840                  HalUARTWrite(0,"\n",1);
    841                }
   \                     ??CrossCallReturnLabel_85:
   \   0000A0   12....       LCALL   ?Subroutine28 & 0xFFFF
   \                     ??CrossCallReturnLabel_49:
   \   0000A3   05..         INC     ?V0 + 0
   \   0000A5   E5..         MOV     A,?V0 + 0
   \   0000A7   C3           CLR     C
   \   0000A8   9401         SUBB    A,#0x1
   \   0000AA   A2D2         MOV     C,0xD0 /* PSW */.2
   \   0000AC   65D0         XRL     A,PSW
   \   0000AE   33           RLC     A
   \   0000AF   40B9         JC      ??SampleApp_SerialCMD_3
    842              }
    843          
    844              //模拟异或操作
    845          //    int8 A[] = {'1','0','0','0','0','0','0','1'};
    846          //    unsigned char One = '1',Zero = '0';
    847          //    for (i=0;i<8;++i)
    848          //    {
    849          //      if(A[i]-*(str+i+1))
    850          //      {
    851          //        HalUARTWrite(0,&One,1);
    852          //        *(str+1+i) = One;
    853          //      }
    854          //      else
    855          //      {
    856          //        HalUARTWrite(0,&Zero,1);
    857          //        *(str+1+i) = Zero;
    858          //      }
    859          //
    860          //    }
    861          //
    862          
    863          }
   \                     ??SampleApp_SerialCMD_2:
   \   0000B1                REQUIRE ?Subroutine1
   \   0000B1                ; // Fall through to label ?Subroutine1
    864          
    865          
    866          
    867          
    868          
    869          
    870          
    871          /*********************************************************************
    872           * LOCAL FUNCTIONS
    873           */
    874          
    875          /*********************************************************************
    876           * @fn      SampleApp_MessageMSGCB  接收函数
    877           *
    878           *          处理接收到的数据,可能是从其他设备收到的数据.
    879           *
    880           * @brief   Data message processor callback.  This function processes
    881           *          any incoming data - probably from other devices.  So, based
    882           *          on cluster ID, perform the intended action.
    883           * @param   none
    884           *
    885           * @return  none
    886           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine17:
   \   000000   F9           MOV     R1,A
   \   000001   8882         MOV     DPL,R0
   \   000003   8983         MOV     DPH,R1
   \   000005                REQUIRE ??Subroutine43_0
   \   000005                ; // Fall through to label ??Subroutine43_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    887          void SampleApp_MessageMSGCB( afIncomingMSGPacket_t *pkt )
   \                     SampleApp_MessageMSGCB:
    888          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 0,R2
   \   00000C   8B..         MOV     ?V0 + 1,R3
    889            uint16 flashTime=1000;//一秒,1000ms
    890            uint8 i,len; //透传
    891            unsigned short neighbor_addr_10 = pkt->srcAddr.addr.shortAddr;  //发送方的数字地址
   \   00000E   8A82         MOV     DPL,R2
   \   000010   8B83         MOV     DPH,R3
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   A3           INC     DPTR
   \   000015   A3           INC     DPTR
   \   000016   A3           INC     DPTR
   \   000017   A3           INC     DPTR
   \   000018   E0           MOVX    A,@DPTR
   \   000019   F5..         MOV     ?V0 + 2,A
   \   00001B   A3           INC     DPTR
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   F5..         MOV     ?V0 + 3,A
    892          //  unsigned char ADDR[4]; //数字地址转换后的字符地址
    893            int8 LOST_nei = 0;
   \   00001F   7E00         MOV     R6,#0x0
    894            uchar active;
    895           
    896            uint8 Peer_data; //对方数据
    897            uint16 Peer_info; //对方码字信息
    898          
    899          //  int8 degree_low; //码字信息低位
    900          //  int8 degree_high;//码字信息高位
    901          //  uint16 Source_info = Power_of_2(Device_ID);
    902            switch ( pkt->clusterId )
   \   000021   8A82         MOV     DPL,R2
   \   000023   8B83         MOV     DPH,R3
   \   000025   A3           INC     DPTR
   \   000026   A3           INC     DPTR
   \   000027   A3           INC     DPTR
   \   000028   A3           INC     DPTR
   \   000029   E0           MOVX    A,@DPTR
   \   00002A   F5..         MOV     ?V0 + 4,A
   \   00002C   A3           INC     DPTR
   \   00002D   E0           MOVX    A,@DPTR
   \   00002E   F5..         MOV     ?V0 + 5,A
   \   000030   78..         MOV     R0,#?V0 + 4
   \   000032   12....       LCALL   ?US_SWITCH_DENSE
   \                     `?<Jumptable for SampleApp_MessageMSGCB>_0`:
   \   000035   0200         DW        2
   \   000037   02           DB        2
   \   000038   ....         DW        ??SampleApp_MessageMSGCB_0
   \   00003A   ....         DW        ??SampleApp_MessageMSGCB_1
   \   00003C   ....         DW        ??SampleApp_MessageMSGCB_2
   \   00003E   ....         DW        ??SampleApp_MessageMSGCB_3
    903            {
    904              
    905              /*************************收到 点对点 消息********************************/
    906            case SAMPLEAPP_POINT_TO_POINT_CLUSTERID:
    907              /*收到重置信号*/
    908              if(pkt->cmd.Data[0] == '!')
   \                     ??SampleApp_MessageMSGCB_3:
   \   000040   EA           MOV     A,R2
   \   000041   2422         ADD     A,#0x22
   \   000043   F582         MOV     DPL,A
   \   000045   EB           MOV     A,R3
   \   000046   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   000049   6421         XRL     A,#0x21
   \   00004B   7013         JNZ     ??SampleApp_MessageMSGCB_4
    909              {
    910                HalUARTWrite(0,"重置中...",strlen("重置中..."));
   \   00004D                ; Setup parameters for call to function HalUARTWrite
   \   00004D   7C09         MOV     R4,#0x9
   \   00004F   7D00         MOV     R5,#0x0
   \   000051   7A..         MOV     R2,#`?<Constant "\\326\\330\\326\\303\\326\\320...">` & 0xff
   \   000053   7B..         MOV     R3,#(`?<Constant "\\326\\330\\326\\303\\326\\320...">` >> 8) & 0xff
   \   000055   7900         MOV     R1,#0x0
   \   000057   12....       LCALL   ??HalUARTWrite?relay
    911                SystemResetSoft();
   \   00005A                ; Setup parameters for call to function Onboard_soft_reset
   \   00005A   12....       LCALL   Onboard_soft_reset & 0xFFFF
   \   00005D   02....       LJMP    ??SampleApp_MessageMSGCB_5 & 0xFFFF
    912              }
    913              
    914              /*表示指定的代理节点已经建立*/
    915              else if( (neighbor_addr_10 == Building_AgentNode) && (pkt->cmd.Data[0] == '%') && (pkt->cmd.Data[1] == '%') && (pkt->cmd.Data[2] == '%') && (pkt->cmd.Data[3] == '%') )
   \                     ??SampleApp_MessageMSGCB_4:
   \   000060   90....       MOV     DPTR,#Building_AgentNode
   \   000063   E0           MOVX    A,@DPTR
   \   000064   65..         XRL     A,?V0 + 2
   \   000066   7004         JNZ     ??SampleApp_MessageMSGCB_6
   \   000068   A3           INC     DPTR
   \   000069   E0           MOVX    A,@DPTR
   \   00006A   65..         XRL     A,?V0 + 3
   \                     ??SampleApp_MessageMSGCB_6:
   \   00006C   7040         JNZ     ??SampleApp_MessageMSGCB_7
   \   00006E   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_12:
   \   000071   6425         XRL     A,#0x25
   \   000073   7039         JNZ     ??SampleApp_MessageMSGCB_7
   \   000075   12....       LCALL   ?Subroutine36 & 0xFFFF
   \                     ??CrossCallReturnLabel_94:
   \   000078   A3           INC     DPTR
   \   000079   E0           MOVX    A,@DPTR
   \   00007A   6425         XRL     A,#0x25
   \   00007C   7030         JNZ     ??SampleApp_MessageMSGCB_7
   \   00007E   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_10:
   \   000081   E0           MOVX    A,@DPTR
   \   000082   6425         XRL     A,#0x25
   \   000084   7028         JNZ     ??SampleApp_MessageMSGCB_7
   \   000086   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_11:
   \   000089   A3           INC     DPTR
   \   00008A   E0           MOVX    A,@DPTR
   \   00008B   6425         XRL     A,#0x25
   \   00008D   701F         JNZ     ??SampleApp_MessageMSGCB_7
    916              {
    917                Life_of_AgentNode = 3;  //设置代理节点的存活周期
   \   00008F   90....       MOV     DPTR,#Life_of_AgentNode
   \   000092   7403         MOV     A,#0x3
   \   000094   F0           MOVX    @DPTR,A
    918                AgentNode = neighbor_addr_10; //记录代理节点的地址
   \   000095   90....       MOV     DPTR,#AgentNode
   \   000098   E5..         MOV     A,?V0 + 2
   \   00009A   F0           MOVX    @DPTR,A
   \   00009B   A3           INC     DPTR
   \   00009C   E5..         MOV     A,?V0 + 3
   \   00009E   F0           MOVX    @DPTR,A
    919                HalUARTWrite(0,"代理节点已建立\n",15);
   \   00009F                ; Setup parameters for call to function HalUARTWrite
   \   00009F   7C0F         MOV     R4,#0xf
   \   0000A1   7D00         MOV     R5,#0x0
   \   0000A3   7A..         MOV     R2,#`?<Constant "\\264\\372\\300\\355\\275\\332\\265\\343\\3` & 0xff
   \   0000A5   7B..         MOV     R3,#(`?<Constant "\\264\\372\\300\\355\\275\\332\\265\\343\\3` >> 8) & 0xff
   \   0000A7   12....       LCALL   ?Subroutine11 & 0xFFFF
    920                Waiting_Request = FALSE; //请求得到相应
    921              }
   \                     ??CrossCallReturnLabel_16:
   \   0000AA   E4           CLR     A
   \   0000AB   F0           MOVX    @DPTR,A
   \   0000AC   804D         SJMP    ??SampleApp_MessageMSGCB_5
    922              
    923              /*收到代理节点发来的数据信号*/
    924              else if((neighbor_addr_10 == AgentNode) && (pkt->cmd.Data[0] == '+'))
   \                     ??SampleApp_MessageMSGCB_7:
   \   0000AE   90....       MOV     DPTR,#AgentNode
   \   0000B1   E0           MOVX    A,@DPTR
   \   0000B2   65..         XRL     A,?V0 + 2
   \   0000B4   7004         JNZ     ??SampleApp_MessageMSGCB_8
   \   0000B6   A3           INC     DPTR
   \   0000B7   E0           MOVX    A,@DPTR
   \   0000B8   65..         XRL     A,?V0 + 3
   \                     ??SampleApp_MessageMSGCB_8:
   \   0000BA   703F         JNZ     ??SampleApp_MessageMSGCB_5
   \   0000BC   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_13:
   \   0000BF   642B         XRL     A,#0x2b
   \   0000C1   7038         JNZ     ??SampleApp_MessageMSGCB_5
    925              {
    926                Waiting_Request = FALSE; //请求得到相应
   \   0000C3   90....       MOV     DPTR,#Waiting_Request
   \   0000C6   E4           CLR     A
   \   0000C7   F0           MOVX    @DPTR,A
    927                Life_of_AgentNode = 3;  //刷新代理节点的存活周期
   \   0000C8   90....       MOV     DPTR,#Life_of_AgentNode
   \   0000CB   7403         MOV     A,#0x3
   \   0000CD   F0           MOVX    @DPTR,A
    928                Peer_data = pkt->cmd.Data[1]; //代理节点发来的数据
    929                Peer_info = pkt->cmd.Data[3];
    930                Peer_info |= pkt->cmd.Data[2]*256; //码字信息
    931                
    932                
    933                Decode(Peer_data, Peer_info);
   \   0000CE   EA           MOV     A,R2
   \   0000CF   2422         ADD     A,#0x22
   \   0000D1   F8           MOV     R0,A
   \   0000D2   EB           MOV     A,R3
   \   0000D3   3400         ADDC    A,#0x0
   \   0000D5   8882         MOV     DPL,R0
   \   0000D7   F583         MOV     DPH,A
   \   0000D9   E0           MOVX    A,@DPTR
   \   0000DA   F8           MOV     R0,A
   \   0000DB   A3           INC     DPTR
   \   0000DC   E0           MOVX    A,@DPTR
   \   0000DD   F9           MOV     R1,A
   \   0000DE                ; Setup parameters for call to function Decode
   \   0000DE   8882         MOV     DPL,R0
   \   0000E0   8983         MOV     DPH,R1
   \   0000E2   A3           INC     DPTR
   \   0000E3   A3           INC     DPTR
   \   0000E4   A3           INC     DPTR
   \   0000E5   E0           MOVX    A,@DPTR
   \   0000E6   FC           MOV     R4,A
   \   0000E7   8882         MOV     DPL,R0
   \   0000E9   8983         MOV     DPH,R1
   \   0000EB   A3           INC     DPTR
   \   0000EC   A3           INC     DPTR
   \   0000ED   E0           MOVX    A,@DPTR
   \   0000EE   FB           MOV     R3,A
   \   0000EF   EC           MOV     A,R4
   \   0000F0   FA           MOV     R2,A
   \   0000F1   8882         MOV     DPL,R0
   \   0000F3   8983         MOV     DPH,R1
   \   0000F5   A3           INC     DPTR
   \   0000F6   E0           MOVX    A,@DPTR
   \   0000F7   F9           MOV     R1,A
   \   0000F8   12....       LCALL   ??Decode?relay
    934              }
    935              
    936              HalUARTWrite(0, "收到代理节点信息:", 17);  //给串口发送提示
   \                     ??SampleApp_MessageMSGCB_5:
   \   0000FB                ; Setup parameters for call to function HalUARTWrite
   \   0000FB   7C11         MOV     R4,#0x11
   \   0000FD   7D00         MOV     R5,#0x0
   \   0000FF   7A..         MOV     R2,#`?<Constant "\\312\\325\\265\\275\\264\\372\\300\\355\\2` & 0xff
   \   000101   7B..         MOV     R3,#(`?<Constant "\\312\\325\\265\\275\\264\\372\\300\\355\\2` >> 8) & 0xff
   \   000103   7900         MOV     R1,#0x0
   \   000105   12....       LCALL   ??HalUARTWrite?relay
    937              HalUARTWrite(0, &pkt->cmd.Data[0], 1); // 打印收到数据
   \   000108   E5..         MOV     A,?V0 + 0
   \   00010A   2422         ADD     A,#0x22
   \   00010C   F5..         MOV     ?V0 + 2,A
   \   00010E   E5..         MOV     A,?V0 + 1
   \   000110   3400         ADDC    A,#0x0
   \   000112   F5..         MOV     ?V0 + 3,A
   \   000114                ; Setup parameters for call to function HalUARTWrite
   \   000114   7C01         MOV     R4,#0x1
   \   000116   7D00         MOV     R5,#0x0
   \   000118   85..82       MOV     DPL,?V0 + 2
   \   00011B   F583         MOV     DPH,A
   \   00011D   12....       LCALL   ??Subroutine43_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_86:
   \   000120   12....       LCALL   ?Subroutine31 & 0xFFFF
    938              
    939              Show_Bit(pkt->cmd.Data[1],8);
   \                     ??CrossCallReturnLabel_53:
   \   000123   12....       LCALL   ?Subroutine4 & 0xFFFF
    940              HalUARTWrite(0," ",1);
    941              Show_Bit(pkt->cmd.Data[2],8);    //打印高8位码字编码信息
   \                     ??CrossCallReturnLabel_4:
   \   000126   12....       LCALL   ?Subroutine4 & 0xFFFF
    942              HalUARTWrite(0," ",1);
    943              Show_Bit(pkt->cmd.Data[3],8);
   \                     ??CrossCallReturnLabel_5:
   \   000129   A3           INC     DPTR
   \   00012A   E0           MOVX    A,@DPTR
   \   00012B   FA           MOV     R2,A
   \   00012C   7B00         MOV     R3,#0x0
   \   00012E   12....       LCALL   ?Subroutine21 & 0xFFFF
    944              HalUARTWrite(0, "\n", 1); // 回车换行
    945              
    946              
    947              HalLedBlink( HAL_LED_2, 2, 60, (flashTime / 4) ); //二号灯闪烁,两次,亮度60%,时间间隔0.125s
   \                     ??CrossCallReturnLabel_34:
   \   000131                ; Setup parameters for call to function HalLedBlink
   \   000131   7CFA         MOV     R4,#-0x6
   \   000133   7D00         MOV     R5,#0x0
   \   000135   7B3C         MOV     R3,#0x3c
   \   000137   7A02         MOV     R2,#0x2
   \   000139   7902         MOV     R1,#0x2
   \   00013B   12....       LCALL   ??HalLedBlink?relay
    948              break;
   \   00013E   02....       LJMP    ??SampleApp_MessageMSGCB_0 & 0xFFFF
    949              
    950              
    951              
    952              /*************************************************************************************************************************
    953              收到组播消息 (路由更新)
    954              **************************************************************************************************************************/
    955            case SAMPLEAPP_FLASH_CLUSTERID:
    956              
    957              
    958              for(int i=0;i<NEI_NUM;++i)
   \                     ??SampleApp_MessageMSGCB_1:
   \   000141   8E..         MOV     ?V0 + 6,R6
   \   000143   8E..         MOV     ?V0 + 7,R6
   \   000145   02....       LJMP    ??SampleApp_MessageMSGCB_9 & 0xFFFF
    959              {
    960                if(ACTIVE[i]-- <= 0)
   \                     ??SampleApp_MessageMSGCB_10:
   \   000148   85....       MOV     ?V0 + 0,?V0 + 6
   \   00014B   85....       MOV     ?V0 + 1,?V0 + 7
   \   00014E   E5..         MOV     A,?V0 + 0
   \   000150   C3           CLR     C
   \   000151   33           RLC     A
   \   000152   F5..         MOV     ?V0 + 0,A
   \   000154   E5..         MOV     A,?V0 + 1
   \   000156   33           RLC     A
   \   000157   F5..         MOV     ?V0 + 1,A
   \   000159   74..         MOV     A,#ACTIVE & 0xff
   \   00015B   25..         ADD     A,?V0 + 0
   \   00015D   F8           MOV     R0,A
   \   00015E   74..         MOV     A,#(ACTIVE >> 8) & 0xff
   \   000160   35..         ADDC    A,?V0 + 1
   \   000162   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_88:
   \   000165   EA           MOV     A,R2
   \   000166   24FF         ADD     A,#-0x1
   \   000168   FC           MOV     R4,A
   \   000169   EB           MOV     A,R3
   \   00016A   34FF         ADDC    A,#-0x1
   \   00016C   FD           MOV     R5,A
   \   00016D   8882         MOV     DPL,R0
   \   00016F   8983         MOV     DPH,R1
   \   000171   EC           MOV     A,R4
   \   000172   F0           MOVX    @DPTR,A
   \   000173   A3           INC     DPTR
   \   000174   ED           MOV     A,R5
   \   000175   F0           MOVX    @DPTR,A
   \   000176   EA           MOV     A,R2
   \   000177   4B           ORL     A,R3
   \   000178   6003         JZ      $+5
   \   00017A   02....       LJMP    ??SampleApp_MessageMSGCB_11 & 0xFFFF
    961                {
    962                  Reset_down_neighbor(Nei_Table[i]); //给掉线邻居发送设备重置信号
   \   00017D   85....       MOV     ?V0 + 0,?V0 + 6
   \   000180   85....       MOV     ?V0 + 1,?V0 + 7
   \   000183   E5..         MOV     A,?V0 + 0
   \   000185   C3           CLR     C
   \   000186   33           RLC     A
   \   000187   F5..         MOV     ?V0 + 0,A
   \   000189   E5..         MOV     A,?V0 + 1
   \   00018B   33           RLC     A
   \   00018C   F5..         MOV     ?V0 + 1,A
   \   00018E   74..         MOV     A,#Nei_Table & 0xff
   \   000190   25..         ADD     A,?V0 + 0
   \   000192   F5..         MOV     ?V0 + 4,A
   \   000194   74..         MOV     A,#(Nei_Table >> 8) & 0xff
   \   000196   35..         ADDC    A,?V0 + 1
   \   000198   F5..         MOV     ?V0 + 5,A
   \   00019A                ; Setup parameters for call to function Reset_down_neighbor
   \   00019A   85..82       MOV     DPL,?V0 + 4
   \   00019D   F583         MOV     DPH,A
   \   00019F   12....       LCALL   ??Subroutine43_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_87:
   \   0001A2   12....       LCALL   ??Reset_down_neighbor?relay
    963                  Nei_Table[i] = Nei_Table[NEI_NUM-1];
   \   0001A5   90....       MOV     DPTR,#NEI_NUM
   \   0001A8   E0           MOVX    A,@DPTR
   \   0001A9   F8           MOV     R0,A
   \   0001AA   33           RLC     A
   \   0001AB   95E0         SUBB    A,0xE0 /* A   */
   \   0001AD   F9           MOV     R1,A
   \   0001AE   E8           MOV     A,R0
   \   0001AF   C3           CLR     C
   \   0001B0   33           RLC     A
   \   0001B1   F8           MOV     R0,A
   \   0001B2   E9           MOV     A,R1
   \   0001B3   33           RLC     A
   \   0001B4   F9           MOV     R1,A
   \   0001B5   74..         MOV     A,#(Nei_Table + 254) & 0xff
   \   0001B7   28           ADD     A,R0
   \   0001B8   FA           MOV     R2,A
   \   0001B9   74..         MOV     A,#((Nei_Table - 2) >> 8) & 0xff
   \   0001BB   39           ADDC    A,R1
   \   0001BC   FB           MOV     R3,A
   \   0001BD   8A82         MOV     DPL,R2
   \   0001BF   8B83         MOV     DPH,R3
   \   0001C1   E0           MOVX    A,@DPTR
   \   0001C2   FC           MOV     R4,A
   \   0001C3   A3           INC     DPTR
   \   0001C4   E0           MOVX    A,@DPTR
   \   0001C5   FD           MOV     R5,A
   \   0001C6   85..82       MOV     DPL,?V0 + 4
   \   0001C9   85..83       MOV     DPH,?V0 + 5
   \   0001CC   EC           MOV     A,R4
   \   0001CD   F0           MOVX    @DPTR,A
   \   0001CE   A3           INC     DPTR
   \   0001CF   ED           MOV     A,R5
   \   0001D0   F0           MOVX    @DPTR,A
    964                  Nei_Table[NEI_NUM-1] = (int16)65534;
   \   0001D1   8A82         MOV     DPL,R2
   \   0001D3   8B83         MOV     DPH,R3
   \   0001D5   74FE         MOV     A,#-0x2
   \   0001D7   F0           MOVX    @DPTR,A
   \   0001D8   A3           INC     DPTR
   \   0001D9   04           INC     A
   \   0001DA   F0           MOVX    @DPTR,A
    965                  ACTIVE[i] = ACTIVE[NEI_NUM-1];
   \   0001DB   74..         MOV     A,#(ACTIVE + 254) & 0xff
   \   0001DD   28           ADD     A,R0
   \   0001DE   F8           MOV     R0,A
   \   0001DF   74..         MOV     A,#((ACTIVE - 2) >> 8) & 0xff
   \   0001E1   39           ADDC    A,R1
   \   0001E2   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_89:
   \   0001E5   74..         MOV     A,#ACTIVE & 0xff
   \   0001E7   25..         ADD     A,?V0 + 0
   \   0001E9   F582         MOV     DPL,A
   \   0001EB   74..         MOV     A,#(ACTIVE >> 8) & 0xff
   \   0001ED   35..         ADDC    A,?V0 + 1
   \   0001EF   F583         MOV     DPH,A
   \   0001F1   EA           MOV     A,R2
   \   0001F2   F0           MOVX    @DPTR,A
   \   0001F3   A3           INC     DPTR
   \   0001F4   EB           MOV     A,R3
   \   0001F5   F0           MOVX    @DPTR,A
    966                  ACTIVE[NEI_NUM-1] = LIFE_TIME;
   \   0001F6   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_91:
   \   0001F9   8882         MOV     DPL,R0
   \   0001FB   8983         MOV     DPH,R1
   \   0001FD   EA           MOV     A,R2
   \   0001FE   F0           MOVX    @DPTR,A
   \   0001FF   A3           INC     DPTR
   \   000200   EB           MOV     A,R3
   \   000201   F0           MOVX    @DPTR,A
    967                  LOST_nei++;
   \   000202   0E           INC     R6
    968                }
    969              }
   \                     ??SampleApp_MessageMSGCB_11:
   \   000203   E5..         MOV     A,?V0 + 6
   \   000205   2401         ADD     A,#0x1
   \   000207   F5..         MOV     ?V0 + 6,A
   \   000209   E5..         MOV     A,?V0 + 7
   \   00020B   3400         ADDC    A,#0x0
   \   00020D   F5..         MOV     ?V0 + 7,A
   \                     ??SampleApp_MessageMSGCB_9:
   \   00020F   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_27:
   \   000212   E5..         MOV     A,?V0 + 6
   \   000214   98           SUBB    A,R0
   \   000215   E5..         MOV     A,?V0 + 7
   \   000217   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_50:
   \   00021A   5003         JNC     $+5
   \   00021C   02....       LJMP    ??SampleApp_MessageMSGCB_10 & 0xFFFF
    970              
    971              NEI_NUM -= LOST_nei;  //邻居个数减少
   \   00021F   E0           MOVX    A,@DPTR
   \   000220   C3           CLR     C
   \   000221   9E           SUBB    A,R6
   \   000222   F0           MOVX    @DPTR,A
    972              
    973              
    974              
    975              for(int i=0;i<3;++i)
   \   000223   7800         MOV     R0,#0x0
   \   000225   7900         MOV     R1,#0x0
    976              {
    977                //邻居表中有该路由
    978                if(Nei_Table[i]==neighbor_addr_10)
   \                     ??SampleApp_MessageMSGCB_12:
   \   000227   12....       LCALL   ?Subroutine27 & 0xFFFF
   \                     ??CrossCallReturnLabel_46:
   \   00022A   65..         XRL     A,?V0 + 2
   \   00022C   7004         JNZ     ??SampleApp_MessageMSGCB_13
   \   00022E   A3           INC     DPTR
   \   00022F   E0           MOVX    A,@DPTR
   \   000230   65..         XRL     A,?V0 + 3
   \                     ??SampleApp_MessageMSGCB_13:
   \   000232   7014         JNZ     ??SampleApp_MessageMSGCB_14
    979                {
    980                  ACTIVE[i] = LIFE_TIME; //收到该邻居信息,更新存活时间
   \   000234   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_92:
   \   000237   E8           MOV     A,R0
   \   000238   C3           CLR     C
   \   000239   33           RLC     A
   \   00023A   F8           MOV     R0,A
   \   00023B   E9           MOV     A,R1
   \   00023C   33           RLC     A
   \   00023D   F9           MOV     R1,A
   \   00023E   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_20:
   \   000241   EA           MOV     A,R2
   \   000242   F0           MOVX    @DPTR,A
   \   000243   A3           INC     DPTR
   \   000244   EB           MOV     A,R3
   \   000245   F0           MOVX    @DPTR,A
    981                  break;
   \   000246   8066         SJMP    ??SampleApp_MessageMSGCB_15
    982                }
    983                
    984                //其他合法路由
    985                else if((Nei_Table[i]!=(int16)65534) && (Nei_Table[i]!=neighbor_addr_10))
   \                     ??SampleApp_MessageMSGCB_14:
   \   000248   12....       LCALL   ?Subroutine27 & 0xFFFF
   \                     ??CrossCallReturnLabel_47:
   \   00024B   64FE         XRL     A,#0xfe
   \   00024D   7003         JNZ     ??SampleApp_MessageMSGCB_16
   \   00024F   A3           INC     DPTR
   \   000250   E0           MOVX    A,@DPTR
   \   000251   F4           CPL     A
   \                     ??SampleApp_MessageMSGCB_16:
   \   000252   600F         JZ      ??SampleApp_MessageMSGCB_17
   \   000254   12....       LCALL   ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_43:
   \   000257   C3           CLR     C
   \   000258   E8           MOV     A,R0
   \   000259   9403         SUBB    A,#0x3
   \   00025B   E9           MOV     A,R1
   \   00025C   12....       LCALL   ??Subroutine40_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_68:
   \   00025F   504D         JNC     ??SampleApp_MessageMSGCB_15
   \   000261   80C4         SJMP    ??SampleApp_MessageMSGCB_12
    986                  continue;
    987                
    988                //添加路由
    989                else
    990                {
    991                  Nei_Table[i]=neighbor_addr_10;
   \                     ??SampleApp_MessageMSGCB_17:
   \   000263   E8           MOV     A,R0
   \   000264   C3           CLR     C
   \   000265   33           RLC     A
   \   000266   F8           MOV     R0,A
   \   000267   E9           MOV     A,R1
   \   000268   12....       LCALL   ?Subroutine33 & 0xFFFF
   \                     ??CrossCallReturnLabel_74:
   \   00026B   E5..         MOV     A,?V0 + 2
   \   00026D   F0           MOVX    @DPTR,A
   \   00026E   A3           INC     DPTR
   \   00026F   E5..         MOV     A,?V0 + 3
   \   000271   F0           MOVX    @DPTR,A
    992                  NEI_NUM++;
   \   000272   90....       MOV     DPTR,#NEI_NUM
   \   000275   E0           MOVX    A,@DPTR
   \   000276   04           INC     A
   \   000277   F0           MOVX    @DPTR,A
    993                  
    994                  //输出邻居的活跃点数
    995                  HalUARTWrite(0,"\n------------\n",14);
   \   000278                ; Setup parameters for call to function HalUARTWrite
   \   000278   12....       LCALL   ?Subroutine5 & 0xFFFF
    996                  HalUARTWrite(0,"active: ",strlen("active: "));
    997                  for (int j=0;j<NEI_NUM;++j)
   \                     ??CrossCallReturnLabel_6:
   \   00027B   75..00       MOV     ?V0 + 0,#0x0
   \   00027E   75..00       MOV     ?V0 + 1,#0x0
   \   000281   8016         SJMP    ??SampleApp_MessageMSGCB_18
    998                  {
    999                    active = '0' + ACTIVE[j];
   \                     ??SampleApp_MessageMSGCB_19:
   \   000283   E5..         MOV     A,?V0 + 0
   \   000285   C3           CLR     C
   \   000286   33           RLC     A
   \   000287   F8           MOV     R0,A
   \   000288   E5..         MOV     A,?V0 + 1
   \   00028A   12....       LCALL   ?Subroutine3 & 0xFFFF
   1000                    HalUARTWrite(0,&active,1);
   1001                    HalUARTWrite(0," ",1);
   1002                  }
   \                     ??CrossCallReturnLabel_2:
   \   00028D   E5..         MOV     A,?V0 + 0
   \   00028F   2401         ADD     A,#0x1
   \   000291   F5..         MOV     ?V0 + 0,A
   \   000293   E5..         MOV     A,?V0 + 1
   \   000295   3400         ADDC    A,#0x0
   \   000297   F5..         MOV     ?V0 + 1,A
   \                     ??SampleApp_MessageMSGCB_18:
   \   000299   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_28:
   \   00029C   E5..         MOV     A,?V0 + 0
   \   00029E   98           SUBB    A,R0
   \   00029F   E5..         MOV     A,?V0 + 1
   \   0002A1   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_51:
   \   0002A4   40DD         JC      ??SampleApp_MessageMSGCB_19
   1003                  //输出邻居个数
   1004                  HalUARTWrite(0,"\n有",3);
   \   0002A6                ; Setup parameters for call to function HalUARTWrite
   \   0002A6   12....       LCALL   ?Subroutine2 & 0xFFFF
   1005                  active = '0' + NEI_NUM;
   1006                  HalUARTWrite(0,&active,1);
   1007                  HalUARTWrite(0,"个邻居",6);
   1008                  
   1009                  HalUARTWrite(0,"\n------------\n",14);
   \                     ??CrossCallReturnLabel_0:
   \   0002A9   7900         MOV     R1,#0x0
   \   0002AB   12....       LCALL   ??HalUARTWrite?relay
   1010                  
   1011                  break;
   1012                }
   1013              }
   1014              
   1015              if(LOST_nei != 0)
   \                     ??SampleApp_MessageMSGCB_15:
   \   0002AE   EE           MOV     A,R6
   \   0002AF   607E         JZ      ??SampleApp_MessageMSGCB_0
   1016              {
   1017                //输出邻居的活跃点数
   1018                HalUARTWrite(0,"\n------------\n",14);
   \   0002B1                ; Setup parameters for call to function HalUARTWrite
   \   0002B1   12....       LCALL   ?Subroutine5 & 0xFFFF
   1019                HalUARTWrite(0,"active: ",strlen("active: "));
   1020                for (int j=0;j<NEI_NUM;++j)
   \                     ??CrossCallReturnLabel_7:
   \   0002B4   7E00         MOV     R6,#0x0
   \   0002B6   7F00         MOV     R7,#0x0
   \   0002B8   8014         SJMP    ??SampleApp_MessageMSGCB_20
   1021                {
   1022                  active = '0' + ACTIVE[j];
   \                     ??SampleApp_MessageMSGCB_21:
   \   0002BA   EE           MOV     A,R6
   \   0002BB   F8           MOV     R0,A
   \   0002BC   EF           MOV     A,R7
   \   0002BD   F9           MOV     R1,A
   \   0002BE   E8           MOV     A,R0
   \   0002BF   C3           CLR     C
   \   0002C0   33           RLC     A
   \   0002C1   F8           MOV     R0,A
   \   0002C2   E9           MOV     A,R1
   \   0002C3   12....       LCALL   ?Subroutine3 & 0xFFFF
   1023                  HalUARTWrite(0,&active,1);
   1024                  HalUARTWrite(0," ",1);
   1025                }
   \                     ??CrossCallReturnLabel_3:
   \   0002C6   EE           MOV     A,R6
   \   0002C7   2401         ADD     A,#0x1
   \   0002C9   0E           INC     R6
   \   0002CA   EF           MOV     A,R7
   \   0002CB   3400         ADDC    A,#0x0
   \   0002CD   FF           MOV     R7,A
   \                     ??SampleApp_MessageMSGCB_20:
   \   0002CE   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_29:
   \   0002D1   EE           MOV     A,R6
   \   0002D2   98           SUBB    A,R0
   \   0002D3   EF           MOV     A,R7
   \   0002D4   12....       LCALL   ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_52:
   \   0002D7   40E1         JC      ??SampleApp_MessageMSGCB_21
   1026                //输出邻居个数
   1027                HalUARTWrite(0,"\n有",3);
   \   0002D9                ; Setup parameters for call to function HalUARTWrite
   \   0002D9   12....       LCALL   ?Subroutine2 & 0xFFFF
   1028                active = '0' + NEI_NUM;
   1029                HalUARTWrite(0,&active,1);
   1030                HalUARTWrite(0,"个邻居",6);
   1031                
   1032                HalUARTWrite(0,"\n------------\n",14);
   1033              }
   \                     ??CrossCallReturnLabel_1:
   \   0002DC   804C         SJMP    ??SampleApp_MessageMSGCB_22
   1034              
   1035              
   1036              //HalLedBlink( HAL_LED_2, 2, 50, (flashTime / 5) ); //二号灯闪烁,两次,亮度50%,时间间隔0.2s
   1037              break;
   1038              
   1039              
   1040              
   1041              /*******************************************
   1042              收到 周期性 消息
   1043              ********************************************/
   1044            case SAMPLEAPP_PERIODIC_CLUSTERID:
   1045              
   1046              //NLME_UpdateLinkStatus(); //更新链路信息
   1047              //HalLedBlink( HAL_LED_2, 2, 60, (flashTime / 6) ); //三号灯闪烁,三次,亮度50%,时间间隔0.25s
   1048              break;
   1049              /*收到 对方串口透传 消息*/
   1050            case SAMPLEAPP_COM_CLUSTERID:
   1051              HalUARTWrite(0,"对方说: ",strlen("对方说: "));
   \                     ??SampleApp_MessageMSGCB_2:
   \   0002DE                ; Setup parameters for call to function HalUARTWrite
   \   0002DE   7C08         MOV     R4,#0x8
   \   0002E0   7D00         MOV     R5,#0x0
   \   0002E2   7A..         MOV     R2,#`?<Constant "\\266\\324\\267\\275\\313\\265: ">` & 0xff
   \   0002E4   7B..         MOV     R3,#(`?<Constant "\\266\\324\\267\\275\\313\\265: ">` >> 8) & 0xff
   \   0002E6   7900         MOV     R1,#0x0
   \   0002E8   12....       LCALL   ??HalUARTWrite?relay
   1052              len=pkt->cmd.Data[0];
   \   0002EB   E5..         MOV     A,?V0 + 0
   \   0002ED   2422         ADD     A,#0x22
   \   0002EF   F582         MOV     DPL,A
   \   0002F1   E5..         MOV     A,?V0 + 1
   \   0002F3   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_9:
   \   0002F6   FF           MOV     R7,A
   1053              for(i=0;i<len;i++)
   \   0002F7   8024         SJMP    ??SampleApp_MessageMSGCB_23
   1054                HalUARTWrite(0,&pkt->cmd.Data[i+1],1);//发给 PC 机
   \                     ??SampleApp_MessageMSGCB_24:
   \   0002F9                ; Setup parameters for call to function HalUARTWrite
   \   0002F9   EE           MOV     A,R6
   \   0002FA   F8           MOV     R0,A
   \   0002FB   E5..         MOV     A,?V0 + 0
   \   0002FD   2422         ADD     A,#0x22
   \   0002FF   F582         MOV     DPL,A
   \   000301   E5..         MOV     A,?V0 + 1
   \   000303   3400         ADDC    A,#0x0
   \   000305   F583         MOV     DPH,A
   \   000307   E0           MOVX    A,@DPTR
   \   000308   28           ADD     A,R0
   \   000309   FA           MOV     R2,A
   \   00030A   A3           INC     DPTR
   \   00030B   E0           MOVX    A,@DPTR
   \   00030C   3400         ADDC    A,#0x0
   \   00030E   8A82         MOV     DPL,R2
   \   000310   F583         MOV     DPH,A
   \   000312   A3           INC     DPTR
   \   000313   AA82         MOV     R2,DPL
   \   000315   AB83         MOV     R3,DPH
   \   000317   7900         MOV     R1,#0x0
   \   000319   12....       LCALL   ??HalUARTWrite?relay
   \   00031C   0E           INC     R6
   \                     ??SampleApp_MessageMSGCB_23:
   \   00031D   EE           MOV     A,R6
   \   00031E   C3           CLR     C
   \   00031F   9F           SUBB    A,R7
   \   000320   7C01         MOV     R4,#0x1
   \   000322   7D00         MOV     R5,#0x0
   \   000324   40D3         JC      ??SampleApp_MessageMSGCB_24
   1055              HalUARTWrite(0,"\n",1); // 回车换行
   \   000326                ; Setup parameters for call to function HalUARTWrite
   \   000326   7A..         MOV     R2,#`?<Constant "\\n">` & 0xff
   \   000328   7B..         MOV     R3,#(`?<Constant "\\n">` >> 8) & 0xff
   \                     ??SampleApp_MessageMSGCB_22:
   \   00032A   7900         MOV     R1,#0x0
   \   00032C   12....       LCALL   ??HalUARTWrite?relay
   1056              break;
   1057              
   1058            }
   1059          }
   \                     ??SampleApp_MessageMSGCB_0:
   \   00032F   7401         MOV     A,#0x1
   \   000331   12....       LCALL   ?DEALLOC_XSTACK8
   \   000334   7F08         MOV     R7,#0x8
   \   000336   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine30:
   \   000000   99           SUBB    A,R1
   \   000001   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000003   65D0         XRL     A,PSW
   \   000005   33           RLC     A
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine27:
   \   000000   E8           MOV     A,R0
   \   000001   FA           MOV     R2,A
   \   000002   E9           MOV     A,R1
   \   000003   FB           MOV     R3,A
   \   000004   EA           MOV     A,R2
   \   000005   C3           CLR     C
   \   000006   33           RLC     A
   \   000007   FA           MOV     R2,A
   \   000008   EB           MOV     A,R3
   \   000009   33           RLC     A
   \   00000A   FB           MOV     R3,A
   \   00000B   74..         MOV     A,#Nei_Table & 0xff
   \   00000D   2A           ADD     A,R2
   \   00000E   F582         MOV     DPL,A
   \   000010   74..         MOV     A,#(Nei_Table >> 8) & 0xff
   \   000012   3B           ADDC    A,R3
   \   000013   F583         MOV     DPH,A
   \   000015   E0           MOVX    A,@DPTR
   \   000016   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine20:
   \   000000   90....       MOV     DPTR,#LIFE_TIME
   \   000003                REQUIRE ??Subroutine44_0
   \   000003                ; // Fall through to label ??Subroutine44_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine44_0:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   33           RLC     A
   \   000003   95E0         SUBB    A,0xE0 /* A   */
   \   000005   FB           MOV     R3,A
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine18:
   \   000000   90....       MOV     DPTR,#NEI_NUM
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F8           MOV     R0,A
   \   000005   33           RLC     A
   \   000006   95E0         SUBB    A,0xE0 /* A   */
   \   000008   F9           MOV     R1,A
   \   000009   C3           CLR     C
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   12....       LCALL   ?Subroutine36 & 0xFFFF
   \                     ??CrossCallReturnLabel_96:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine36:
   \   000000   EA           MOV     A,R2
   \   000001   2422         ADD     A,#0x22
   \   000003   F582         MOV     DPL,A
   \   000005   EB           MOV     A,R3
   \   000006   3400         ADDC    A,#0x0
   \   000008   F583         MOV     DPH,A
   \   00000A                REQUIRE ??Subroutine45_0
   \   00000A                ; // Fall through to label ??Subroutine45_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine45_0:
   \   000000   A3           INC     DPTR
   \   000001   E0           MOVX    A,@DPTR
   \   000002   F583         MOV     DPH,A
   \   000004   8882         MOV     DPL,R0
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   12....       LCALL   ?Subroutine36 & 0xFFFF
   \                     ??CrossCallReturnLabel_95:
   \   000003   A3           INC     DPTR
   \   000004   A3           INC     DPTR
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   3400         ADDC    A,#0x0
   \   000002   F583         MOV     DPH,A
   \   000004   E0           MOVX    A,@DPTR
   \   000005   F8           MOV     R0,A
   \   000006   12....       LCALL   ??Subroutine45_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_93:
   \   000009   E0           MOVX    A,@DPTR
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   7C0E         MOV     R4,#0xe
   \   000002   7D00         MOV     R5,#0x0
   \   000004   7A..         MOV     R2,#`?<Constant "\\n------------\\n">` & 0xff
   \   000006   7B..         MOV     R3,#(`?<Constant "\\n------------\\n">` >> 8) & 0xff
   \   000008   7900         MOV     R1,#0x0
   \   00000A   12....       LCALL   ??HalUARTWrite?relay
   \   00000D                ; Setup parameters for call to function HalUARTWrite
   \   00000D                ; Setup parameters for call to function HalUARTWrite
   \   00000D   7C08         MOV     R4,#0x8
   \   00000F   7D00         MOV     R5,#0x0
   \   000011   7A..         MOV     R2,#`?<Constant "active: ">` & 0xff
   \   000013   7B..         MOV     R3,#(`?<Constant "active: ">` >> 8) & 0xff
   \   000015   7900         MOV     R1,#0x0
   \   000017   12....       LCALL   ??HalUARTWrite?relay
   \   00001A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   7B00         MOV     R3,#0x0
   \   000004   12....       LCALL   ?Subroutine37 & 0xFFFF
   \                     ??CrossCallReturnLabel_62:
   \   000007   12....       LCALL   ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_54:
   \   00000A   A3           INC     DPTR
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine31:
   \   000000   7900         MOV     R1,#0x0
   \   000002   12....       LCALL   ??HalUARTWrite?relay
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005                ; Setup parameters for call to function Show_Bit
   \   000005   7908         MOV     R1,#0x8
   \   000007   85..82       MOV     DPL,?V0 + 2
   \   00000A   85..83       MOV     DPH,?V0 + 3
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   F8           MOV     R0,A
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   F583         MOV     DPH,A
   \   000013   8882         MOV     DPL,R0
   \   000015   A3           INC     DPTR
   \   000016   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   33           RLC     A
   \   000001   F9           MOV     R1,A
   \   000002   12....       LCALL   ?Subroutine34 & 0xFFFF
   \                     ??CrossCallReturnLabel_57:
   \   000005   12....       LCALL   ?Subroutine38 & 0xFFFF
   \                     ??CrossCallReturnLabel_63:
   \   000008   12....       LCALL   ?Subroutine32 & 0xFFFF
   \                     ??CrossCallReturnLabel_56:
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   7C03         MOV     R4,#0x3
   \   000002   7D00         MOV     R5,#0x0
   \   000004   7A..         MOV     R2,#`?<Constant "\\n\\323\\320">` & 0xff
   \   000006   7B..         MOV     R3,#(`?<Constant "\\n\\323\\320">` >> 8) & 0xff
   \   000008   7900         MOV     R1,#0x0
   \   00000A   12....       LCALL   ??HalUARTWrite?relay
   \   00000D   90....       MOV     DPTR,#NEI_NUM
   \   000010   12....       LCALL   ?Subroutine35 & 0xFFFF
   \                     ??CrossCallReturnLabel_60:
   \   000013                ; Setup parameters for call to function HalUARTWrite
   \   000013                ; Setup parameters for call to function HalUARTWrite
   \   000013   7C06         MOV     R4,#0x6
   \   000015   7D00         MOV     R5,#0x0
   \   000017   7A..         MOV     R2,#`?<Constant "\\270\\366\\301\\332\\276\\323">` & 0xff
   \   000019   7B..         MOV     R3,#(`?<Constant "\\270\\366\\301\\332\\276\\323">` >> 8) & 0xff
   \   00001B   7900         MOV     R1,#0x0
   \   00001D   12....       LCALL   ??HalUARTWrite?relay
   \   000020                ; Setup parameters for call to function HalUARTWrite
   \   000020                ; Setup parameters for call to function HalUARTWrite
   \   000020   7C0E         MOV     R4,#0xe
   \   000022   7D00         MOV     R5,#0x0
   \   000024   7A..         MOV     R2,#`?<Constant "\\n------------\\n">` & 0xff
   \   000026   7B..         MOV     R3,#(`?<Constant "\\n------------\\n">` >> 8) & 0xff
   \   000028   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   7900         MOV     R1,#0x0
   \   000002   12....       LCALL   ??HalUARTWrite?relay
   \   000005   90....       MOV     DPTR,#Waiting_Request
   \   000008   22           RET
   1060          
   1061          
   1062          //给掉线的邻居发送重置信号

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine29:
   \   000000   7920         MOV     R1,#0x20
   \   000002   7C..         MOV     R4,#SampleApp_epDesc & 0xff
   \   000004   7D..         MOV     R5,#(SampleApp_epDesc >> 8) & 0xff
   \   000006   7A..         MOV     R2,#Point_To_Point_DstAddr & 0xff
   \   000008   7B..         MOV     R3,#(Point_To_Point_DstAddr >> 8) & 0xff
   \   00000A                REQUIRE ??Subroutine42_0
   \   00000A                ; // Fall through to label ??Subroutine42_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1063          void Reset_down_neighbor(int16 nei_addr)
   \                     Reset_down_neighbor:
   1064          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1065            short flashTime = 1000;
   1066            Point_To_Point_DstAddr.addr.shortAddr = nei_addr;
   \   00000A   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   00000D   EA           MOV     A,R2
   \   00000E   F0           MOVX    @DPTR,A
   \   00000F   A3           INC     DPTR
   \   000010   EB           MOV     A,R3
   \   000011   12....       LCALL   ?Subroutine15 & 0xFFFF
   1067            unsigned char DATA[] = "!";
   \                     ??CrossCallReturnLabel_23:
   \   000014   7583..       MOV     DPH,#(`?<Constant "!">` >> 8) & 0xff
   \   000017   7582..       MOV     DPL,#`?<Constant "!">` & 0xff
   \   00001A   7402         MOV     A,#0x2
   \   00001C   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1068            if ( AF_DataRequest( &Point_To_Point_DstAddr, //点对点通信方式目标地址
   1069                                  &SampleApp_epDesc,
   1070                                  SAMPLEAPP_POINT_TO_POINT_CLUSTERID, //点对点簇ID
   1071                                  1,
   1072                                  DATA,
   1073                                  &SampleApp_TransID,
   1074                                  AF_DISCV_ROUTE,
   1075                                  AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   00001F                ; Setup parameters for call to function AF_DataRequest
   \   00001F   75..1E       MOV     ?V0 + 0,#0x1e
   \   000022   78..         MOV     R0,#?V0 + 0
   \   000024   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000027   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   00002A   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   00002D   78..         MOV     R0,#?V0 + 0
   \   00002F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000032   7403         MOV     A,#0x3
   \   000034   12....       LCALL   ?XSTACK_DISP0_8
   \   000037   8582..       MOV     ?V0 + 0,DPL
   \   00003A   8583..       MOV     ?V0 + 1,DPH
   \   00003D   78..         MOV     R0,#?V0 + 0
   \   00003F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000042   75..01       MOV     ?V0 + 0,#0x1
   \   000045   75..00       MOV     ?V0 + 1,#0x0
   \   000048   78..         MOV     R0,#?V0 + 0
   \   00004A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00004D   75..04       MOV     ?V0 + 0,#0x4
   \   000050   78..         MOV     R0,#?V0 + 0
   \   000052   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000055   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_76:
   \   000058   12....       LCALL   ?DEALLOC_XSTACK8
   \   00005B   E9           MOV     A,R1
   \   00005C   700D         JNZ     ??Reset_down_neighbor_0
   1076              {
   1077                HalLedBlink( HAL_LED_3, 1, 60, (flashTime / 3) ); //led3闪
   \   00005E                ; Setup parameters for call to function HalLedBlink
   \   00005E   7C4D         MOV     R4,#0x4d
   \   000060   7D01         MOV     R5,#0x1
   \   000062   7B3C         MOV     R3,#0x3c
   \   000064   7A01         MOV     R2,#0x1
   \   000066   7904         MOV     R1,#0x4
   \   000068   12....       LCALL   ??HalLedBlink?relay
   1078              }
   1079              else
   1080              {
   1081          
   1082              }
   1083          }
   \                     ??Reset_down_neighbor_0:
   \   00006B   7402         MOV     A,#0x2
   \   00006D   02....       LJMP    ?Subroutine0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   85..82       MOV     DPL,?XSP + 0
   \   000004   85..83       MOV     DPH,?XSP + 1
   \   000007   AC82         MOV     R4,DPL
   \   000009   AD83         MOV     R5,DPH
   \   00000B   22           RET
   1084          
   1085          
   1086          /***********************************************************<><><><><><><>*****
   1087                             自定义 点对点发送函数
   1088          ************************************************************<><><><><><><>****/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1089          void SampleApp_SendPointToPointMessage( void )
   \                     SampleApp_SendPointToPointMessage:
   1090          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 4
   \   000005   74FC         MOV     A,#-0x4
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   1091            uint16 flashTime = 1000;
   1092            srand((int)osal_getClock()); //生成随机数种子
   \   00000A                ; Setup parameters for call to function srand
   \   00000A                ; Setup parameters for call to function osal_getClock
   \   00000A   12....       LCALL   ??osal_getClock?relay
   \   00000D   12....       LCALL   ??srand?relay
   1093            
   1094            /*当代理节点生命为0的时候*/
   1095            if(Life_of_AgentNode == (int16)0)
   \   000010   90....       MOV     DPTR,#Life_of_AgentNode
   \   000013   E0           MOVX    A,@DPTR
   \   000014   6003         JZ      $+5
   \   000016   02....       LJMP    ??SampleApp_SendPointToPointMessage_0 & 0xFFFF
   1096            {
   1097              AgentNode = (int16)65534; //重置代理节点地址
   \   000019   90....       MOV     DPTR,#AgentNode
   \   00001C   74FE         MOV     A,#-0x2
   \   00001E   F0           MOVX    @DPTR,A
   \   00001F   A3           INC     DPTR
   \   000020   04           INC     A
   \   000021   F0           MOVX    @DPTR,A
   1098              
   1099              /*选择一个代理节点,向随机邻居发送建立代理关系请求,并要求回应.*/
   1100              int8 nei_index = random(NEI_NUM);  //挑选随机邻居节点
   \   000022                ; Setup parameters for call to function rand
   \   000022   12....       LCALL   ??rand?relay
   \   000025   8A..         MOV     ?V0 + 0,R2
   \   000027   8B..         MOV     ?V0 + 1,R3
   \   000029   A8..         MOV     R0,?V0 + 0
   \   00002B   A9..         MOV     R1,?V0 + 1
   \   00002D   90....       MOV     DPTR,#NEI_NUM
   \   000030   12....       LCALL   ??Subroutine44_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_90:
   \   000033   12....       LCALL   ?S_DIV_MOD
   \   000036   EA           MOV     A,R2
   1101              Building_AgentNode = Nei_Table[nei_index];  //即将发送建立代理关系的邻居
   \   000037   F8           MOV     R0,A
   \   000038   33           RLC     A
   \   000039   95E0         SUBB    A,0xE0 /* A   */
   \   00003B   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_73:
   \   00003E   F8           MOV     R0,A
   \   00003F   A3           INC     DPTR
   \   000040   E0           MOVX    A,@DPTR
   \   000041   F9           MOV     R1,A
   \   000042   90....       MOV     DPTR,#Building_AgentNode
   \   000045   E8           MOV     A,R0
   \   000046   F0           MOVX    @DPTR,A
   \   000047   A3           INC     DPTR
   \   000048   E9           MOV     A,R1
   \   000049   12....       LCALL   ?Subroutine15 & 0xFFFF
   1102              
   1103              uint8 _DATA[] = {'@', '@', '@', '@'};  //发送的代理节点指派命令
   \                     ??CrossCallReturnLabel_24:
   \   00004C   7583..       MOV     DPH,#(`?<Constant {64, 64, 64, 64}>` >> 8) & 0xff
   \   00004F   7582..       MOV     DPL,#`?<Constant {64, 64, 64, 64}>` & 0xff
   \   000052   7404         MOV     A,#0x4
   \   000054   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1104              
   1105              /*给选出的邻居发送数据*/
   1106              if((Nei_Table[nei_index] != (int16)65534) && (0<=nei_index) && (nei_index<NEI_NUM))
   \   000057   74FE         MOV     A,#-0x2
   \   000059   68           XRL     A,R0
   \   00005A   7003         JNZ     ??SampleApp_SendPointToPointMessage_1
   \   00005C   74FF         MOV     A,#-0x1
   \   00005E   69           XRL     A,R1
   \                     ??SampleApp_SendPointToPointMessage_1:
   \   00005F   607C         JZ      ??SampleApp_SendPointToPointMessage_2
   \   000061   EA           MOV     A,R2
   \   000062   C3           CLR     C
   \   000063   9400         SUBB    A,#0x0
   \   000065   65D0         XRL     A,PSW
   \   000067   33           RLC     A
   \   000068   4073         JC      ??SampleApp_SendPointToPointMessage_2
   \   00006A   90....       MOV     DPTR,#NEI_NUM
   \   00006D   E0           MOVX    A,@DPTR
   \   00006E   F8           MOV     R0,A
   \   00006F   EA           MOV     A,R2
   \   000070   C3           CLR     C
   \   000071   98           SUBB    A,R0
   \   000072   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000074   65D0         XRL     A,PSW
   \   000076   33           RLC     A
   \   000077   5064         JNC     ??SampleApp_SendPointToPointMessage_2
   1107              {
   1108                Point_To_Point_DstAddr.addr.shortAddr = Building_AgentNode;
   \   000079   90....       MOV     DPTR,#Building_AgentNode
   \   00007C   12....       LCALL   ?Subroutine16 & 0xFFFF
   1109                if ( AF_DataRequest( &Point_To_Point_DstAddr, //点对点通信方式目标地址
   1110                                    &SampleApp_epDesc,
   1111                                    SAMPLEAPP_POINT_TO_POINT_CLUSTERID, //点对点簇ID
   1112                                    4,
   1113                                    _DATA,
   1114                                    &SampleApp_TransID,
   1115                                    AF_DISCV_ROUTE,
   1116                                    AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \                     ??CrossCallReturnLabel_25:
   \   00007F   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000082   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000085   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   000088   78..         MOV     R0,#?V0 + 0
   \   00008A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00008D   7403         MOV     A,#0x3
   \   00008F   12....       LCALL   ?XSTACK_DISP0_8
   \   000092   8582..       MOV     ?V0 + 0,DPL
   \   000095   8583..       MOV     ?V0 + 1,DPH
   \   000098   78..         MOV     R0,#?V0 + 0
   \   00009A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00009D   75..04       MOV     ?V0 + 0,#0x4
   \   0000A0   75..00       MOV     ?V0 + 1,#0x0
   \   0000A3   78..         MOV     R0,#?V0 + 0
   \   0000A5   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000A8   78..         MOV     R0,#?V0 + 0
   \   0000AA   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000AD   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_77:
   \   0000B0   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000B3   E9           MOV     A,R1
   \   0000B4   701C         JNZ     ??SampleApp_SendPointToPointMessage_3
   1117                {
   1118                  HalUARTWrite(0,"发送代理请求\n",13);
   \   0000B6                ; Setup parameters for call to function HalUARTWrite
   \   0000B6   7C0D         MOV     R4,#0xd
   \   0000B8   7D00         MOV     R5,#0x0
   \   0000BA   7A..         MOV     R2,#`?<Constant "\\267\\242\\313\\315\\264\\372\\300\\355\\3` & 0xff
   \   0000BC   7B..         MOV     R3,#(`?<Constant "\\267\\242\\313\\315\\264\\372\\300\\355\\3` >> 8) & 0xff
   \   0000BE   12....       LCALL   ?Subroutine11 & 0xFFFF
   1119                  Waiting_Request = TRUE; //请求回复状态中
   \                     ??CrossCallReturnLabel_17:
   \   0000C1   7401         MOV     A,#0x1
   \   0000C3   F0           MOVX    @DPTR,A
   1120                  HalLedBlink( HAL_LED_1, 3, 60, (flashTime / 3) ); //led1闪
   \   0000C4                ; Setup parameters for call to function HalLedBlink
   \   0000C4   7C4D         MOV     R4,#0x4d
   \   0000C6   FD           MOV     R5,A
   \   0000C7   7B3C         MOV     R3,#0x3c
   \   0000C9   7A03         MOV     R2,#0x3
   \   0000CB   F9           MOV     R1,A
   \                     ??SampleApp_SendPointToPointMessage_4:
   \   0000CC   12....       LCALL   ??HalLedBlink?relay
   \   0000CF   02....       LJMP    ??SampleApp_SendPointToPointMessage_5 & 0xFFFF
   1121                }
   1122                else
   1123                {
   1124                  HalUARTWrite(0,"代理请求发送失败.",strlen("交换数据包请求发送失败."));
   \                     ??SampleApp_SendPointToPointMessage_3:
   \   0000D2                ; Setup parameters for call to function HalUARTWrite
   \   0000D2   7C17         MOV     R4,#0x17
   \   0000D4   7D00         MOV     R5,#0x0
   \   0000D6   7A..         MOV     R2,#`?<Constant "\\264\\372\\300\\355\\307\\353\\307\\363\\2` & 0xff
   \   0000D8   7B..         MOV     R3,#(`?<Constant "\\264\\372\\300\\355\\307\\353\\307\\363\\2` >> 8) & 0xff
   \   0000DA   02....       LJMP    ??SampleApp_SendPointToPointMessage_6 & 0xFFFF
   1125                }
   1126              }
   1127              else
   1128              {
   1129                HalUARTWrite(0,"指派代理失败\n",13);
   \                     ??SampleApp_SendPointToPointMessage_2:
   \   0000DD                ; Setup parameters for call to function HalUARTWrite
   \   0000DD   7C0D         MOV     R4,#0xd
   \   0000DF   7D00         MOV     R5,#0x0
   \   0000E1   7A..         MOV     R2,#`?<Constant "\\326\\270\\305\\311\\264\\372\\300\\355\\3` & 0xff
   \   0000E3   7B..         MOV     R3,#(`?<Constant "\\326\\270\\305\\311\\264\\372\\300\\355\\3` >> 8) & 0xff
   \   0000E5   807D         SJMP    ??SampleApp_SendPointToPointMessage_6
   1130              }
   1131            }
   1132            
   1133            /*代理节点依然存活*/
   1134            else
   1135            {
   1136              /*向代理节点发送存活确认,如果得到回复就把代理生命设置为最大值*/
   1137              
   1138              uint8 Check_DATA[] = {'?', '?', '?', '?'};  //发送的代理节点存活确认命令
   \                     ??SampleApp_SendPointToPointMessage_0:
   \   0000E7   85..82       MOV     DPL,?XSP + 0
   \   0000EA   85..83       MOV     DPH,?XSP + 1
   \   0000ED   AC82         MOV     R4,DPL
   \   0000EF   AD83         MOV     R5,DPH
   \   0000F1   7583..       MOV     DPH,#(`?<Constant {63, 63, 63, 63}>` >> 8) & 0xff
   \   0000F4   7582..       MOV     DPL,#`?<Constant {63, 63, 63, 63}>` & 0xff
   \   0000F7   7404         MOV     A,#0x4
   \   0000F9   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   1139              
   1140              /*给选出的邻居发送数据*/
   1141              Point_To_Point_DstAddr.addr.shortAddr = AgentNode;
   \   0000FC   90....       MOV     DPTR,#AgentNode
   \   0000FF   12....       LCALL   ?Subroutine16 & 0xFFFF
   1142              if ( AF_DataRequest( &Point_To_Point_DstAddr, //点对点通信方式目标地址
   1143                                  &SampleApp_epDesc,
   1144                                  SAMPLEAPP_POINT_TO_POINT_CLUSTERID, //点对点簇ID
   1145                                  4,
   1146                                  Check_DATA,
   1147                                  &SampleApp_TransID,
   1148                                  AF_DISCV_ROUTE,
   1149                                  AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \                     ??CrossCallReturnLabel_26:
   \   000102   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000105   75....       MOV     ?V0 + 0,#SampleApp_TransID & 0xff
   \   000108   75....       MOV     ?V0 + 1,#(SampleApp_TransID >> 8) & 0xff
   \   00010B   78..         MOV     R0,#?V0 + 0
   \   00010D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000110   7403         MOV     A,#0x3
   \   000112   12....       LCALL   ?XSTACK_DISP0_8
   \   000115   8582..       MOV     ?V0 + 0,DPL
   \   000118   8583..       MOV     ?V0 + 1,DPH
   \   00011B   78..         MOV     R0,#?V0 + 0
   \   00011D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000120   75..04       MOV     ?V0 + 0,#0x4
   \   000123   75..00       MOV     ?V0 + 1,#0x0
   \   000126   78..         MOV     R0,#?V0 + 0
   \   000128   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00012B   78..         MOV     R0,#?V0 + 0
   \   00012D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000130   12....       LCALL   ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_78:
   \   000133   12....       LCALL   ?DEALLOC_XSTACK8
   \   000136   E9           MOV     A,R1
   \   000137   7023         JNZ     ??SampleApp_SendPointToPointMessage_7
   1150              {
   1151                HalUARTWrite(0,"发送代理存活确认\n",13);
   \   000139                ; Setup parameters for call to function HalUARTWrite
   \   000139   7C0D         MOV     R4,#0xd
   \   00013B   7D00         MOV     R5,#0x0
   \   00013D   7A..         MOV     R2,#`?<Constant "\\267\\242\\313\\315\\264\\372\\300\\355\\2` & 0xff
   \   00013F   7B..         MOV     R3,#(`?<Constant "\\267\\242\\313\\315\\264\\372\\300\\355\\2` >> 8) & 0xff
   \   000141   12....       LCALL   ?Subroutine11 & 0xFFFF
   1152                /*如果发送请求的时候仍然没有收到对方的消息,代理节点的生命-1*/
   1153                if(Waiting_Request == TRUE)
   \                     ??CrossCallReturnLabel_18:
   \   000144   E0           MOVX    A,@DPTR
   \   000145   6401         XRL     A,#0x1
   \   000147   7006         JNZ     ??SampleApp_SendPointToPointMessage_8
   1154                {
   1155                  --Life_of_AgentNode;
   \   000149   90....       MOV     DPTR,#Life_of_AgentNode
   \   00014C   E0           MOVX    A,@DPTR
   \   00014D   14           DEC     A
   \   00014E   F0           MOVX    @DPTR,A
   1156                }
   1157                HalLedBlink( HAL_LED_3, 1, 60, (flashTime / 2) ); //led1闪
   \                     ??SampleApp_SendPointToPointMessage_8:
   \   00014F                ; Setup parameters for call to function HalLedBlink
   \   00014F   7CF4         MOV     R4,#-0xc
   \   000151   7D01         MOV     R5,#0x1
   \   000153   7B3C         MOV     R3,#0x3c
   \   000155   7A01         MOV     R2,#0x1
   \   000157   7904         MOV     R1,#0x4
   \   000159   02....       LJMP    ??SampleApp_SendPointToPointMessage_4 & 0xFFFF
   1158              }
   1159              
   1160              else
   1161              {
   1162                HalUARTWrite(0,"存活确认发送失败\n",strlen("存活确认发送失败\n"));
   \                     ??SampleApp_SendPointToPointMessage_7:
   \   00015C                ; Setup parameters for call to function HalUARTWrite
   \   00015C   7C11         MOV     R4,#0x11
   \   00015E   7D00         MOV     R5,#0x0
   \   000160   7A..         MOV     R2,#`?<Constant "\\264\\346\\273\\356\\310\\267\\310\\317\\2` & 0xff
   \   000162   7B..         MOV     R3,#(`?<Constant "\\264\\346\\273\\356\\310\\267\\310\\317\\2` >> 8) & 0xff
   \                     ??SampleApp_SendPointToPointMessage_6:
   \   000164   7900         MOV     R1,#0x0
   \   000166   12....       LCALL   ??HalUARTWrite?relay
   1163              }
   1164            }
   1165          }
   \                     ??SampleApp_SendPointToPointMessage_5:
   \   000169   7404         MOV     A,#0x4
   \   00016B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00016E   02....       LJMP    ?Subroutine1 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F9           MOV     R1,A
   \   000005   90....       MOV     DPTR,#Point_To_Point_DstAddr
   \   000008   E8           MOV     A,R0
   \   000009   F0           MOVX    @DPTR,A
   \   00000A   A3           INC     DPTR
   \   00000B   E9           MOV     A,R1
   \   00000C   F0           MOVX    @DPTR,A
   \   00000D                ; Setup parameters for call to function AF_DataRequest
   \   00000D                ; Setup parameters for call to function AF_DataRequest
   \   00000D   75..1E       MOV     ?V0 + 0,#0x1e
   \   000010   78..         MOV     R0,#?V0 + 0
   \   000012   22           RET

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for AgentNode>`:
   \   000000   FEFF         DW -2

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for LIFE_TIME>`:
   \   000000   05           DB 5

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for MAX_Degree>`:
   \   000000   0100         DW 1

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Show_Bit?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Show_Bit

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Show_Num?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Show_Num

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Power_of_2?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Power_of_2

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Dist_X?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Dist_X

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Decode?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Decode

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_ProcessEvent?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_ProcessEvent

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendGroupMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendGroupMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendPeriodicMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendPeriodicMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendFlashMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendFlashMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_HandleKeys?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_HandleKeys

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SerialCMD?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SerialCMD

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_MessageMSGCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_MessageMSGCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??Reset_down_neighbor?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    Reset_down_neighbor

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SampleApp_SendPointToPointMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SampleApp_SendPointToPointMessage

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {48, 49}>`:
   \   000000   30           DB 48
   \   000001   31           DB 49

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "0">`:
   \   000000   3000         DB "0"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\275\\342\\302\\353\\263\\366:">`:
   \   000000   BDE2C2EB     DB "\275\342\302\353\263\366:"
   \            B3F63A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant " ">`:
   \   000000   2000         DB " "

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n">`:
   \   000000   0A00         DB "\012"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "System is started.\\n\\n">`:
   \   000000   53797374     DB "System is started.\012\012"
   \            656D2069
   \            73207374
   \            61727465
   \            642E0A0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Group 1">`:
   \   000000   47726F75     DB "Group 1"
   \            70203100

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "SampleApp">`:
   \   000000   53616D70     DB "SampleApp"
   \            6C654170
   \            7000    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\nsource_data: ">`:
   \   000000   0A736F75     DB "\012source_data: "
   \            7263655F
   \            64617461
   \            3A2000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant ":">`:
   \   000000   3A00         DB ":"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant " info:">`:
   \   000000   20696E66     DB " info:"
   \            6F3A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "nei_num:">`:
   \   000000   6E65695F     DB "nei_num:"
   \            6E756D3A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant ">> ">`:
   \   000000   3E3E2000     DB ">> "

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant " >">`:
   \   000000   203E00       DB " >"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\326\\330\\326\\303\\326\\320...">`:
   \   000000   D6D8D6C3     DB "\326\330\326\303\326\320..."
   \            D6D02E2E
   \            2E00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\264\\372\\300\\355\\275\\332\\265\\343\\3`:
   \   000000   B4FAC0ED     DB "\264\372\300\355\275\332\265\343\322\321\275\250\301\242\012"
   \            BDDAB5E3
   \            D2D1BDA8
   \            C1A20A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\312\\325\\265\\275\\264\\372\\300\\355\\2`:
   \   000000   CAD5B5BD     DB "\312\325\265\275\264\372\300\355\275\332\265\343\320\305\317\242:"
   \            B4FAC0ED
   \            BDDAB5E3
   \            D0C5CFA2
   \            3A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n------------\\n">`:
   \   000000   0A2D2D2D     DB "\012------------\012"
   \            2D2D2D2D
   \            2D2D2D2D
   \            2D0A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "active: ">`:
   \   000000   61637469     DB "active: "
   \            76653A20
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\n\\323\\320">`:
   \   000000   0AD3D000     DB "\012\323\320"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\270\\366\\301\\332\\276\\323">`:
   \   000000   B8F6C1DA     DB "\270\366\301\332\276\323"
   \            BED300  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\266\\324\\267\\275\\313\\265: ">`:
   \   000000   B6D4B7BD     DB "\266\324\267\275\313\265: "
   \            CBB53A20
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "!">`:
   \   000000   2100         DB "!"

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {64, 64, 64, 64}>`:
   \   000000   40           DB 64
   \   000001   40           DB 64
   \   000002   40           DB 64
   \   000003   40           DB 64

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\267\\242\\313\\315\\264\\372\\300\\355\\3`:
   \   000000   B7A2CBCD     DB "\267\242\313\315\264\372\300\355\307\353\307\363\012"
   \            B4FAC0ED
   \            C7EBC7F3
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\264\\372\\300\\355\\307\\353\\307\\363\\2`:
   \   000000   B4FAC0ED     DB "\264\372\300\355\307\353\307\363\267\242\313\315\312\247\260\334."
   \            C7EBC7F3
   \            B7A2CBCD
   \            CAA7B0DC
   \            2E00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\326\\270\\305\\311\\264\\372\\300\\355\\3`:
   \   000000   D6B8C5C9     DB "\326\270\305\311\264\372\300\355\312\247\260\334\012"
   \            B4FAC0ED
   \            CAA7B0DC
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {63, 63, 63, 63}>`:
   \   000000   3F           DB 63
   \   000001   3F           DB 63
   \   000002   3F           DB 63
   \   000003   3F           DB 63

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\267\\242\\313\\315\\264\\372\\300\\355\\2`:
   \   000000   B7A2CBCD     DB "\267\242\313\315\264\372\300\355\264\346\273\356\310\267\310\317\012"
   \            B4FAC0ED
   \            B4E6BBEE
   \            C8B7C8CF
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "\\264\\346\\273\\356\\310\\267\\310\\317\\2`:
   \   000000   B4E6BBEE     DB "\264\346\273\356\310\267\310\317\267\242\313\315\312\247\260\334\012"
   \            C8B7C8CF
   \            B7A2CBCD
   \            CAA7B0DC
   \            0A00    
   1166          
   1167          
   1168          /*********************************************************************
   1169          *********************************************************************/
   1170          

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     Decode                             1      0     29
       -> Dist_X                        0      0     24
       -> HalUARTWrite                  0      0     24
       -> Show_Bit                      0      0     24
       -> HalUARTWrite                  0      0     24
       -> Show_Bit                      0      0     24
       -> HalUARTWrite                  0      0     24
       -> Dist_X                        0      0     24
       -> Decode                        0      0     24
     Dist_X                             0      0     22
     Power_of_2                         0      0      0
     Reset_down_neighbor                2      0     38
       -> AF_DataRequest                0      0     42
       -> HalLedBlink                   0      0     24
     SampleApp_HandleKeys               0      0     22
       -> aps_FindGroup                 0      0     20
       -> aps_RemoveGroup               0      0     20
       -> aps_AddGroup                  0      0     20
       -> HalUARTWrite                  0      0     20
       -> HalUARTWrite                  0      0     20
       -> HalUARTWrite                  0      0     20
       -> Show_Num                      0      0     20
       -> HalUARTWrite                  0      0     20
       -> Show_Bit                      0      0     20
       -> HalUARTWrite                  0      0     20
       -> Show_Bit                      0      0     20
       -> HalUARTWrite                  0      0     20
       -> HalUARTWrite                  0      0     20
       -> Show_Num                      0      0     20
       -> HalUARTWrite                  0      0     20
     SampleApp_Init                     0      0     14
       -> MT_UartInit                   0      0     22
       -> MT_UartRegisterTaskID         0      0     22
       -> HalUARTWrite                  0      0     22
       -> afRegister                    0      0     22
       -> RegisterForKeys               0      0     22
       -> osal_memcpy                   0      0     28
       -> aps_AddGroup                  0      0     22
       -> HalLcdWriteString             0      0     22
     SampleApp_MessageMSGCB             1      0     29
       -> HalUARTWrite                  0      0     34
       -> Onboard_soft_reset            0      0     34
       -> HalUARTWrite                  0      0     34
       -> Decode                        0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> Show_Bit                      0      0     34
       -> HalUARTWrite                  0      0     34
       -> Show_Bit                      0      0     34
       -> HalUARTWrite                  0      0     34
       -> Show_Bit                      0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalLedBlink                   0      0     34
       -> Reset_down_neighbor           0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
       -> HalUARTWrite                  0      0     34
     SampleApp_ProcessEvent             0      0     12
       -> osal_msg_receive              0      0     24
       -> osal_start_timerEx            0      0     24
       -> osal_msg_deallocate           0      0     24
       -> osal_msg_receive              0      0     24
       -> SampleApp_SerialCMD           0      0     24
       -> SampleApp_HandleKeys          0      0     24
       -> SampleApp_MessageMSGCB        0      0     24
       -> SampleApp_SendGroupMessage
                                        0      0     24
       -> SampleApp_SendPointToPointMessage
                                        0      0     24
       -> osal_rand                     0      0     24
       -> osal_start_timerEx            0      0     24
     SampleApp_SendFlashMessage         1      0     22
       -> AF_DataRequest                0      0     44
     SampleApp_SendGroupMessage         0      0     31
       -> AF_DataRequest                0      0     38
     SampleApp_SendPeriodicMessage      0      0     19
       -> AF_DataRequest                0      0     38
       -> HalLedBlink                   0      0     20
     SampleApp_SendPointToPointMessage
                                        2      0     37
       -> osal_getClock                 0      0     32
       -> srand                         0      0     32
       -> rand                          0      0     32
       -> AF_DataRequest                0      0     50
       -> HalUARTWrite                  0      0     32
       -> HalLedBlink                   0      0     32
       -> HalUARTWrite                  0      0     32
       -> HalUARTWrite                  0      0     32
       -> AF_DataRequest                0      0     50
       -> HalUARTWrite                  0      0     32
       -> HalLedBlink                   0      0     32
       -> HalUARTWrite                  0      0     32
     SampleApp_SerialCMD                0      0     24
       -> HalUARTWrite                  0      0     24
       -> HalUARTWrite                  0      0     24
       -> HalUARTWrite                  0      0     24
       -> Show_Num                      0      0     24
       -> HalUARTWrite                  0      0     24
       -> Show_Bit                      0      0     24
       -> HalUARTWrite                  0      0     24
       -> Show_Bit                      0      0     24
       -> HalUARTWrite                  0      0     24
       -> Show_Num                      0      0     24
       -> HalUARTWrite                  0      0     24
     Show_Bit                           2      0     32
       -> HalUARTWrite                  0      0     30
     Show_Num                           1      0     27
       -> HalUARTWrite                  0      0     30
       -> HalUARTWrite                  0      0     30


   Segment part sizes:

     Function/Label                                 Bytes
     --------------                                 -----
     Life_of_AgentNode                                 1
     AgentNode                                         2
     LIFE_TIME                                         1
     NEI_NUM                                           1
     Nei_Table                                         6
     ACTIVE                                            6
     _TURN                                             1
     Slot_Size                                         2
     DATA_SLOT                                        18
     MAX_Degree                                        2
     Decoded_X                                       300
     X_Num                                             1
     Undecoded_Y                                     300
     Y_Num                                             1
     Building_AgentNode                                2
     Waiting_Request                                   1
     SampleApp_ClusterList                             8
     SampleApp_SimpleDesc                             12
     SampleApp_epDesc                                  6
     SampleApp_TaskID                                  1
     SampleApp_NwkState                                1
     SampleApp_TransID                                 1
     SampleApp_Periodic_DstAddr                       12
     SampleApp_Flash_DstAddr                          12
     Point_To_Point_DstAddr                           12
     SampleApp_Group                                  18
     SampleAppPeriodicCounter                          1
     SampleAppFlashCounter                             1
     Show_Bit                                        102
     ?Subroutine13                                     1
     ??Subroutine40_0                                  8
     ?Subroutine10                                     9
     Show_Num                                        104
     ?Subroutine14                                    13
     ?Subroutine0                                      3
     ??Subroutine39_0                                  5
     ?Subroutine35                                     9
     ?Subroutine38                                    19
     Power_of_2                                       33
     Dist_X                                          134
     ?Subroutine25                                     9
     ?Subroutine26                                    11
     Decode                                          352
     ?Subroutine21                                    17
     ?Subroutine1                                      5
     ?Subroutine24                                     9
     ??Subroutine43_0                                  6
     ?Subroutine37                                    12
     SampleApp_Init                                  249
     ?Subroutine6                                      6
     ??Subroutine41_0                                  5
     ?Subroutine33                                    13
     ?Subroutine12                                     4
     ?Subroutine34                                    11
     SampleApp_ProcessEvent                          215
     SampleApp_SendGroupMessage                       70
     ??Subroutine42_0                                  6
     SampleApp_SendPeriodicMessage                    86
     SampleApp_SendFlashMessage                      116
     SampleApp_HandleKeys                            200
     ?Subroutine28                                    17
     ?Subroutine23                                    22
     ?Subroutine22                                    24
     ?Subroutine19                                    10
     ?Subroutine32                                    19
     SampleApp_SerialCMD                             177
     ?Subroutine17                                     5
     SampleApp_MessageMSGCB                          825
     ?Subroutine30                                     7
     ?Subroutine27                                    23
     ?Subroutine20                                     3
     ??Subroutine44_0                                  7
     ?Subroutine18                                    11
     ?Subroutine9                                      5
     ?Subroutine36                                    10
     ??Subroutine45_0                                  7
     ?Subroutine8                                      6
     ?Subroutine7                                     11
     ?Subroutine5                                     27
     ?Subroutine4                                     12
     ?Subroutine31                                    23
     ?Subroutine3                                     12
     ?Subroutine2                                     41
     ?Subroutine11                                     9
     ?Subroutine29                                    10
     Reset_down_neighbor                             112
     ?Subroutine15                                    12
     SampleApp_SendPointToPointMessage
                                                     369
     ?Subroutine16                                    19
     ?<Initializer for AgentNode>                      2
     ?<Initializer for LIFE_TIME>                      1
     ?<Initializer for MAX_Degree>                     2
     ??Show_Bit?relay                                  6
     ??Show_Num?relay                                  6
     ??Power_of_2?relay                                6
     ??Dist_X?relay                                    6
     ??Decode?relay                                    6
     ??SampleApp_Init?relay                            6
     ??SampleApp_ProcessEvent?relay                    6
     ??SampleApp_SendGroupMessage?relay                6
     ??SampleApp_SendPeriodicMessage?relay             6
     ??SampleApp_SendFlashMessage?relay                6
     ??SampleApp_HandleKeys?relay                      6
     ??SampleApp_SerialCMD?relay                       6
     ??SampleApp_MessageMSGCB?relay                    6
     ??Reset_down_neighbor?relay                       6
     ??SampleApp_SendPointToPointMessage?relay         6
     ?<Constant {48, 49}>                              2
     ?<Constant "0">                                   2
     ?<Constant "\275\342\302\353\263\366:">           8
     ?<Constant " ">                                   2
     ?<Constant "\n">                                  2
     ?<Constant "System is started.\n\n">             21
     ?<Constant "Group 1">                             8
     ?<Constant "SampleApp">                          10
     ?<Constant "\nsource_data: ">                    15
     ?<Constant ":">                                   2
     ?<Constant " info:">                              7
     ?<Constant "nei_num:">                            9
     ?<Constant ">> ">                                 4
     ?<Constant " >">                                  3
     ?<Constant "\326\330\326\303\326\320...">        10
     ?<Constant "\264\372\300\355\275\332\265\343\3   16
     ?<Constant "\312\325\265\275\264\372\300\355\2   18
     ?<Constant "\n------------\n">                   15
     ?<Constant "active: ">                            9
     ?<Constant "\n\323\320">                          4
     ?<Constant "\270\366\301\332\276\323">            7
     ?<Constant "\266\324\267\275\313\265: ">          9
     ?<Constant "!">                                   2
     ?<Constant {64, 64, 64, 64}>                      4
     ?<Constant "\267\242\313\315\264\372\300\355\3   14
     ?<Constant "\264\372\300\355\307\353\307\363\2   18
     ?<Constant "\326\270\305\311\264\372\300\355\3   14
     ?<Constant {63, 63, 63, 63}>                      4
     ?<Constant "\267\242\313\315\264\372\300\355\2   18
     ?<Constant "\264\346\273\356\310\267\310\317\2   18

 
 3 677 bytes in segment BANKED_CODE
    90 bytes in segment BANK_RELAYS
     5 bytes in segment XDATA_I
     5 bytes in segment XDATA_ID
   297 bytes in segment XDATA_ROM_C
   703 bytes in segment XDATA_Z
 
 3 772 bytes of CODE  memory
   297 bytes of CONST memory
   708 bytes of XDATA memory

Errors: none
Warnings: none
